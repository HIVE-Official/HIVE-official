import{j as e}from"./jsx-runtime-B9GTzLod.js";import{R as S,r as k}from"./index-BMjrbHXN.js";import{A as P,m}from"./framer-motion-proxy-Bip1EXUU.js";import{c as v}from"./utils-CytzSlOG.js";import{M as I}from"./message-circle-CnQJGxxu.js";import{P as M}from"./pin-u4JsefzA.js";import{C as H}from"./crown-Bf-Ij_V7.js";import{C}from"./circle-check-big-fUBFJcwM.js";import{E as R}from"./eye-DHVClHkA.js";import{E as A}from"./ellipsis-D2AHQBIe.js";import{S as B}from"./share-2-DREqtcC9.js";import{B as D}from"./bookmark-B4q7zV9u.js";import{C as V}from"./calendar-RwBiWFlj.js";import{C as _}from"./clock-B-89-V79.js";import{M as $}from"./map-pin-J5WJcL57.js";import{U as L}from"./users-B5XgMSov.js";const z=({reactions:r,onReaction:t})=>{const i=["ðŸ‘","â¤ï¸","ðŸ˜Š","ðŸŽ‰","ðŸ‘"];return e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.map((a,o)=>e.jsxs(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(a.emoji,!a.userReacted),className:v("flex items-center gap-1 px-2 py-1 rounded-full text-sm transition-all duration-200",a.userReacted?"bg-[var(--hive-brand-primary)]/20 border border-[var(--hive-brand-primary)]/40 text-[var(--hive-brand-primary)]":"bg-[var(--hive-background-tertiary)]/40 border border-[var(--hive-border-primary)]/20 text-[var(--hive-text-secondary)] hover:bg-[var(--hive-background-tertiary)]/60"),children:[e.jsx("span",{children:a.emoji}),e.jsx("span",{className:"font-medium",children:a.count})]},`${a.emoji}-${o}`)),i.filter(a=>!r.find(o=>o.emoji===a)).slice(0,3).map(a=>e.jsx(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(a,!0),className:"w-8 h-8 rounded-full bg-[var(--hive-background-tertiary)]/40 border border-[var(--hive-border-primary)]/20 flex items-center justify-center text-sm hover:bg-[var(--hive-background-tertiary)]/60 transition-all duration-200",children:a},a))]})},F=({event:r,onRsvp:t})=>e.jsxs("div",{className:"mt-3 p-4 bg-[var(--hive-brand-primary)]/10 border border-[var(--hive-brand-primary)]/20 rounded-2xl",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-[var(--hive-brand-primary)]/20 border border-[var(--hive-brand-primary)]/30 flex items-center justify-center",children:e.jsx(V,{className:"w-5 h-5 text-[var(--hive-brand-primary)]"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-[var(--hive-text-primary)]",children:r.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-[var(--hive-text-secondary)] mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(r.date).toLocaleDateString()})]}),r.location&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{className:"w-3 h-3"}),e.jsx("span",{children:r.location})]}),r.rsvpCount&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"w-3 h-3"}),e.jsxs("span",{children:[r.rsvpCount," attending"]})]})]})]})]})}),t&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-[var(--hive-text-secondary)] mr-2",children:"Will you attend?"}),["yes","no","maybe"].map(i=>e.jsxs(m.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(i),className:v("px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200",r.userRsvp===i?"bg-[var(--hive-brand-primary)]/20 text-[var(--hive-brand-primary)] border border-[var(--hive-brand-primary)]/40":"bg-[var(--hive-background-primary)]/50 text-[var(--hive-text-secondary)] border border-[var(--hive-border-primary)]/30 hover:bg-[var(--hive-background-primary)]/70"),children:[i==="yes"&&"âœ“ Yes",i==="no"&&"âœ— No",i==="maybe"&&"? Maybe"]},i))]})]}),J=({poll:r,onVote:t})=>{const i=r.options.some(n=>n.userVoted),a=r.expiresAt?new Date(r.expiresAt).getTime()-Date.now():null,o=a!==null&&a<=0;return e.jsxs("div",{className:"mt-3 p-4 bg-[var(--hive-status-info)]/10 border border-[var(--hive-status-info)]/20 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(C,{className:"w-5 h-5 text-[var(--hive-status-info)]"}),e.jsx("h4",{className:"font-semibold text-[var(--hive-text-primary)]",children:r.question})]}),e.jsx("div",{className:"space-y-2 mb-4",children:r.options.map(n=>{const l=r.totalVotes>0?n.votes/r.totalVotes*100:0;return e.jsxs(m.div,{whileHover:!i&&!o?{scale:1.01}:{},className:v("relative overflow-hidden rounded-xl border transition-all duration-200",i||o?"cursor-default":"cursor-pointer hover:border-[var(--hive-status-info)]/40"),onClick:()=>!i&&!o&&(t==null?void 0:t(n.id)),children:[e.jsx("div",{className:"absolute inset-0 bg-[var(--hive-status-info)]/10 transition-all duration-500",style:{width:`${l}%`}}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[n.userVoted&&e.jsx(C,{className:"w-4 h-4 text-[var(--hive-status-info)]"}),e.jsx("span",{className:v("font-medium",n.userVoted?"text-[var(--hive-status-info)]":"text-[var(--hive-text-primary)]"),children:n.text})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-[var(--hive-text-secondary)]",children:[e.jsxs("span",{children:[n.votes," votes"]}),(i||o)&&e.jsxs("span",{className:"font-medium",children:["(",l.toFixed(1),"%)"]})]})]})]},n.id)})}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-[var(--hive-text-muted)]",children:[e.jsxs("span",{children:[r.totalVotes," total votes"]}),a!==null&&!o&&e.jsxs("span",{children:["Expires in ",Math.floor(a/(1e3*60*60*24))," days"]}),o&&e.jsx("span",{className:"text-[var(--hive-status-warning)]",children:"Poll expired"})]})]})},O=({post:r,currentUser:t,onReaction:i,onComment:a,onShare:o,onEdit:n,onDelete:l,onPin:u,onReport:x,onEventRsvp:f,onPollVote:g})=>{var T;const[b,c]=k.useState(!1),h=k.useRef(null),j=(t==null?void 0:t.id)===r.author.id,s=(t==null?void 0:t.role)==="leader"||(t==null?void 0:t.role)==="co_leader",d=j||s,w=p=>{const N=new Date,E=new Date(p),y=Math.floor((N.getTime()-E.getTime())/(1e3*60*60));return y<1?"Just now":y<24?`${y}h ago`:y<168?`${Math.floor(y/24)}d ago`:`${Math.floor(y/168)}w ago`},q=p=>{switch(p){case"urgent":return"border-red-500/40 bg-red-500/10";case"high":return"border-orange-500/40 bg-orange-500/10";case"medium":return"border-yellow-500/40 bg-yellow-500/10";default:return"border-[var(--hive-border-primary)]/20 bg-[var(--hive-background-secondary)]/60"}};return k.useEffect(()=>{const p=N=>{h.current&&!h.current.contains(N.target)&&c(!1)};if(b)return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[b]),e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:v("relative backdrop-blur-xl border rounded-2xl p-6 transition-all duration-300",r.type==="announcement"?q((T=r.announcement)==null?void 0:T.priority):"border-[var(--hive-border-primary)]/20 bg-[var(--hive-background-secondary)]/60",r.isPinned&&"ring-2 ring-[var(--hive-brand-primary)]/20"),children:[r.isPinned&&e.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-[var(--hive-brand-primary)]/20 border border-[var(--hive-brand-primary)]/40 rounded-full flex items-center justify-center",children:e.jsx(M,{className:"w-4 h-4 text-[var(--hive-brand-primary)]"})}),e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[var(--hive-background-tertiary)]/60 border border-[var(--hive-border-primary)]/30 flex items-center justify-center",children:e.jsx("span",{className:"text-lg font-bold text-[var(--hive-text-primary)]",children:r.author.name.charAt(0)})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-[var(--hive-text-primary)]",children:r.author.name}),r.author.role==="leader"&&e.jsx(H,{className:"w-4 h-4 text-[var(--hive-brand-secondary)]"}),r.author.verified&&e.jsx(C,{className:"w-4 h-4 text-[var(--hive-status-success)]"}),r.toolSource&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 bg-[var(--hive-status-info)]/20 border border-[var(--hive-status-info)]/30 rounded-full",children:[e.jsx("span",{className:"text-xs",children:r.toolSource.icon}),e.jsx("span",{className:"text-xs font-medium text-[var(--hive-status-info)]",children:r.toolSource.toolName})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-[var(--hive-text-muted)] mt-0.5",children:[e.jsx("span",{children:w(r.timestamp)}),r.isEdited&&e.jsx("span",{children:"â€¢ edited"}),r.viewCount&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-3 h-3"}),e.jsx("span",{children:r.viewCount})]})]})]})]}),e.jsxs("div",{className:"relative",ref:h,children:[e.jsx("button",{onClick:()=>c(!b),className:"w-8 h-8 rounded-lg flex items-center justify-center text-[var(--hive-text-muted)] hover:text-[var(--hive-text-primary)] hover:bg-[var(--hive-background-primary)]/50 transition-colors duration-200",children:e.jsx(A,{className:"w-4 h-4"})}),e.jsx(P,{children:b&&e.jsxs(m.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute right-0 top-10 w-48 bg-[var(--hive-background-secondary)]/95 backdrop-blur-xl border border-[var(--hive-border-primary)]/30 rounded-xl shadow-lg z-50 py-2",children:[j&&e.jsx("button",{onClick:()=>{n==null||n(),c(!1)},className:"w-full px-4 py-2 text-left text-sm text-[var(--hive-text-primary)] hover:bg-[var(--hive-background-primary)]/50 transition-colors duration-200",children:"Edit post"}),s&&e.jsx("button",{onClick:()=>{u==null||u(!r.isPinned),c(!1)},className:"w-full px-4 py-2 text-left text-sm text-[var(--hive-text-primary)] hover:bg-[var(--hive-background-primary)]/50 transition-colors duration-200",children:r.isPinned?"Unpin post":"Pin post"}),e.jsx("button",{onClick:()=>{x==null||x(),c(!1)},className:"w-full px-4 py-2 text-left text-sm text-[var(--hive-status-warning)] hover:bg-[var(--hive-background-primary)]/50 transition-colors duration-200",children:"Report post"}),d&&e.jsx("button",{onClick:()=>{l==null||l(),c(!1)},className:"w-full px-4 py-2 text-left text-sm text-[var(--hive-status-error)] hover:bg-[var(--hive-background-primary)]/50 transition-colors duration-200",children:"Delete post"})]})})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-[var(--hive-text-primary)] leading-relaxed whitespace-pre-wrap",children:r.content})}),r.event&&e.jsx(F,{event:r.event,onRsvp:f}),r.poll&&e.jsx(J,{poll:r.poll,onVote:g}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-[var(--hive-border-primary)]/10",children:[e.jsx("div",{className:"flex-1",children:r.reactions&&r.reactions.length>0&&i&&e.jsx(z,{reactions:r.reactions,onReaction:i})}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[r.commentCount!==void 0&&e.jsxs(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"flex items-center gap-1 px-3 py-1.5 rounded-xl text-sm text-[var(--hive-text-secondary)] hover:text-[var(--hive-text-primary)] hover:bg-[var(--hive-background-primary)]/50 transition-all duration-200",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{children:r.commentCount})]}),e.jsxs(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o,className:"flex items-center gap-1 px-3 py-1.5 rounded-xl text-sm text-[var(--hive-text-secondary)] hover:text-[var(--hive-text-primary)] hover:bg-[var(--hive-background-primary)]/50 transition-all duration-200",children:[e.jsx(B,{className:"w-4 h-4"}),r.shareCount&&e.jsx("span",{children:r.shareCount})]}),e.jsx(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-8 h-8 rounded-xl flex items-center justify-center text-[var(--hive-text-secondary)] hover:text-[var(--hive-text-primary)] hover:bg-[var(--hive-background-primary)]/50 transition-all duration-200",children:e.jsx(D,{className:"w-4 h-4"})})]})]})]})},W=({posts:r,currentUser:t,onReaction:i,onComment:a,onShare:o,onEdit:n,onDelete:l,onPin:u,onReport:x,onEventRsvp:f,onPollVote:g,showComments:b=!0,enableInfiniteScroll:c=!1,className:h})=>{const j=S.useMemo(()=>[...r].sort((s,d)=>s.isPinned&&!d.isPinned?-1:!s.isPinned&&d.isPinned?1:new Date(d.timestamp).getTime()-new Date(s.timestamp).getTime()),[r]);return r.length===0?e.jsxs("div",{className:v("text-center py-12",h),children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-[var(--hive-background-tertiary)]/40 border border-[var(--hive-border-primary)]/20 flex items-center justify-center",children:e.jsx(I,{className:"w-8 h-8 text-[var(--hive-text-muted)]"})}),e.jsx("h3",{className:"text-lg font-semibold text-[var(--hive-text-primary)] mb-2",children:"No posts yet"}),e.jsx("p",{className:"text-[var(--hive-text-secondary)]",children:"Be the first to share something with this community"})]}):e.jsx("div",{className:v("space-y-6",h),children:e.jsx(P,{children:j.map(s=>e.jsx(O,{post:s,currentUser:t,onReaction:i?(d,w)=>i(s.id,d,w):void 0,onComment:a?()=>a(s.id):void 0,onShare:o?()=>o(s.id):void 0,onEdit:n?()=>n(s.id):void 0,onDelete:l?()=>l(s.id):void 0,onPin:u?d=>u(s.id,d):void 0,onReport:x?()=>x(s.id):void 0,onEventRsvp:f&&s.event?d=>f(s.event.id,d):void 0,onPollVote:g&&s.poll?d=>g(s.poll.id,d):void 0},s.id))})})};W.__docgenInfo={description:"",methods:[],displayName:"PostBoard",props:{posts:{required:!0,tsType:{name:"Array",elements:[{name:"SpacePost"}],raw:"SpacePost[]"},description:""},currentUser:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  id: string;
  role?: 'leader' | 'co_leader' | 'member';
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"role",value:{name:"union",raw:"'leader' | 'co_leader' | 'member'",elements:[{name:"literal",value:"'leader'"},{name:"literal",value:"'co_leader'"},{name:"literal",value:"'member'"}],required:!1}}]}},description:""},onReaction:{required:!1,tsType:{name:"signature",type:"function",raw:"(postId: string, emoji: string, add: boolean) => void",signature:{arguments:[{type:{name:"string"},name:"postId"},{type:{name:"string"},name:"emoji"},{type:{name:"boolean"},name:"add"}],return:{name:"void"}}},description:""},onComment:{required:!1,tsType:{name:"signature",type:"function",raw:"(postId: string) => void",signature:{arguments:[{type:{name:"string"},name:"postId"}],return:{name:"void"}}},description:""},onShare:{required:!1,tsType:{name:"signature",type:"function",raw:"(postId: string) => void",signature:{arguments:[{type:{name:"string"},name:"postId"}],return:{name:"void"}}},description:""},onEdit:{required:!1,tsType:{name:"signature",type:"function",raw:"(postId: string) => void",signature:{arguments:[{type:{name:"string"},name:"postId"}],return:{name:"void"}}},description:""},onDelete:{required:!1,tsType:{name:"signature",type:"function",raw:"(postId: string) => void",signature:{arguments:[{type:{name:"string"},name:"postId"}],return:{name:"void"}}},description:""},onPin:{required:!1,tsType:{name:"signature",type:"function",raw:"(postId: string, pin: boolean) => void",signature:{arguments:[{type:{name:"string"},name:"postId"},{type:{name:"boolean"},name:"pin"}],return:{name:"void"}}},description:""},onReport:{required:!1,tsType:{name:"signature",type:"function",raw:"(postId: string) => void",signature:{arguments:[{type:{name:"string"},name:"postId"}],return:{name:"void"}}},description:""},onEventRsvp:{required:!1,tsType:{name:"signature",type:"function",raw:"(eventId: string, response: 'yes' | 'no' | 'maybe') => void",signature:{arguments:[{type:{name:"string"},name:"eventId"},{type:{name:"union",raw:"'yes' | 'no' | 'maybe'",elements:[{name:"literal",value:"'yes'"},{name:"literal",value:"'no'"},{name:"literal",value:"'maybe'"}]},name:"response"}],return:{name:"void"}}},description:""},onPollVote:{required:!1,tsType:{name:"signature",type:"function",raw:"(pollId: string, optionId: string) => void",signature:{arguments:[{type:{name:"string"},name:"pollId"},{type:{name:"string"},name:"optionId"}],return:{name:"void"}}},description:""},showComments:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},enableInfiniteScroll:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""}}};export{W as P};
