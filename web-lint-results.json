[{"filePath":"/Users/laneyfraass/hive_ui/apps/web/debug-imports.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/fix-imports-v2.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/fix-imports.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/fix-profile-imports.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/fix-remaining.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/instrumentation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/next-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/__tests__/integration/api-routes.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/__tests__/integration/error-resilience.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/__tests__/integration/performance.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/__tests__/integration/platform-integration.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/__tests__/integration/resilient-api-client.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/admin/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/calendar/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/events/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/feed/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/hivelab/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/hivelab/variants/mock-data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/profile/analytics/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/profile/customize/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":204,"column":3,"endLine":204,"endColumn":64,"severity":2,"nodeType":null},{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":228,"column":3,"endLine":228,"endColumn":64,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { Button, Card, \n  Badge,\n  Switch,\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger  } from \"@hive/ui\";\nimport { PageContainer } from \"@/components/temp-stubs\";\nimport { \n  User, \n  Grid,\n  Layout,\n  Save,\n  X,\n  RotateCcw,\n  Smartphone,\n  Monitor,\n  Tablet,\n  Move,\n  Plus,\n  Settings,\n  Palette,\n  Zap,\n  Users,\n  Calendar,\n  BarChart3,\n  Shield,\n  Wrench,\n  Activity\n} from 'lucide-react';\nimport type { LucideIcon } from 'lucide-react';\nimport { ErrorBoundary } from '../../../../components/error-boundary';\nimport { CardCustomizationModal } from '../../../../components/profile/card-customization-modal';\nimport { useSession } from '../../../../hooks/use-session';\n\ninterface CardConfig {\n  id: string;\n  name: string;\n  description: string;\n  category: 'identity' | 'academic' | 'community' | 'platform' | 'privacy';\n  icon: LucideIcon;\n  size: '1x1' | '2x1' | '1x2' | '2x2';\n  isVisible: boolean;\n  position: { x: number; y: number };\n  isRequired?: boolean;\n  builderOnly?: boolean;\n}\n\ninterface LayoutTemplate {\n  id: string;\n  name: string;\n  description: string;\n  targetUser: string;\n  cards: Partial<CardConfig>[];\n}\n\nconst DEFAULT_CARDS: CardConfig[] = [\n  {\n    id: 'avatar',\n    name: 'Avatar Card',\n    description: 'Basic identity and profile photo',\n    category: 'identity',\n    icon: User,\n    size: '1x1',\n    isVisible: true,\n    position: { x: 0, y: 0 },\n    isRequired: true\n  },\n  {\n    id: 'calendar',\n    name: 'Calendar Card',\n    description: 'Unified schedule from all sources',\n    category: 'academic',\n    icon: Calendar,\n    size: '2x1',\n    isVisible: true,\n    position: { x: 1, y: 0 }\n  },\n  {\n    id: 'tools',\n    name: 'Your Tools Card',\n    description: 'Personal productivity tool grid',\n    category: 'platform',\n    icon: Zap,\n    size: '1x2',\n    isVisible: true,\n    position: { x: 3, y: 0 }\n  },\n  {\n    id: 'spaces',\n    name: 'Your Spaces Card',\n    description: 'Joined communities and activity',\n    category: 'community',\n    icon: Users,\n    size: '1x2',\n    isVisible: true,\n    position: { x: 0, y: 1 }\n  },\n  {\n    id: 'activity',\n    name: 'Activity Log Card',\n    description: 'Personal platform engagement history',\n    category: 'community',\n    icon: Activity,\n    size: '2x1',\n    isVisible: true,\n    position: { x: 1, y: 1 }\n  },\n  {\n    id: 'hivelab',\n    name: 'HiveLAB Card',\n    description: 'Tool creation access (Builders only)',\n    category: 'platform',\n    icon: Wrench,\n    size: '1x1',\n    isVisible: false,\n    position: { x: 3, y: 1 },\n    builderOnly: true\n  },\n  {\n    id: 'privacy',\n    name: 'Ghost Mode Card',\n    description: 'Privacy controls and visibility',\n    category: 'privacy',\n    icon: Shield,\n    size: '1x1',\n    isVisible: false,\n    position: { x: 0, y: 2 }\n  },\n  {\n    id: 'analytics',\n    name: 'Platform Stats Card',\n    description: 'Usage analytics and insights',\n    category: 'platform',\n    icon: BarChart3,\n    size: '2x1',\n    isVisible: false,\n    position: { x: 1, y: 2 }\n  }\n];\n\nconst LAYOUT_TEMPLATES: LayoutTemplate[] = [\n  {\n    id: 'default',\n    name: 'Balanced Campus Life',\n    description: 'Perfect mix of academics, community, and tools',\n    targetUser: 'Most students',\n    cards: [\n      { id: 'avatar', isVisible: true, position: { x: 0, y: 0 } },\n      { id: 'calendar', isVisible: true, position: { x: 1, y: 0 } },\n      { id: 'tools', isVisible: true, position: { x: 3, y: 0 } },\n      { id: 'spaces', isVisible: true, position: { x: 0, y: 1 } },\n      { id: 'activity', isVisible: true, position: { x: 1, y: 1 } }\n    ]\n  },\n  {\n    id: 'academic-focused',\n    name: 'Academic Excellence',\n    description: 'Optimized for serious academic achievement',\n    targetUser: 'Academic-focused students',\n    cards: [\n      { id: 'avatar', isVisible: true, position: { x: 0, y: 0 } },\n      { id: 'calendar', isVisible: true, position: { x: 1, y: 0 } },\n      { id: 'tools', isVisible: true, position: { x: 3, y: 0 } },\n      { id: 'analytics', isVisible: true, position: { x: 0, y: 1 } }\n    ]\n  },\n  {\n    id: 'community-leader',\n    name: 'Community Leader',\n    description: 'Built for student organization leaders',\n    targetUser: 'Student leaders',\n    cards: [\n      { id: 'avatar', isVisible: true, position: { x: 0, y: 0 } },\n      { id: 'spaces', isVisible: true, position: { x: 1, y: 0 } },\n      { id: 'activity', isVisible: true, position: { x: 3, y: 0 } },\n      { id: 'calendar', isVisible: true, position: { x: 0, y: 1 } }\n    ]\n  },\n  {\n    id: 'builder',\n    name: 'HIVE Builder',\n    description: 'Everything a tool creator needs',\n    targetUser: 'Builder program members',\n    cards: [\n      { id: 'avatar', isVisible: true, position: { x: 0, y: 0 } },\n      { id: 'hivelab', isVisible: true, position: { x: 1, y: 0 } },\n      { id: 'tools', isVisible: true, position: { x: 2, y: 0 } },\n      { id: 'analytics', isVisible: true, position: { x: 0, y: 1 } }\n    ]\n  }\n];\n\nexport default function ProfileCustomizePage() {\n  const router = useRouter();\n  const { user } = useSession();\n  \n  const [cards, setCards] = useState<CardConfig[]>(DEFAULT_CARDS);\n  // Future card selection functionality - currently unused\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [_selectedCard, _setSelectedCard] = useState<string | null>(null);\n  const [viewMode, setViewMode] = useState<'desktop' | 'tablet' | 'mobile'>('desktop');\n  const [hasChanges, setHasChanges] = useState(false);\n  const [isGridVisible, setIsGridVisible] = useState(true);\n  const [showCardModal, setShowCardModal] = useState(false);\n  const [editingCard, setEditingCard] = useState<CardConfig | null>(null);\n\n  // Load saved layout\n  useEffect(() => {\n    // TODO: Load user's saved layout from API\n    // For now, use defaults\n  }, [user]);\n\n  const handleCardToggle = useCallback((cardId: string) => {\n    setCards(prev => prev.map(card => \n      card.id === cardId \n        ? { ...card, isVisible: !card.isVisible }\n        : card\n    ));\n    setHasChanges(true);\n  }, []);\n\n  // Future drag-and-drop functionality - currently unused\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const _handleCardMove = useCallback((cardId: string, newPosition: { x: number; y: number }) => {\n    setCards(prev => prev.map(card => \n      card.id === cardId \n        ? { ...card, position: newPosition }\n        : card\n    ));\n    setHasChanges(true);\n  }, []);\n\n  const applyTemplate = useCallback((template: LayoutTemplate) => {\n    setCards(prev => prev.map(card => {\n      const templateCard = template.cards.find(tc => tc.id === card.id);\n      if (templateCard) {\n        return {\n          ...card,\n          isVisible: templateCard.isVisible ?? false,\n          position: templateCard.position ?? card.position\n        };\n      }\n      return { ...card, isVisible: false };\n    }));\n    setHasChanges(true);\n  }, []);\n\n  const resetToDefault = useCallback(() => {\n    setCards(DEFAULT_CARDS);\n    setHasChanges(true);\n  }, []);\n\n  const handleCardConfigSave = (config: {\n    size: '1x1' | '2x1' | '1x2' | '2x2';\n    isVisible: boolean;\n    position: { x: number; y: number };\n  }) => {\n    if (!editingCard) return;\n    \n    setCards(prev => prev.map(card => \n      card.id === editingCard.id \n        ? { \n            ...card, \n            size: config.size,\n            isVisible: config.isVisible,\n            position: config.position\n          }\n        : card\n    ));\n    setHasChanges(true);\n  };\n\n  const handleSave = async () => {\n    try {\n      // TODO: Save layout to API\n      console.log('Saving layout:', cards);\n      setHasChanges(false);\n      router.push('/profile');\n    } catch (error) {\n      console.error('Failed to save layout:', error);\n    }\n  };\n\n  const handleCancel = () => {\n    if (hasChanges) {\n      if (confirm('You have unsaved changes. Are you sure you want to leave?')) {\n        router.push('/profile');\n      }\n    } else {\n      router.push('/profile');\n    }\n  };\n\n  const getCardsByCategory = (category: CardConfig['category']) => {\n    return cards.filter(card => card.category === category);\n  };\n\n  const visibleCards = cards.filter(card => card.isVisible);\n\n  return (\n    <ErrorBoundary>\n      <PageContainer\n        title=\"Customize Your Profile\"\n        subtitle=\"Design your personal campus command center\"\n        breadcrumbs={[\n          { label: \"Profile\", icon: User, href: \"/profile\" },\n          { label: \"Customize\" }\n        ]}\n        actions={\n          <div className=\"flex items-center space-x-3\">\n            <Button \n              variant=\"outline\" \n              onClick={handleCancel}\n            >\n              <X className=\"h-4 w-4 mr-2\" />\n              Cancel\n            </Button>\n            <Button \n              onClick={handleSave}\n              disabled={!hasChanges}\n              className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n            >\n              <Save className=\"h-4 w-4 mr-2\" />\n              Save Layout\n            </Button>\n          </div>\n        }\n        maxWidth=\"xl\"\n      >\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n          {/* Customization Controls */}\n          <div className=\"lg:col-span-1 space-y-6\">\n            {/* View Mode Controls */}\n            <Card className=\"p-4 bg-hive-background-overlay border-hive-border-default\">\n              <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center\">\n                <Monitor className=\"h-5 w-5 mr-2\" />\n                Preview Mode\n              </h3>\n              <div className=\"flex flex-col space-y-2\">\n                <Button\n                  variant={viewMode === 'desktop' ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setViewMode('desktop')}\n                  className=\"justify-start\"\n                >\n                  <Monitor className=\"h-4 w-4 mr-2\" />\n                  Desktop\n                </Button>\n                <Button\n                  variant={viewMode === 'tablet' ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setViewMode('tablet')}\n                  className=\"justify-start\"\n                >\n                  <Tablet className=\"h-4 w-4 mr-2\" />\n                  Tablet\n                </Button>\n                <Button\n                  variant={viewMode === 'mobile' ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setViewMode('mobile')}\n                  className=\"justify-start\"\n                >\n                  <Smartphone className=\"h-4 w-4 mr-2\" />\n                  Mobile\n                </Button>\n              </div>\n              \n              <div className=\"mt-4 pt-4 border-t border-hive-border-default\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-white text-sm\">Show Grid</span>\n                  <Switch\n                    checked={isGridVisible}\n                    onCheckedChange={setIsGridVisible}\n                  />\n                </div>\n              </div>\n            </Card>\n\n            {/* Quick Actions */}\n            <Card className=\"p-4 bg-hive-background-overlay border-hive-border-default\">\n              <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center\">\n                <Settings className=\"h-5 w-5 mr-2\" />\n                Quick Actions\n              </h3>\n              <div className=\"space-y-2\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={resetToDefault}\n                  className=\"w-full justify-start\"\n                >\n                  <RotateCcw className=\"h-4 w-4 mr-2\" />\n                  Reset to Default\n                </Button>\n              </div>\n            </Card>\n\n            {/* Templates */}\n            <Card className=\"p-4 bg-hive-background-overlay border-hive-border-default\">\n              <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center\">\n                <Layout className=\"h-5 w-5 mr-2\" />\n                Layout Templates\n              </h3>\n              <div className=\"space-y-3\">\n                {LAYOUT_TEMPLATES.map((template) => (\n                  <div key={template.id} className=\"p-3 rounded-lg bg-hive-background-tertiary\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <h4 className=\"font-medium text-white text-sm\">{template.name}</h4>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => applyTemplate(template)}\n                        className=\"text-hive-gold hover:bg-hive-gold/10\"\n                      >\n                        Apply\n                      </Button>\n                    </div>\n                    <p className=\"text-xs text-hive-text-mutedLight mb-1\">{template.description}</p>\n                    <Badge variant=\"outline\" className=\"text-xs\">\n                      {template.targetUser}\n                    </Badge>\n                  </div>\n                ))}\n              </div>\n            </Card>\n          </div>\n\n          {/* Main Customization Area */}\n          <div className=\"lg:col-span-3 space-y-6\">\n            {/* Layout Preview */}\n            <Card className=\"p-6 bg-hive-background-overlay border-hive-border-default\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-white flex items-center\">\n                  <Grid className=\"h-5 w-5 mr-2\" />\n                  Layout Preview\n                </h3>\n                <Badge variant=\"outline\">\n                  {visibleCards.length} cards visible\n                </Badge>\n              </div>\n              \n              {/* Preview Grid */}\n              <div className={`\n                grid gap-4 p-4 rounded-lg\n                ${isGridVisible ? 'bg-gray-900 bg-[radial-gradient(circle,_rgba(255,255,255,0.1)_1px,_transparent_1px)] bg-[length:20px_20px]' : 'bg-hive-background-tertiary'}\n                ${viewMode === 'desktop' ? 'grid-cols-4' : \n                  viewMode === 'tablet' ? 'grid-cols-2' : 'grid-cols-1'}\n              `}>\n                {visibleCards.map((card) => {\n                  const IconComponent = card.icon;\n                  return (\n                    <div\n                      key={card.id}\n                      className={`\n                        p-4 rounded-lg bg-hive-background-overlay border-hive-border-default\n                        hover:bg-hive-background-interactive transition-colors cursor-pointer\n                        ${_selectedCard === card.id ? 'ring-2 ring-hive-gold' : ''}\n                        ${card.size === '2x1' && viewMode === 'desktop' ? 'col-span-2' : ''}\n                        ${card.size === '1x2' && viewMode === 'desktop' ? 'row-span-2' : ''}\n                        ${card.size === '2x2' && viewMode === 'desktop' ? 'col-span-2 row-span-2' : ''}\n                      `}\n                      onClick={() => {\n                        setEditingCard(card);\n                        setShowCardModal(true);\n                      }}\n                    >\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <IconComponent className=\"h-5 w-5 text-hive-gold\" />\n                        <Move className=\"h-4 w-4 text-hive-text-mutedLight\" />\n                      </div>\n                      <h4 className=\"font-medium text-white text-sm mb-1\">{card.name}</h4>\n                      <p className=\"text-xs text-hive-text-mutedLight\">{card.description}</p>\n                    </div>\n                  );\n                })}\n              </div>\n            </Card>\n\n            {/* Card Library */}\n            <Card className=\"p-6 bg-hive-background-overlay border-hive-border-default\">\n              <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center\">\n                <Plus className=\"h-5 w-5 mr-2\" />\n                Card Library\n              </h3>\n              \n              <Tabs defaultValue=\"identity\" className=\"space-y-4\">\n                <TabsList className=\"grid w-full grid-cols-5\">\n                  <TabsTrigger value=\"identity\">Identity</TabsTrigger>\n                  <TabsTrigger value=\"academic\">Academic</TabsTrigger>\n                  <TabsTrigger value=\"community\">Community</TabsTrigger>\n                  <TabsTrigger value=\"platform\">Platform</TabsTrigger>\n                  <TabsTrigger value=\"privacy\">Privacy</TabsTrigger>\n                </TabsList>\n\n                {(['identity', 'academic', 'community', 'platform', 'privacy'] as const).map((category) => (\n                  <TabsContent key={category} value={category} className=\"space-y-3\">\n                    {getCardsByCategory(category).map((card) => {\n                      const IconComponent = card.icon;\n                      const isBuilder = user?.builderOptIn || false;\n                      const isDisabled = card.builderOnly && !isBuilder;\n                      \n                      return (\n                        <div \n                          key={card.id}\n                          className={`\n                            flex items-center justify-between p-3 rounded-lg\n                            ${isDisabled ? 'bg-hive-background-tertiary opacity-50' : 'bg-hive-background-tertiary hover:bg-hive-background-interactive'}\n                            transition-colors\n                          `}\n                        >\n                          <div className=\"flex items-center space-x-3\">\n                            <IconComponent className=\"h-5 w-5 text-hive-gold\" />\n                            <div>\n                              <h4 className=\"font-medium text-white text-sm\">{card.name}</h4>\n                              <p className=\"text-xs text-hive-text-mutedLight\">{card.description}</p>\n                              {card.builderOnly && (\n                                <Badge variant=\"secondary\" className=\"text-xs mt-1\">\n                                  Builder Only\n                                </Badge>\n                              )}\n                            </div>\n                          </div>\n                          <div className=\"flex items-center space-x-2\">\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              {card.size}\n                            </Badge>\n                            {card.isRequired ? (\n                              <Badge variant=\"secondary\" className=\"text-xs\">Required</Badge>\n                            ) : (\n                              <Switch\n                                checked={card.isVisible}\n                                onCheckedChange={() => !isDisabled && handleCardToggle(card.id)}\n                                disabled={isDisabled}\n                              />\n                            )}\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </TabsContent>\n                ))}\n              </Tabs>\n            </Card>\n          </div>\n        </div>\n\n        {/* Changes indicator */}\n        {hasChanges && (\n          <div className=\"fixed bottom-6 right-6 bg-hive-gold text-hive-obsidian px-4 py-2 rounded-lg flex items-center space-x-2 shadow-lg\">\n            <Palette className=\"h-4 w-4\" />\n            <span className=\"text-sm font-medium\">Layout changes pending</span>\n          </div>\n        )}\n\n        {/* Card Customization Modal */}\n        {editingCard && (\n          <CardCustomizationModal\n            isOpen={showCardModal}\n            onClose={() => {\n              setShowCardModal(false);\n              setEditingCard(null);\n            }}\n            onSave={handleCardConfigSave}\n            card={{\n              id: editingCard.id,\n              name: editingCard.name,\n              description: editingCard.description,\n              icon: editingCard.icon,\n              category: editingCard.category,\n              currentSize: editingCard.size,\n              currentPosition: editingCard.position,\n              isVisible: editingCard.isVisible,\n              isRequired: editingCard.isRequired\n            }}\n          />\n        )}\n      </PageContainer>\n    </ErrorBoundary>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/profile/edit/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/profile/integrations/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/profile/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/profile/privacy/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/profile/settings/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/profile/tools/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/resources/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/rituals/[ritualId]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/rituals/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/settings/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/[spaceId]/admin/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/[spaceId]/analytics/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/[spaceId]/collaboration/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/[spaceId]/events/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/[spaceId]/members/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/[spaceId]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/[spaceId]/resources/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/[spaceId]/tools/page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'useRouter' is defined but never used. Allowed unused vars must match /^_/u.","line":26,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"useRouter"},"fix":{"range":[461,505],"text":""},"desc":"Remove unused variable 'useRouter'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Button, Card, Badge, HiveModal } from \"@hive/ui\";\nimport { PageContainer } from \"@/components/temp-stubs\";\nimport { \n  Zap, \n  Plus, \n  Search, \n  Filter, \n  Star, \n  Users, \n  Activity, \n  Settings, \n  ExternalLink,\n  Play,\n  Pause,\n  BarChart3,\n  Clock,\n  ArrowLeft,\n  Eye,\n  EyeOff,\n  Trash2\n} from \"lucide-react\";\nimport { ErrorBoundary } from \"../../../../../components/error-boundary\";\nimport { useRouter } from \"next/navigation\";\n\ninterface SpaceToolsPageProps {\n  params: Promise<{\n    spaceId: string;\n  }>;\n}\n\ninterface SpaceTool {\n  id: string;\n  name: string;\n  description: string;\n  icon: string;\n  category: 'productivity' | 'collaboration' | 'communication' | 'organization' | 'engagement' | 'academic';\n  type: 'built-in' | 'custom' | 'external';\n  isActive: boolean;\n  permissions: {\n    view: string[];\n    use: string[];\n    manage: string[];\n  };\n  usage: {\n    totalSessions: number;\n    activeUsers: number;\n    lastUsed: string;\n    averageSessionTime: number;\n  };\n  settings: {\n    autoLaunch: boolean;\n    requirePermission: boolean;\n    maxConcurrentUsers?: number;\n    customConfig?: Record<string, unknown>;\n  };\n  integrations: string[];\n  createdBy?: string;\n  createdAt: string;\n  updatedAt: string;\n}\n\ninterface ToolTemplate {\n  id: string;\n  name: string;\n  description: string;\n  icon: string;\n  category: string;\n  features: string[];\n  popularity: number;\n  difficulty: 'easy' | 'medium' | 'hard';\n}\n\nexport default function SpaceToolsPage({ params }: SpaceToolsPageProps) {\n  const [spaceId, setSpaceId] = useState<string>('');\n  const [tools, setTools] = useState<SpaceTool[]>([]);\n  const [showAddTool, setShowAddTool] = useState(false);\n  const [showToolSettings, setShowToolSettings] = useState<SpaceTool | null>(null);\n  const [categoryFilter, setCategoryFilter] = useState<'all' | SpaceTool['category']>('all');\n  const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'inactive'>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [spaceName, setSpaceName] = useState('');\n  const [userRole, setUserRole] = useState<'admin' | 'moderator' | 'member'>('member');\n  const [availableTemplates, setAvailableTemplates] = useState<ToolTemplate[]>([]);\n\n  useEffect(() => {\n    // Resolve params Promise\n    const resolveParams = async () => {\n      const resolvedParams = await params;\n      setSpaceId(resolvedParams.spaceId);\n    };\n    resolveParams();\n  }, [params]);\n\n  useEffect(() => {\n    if (!spaceId) return;\n    const fetchData = async () => {\n      await new Promise(resolve => setTimeout(resolve, 500));\n      \n      setSpaceName('CS Study Group');\n      setUserRole('admin');\n      \n      const mockTools: SpaceTool[] = [\n        {\n          id: '1',\n          name: 'Study Timer',\n          description: 'Synchronized focus sessions for group study with Pomodoro technique',\n          icon: 'â±ï¸',\n          category: 'productivity',\n          type: 'built-in',\n          isActive: true,\n          permissions: {\n            view: ['all'],\n            use: ['member', 'moderator', 'admin'],\n            manage: ['admin']\n          },\n          usage: {\n            totalSessions: 127,\n            activeUsers: 8,\n            lastUsed: '2024-02-01T14:30:00Z',\n            averageSessionTime: 45\n          },\n          settings: {\n            autoLaunch: false,\n            requirePermission: false,\n            maxConcurrentUsers: 25,\n            customConfig: { defaultDuration: 25, breakDuration: 5 }\n          },\n          integrations: ['calendar', 'notifications'],\n          createdAt: '2024-01-15T10:00:00Z',\n          updatedAt: '2024-01-28T16:20:00Z'\n        },\n        {\n          id: '2',\n          name: 'Collaborative Whiteboard',\n          description: 'Real-time drawing and brainstorming space for visual collaboration',\n          icon: 'ðŸ“',\n          category: 'collaboration',\n          type: 'built-in',\n          isActive: true,\n          permissions: {\n            view: ['member', 'moderator', 'admin'],\n            use: ['member', 'moderator', 'admin'],\n            manage: ['moderator', 'admin']\n          },\n          usage: {\n            totalSessions: 89,\n            activeUsers: 5,\n            lastUsed: '2024-02-01T11:15:00Z',\n            averageSessionTime: 32\n          },\n          settings: {\n            autoLaunch: false,\n            requirePermission: true,\n            maxConcurrentUsers: 15\n          },\n          integrations: ['file-share', 'export'],\n          createdAt: '2024-01-16T14:00:00Z',\n          updatedAt: '2024-01-30T09:45:00Z'\n        },\n        {\n          id: '3',\n          name: 'Live Polls',\n          description: 'Real-time polling and voting for group decisions and feedback',\n          icon: 'ðŸ“Š',\n          category: 'engagement',\n          type: 'built-in',\n          isActive: true,\n          permissions: {\n            view: ['all'],\n            use: ['member', 'moderator', 'admin'],\n            manage: ['moderator', 'admin']\n          },\n          usage: {\n            totalSessions: 56,\n            activeUsers: 12,\n            lastUsed: '2024-01-31T18:20:00Z',\n            averageSessionTime: 15\n          },\n          settings: {\n            autoLaunch: false,\n            requirePermission: false,\n            customConfig: { allowAnonymous: true, showLiveResults: true }\n          },\n          integrations: ['analytics', 'export'],\n          createdAt: '2024-01-18T11:30:00Z',\n          updatedAt: '2024-01-31T20:10:00Z'\n        },\n        {\n          id: '4',\n          name: 'Code Review Helper',\n          description: 'Custom tool for reviewing and discussing code submissions',\n          icon: 'ðŸ’»',\n          category: 'academic',\n          type: 'custom',\n          isActive: false,\n          permissions: {\n            view: ['member', 'moderator', 'admin'],\n            use: ['member', 'moderator', 'admin'],\n            manage: ['admin']\n          },\n          usage: {\n            totalSessions: 23,\n            activeUsers: 0,\n            lastUsed: '2024-01-25T13:45:00Z',\n            averageSessionTime: 28\n          },\n          settings: {\n            autoLaunch: false,\n            requirePermission: true,\n            customConfig: { supportedLanguages: ['javascript', 'python', 'java'], maxFileSize: '10MB' }\n          },\n          integrations: ['github', 'file-share'],\n          createdBy: 'admin-1',\n          createdAt: '2024-01-20T15:00:00Z',\n          updatedAt: '2024-01-25T13:50:00Z'\n        }\n      ];\n\n      const mockTemplates: ToolTemplate[] = [\n        {\n          id: 'template-1',\n          name: 'Flash Cards',\n          description: 'Digital flashcards for memorization and quick review',\n          icon: 'ðŸƒ',\n          category: 'academic',\n          features: ['Spaced repetition', 'Progress tracking', 'Shared decks', 'Import/Export'],\n          popularity: 85,\n          difficulty: 'easy'\n        },\n        {\n          id: 'template-2',\n          name: 'Group Chat',\n          description: 'Dedicated chat room for space members',\n          icon: 'ðŸ’¬',\n          category: 'communication',\n          features: ['Real-time messaging', 'File sharing', 'Mentions', 'Message history'],\n          popularity: 92,\n          difficulty: 'easy'\n        },\n        {\n          id: 'template-3',\n          name: 'Task Board',\n          description: 'Kanban-style task management for group projects',\n          icon: 'ðŸ“‹',\n          category: 'organization',\n          features: ['Drag & drop', 'Due dates', 'Assignments', 'Progress tracking'],\n          popularity: 78,\n          difficulty: 'medium'\n        },\n        {\n          id: 'template-4',\n          name: 'Attendance Tracker',\n          description: 'Track event and meeting attendance',\n          icon: 'âœ…',\n          category: 'organization',\n          features: ['QR codes', 'Location verification', 'Reports', 'Certificates'],\n          popularity: 67,\n          difficulty: 'medium'\n        }\n      ];\n\n      setTools(mockTools);\n      setAvailableTemplates(mockTemplates);\n      setIsLoading(false);\n    };\n\n    fetchData();\n  }, [spaceId]);\n\n  const filteredTools = tools.filter(tool => {\n    const matchesSearch = tool.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                         tool.description.toLowerCase().includes(searchQuery.toLowerCase());\n    const matchesCategory = categoryFilter === 'all' || tool.category === categoryFilter;\n    const matchesStatus = statusFilter === 'all' || \n                         (statusFilter === 'active' && tool.isActive) ||\n                         (statusFilter === 'inactive' && !tool.isActive);\n    \n    return matchesSearch && matchesCategory && matchesStatus;\n  });\n\n  const formatTimeAgo = (dateString: string) => {\n    const now = new Date();\n    const date = new Date(dateString);\n    const diffMs = now.getTime() - date.getTime();\n    const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\n    const diffDays = Math.floor(diffHours / 24);\n    \n    if (diffHours < 1) return 'Just now';\n    if (diffHours < 24) return `${diffHours}h ago`;\n    if (diffDays < 7) return `${diffDays}d ago`;\n    return `${Math.floor(diffDays / 7)}w ago`;\n  };\n\n  const getCategoryColor = (category: SpaceTool['category']) => {\n    switch (category) {\n      case 'productivity': return 'bg-blue-500';\n      case 'collaboration': return 'bg-green-500';\n      case 'communication': return 'bg-orange-500';\n      case 'organization': return 'bg-purple-500';\n      case 'engagement': return 'bg-pink-500';\n      case 'academic': return 'bg-indigo-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  const handleToolToggle = (toolId: string) => {\n    setTools(prev => prev.map(tool => \n      tool.id === toolId ? { ...tool, isActive: !tool.isActive } : tool\n    ));\n  };\n\n  const handleAddTool = (templateId: string) => {\n    const template = availableTemplates.find(t => t.id === templateId);\n    if (!template) return;\n\n    const newTool: SpaceTool = {\n      id: `tool-${Date.now()}`,\n      name: template.name,\n      description: template.description,\n      icon: template.icon,\n      category: template.category as SpaceTool['category'],\n      type: 'built-in',\n      isActive: true,\n      permissions: {\n        view: ['all'],\n        use: ['member', 'moderator', 'admin'],\n        manage: ['admin']\n      },\n      usage: {\n        totalSessions: 0,\n        activeUsers: 0,\n        lastUsed: new Date().toISOString(),\n        averageSessionTime: 0\n      },\n      settings: {\n        autoLaunch: false,\n        requirePermission: false\n      },\n      integrations: [],\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    };\n\n    setTools(prev => [newTool, ...prev]);\n    setShowAddTool(false);\n  };\n\n  const handleRemoveTool = (toolId: string) => {\n    setTools(prev => prev.filter(tool => tool.id !== toolId));\n  };\n\n  if (isLoading) {\n    return (\n      <PageContainer title=\"Loading...\" maxWidth=\"7xl\">\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"text-center\">\n            <div className=\"w-8 h-8 bg-hive-gold rounded-lg animate-pulse mx-auto mb-4\" />\n            <p className=\"text-white\">Loading tools...</p>\n          </div>\n        </div>\n      </PageContainer>\n    );\n  }\n\n  const activeTools = tools.filter(t => t.isActive).length;\n  const totalSessions = tools.reduce((sum, t) => sum + t.usage.totalSessions, 0);\n  const totalActiveUsers = tools.reduce((sum, t) => sum + t.usage.activeUsers, 0);\n\n  return (\n    <ErrorBoundary>\n      <PageContainer\n        title=\"Tools\"\n        subtitle={`${spaceName} â€¢ ${activeTools} active tools`}\n        breadcrumbs={[\n          { \n            label: \"Spaces\", \n            href: \"/spaces\",\n            icon: ArrowLeft\n          },\n          { \n            label: spaceName, \n            href: `/spaces/${spaceId}`\n          },\n          { \n            label: \"Tools\", \n            icon: Zap \n          }\n        ]}\n        actions={\n          <div className=\"flex items-center space-x-3\">\n            <Button variant=\"outline\" size=\"sm\">\n              <BarChart3 className=\"h-4 w-4 mr-2\" />\n              Analytics\n            </Button>\n            \n            {(userRole === 'admin' || userRole === 'moderator') && (\n              <Button \n                onClick={() => setShowAddTool(true)}\n                className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n              >\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Add Tool\n              </Button>\n            )}\n          </div>\n        }\n        maxWidth=\"7xl\"\n      >\n        {/* Stats Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n          <Card className=\"p-4 bg-zinc-800/50 border-zinc-700\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <div className=\"text-2xl font-bold text-white\">{tools.length}</div>\n                <div className=\"text-sm text-zinc-400\">Total Tools</div>\n              </div>\n              <Zap className=\"h-8 w-8 text-blue-400\" />\n            </div>\n          </Card>\n          \n          <Card className=\"p-4 bg-zinc-800/50 border-zinc-700\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <div className=\"text-2xl font-bold text-white\">{activeTools}</div>\n                <div className=\"text-sm text-zinc-400\">Active Tools</div>\n              </div>\n              <Play className=\"h-8 w-8 text-green-400\" />\n            </div>\n          </Card>\n          \n          <Card className=\"p-4 bg-zinc-800/50 border-zinc-700\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <div className=\"text-2xl font-bold text-white\">{totalSessions}</div>\n                <div className=\"text-sm text-zinc-400\">Total Sessions</div>\n              </div>\n              <Activity className=\"h-8 w-8 text-purple-400\" />\n            </div>\n          </Card>\n          \n          <Card className=\"p-4 bg-zinc-800/50 border-zinc-700\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <div className=\"text-2xl font-bold text-white\">{totalActiveUsers}</div>\n                <div className=\"text-sm text-zinc-400\">Active Users</div>\n              </div>\n              <Users className=\"h-8 w-8 text-orange-400\" />\n            </div>\n          </Card>\n        </div>\n\n        {/* Search and Filters */}\n        <div className=\"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 mb-6\">\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-zinc-400\" />\n              <input\n                type=\"text\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                placeholder=\"Search tools...\"\n                className=\"pl-10 pr-4 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-zinc-400 focus:border-hive-gold focus:outline-none w-64\"\n              />\n            </div>\n            \n            <select\n              value={categoryFilter}\n              onChange={(e) => setCategoryFilter(e.target.value as 'all' | 'academic' | 'engagement' | 'productivity' | 'communication' | 'collaboration' | 'organization')}\n              className=\"bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-2 text-white text-sm focus:border-hive-gold focus:outline-none\"\n            >\n              <option value=\"all\">All Categories</option>\n              <option value=\"productivity\">Productivity</option>\n              <option value=\"collaboration\">Collaboration</option>\n              <option value=\"communication\">Communication</option>\n              <option value=\"organization\">Organization</option>\n              <option value=\"engagement\">Engagement</option>\n              <option value=\"academic\">Academic</option>\n            </select>\n            \n            <select\n              value={statusFilter}\n              onChange={(e) => setStatusFilter(e.target.value as 'all' | 'active' | 'inactive')}\n              className=\"bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-2 text-white text-sm focus:border-hive-gold focus:outline-none\"\n            >\n              <option value=\"all\">All Status</option>\n              <option value=\"active\">Active</option>\n              <option value=\"inactive\">Inactive</option>\n            </select>\n          </div>\n          \n          <div className=\"flex items-center space-x-2 text-sm text-zinc-400\">\n            <Filter className=\"h-4 w-4\" />\n            <span>{filteredTools.length} tools shown</span>\n          </div>\n        </div>\n\n        {/* Tools Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {filteredTools.map((tool) => (\n            <Card \n              key={tool.id} \n              className={`p-6 border transition-all duration-200 ${\n                tool.isActive \n                  ? 'bg-zinc-800/50 border-zinc-700 hover:bg-zinc-800/70' \n                  : 'bg-zinc-800/30 border-zinc-800 opacity-75'\n              }`}\n            >\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex items-start space-x-3\">\n                  <div className={`w-12 h-12 ${getCategoryColor(tool.category)} rounded-lg flex items-center justify-center text-2xl`}>\n                    {tool.icon}\n                  </div>\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-2 mb-1\">\n                      <h3 className=\"font-semibold text-white\">{tool.name}</h3>\n                      <Badge \n                        variant={tool.type === 'built-in' ? 'skill-tag' : tool.type === 'custom' ? 'building-tools' : 'destructive'} \n                        className=\"text-xs\"\n                      >\n                        {tool.type}\n                      </Badge>\n                    </div>\n                    <p className=\"text-sm text-zinc-400 mb-2 line-clamp-2\">{tool.description}</p>\n                    <Badge variant=\"skill-tag\" className=\"text-xs capitalize\">\n                      {tool.category}\n                    </Badge>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center space-x-1\">\n                  {tool.isActive ? (\n                    <div className=\"w-2 h-2 bg-green-400 rounded-full\"></div>\n                  ) : (\n                    <div className=\"w-2 h-2 bg-zinc-500 rounded-full\"></div>\n                  )}\n                </div>\n              </div>\n\n              {/* Usage Stats */}\n              <div className=\"grid grid-cols-2 gap-4 mb-4 text-sm\">\n                <div>\n                  <div className=\"text-white font-medium\">{tool.usage.totalSessions}</div>\n                  <div className=\"text-zinc-500\">Sessions</div>\n                </div>\n                <div>\n                  <div className=\"text-white font-medium\">{tool.usage.activeUsers}</div>\n                  <div className=\"text-zinc-500\">Active Users</div>\n                </div>\n              </div>\n\n              {/* Last Used */}\n              <div className=\"flex items-center space-x-2 text-xs text-zinc-500 mb-4\">\n                <Clock className=\"h-3 w-3\" />\n                <span>Last used {formatTimeAgo(tool.usage.lastUsed)}</span>\n              </div>\n\n              {/* Actions */}\n              <div className=\"flex items-center justify-between pt-4 border-t border-zinc-700\">\n                <div className=\"flex items-center space-x-2\">\n                  {tool.isActive ? (\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      className=\"text-green-400 border-green-500/30 hover:bg-green-500/10\"\n                    >\n                      <ExternalLink className=\"h-4 w-4 mr-1\" />\n                      Launch\n                    </Button>\n                  ) : (\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      disabled\n                      className=\"text-zinc-500\"\n                    >\n                      <Pause className=\"h-4 w-4 mr-1\" />\n                      Inactive\n                    </Button>\n                  )}\n                </div>\n                \n                {(userRole === 'admin' || userRole === 'moderator') && (\n                  <div className=\"flex items-center space-x-1\">\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => handleToolToggle(tool.id)}\n                      className=\"text-zinc-400 hover:text-white\"\n                    >\n                      {tool.isActive ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\n                    </Button>\n                    \n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => setShowToolSettings(tool)}\n                      className=\"text-zinc-400 hover:text-white\"\n                    >\n                      <Settings className=\"h-4 w-4\" />\n                    </Button>\n                    \n                    {tool.type === 'custom' && userRole === 'admin' && (\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => handleRemoveTool(tool.id)}\n                        className=\"text-red-400 hover:text-red-300\"\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    )}\n                  </div>\n                )}\n              </div>\n            </Card>\n          ))}\n        </div>\n\n        {/* Empty State */}\n        {filteredTools.length === 0 && (\n          <div className=\"text-center py-12\">\n            <Zap className=\"h-16 w-16 text-zinc-600 mx-auto mb-4\" />\n            <h3 className=\"text-xl font-semibold text-white mb-2\">No tools found</h3>\n            <p className=\"text-zinc-400 mb-6\">\n              {searchQuery || categoryFilter !== 'all' || statusFilter !== 'all'\n                ? 'Try adjusting your search or filters.'\n                : 'Add some tools to help your space coordinate and collaborate effectively.'\n              }\n            </p>\n            {(userRole === 'admin' || userRole === 'moderator') && (\n              <Button \n                onClick={() => setShowAddTool(true)}\n                className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n              >\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Add Your First Tool\n              </Button>\n            )}\n          </div>\n        )}\n\n        {/* Add Tool Modal */}\n        <HiveModal\n          isOpen={showAddTool}\n          onClose={() => setShowAddTool(false)}\n          title=\"Add Tool to Space\"\n          size=\"lg\"\n        >\n          <div className=\"space-y-6\">\n            <div className=\"text-center\">\n              <p className=\"text-zinc-400\">Choose from our library of productivity and collaboration tools</p>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {availableTemplates.map((template) => (\n                <Card \n                  key={template.id} \n                  className=\"p-4 bg-zinc-800/50 border-zinc-700 hover:bg-zinc-800/70 transition-colors cursor-pointer\"\n                  onClick={() => handleAddTool(template.id)}\n                >\n                  <div className=\"flex items-start space-x-3 mb-3\">\n                    <div className=\"text-2xl\">{template.icon}</div>\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-2 mb-1\">\n                        <h4 className=\"font-medium text-white\">{template.name}</h4>\n                        <Badge \n                          variant={template.difficulty === 'easy' ? 'building-tools' : template.difficulty === 'medium' ? 'skill-tag' : 'destructive'} \n                          className=\"text-xs\"\n                        >\n                          {template.difficulty}\n                        </Badge>\n                      </div>\n                      <p className=\"text-sm text-zinc-400 mb-2\">{template.description}</p>\n                      <div className=\"flex items-center space-x-2\">\n                        <Star className=\"h-3 w-3 text-hive-gold fill-current\" />\n                        <span className=\"text-xs text-zinc-500\">{template.popularity}% popularity</span>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex flex-wrap gap-1\">\n                    {template.features.slice(0, 3).map((feature) => (\n                      <span key={feature} className=\"text-xs text-zinc-500 bg-zinc-800 px-2 py-1 rounded\">\n                        {feature}\n                      </span>\n                    ))}\n                    {template.features.length > 3 && (\n                      <span className=\"text-xs text-zinc-500\">+{template.features.length - 3} more</span>\n                    )}\n                  </div>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </HiveModal>\n\n        {/* Tool Settings Modal */}\n        <HiveModal\n          isOpen={!!showToolSettings}\n          onClose={() => setShowToolSettings(null)}\n          title={showToolSettings ? `${showToolSettings.name} Settings` : ''}\n          size=\"lg\"\n        >\n          {showToolSettings && (\n            <div className=\"space-y-6\">\n              {/* Basic Settings */}\n              <div>\n                <h4 className=\"font-medium text-white mb-3\">Basic Settings</h4>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <div className=\"font-medium text-white\">Tool Status</div>\n                      <div className=\"text-sm text-zinc-400\">Enable or disable this tool for space members</div>\n                    </div>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => handleToolToggle(showToolSettings.id)}\n                      className={showToolSettings.isActive ? 'text-green-400 border-green-500/30' : 'text-zinc-500'}\n                    >\n                      {showToolSettings.isActive ? 'Active' : 'Inactive'}\n                    </Button>\n                  </div>\n                  \n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <div className=\"font-medium text-white\">Auto Launch</div>\n                      <div className=\"text-sm text-zinc-400\">Automatically start tool in events</div>\n                    </div>\n                    <input \n                      type=\"checkbox\" \n                      checked={showToolSettings.settings.autoLaunch}\n                      className=\"rounded\"\n                      readOnly\n                    />\n                  </div>\n                  \n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <div className=\"font-medium text-white\">Require Permission</div>\n                      <div className=\"text-sm text-zinc-400\">Members need approval to use this tool</div>\n                    </div>\n                    <input \n                      type=\"checkbox\" \n                      checked={showToolSettings.settings.requirePermission}\n                      className=\"rounded\"\n                      readOnly\n                    />\n                  </div>\n                </div>\n              </div>\n\n              {/* Usage Stats */}\n              <div>\n                <h4 className=\"font-medium text-white mb-3\">Usage Statistics</h4>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"p-3 bg-zinc-800/50 rounded-lg\">\n                    <div className=\"text-xl font-bold text-white\">{showToolSettings.usage.totalSessions}</div>\n                    <div className=\"text-sm text-zinc-400\">Total Sessions</div>\n                  </div>\n                  <div className=\"p-3 bg-zinc-800/50 rounded-lg\">\n                    <div className=\"text-xl font-bold text-white\">{showToolSettings.usage.averageSessionTime}m</div>\n                    <div className=\"text-sm text-zinc-400\">Avg Session</div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Permissions */}\n              <div>\n                <h4 className=\"font-medium text-white mb-3\">Permissions</h4>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-zinc-400\">Can View:</span>\n                    <span className=\"text-white\">{showToolSettings.permissions.view.join(', ')}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-zinc-400\">Can Use:</span>\n                    <span className=\"text-white\">{showToolSettings.permissions.use.join(', ')}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-zinc-400\">Can Manage:</span>\n                    <span className=\"text-white\">{showToolSettings.permissions.manage.join(', ')}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </HiveModal>\n      </PageContainer>\n    </ErrorBoundary>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/activate/[spaceId]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/components/discovery-modes.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/components/edge-case-handlers.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":265,"column":3,"endLine":265,"endColumn":64,"severity":2,"nodeType":null},{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":382,"column":3,"endLine":382,"endColumn":64,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState } from \"react\";\nimport { Card, Button, Badge } from \"@hive/ui\";\nimport { \n  Search, \n \n  Users, \n  MessageSquare,\n  AlertCircle,\n  Compass as _Compass,\n  Filter as _Filter,\n  Plus,\n  RefreshCw,\n  Lightbulb,\n  Globe,\n  Shield,\n  Target,\n  Clock as _Clock,\n  Zap as _Zap,\n  Calendar\n} from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { type Space } from \"@hive/core\";\n\n// Empty Search Results Handler\ninterface EmptySearchResultsProps {\n  searchQuery: string;\n  activeFilters: Record<string, any>;\n  onClearSearch: () => void;\n  onClearFilters: () => void;\n  onCreateSpaceRequest?: () => void;\n  alternativeSuggestions?: Space[];\n}\n\nexport function EmptySearchResults({ \n  searchQuery, \n  activeFilters, \n  onClearSearch, \n  onClearFilters,\n  onCreateSpaceRequest,\n  alternativeSuggestions = []\n}: EmptySearchResultsProps) {\n  const hasFilters = Object.keys(activeFilters).length > 0;\n  const hasSearch = searchQuery.length > 0;\n\n  return (\n    <div className=\"text-center py-12 max-w-md mx-auto\">\n      <div className=\"w-16 h-16 bg-neutral-700 rounded-full flex items-center justify-center mx-auto mb-6\">\n        <Search className=\"h-8 w-8 text-neutral-400\" />\n      </div>\n\n      <h3 className=\"text-xl font-semibold text-white mb-2\">\n        No spaces found\n      </h3>\n\n      <p className=\"text-neutral-400 mb-6\">\n        {hasSearch && hasFilters \n          ? `No spaces match \"${searchQuery}\" with your current filters.`\n          : hasSearch\n          ? `No spaces found for \"${searchQuery}\".`\n          : hasFilters\n          ? \"No spaces match your current filters.\"\n          : \"No spaces available right now.\"\n        }\n      </p>\n\n      {/* Quick Actions */}\n      <div className=\"space-y-3 mb-8\">\n        {hasSearch && (\n          <Button \n            onClick={onClearSearch}\n            variant=\"outline\"\n            className=\"w-full border-white/20 text-white\"\n          >\n            Clear search term\n          </Button>\n        )}\n        \n        {hasFilters && (\n          <Button \n            onClick={onClearFilters}\n            variant=\"outline\"\n            className=\"w-full border-white/20 text-white\"\n          >\n            Reset filters\n          </Button>\n        )}\n\n        {onCreateSpaceRequest && (\n          <Button\n            onClick={onCreateSpaceRequest}\n            className=\"w-full bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n          >\n            <Plus className=\"h-4 w-4 mr-2\" />\n            Request new space\n          </Button>\n        )}\n      </div>\n\n      {/* Alternative Suggestions */}\n      {alternativeSuggestions.length > 0 && (\n        <div>\n          <h4 className=\"text-sm font-medium text-white mb-3\">\n            Try these popular spaces instead:\n          </h4>\n          <div className=\"space-y-2\">\n            {alternativeSuggestions.slice(0, 3).map((space) => (\n              <div \n                key={space.id}\n                className=\"flex items-center justify-between p-3 bg-white/5 rounded-lg\"\n              >\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-8 h-8 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-lg flex items-center justify-center\">\n                    <span className=\"text-xs font-bold text-white\">\n                      {space.name.charAt(0)}\n                    </span>\n                  </div>\n                  <div className=\"text-left\">\n                    <div className=\"text-sm font-medium text-white\">{space.name}</div>\n                    <div className=\"text-xs text-neutral-400\">{space.memberCount} members</div>\n                  </div>\n                </div>\n                <Button size=\"sm\" className=\"bg-hive-gold text-hive-obsidian\">\n                  Join\n                </Button>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Overwhelmed User Handler - Too Many Spaces Joined\ninterface SpaceOverloadHandlerProps {\n  joinedSpacesCount: number;\n  recentlyJoined: Space[];\n  inactiveSpaces: Space[];\n  onOptimizeSpaces: () => void;\n  onPauseRecommendations: () => void;\n}\n\nexport function SpaceOverloadHandler({\n  joinedSpacesCount,\n  recentlyJoined,\n  inactiveSpaces,\n  onOptimizeSpaces,\n  onPauseRecommendations\n}: SpaceOverloadHandlerProps) {\n  const [showDetails, setShowDetails] = useState(false);\n\n  if (joinedSpacesCount < 8) return null; // Only show for 8+ spaces\n\n  return (\n    <Card className=\"p-6 bg-orange-500/10 border-orange-500/20 mb-6\">\n      <div className=\"flex items-start gap-4\">\n        <div className=\"w-12 h-12 bg-orange-500/20 rounded-full flex items-center justify-center flex-shrink-0\">\n          <AlertCircle className=\"h-6 w-6 text-orange-400\" />\n        </div>\n        \n        <div className=\"flex-1\">\n          <h3 className=\"text-lg font-semibold text-white mb-2\">\n            You're in {joinedSpacesCount} spaces\n          </h3>\n          <p className=\"text-neutral-300 mb-4\">\n            Research shows that managing more than 5-7 communities can reduce engagement \n            and increase stress. Consider optimizing your space list for a better experience.\n          </p>\n\n          {/* Quick Stats */}\n          <div className=\"grid grid-cols-2 gap-4 mb-4\">\n            <div className=\"bg-white/5 rounded-lg p-3\">\n              <div className=\"text-lg font-bold text-white\">{recentlyJoined.length}</div>\n              <div className=\"text-xs text-neutral-400\">Joined this week</div>\n            </div>\n            <div className=\"bg-white/5 rounded-lg p-3\">\n              <div className=\"text-lg font-bold text-white\">{inactiveSpaces.length}</div>\n              <div className=\"text-xs text-neutral-400\">Haven't visited recently</div>\n            </div>\n          </div>\n\n          {/* Expandable Details */}\n          <AnimatePresence>\n            {showDetails && (\n              <motion.div\n                initial={{ opacity: 0, height: 0 }}\n                animate={{ opacity: 1, height: \"auto\" }}\n                exit={{ opacity: 0, height: 0 }}\n                className=\"mb-4\"\n              >\n                <h4 className=\"text-sm font-medium text-white mb-2\">Spaces you might consider leaving:</h4>\n                <div className=\"space-y-2\">\n                  {inactiveSpaces.slice(0, 3).map((space) => (\n                    <div key={space.id} className=\"flex items-center justify-between p-2 bg-white/5 rounded\">\n                      <div>\n                        <div className=\"text-sm text-white\">{space.name}</div>\n                        <div className=\"text-xs text-neutral-400\">Last visited 2+ weeks ago</div>\n                      </div>\n                      <Button size=\"sm\" variant=\"outline\" className=\"text-neutral-400\">\n                        Leave\n                      </Button>\n                    </div>\n                  ))}\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n\n          {/* Actions */}\n          <div className=\"flex flex-wrap gap-2\">\n            <Button\n              onClick={onOptimizeSpaces}\n              className=\"bg-orange-400 text-hive-obsidian hover:bg-orange-300\"\n            >\n              <Target className=\"h-4 w-4 mr-2\" />\n              Optimize my spaces\n            </Button>\n            \n            <Button\n              variant=\"outline\"\n              onClick={() => setShowDetails(!showDetails)}\n              className=\"border-orange-400/30 text-orange-400\"\n            >\n              {showDetails ? \"Hide details\" : \"Show details\"}\n            </Button>\n            \n            <Button\n              variant=\"ghost\"\n              onClick={onPauseRecommendations}\n              className=\"text-neutral-400\"\n            >\n              Pause recommendations\n            </Button>\n          </div>\n        </div>\n      </div>\n    </Card>\n  );\n}\n\n// Inclusive Community Finder for Underrepresented Groups\ninterface InclusiveCommunityFinderProps {\n  userProfile: {\n    demographics?: {\n      ethnicity?: string;\n      gender?: string;\n      sexuality?: string;\n      disability?: boolean;\n      firstGen?: boolean;\n      international?: boolean;\n    };\n    interests: string[];\n  };\n  inclusiveSpaces: Space[];\n  onFindMore: () => void;\n}\n\nexport function InclusiveCommunityFinder({ \n  userProfile, \n  inclusiveSpaces,\n  onFindMore \n}: InclusiveCommunityFinderProps) {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [_showPersonalized, _setShowPersonalized] = useState(false);\n\n  const getPersonalizedMessage = () => {\n    const demographics = userProfile.demographics;\n    if (!demographics) return null;\n\n    const messages = [];\n    \n    if (demographics.international) {\n      messages.push(\"international student communities\");\n    }\n    if (demographics.firstGen) {\n      messages.push(\"first-generation college student groups\");\n    }\n    if (demographics.ethnicity) {\n      messages.push(\"cultural and heritage communities\");\n    }\n    \n    return messages.length > 0 ? messages.join(\", \") : null;\n  };\n\n  const personalizedMessage = getPersonalizedMessage();\n\n  return (\n    <Card className=\"p-6 bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-purple-500/20\">\n      <div className=\"flex items-start gap-4\">\n        <div className=\"w-12 h-12 bg-purple-500/20 rounded-full flex items-center justify-center flex-shrink-0\">\n          <Shield className=\"h-6 w-6 text-purple-400\" />\n        </div>\n        \n        <div className=\"flex-1\">\n          <h3 className=\"text-lg font-semibold text-white mb-2\">\n            Find your community\n          </h3>\n          <p className=\"text-neutral-300 mb-4\">\n            We believe everyone deserves to find welcoming communities where they can thrive. \n            Here are some inclusive spaces that celebrate diversity and foster belonging.\n          </p>\n\n          {personalizedMessage && (\n            <div className=\"mb-4 p-3 bg-white/5 rounded-lg\">\n              <p className=\"text-sm text-purple-300\">\n                <Shield className=\"h-4 w-4 inline mr-2\" />\n                Based on your profile, you might be interested in {personalizedMessage}.\n              </p>\n            </div>\n          )}\n\n          {/* Inclusive Spaces Preview */}\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4\">\n            {inclusiveSpaces.slice(0, 4).map((space) => (\n              <div key={space.id} className=\"p-3 bg-white/5 rounded-lg\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <div className=\"w-6 h-6 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded flex items-center justify-center\">\n                    <span className=\"text-xs font-bold text-white\">\n                      {space.name.charAt(0)}\n                    </span>\n                  </div>\n                  <div className=\"text-sm font-medium text-white\">{space.name}</div>\n                </div>\n                <p className=\"text-xs text-neutral-400 line-clamp-2\">\n                  {space.description}\n                </p>\n                <div className=\"flex items-center justify-between mt-2\">\n                  <span className=\"text-xs text-neutral-400\">{space.memberCount} members</span>\n                  <Badge className=\"bg-purple-400/20 text-purple-300 text-xs\">\n                    Inclusive\n                  </Badge>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex flex-wrap gap-2\">\n            <Button\n              onClick={onFindMore}\n              className=\"bg-purple-400 text-white hover:bg-purple-300\"\n            >\n              <Search className=\"h-4 w-4 mr-2\" />\n              Explore inclusive communities\n            </Button>\n            \n            <Button\n              variant=\"outline\"\n              className=\"border-purple-400/30 text-purple-400\"\n            >\n              <Globe className=\"h-4 w-4 mr-2\" />\n              Report an issue\n            </Button>\n          </div>\n\n          {/* Privacy Notice */}\n          <p className=\"text-xs text-neutral-400 mt-3\">\n            Your demographic information is kept private and only used to suggest relevant communities. \n            You can update these preferences in your profile settings.\n          </p>\n        </div>\n      </div>\n    </Card>\n  );\n}\n\n// Transfer/International Student Onboarding\ninterface TransferStudentHelperProps {\n  studentType: \"transfer\" | \"international\" | \"both\";\n  currentUniversity: string;\n  previousUniversity?: string;\n  country?: string;\n  onboardingSpaces: Space[];\n  onGetPersonalizedHelp: () => void;\n}\n\nexport function TransferStudentHelper({\n  studentType,\n  currentUniversity,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  previousUniversity: _previousUniversity,\n  country,\n  onboardingSpaces,\n  onGetPersonalizedHelp\n}: TransferStudentHelperProps) {\n  const getWelcomeMessage = () => {\n    switch (studentType) {\n      case \"transfer\":\n        return `Welcome to ${currentUniversity}! We know transferring can be challenging.`;\n      case \"international\":\n        return `Welcome to ${currentUniversity}! We're excited to have you join us from ${country}.`;\n      case \"both\":\n        return `Welcome to ${currentUniversity}! As an international transfer student, you bring unique experiences.`;\n      default:\n        return `Welcome to ${currentUniversity}!`;\n    }\n  };\n\n  const getSpecificSpaces = () => {\n    return onboardingSpaces.filter(space => {\n      const name = space.name.toLowerCase();\n      const description = space.description?.toLowerCase() || \"\";\n      \n      const transferKeywords = [\"transfer\", \"new student\", \"orientation\"];\n      const internationalKeywords = [\"international\", \"global\", \"cultural\", \"language\"];\n      \n      if (studentType === \"transfer\" || studentType === \"both\") {\n        if (transferKeywords.some(keyword => name.includes(keyword) || description.includes(keyword))) {\n          return true;\n        }\n      }\n      \n      if (studentType === \"international\" || studentType === \"both\") {\n        if (internationalKeywords.some(keyword => name.includes(keyword) || description.includes(keyword))) {\n          return true;\n        }\n      }\n      \n      return false;\n    });\n  };\n\n  const specificSpaces = getSpecificSpaces();\n\n  return (\n    <Card className=\"p-6 bg-gradient-to-r from-blue-500/10 to-green-500/10 border-blue-500/20\">\n      <div className=\"flex items-start gap-4\">\n        <div className=\"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center flex-shrink-0\">\n          <Globe className=\"h-6 w-6 text-blue-400\" />\n        </div>\n        \n        <div className=\"flex-1\">\n          <h3 className=\"text-lg font-semibold text-white mb-2\">\n            {getWelcomeMessage()}\n          </h3>\n          \n          <p className=\"text-neutral-300 mb-4\">\n            Here are some communities specifically designed to help you connect, \n            get oriented, and feel at home on campus.\n          </p>\n\n          {/* Specialized Resources */}\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6\">\n            {(studentType === \"transfer\" || studentType === \"both\") && (\n              <div className=\"p-4 bg-white/5 rounded-lg\">\n                <h4 className=\"font-medium text-white mb-2\">\n                  <Users className=\"h-4 w-4 inline mr-2 text-blue-400\" />\n                  Transfer Student Resources\n                </h4>\n                <ul className=\"text-sm text-neutral-400 space-y-1\">\n                  <li>â€¢ Credit transfer guidance</li>\n                  <li>â€¢ Academic planning support</li>\n                  <li>â€¢ Social integration programs</li>\n                </ul>\n              </div>\n            )}\n\n            {(studentType === \"international\" || studentType === \"both\") && (\n              <div className=\"p-4 bg-white/5 rounded-lg\">\n                <h4 className=\"font-medium text-white mb-2\">\n                  <Globe className=\"h-4 w-4 inline mr-2 text-green-400\" />\n                  International Student Support\n                </h4>\n                <ul className=\"text-sm text-neutral-400 space-y-1\">\n                  <li>â€¢ Visa and immigration help</li>\n                  <li>â€¢ Cultural adjustment groups</li>\n                  <li>â€¢ Language exchange programs</li>\n                </ul>\n              </div>\n            )}\n          </div>\n\n          {/* Recommended Spaces */}\n          {specificSpaces.length > 0 && (\n            <div className=\"mb-6\">\n              <h4 className=\"font-medium text-white mb-3\">Recommended communities:</h4>\n              <div className=\"space-y-2\">\n                {specificSpaces.slice(0, 3).map((space) => (\n                  <div key={space.id} className=\"flex items-center justify-between p-3 bg-white/5 rounded-lg\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-8 h-8 bg-gradient-to-br from-blue-500/20 to-green-500/20 rounded-lg flex items-center justify-center\">\n                        <span className=\"text-xs font-bold text-white\">\n                          {space.name.charAt(0)}\n                        </span>\n                      </div>\n                      <div>\n                        <div className=\"text-sm font-medium text-white\">{space.name}</div>\n                        <div className=\"text-xs text-neutral-400\">{space.memberCount} members</div>\n                      </div>\n                    </div>\n                    <Button size=\"sm\" className=\"bg-blue-400 text-white hover:bg-blue-300\">\n                      Join\n                    </Button>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Quick Access Actions */}\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-2 mb-4\">\n            <Button\n              variant=\"outline\"\n              className=\"border-blue-400/30 text-blue-400 text-sm\"\n            >\n              <MessageSquare className=\"h-4 w-4 mr-2\" />\n              Campus FAQ\n            </Button>\n            <Button\n              variant=\"outline\"\n              className=\"border-green-400/30 text-green-400 text-sm\"\n            >\n              <Users className=\"h-4 w-4 mr-2\" />\n              Buddy Program\n            </Button>\n            <Button\n              variant=\"outline\"\n              className=\"border-purple-400/30 text-purple-400 text-sm\"\n            >\n              <Calendar className=\"h-4 w-4 mr-2\" />\n              Orientation Events\n            </Button>\n          </div>\n\n          {/* Personalized Help */}\n          <div className=\"flex gap-2\">\n            <Button\n              onClick={onGetPersonalizedHelp}\n              className=\"bg-blue-400 text-white hover:bg-blue-300\"\n            >\n              <Lightbulb className=\"h-4 w-4 mr-2\" />\n              Get personalized guidance\n            </Button>\n          </div>\n        </div>\n      </div>\n    </Card>\n  );\n}\n\n// Network Connection Issues Handler\nexport function NetworkIssueHandler({ onRetry }: { onRetry: () => void }) {\n  return (\n    <div className=\"text-center py-12\">\n      <div className=\"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4\">\n        <AlertCircle className=\"h-8 w-8 text-red-400\" />\n      </div>\n      \n      <h3 className=\"text-lg font-semibold text-white mb-2\">\n        Connection Problem\n      </h3>\n      \n      <p className=\"text-neutral-400 mb-6 max-w-md mx-auto\">\n        We're having trouble loading spaces right now. This might be due to a network issue \n        or temporary server problem.\n      </p>\n      \n      <div className=\"space-y-3\">\n        <Button \n          onClick={onRetry}\n          className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n        >\n          <RefreshCw className=\"h-4 w-4 mr-2\" />\n          Try again\n        </Button>\n        \n        <div className=\"text-xs text-neutral-500\">\n          If the problem persists, check your internet connection or try again later.\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Performance Optimization for Large Space Lists\ninterface VirtualizedSpaceListProps {\n  spaces: Space[];\n  itemHeight: number;\n  containerHeight: number;\n  renderItem: (_space: Space, _index: number) => React.ReactNode;\n}\n\nexport function VirtualizedSpaceList({\n  spaces,\n  itemHeight,\n  containerHeight,\n  renderItem\n}: VirtualizedSpaceListProps) {\n  const [scrollTop, setScrollTop] = useState(0);\n  \n  const visibleCount = Math.ceil(containerHeight / itemHeight);\n  const startIndex = Math.floor(scrollTop / itemHeight);\n  const endIndex = Math.min(startIndex + visibleCount + 1, spaces.length);\n  \n  const visibleSpaces = spaces.slice(startIndex, endIndex);\n  \n  return (\n    <div \n      className=\"overflow-auto\"\n      style={{ height: containerHeight }}\n      onScroll={(e) => setScrollTop(e.currentTarget.scrollTop)}\n    >\n      <div style={{ height: spaces.length * itemHeight, position: \"relative\" }}>\n        <div \n          style={{ \n            transform: `translateY(${startIndex * itemHeight}px)`,\n            position: \"absolute\",\n            top: 0,\n            left: 0,\n            right: 0\n          }}\n        >\n          {visibleSpaces.map((space, index) => (\n            <div key={space.id} style={{ height: itemHeight }}>\n              {renderItem(space, startIndex + index)}\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/components/enhanced-space-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/components/recommendation-engine.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/components/smart-discovery-filters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/components/space-error-boundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/components/space-loading-skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/components/space-onboarding-flow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/components/unified-space-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/spaces/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/tools/[toolId]/analytics/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/tools/[toolId]/deploy/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/tools/[toolId]/edit/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/tools/[toolId]/page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'user' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":42,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"user"},"fix":{"range":[909,914],"text":""},"desc":"Remove unused variable 'user'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'isRunning' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":49,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"isRunning"},"fix":{"range":[1224,1233],"text":""},"desc":"Remove unused variable 'isRunning'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'setIsRunning' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":49,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"setIsRunning"},"fix":{"range":[1233,1247],"text":""},"desc":"Remove unused variable 'setIsRunning'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'fetchTool' and 'router'. Either include them or remove the dependency array.","line":58,"column":6,"nodeType":"ArrayExpression","endLine":58,"endColumn":31,"suggestions":[{"desc":"Update the dependencies array to be: [toolId, isAuthenticated, fetchTool, router]","fix":{"range":[1394,1419],"text":"[toolId, isAuthenticated, fetchTool, router]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useParams, useRouter } from \"next/navigation\";\nimport { Button, Card, Badge } from \"@hive/ui\";\nimport { PageContainer } from \"@/components/temp-stubs\";\nimport { \n  Play, \n  Settings, \n  BarChart3, \n  Share2, \n  Download,\n  Star,\n  Users,\n  Clock,\n  Code,\n  Zap\n} from 'lucide-react';\nimport { authenticatedFetch } from \"@/lib/auth-utils\";\nimport { useSession } from \"@/hooks/use-session\";\nimport { ErrorBoundary } from \"@/components/error-boundary\";\n\ninterface Tool {\n  id: string;\n  name: string;\n  description: string;\n  category: string;\n  creator: string;\n  downloads: number;\n  rating: number;\n  ratingCount: number;\n  tags: string[];\n  version: string;\n  lastUpdated: string;\n  isInstalled?: boolean;\n  isRunning?: boolean;\n}\n\nexport default function ToolPage() {\n  const params = useParams();\n  const router = useRouter();\n  const { user, isAuthenticated } = useSession();\n  const toolId = params.toolId as string;\n  \n  const [tool, setTool] = useState<Tool | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isInstalling, setIsInstalling] = useState(false);\n  const [isRunning, setIsRunning] = useState(false);\n\n  useEffect(() => {\n    if (!isAuthenticated) {\n      router.push('/auth/login');\n      return;\n    }\n\n    fetchTool();\n  }, [toolId, isAuthenticated]);\n\n  const fetchTool = async () => {\n    try {\n      setLoading(true);\n      const response = await authenticatedFetch(`/api/tools/${toolId}`);\n      if (response.ok) {\n        const data = await response.json();\n        setTool(data.tool);\n      } else {\n        setError('Tool not found');\n      }\n    } catch (err) {\n      setError('Failed to load tool');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleInstallTool = async () => {\n    if (!tool) return;\n    \n    try {\n      setIsInstalling(true);\n      const response = await authenticatedFetch('/api/tools/install', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ toolId: tool.id })\n      });\n      \n      if (response.ok) {\n        setTool({ ...tool, isInstalled: true });\n      }\n    } catch (err) {\n      console.error('Failed to install tool:', err);\n    } finally {\n      setIsInstalling(false);\n    }\n  };\n\n  const handleRunTool = async () => {\n    if (!tool) return;\n    \n    router.push(`/tools/${tool.id}/run`);\n  };\n\n  if (loading) {\n    return (\n      <PageContainer title=\"Loading Tool...\">\n        <div className=\"flex items-center justify-center min-h-[400px]\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>\n        </div>\n      </PageContainer>\n    );\n  }\n\n  if (error || !tool) {\n    return (\n      <PageContainer title=\"Tool Not Found\">\n        <Card className=\"p-8 text-center\">\n          <h2 className=\"text-xl font-semibold text-white mb-2\">Tool Not Found</h2>\n          <p className=\"text-neutral-400 mb-4\">{error || 'The requested tool could not be found.'}</p>\n          <Button onClick={() => router.push('/tools')}>\n            Back to Tools\n          </Button>\n        </Card>\n      </PageContainer>\n    );\n  }\n\n  return (\n    <ErrorBoundary>\n      <PageContainer title={tool.name}>\n        <div className=\"space-y-6\">\n          {/* Tool Header */}\n          <Card className=\"p-6\">\n            <div className=\"flex items-start justify-between\">\n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-3 mb-2\">\n                  <Code className=\"h-8 w-8 text-blue-400\" />\n                  <h1 className=\"text-2xl font-bold text-white\">{tool.name}</h1>\n                  <Badge variant=\"secondary\">{tool.category}</Badge>\n                </div>\n                <p className=\"text-neutral-300 mb-4\">{tool.description}</p>\n                \n                <div className=\"flex items-center gap-6 text-sm text-neutral-400\">\n                  <div className=\"flex items-center gap-1\">\n                    <Users className=\"h-4 w-4\" />\n                    <span>{tool.downloads.toLocaleString()} downloads</span>\n                  </div>\n                  <div className=\"flex items-center gap-1\">\n                    <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\n                    <span>{tool.rating.toFixed(1)} ({tool.ratingCount} reviews)</span>\n                  </div>\n                  <div className=\"flex items-center gap-1\">\n                    <Clock className=\"h-4 w-4\" />\n                    <span>Updated {new Date(tool.lastUpdated).toLocaleDateString()}</span>\n                  </div>\n                </div>\n                \n                <div className=\"flex flex-wrap gap-2 mt-4\">\n                  {tool.tags.map((tag) => (\n                    <Badge key={tag} variant=\"outline\" className=\"text-xs\">\n                      {tag}\n                    </Badge>\n                  ))}\n                </div>\n              </div>\n              \n              <div className=\"flex flex-col gap-2 ml-6\">\n                {!tool.isInstalled ? (\n                  <Button \n                    onClick={handleInstallTool}\n                    disabled={isInstalling}\n                    className=\"min-w-[120px]\"\n                  >\n                    {isInstalling ? (\n                      <>\n                        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                        Installing...\n                      </>\n                    ) : (\n                      <>\n                        <Download className=\"h-4 w-4 mr-2\" />\n                        Install Tool\n                      </>\n                    )}\n                  </Button>\n                ) : (\n                  <Button \n                    onClick={handleRunTool}\n                    className=\"min-w-[120px]\"\n                  >\n                    <Play className=\"h-4 w-4 mr-2\" />\n                    Run Tool\n                  </Button>\n                )}\n                \n                <Button \n                  variant=\"outline\" \n                  onClick={() => router.push(`/tools/${tool.id}/analytics`)}\n                >\n                  <BarChart3 className=\"h-4 w-4 mr-2\" />\n                  Analytics\n                </Button>\n                \n                <Button \n                  variant=\"outline\"\n                  onClick={() => router.push(`/tools/${tool.id}/settings`)}\n                >\n                  <Settings className=\"h-4 w-4 mr-2\" />\n                  Settings\n                </Button>\n              </div>\n            </div>\n          </Card>\n\n          {/* Tool Actions */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <Card className=\"p-4 hover:bg-neutral-800 transition-colors cursor-pointer\" \n                  onClick={() => router.push(`/tools/${tool.id}/run`)}>\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 bg-green-500/20 rounded-lg\">\n                  <Zap className=\"h-5 w-5 text-green-400\" />\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-white\">Run Tool</h3>\n                  <p className=\"text-sm text-neutral-400\">Execute this tool</p>\n                </div>\n              </div>\n            </Card>\n\n            <Card className=\"p-4 hover:bg-neutral-800 transition-colors cursor-pointer\"\n                  onClick={() => router.push(`/tools/${tool.id}/analytics`)}>\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 bg-blue-500/20 rounded-lg\">\n                  <BarChart3 className=\"h-5 w-5 text-blue-400\" />\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-white\">View Analytics</h3>\n                  <p className=\"text-sm text-neutral-400\">Usage insights</p>\n                </div>\n              </div>\n            </Card>\n\n            <Card className=\"p-4 hover:bg-neutral-800 transition-colors cursor-pointer\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 bg-purple-500/20 rounded-lg\">\n                  <Share2 className=\"h-5 w-5 text-purple-400\" />\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-white\">Share Tool</h3>\n                  <p className=\"text-sm text-neutral-400\">Share with others</p>\n                </div>\n              </div>\n            </Card>\n          </div>\n\n          {/* Tool Information */}\n          <Card className=\"p-6\">\n            <h2 className=\"text-lg font-semibold text-white mb-4\">About {tool.name}</h2>\n            <div className=\"space-y-4 text-neutral-300\">\n              <div>\n                <h3 className=\"font-medium text-white mb-2\">Creator</h3>\n                <p>{tool.creator}</p>\n              </div>\n              <div>\n                <h3 className=\"font-medium text-white mb-2\">Version</h3>\n                <p>{tool.version}</p>\n              </div>\n              <div>\n                <h3 className=\"font-medium text-white mb-2\">Category</h3>\n                <p>{tool.category}</p>\n              </div>\n            </div>\n          </Card>\n        </div>\n      </PageContainer>\n    </ErrorBoundary>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/tools/[toolId]/preview/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/tools/[toolId]/run/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/tools/[toolId]/settings/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/(dashboard)/tools/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":167,"column":3,"endLine":167,"endColumn":64,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect, useMemo } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { CompleteHIVEToolsSystem } from \"@hive/ui\";\nimport { useSession } from \"../../../hooks/use-session\";\nimport { ErrorBoundary } from \"../../../components/error-boundary\";\nimport { \n  MessageSquare, \n  Timer, \n  Calculator, \n  BarChart3\n} from \"lucide-react\";\n\n// Type definition for fetch headers\ntype HeadersInit = Record<string, string>;\n\n// Enhanced tools fetch with API integration\nasync function fetchMarketplaceTools(): Promise<any[]> {\n  const headers: HeadersInit = {};\n  try {\n    const sessionJson = window.localStorage.getItem('hive_session');\n    if (sessionJson) {\n      const session = JSON.parse(sessionJson);\n      headers.Authorization = `Bearer ${process.env.NODE_ENV === 'development' ? 'test-token' : session.token}`;\n    } else {\n      headers.Authorization = `Bearer test-token`;\n    }\n  } catch (error) {\n    headers.Authorization = `Bearer test-token`;\n  }\n\n  const response = await fetch('/api/tools/browse', { headers });\n  \n  if (!response.ok) {\n    throw new Error(`Failed to fetch marketplace tools: ${response.status}`);\n  }\n  \n  const data = await response.json();\n  return data.tools || [];\n}\n\nasync function fetchPersonalTools(): Promise<any[]> {\n  const headers: HeadersInit = {};\n  try {\n    const sessionJson = window.localStorage.getItem('hive_session');\n    if (sessionJson) {\n      const session = JSON.parse(sessionJson);\n      headers.Authorization = `Bearer ${process.env.NODE_ENV === 'development' ? 'test-token' : session.token}`;\n    } else {\n      headers.Authorization = `Bearer test-token`;\n    }\n  } catch (error) {\n    headers.Authorization = `Bearer test-token`;\n  }\n\n  const response = await fetch('/api/tools/personal', { headers });\n  \n  if (!response.ok) {\n    throw new Error(`Failed to fetch personal tools: ${response.status}`);\n  }\n  \n  const data = await response.json();\n  return data.tools || [];\n}\n\n// Convert to marketplace tool format\nconst MARKETPLACE_TOOLS = [\n  {\n    id: 'poll-maker',\n    name: 'Poll Maker',\n    description: 'Create interactive polls for spaces and events',\n    category: 'social' as const,\n    type: 'individual' as const,\n    icon: MessageSquare,\n    color: '#3B82F6',\n    downloads: 1247,\n    rating: 4.8,\n    ratingCount: 89,\n    creator: 'HIVE Team',\n    creatorType: 'hive_team' as const,\n    tags: ['polling', 'engagement', 'voting'],\n    version: '2.1.0',\n    lastUpdated: new Date('2024-01-15'),\n    isFeatured: true,\n    isVerified: true,\n    isInstalled: true,\n    isPremium: false,\n    supportedPlatforms: ['web', 'mobile'] as const,\n    requiredPermissions: ['spaces.read', 'spaces.write']\n  },\n  {\n    id: 'study-timer',\n    name: 'Study Timer',\n    description: 'Pomodoro-style timer with focus tracking',\n    category: 'productivity' as const,\n    type: 'individual' as const,\n    icon: Timer,\n    color: '#FFD700',\n    downloads: 892,\n    rating: 4.6,\n    ratingCount: 67,\n    creator: 'Focus Labs',\n    creatorType: 'organization' as const,\n    tags: ['timer', 'productivity', 'study'],\n    version: '1.5.2',\n    lastUpdated: new Date('2024-01-10'),\n    isFeatured: true,\n    isVerified: true,\n    isInstalled: false,\n    isPremium: false,\n    supportedPlatforms: ['web', 'mobile', 'desktop'] as const,\n    requiredPermissions: ['notifications']\n  },\n  {\n    id: 'grade-calculator',\n    name: 'Grade Calculator',\n    description: 'Calculate GPA and track academic progress',\n    category: 'academic' as const,\n    type: 'individual' as const,\n    icon: Calculator,\n    color: '#F59E0B',\n    downloads: 2156,\n    rating: 4.9,\n    ratingCount: 234,\n    creator: 'Academic Tools',\n    creatorType: 'student' as const,\n    tags: ['grades', 'gpa', 'academic'],\n    version: '3.0.1',\n    lastUpdated: new Date('2024-01-08'),\n    isFeatured: false,\n    isVerified: true,\n    isInstalled: true,\n    isPremium: false,\n    supportedPlatforms: ['web', 'mobile'] as const,\n    requiredPermissions: ['profile.read']\n  },\n  {\n    id: 'analytics-dashboard',\n    name: 'Analytics Dashboard',\n    description: 'Track and visualize your space engagement',\n    category: 'productivity' as const,\n    type: 'individual' as const,\n    icon: BarChart3,\n    color: '#10B981',\n    downloads: 543,\n    rating: 4.7,\n    ratingCount: 45,\n    creator: 'HIVE Team',\n    creatorType: 'hive_team' as const,\n    tags: ['analytics', 'dashboard', 'metrics'],\n    version: '1.2.0',\n    lastUpdated: new Date('2024-01-12'),\n    isFeatured: true,\n    isVerified: true,\n    isInstalled: false,\n    isPremium: true,\n    supportedPlatforms: ['web'] as const,\n    requiredPermissions: ['analytics.read', 'spaces.read']\n  }\n];\n\n// Unified Tools Section per @hive.md: Marketplace, Personal Tools, and HiveLab\nexport default function ToolsPage() {\n  const [isClient, setIsClient] = useState(false);\n  const [activeTab, setActiveTab] = useState<'marketplace' | 'personal' | 'hivelab'>('marketplace');\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const { user: _user } = useSession();\n\n  // Temporarily using default flags while fixing React context issue\n  const flags = useMemo(() => ({\n    trackEvent: (_feature: string, _action: string, _metadata?: any) => {\n      console.log('Track event:', _feature, _action, _metadata);\n    }\n  }), []);\n\n  useEffect(() => {\n    setIsClient(true);\n    // Track page view\n    flags.trackEvent('tools', 'view', { page: 'tools-marketplace' });\n  }, [flags]);\n\n  const { data: marketplaceTools, isLoading: marketplaceLoading, error: marketplaceError } = useQuery({\n    queryKey: [\"marketplace-tools\"],\n    queryFn: fetchMarketplaceTools,\n    staleTime: 300000, // 5 minutes\n    enabled: isClient && activeTab === 'marketplace'\n  });\n\n  const { data: personalTools, isLoading: personalLoading, error: personalError } = useQuery({\n    queryKey: [\"personal-tools\"],\n    queryFn: fetchPersonalTools,\n    staleTime: 300000, // 5 minutes\n    enabled: isClient && activeTab === 'personal'\n  });\n\n  const isLoading = marketplaceLoading || personalLoading;\n  const error = marketplaceError || personalError;\n\n  const handleTabChange = (tab: 'marketplace' | 'personal' | 'hivelab') => {\n    setActiveTab(tab);\n    flags.trackEvent('tools', 'tab_change', { tab });\n  };\n\n  const handleToolInstall = async (toolId: string) => {\n    try {\n      // Use session token or test token for API calls\n      const sessionData = window.localStorage.getItem('hive_session');\n      const authToken = sessionData ? 'session-token' : 'test-token';\n      \n      const response = await fetch('/api/tools/install', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${authToken}`,\n        },\n        body: JSON.stringify({ toolId }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || `Installation failed (${response.status})`);\n      }\n\n      flags.trackEvent('tools', 'install', { toolId });\n      \n      // Show success feedback\n      const toolName = (marketplaceTools || MARKETPLACE_TOOLS).find(t => t.id === toolId)?.name || 'Tool';\n      alert(`${toolName} installed successfully!`);\n      \n    } catch (error) {\n      console.error('Failed to install tool:', error);\n      const errorMessage = error instanceof Error ? error.message : 'Failed to install tool';\n      alert(`Installation failed: ${errorMessage}`);\n    }\n  };\n\n  const handleToolPreview = (toolId: string) => {\n    flags.trackEvent('tools', 'preview', { toolId });\n    // Navigate to tool preview page\n    window.location.href = `/tools/${toolId}/preview`;\n  };\n\n  const handleToolAction = (toolId: string, action: string) => {\n    flags.trackEvent('tools', 'action', { toolId, action });\n    \n    switch (action) {\n      case 'edit':\n        window.location.href = `/tools/${toolId}/edit`;\n        break;\n      case 'run':\n        window.location.href = `/tools/${toolId}/run`;\n        break;\n      case 'settings':\n        window.location.href = `/tools/${toolId}/settings`;\n        break;\n      case 'share': {\n        navigator.clipboard.writeText(`${window.location.origin}/tools/${toolId}`);\n        alert('Tool link copied to clipboard!');\n        break;\n      }\n      default:\n        console.log('Unknown action:', action);\n    }\n  };\n\n  const handleCreateTool = (mode: 'visual' | 'template' | 'wizard' = 'visual') => {\n    flags.trackEvent('tools', 'create_start', { mode });\n    // Navigate to HiveLab with mode parameter\n    window.location.href = `/hivelab?mode=${mode}`;\n  };\n\n  return (\n    <ErrorBoundary>\n      <CompleteHIVEToolsSystem\n        activeTab={activeTab}\n        userRole={'student'}\n        onTabChange={handleTabChange}\n        onToolInstall={handleToolInstall}\n        onToolAction={handleToolAction}\n        onToolPreview={handleToolPreview}\n        onCreateTool={handleCreateTool}\n        marketplaceTools={marketplaceTools || MARKETPLACE_TOOLS}\n        personalTools={personalTools || MARKETPLACE_TOOLS.filter(t => t.isInstalled)}\n        loading={isLoading}\n        error={error?.message || null}\n        showDebugLabels={process.env.NODE_ENV === 'development'}\n      />\n    </ErrorBoundary>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/activity/batch/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/activity/insights/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/activity/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/admin/activity-logs/export/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/admin/activity-logs/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/admin/builder-requests/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/admin/dashboard/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/admin/grant-role/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/admin/lookup-user/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/admin/notifications/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/admin/spaces/analytics/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/admin/spaces/bulk/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/admin/spaces/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/admin/users/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/analytics/metrics/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/auth/check-handle/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/auth/complete-onboarding/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/auth/logout/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/auth/send-magic-link/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/auth/session/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/auth/verify-magic-link/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/calendar/[eventId]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/calendar/conflicts/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/calendar/free-time/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/calendar/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/debug-calendar/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/dev-auth/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/feature-flags/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/feed/aggregation/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/feed/algorithm/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/feed/cache/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/feed/content-validation/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/feed/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/feed/search/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/feed/space-filtering/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/feed/updates/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/feedback/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/health/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/notifications/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/privacy/ghost-mode/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/privacy/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/privacy/visibility/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/profile/activity/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/profile/analytics/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/profile/calendar/conflicts/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/profile/calendar/events/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/profile/completion/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/profile/connections/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/profile/dashboard/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/profile/generate-avatar/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/profile/my-spaces/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/profile/privacy/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/profile/public/[handle]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/profile/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/profile/spaces/actions/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/profile/spaces/recommendations/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/profile/spaces/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/profile/stats/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/profile/upload-photo/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/realtime/channels/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/realtime/chat/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/realtime/notifications/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/realtime/presence/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/realtime/send/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/realtime/sse/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/realtime/tool-updates/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/realtime/typing/route.ts","messages":[{"ruleId":"no-undef","severity":2,"message":"'realtimeService' is not defined.","line":71,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":71,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'realtimeService' is not defined.","line":158,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":158,"endColumn":26}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server';\n// Use admin SDK methods since we're in an API route\nimport { dbAdmin } from '@/lib/firebase-admin';\nimport { getCurrentUser } from '@/lib/server-auth';\nimport { logger } from \"@/lib/logger\";\nimport { ApiResponseHelper, HttpStatus, ErrorCodes } from \"@/lib/api-response-types\";\nimport { sseRealtimeService } from '@/lib/sse-realtime-service';\n\n// Typing indicator interfaces\ninterface TypingIndicator {\n  id: string;\n  userId: string;\n  userName: string;\n  channelId: string;\n  spaceId: string;\n  startedAt: string;\n  expiresAt: string;\n  lastUpdate: string;\n}\n\ninterface TypingStatus {\n  channelId: string;\n  isTyping: boolean;\n  typingUsers: Array<{\n    userId: string;\n    userName: string;\n    startedAt: string;\n  }>;\n  lastUpdate: string;\n}\n\n// POST - Start typing indicator\nexport async function POST(request: NextRequest) {\n  try {\n    const user = await getCurrentUser(request);\n    if (!user) {\n      return NextResponse.json(ApiResponseHelper.error(\"Unauthorized\", \"UNAUTHORIZED\"), { status: HttpStatus.UNAUTHORIZED });\n    }\n\n    const body = await request.json();\n    const { channelId, spaceId } = body;\n\n    if (!channelId || !spaceId) {\n      return NextResponse.json(ApiResponseHelper.error(\"Channel ID and space ID are required\", \"INVALID_INPUT\"), { status: HttpStatus.BAD_REQUEST });\n    }\n\n    // Verify access to channel\n    const hasAccess = await verifyChannelAccess(user.uid, channelId, spaceId);\n    if (!hasAccess) {\n      return NextResponse.json(ApiResponseHelper.error(\"Access denied to channel\", \"FORBIDDEN\"), { status: HttpStatus.FORBIDDEN });\n    }\n\n    const now = new Date();\n    const expiresAt = new Date(now.getTime() + 30000); // 30 seconds\n\n    const typingIndicator: TypingIndicator = {\n      id: `typing_${user.uid}_${channelId}`,\n      userId: user.uid,\n      userName: user.displayName || user.email || 'Unknown User',\n      channelId,\n      spaceId,\n      startedAt: now.toISOString(),\n      expiresAt: expiresAt.toISOString(),\n      lastUpdate: now.toISOString()\n    };\n\n    // Store typing indicator in Firestore for persistence\n    await dbAdmin.collection('typingIndicators').doc(typingIndicator.id).set(typingIndicator);\n\n    // Send typing indicator to Firebase Realtime Database\n    await realtimeService.setTypingIndicator(spaceId, user.uid, true);\n\n    // Broadcast typing indicator to channel via WebSocket system\n    await broadcastTypingIndicator(typingIndicator, 'start');\n\n    return NextResponse.json({\n      success: true,\n      typingId: typingIndicator.id,\n      expiresAt: typingIndicator.expiresAt\n    });\n  } catch (error) {\n    logger.error('Error starting typing indicator', { error: error, endpoint: '/api/realtime/typing' });\n    return NextResponse.json(ApiResponseHelper.error(\"Failed to start typing indicator\", \"INTERNAL_ERROR\"), { status: HttpStatus.INTERNAL_SERVER_ERROR });\n  }\n}\n\n// PUT - Update typing indicator (extend timeout)\nexport async function PUT(request: NextRequest) {\n  try {\n    const user = await getCurrentUser(request);\n    if (!user) {\n      return NextResponse.json(ApiResponseHelper.error(\"Unauthorized\", \"UNAUTHORIZED\"), { status: HttpStatus.UNAUTHORIZED });\n    }\n\n    const body = await request.json();\n    const { channelId, spaceId } = body;\n\n    if (!channelId || !spaceId) {\n      return NextResponse.json(ApiResponseHelper.error(\"Channel ID and space ID are required\", \"INVALID_INPUT\"), { status: HttpStatus.BAD_REQUEST });\n    }\n\n    const typingId = `typing_${user.uid}_${channelId}`;\n    const typingDoc = await dbAdmin.collection('typingIndicators').doc(typingId).get();\n\n    if (!typingDoc.exists) {\n      return NextResponse.json(ApiResponseHelper.error(\"No active typing indicator found\", \"RESOURCE_NOT_FOUND\"), { status: HttpStatus.NOT_FOUND });\n    }\n\n    const now = new Date();\n    const expiresAt = new Date(now.getTime() + 30000); // Extend by 30 seconds\n\n    // Update typing indicator\n    await dbAdmin.collection('typingIndicators').doc(typingId).set({\n      ...typingDoc.data(),\n      expiresAt: expiresAt.toISOString(),\n      lastUpdate: now.toISOString()\n    });\n\n    return NextResponse.json({\n      success: true,\n      expiresAt: expiresAt.toISOString()\n    });\n  } catch (error) {\n    logger.error('Error updating typing indicator', { error: error, endpoint: '/api/realtime/typing' });\n    return NextResponse.json(ApiResponseHelper.error(\"Failed to update typing indicator\", \"INTERNAL_ERROR\"), { status: HttpStatus.INTERNAL_SERVER_ERROR });\n  }\n}\n\n// DELETE - Stop typing indicator\nexport async function DELETE(request: NextRequest) {\n  try {\n    const user = await getCurrentUser(request);\n    if (!user) {\n      return NextResponse.json(ApiResponseHelper.error(\"Unauthorized\", \"UNAUTHORIZED\"), { status: HttpStatus.UNAUTHORIZED });\n    }\n\n    const { searchParams } = new URL(request.url);\n    const channelId = searchParams.get('channelId');\n    const spaceId = searchParams.get('spaceId');\n\n    if (!channelId || !spaceId) {\n      return NextResponse.json(ApiResponseHelper.error(\"Channel ID and space ID are required\", \"INVALID_INPUT\"), { status: HttpStatus.BAD_REQUEST });\n    }\n\n    const typingId = `typing_${user.uid}_${channelId}`;\n    const typingDoc = await dbAdmin.collection('typingIndicators').doc(typingId).get();\n\n    if (!typingDoc.exists) {\n      return NextResponse.json(ApiResponseHelper.error(\"No active typing indicator found\", \"RESOURCE_NOT_FOUND\"), { status: HttpStatus.NOT_FOUND });\n    }\n\n    const typingIndicator = { id: typingDoc.id, ...typingDoc.data() } as TypingIndicator;\n\n    // Remove typing indicator from Firestore\n    await dbAdmin.collection('typingIndicators').doc(typingId).delete();\n\n    // Remove typing indicator from Firebase Realtime Database\n    await realtimeService.setTypingIndicator(spaceId, user.uid, false);\n\n    // Broadcast typing stop to channel via WebSocket system\n    await broadcastTypingIndicator(typingIndicator, 'stop');\n\n    return NextResponse.json({\n      success: true,\n      message: 'Typing indicator stopped'\n    });\n  } catch (error) {\n    logger.error('Error stopping typing indicator', { error: error, endpoint: '/api/realtime/typing' });\n    return NextResponse.json(ApiResponseHelper.error(\"Failed to stop typing indicator\", \"INTERNAL_ERROR\"), { status: HttpStatus.INTERNAL_SERVER_ERROR });\n  }\n}\n\n// GET - Get current typing status for a channel\nexport async function GET(request: NextRequest) {\n  try {\n    const user = await getCurrentUser(request);\n    if (!user) {\n      return NextResponse.json(ApiResponseHelper.error(\"Unauthorized\", \"UNAUTHORIZED\"), { status: HttpStatus.UNAUTHORIZED });\n    }\n\n    const { searchParams } = new URL(request.url);\n    const channelId = searchParams.get('channelId');\n    const spaceId = searchParams.get('spaceId');\n\n    if (!channelId || !spaceId) {\n      return NextResponse.json(ApiResponseHelper.error(\"Channel ID and space ID are required\", \"INVALID_INPUT\"), { status: HttpStatus.BAD_REQUEST });\n    }\n\n    // Verify access\n    const hasAccess = await verifyChannelAccess(user.uid, channelId, spaceId);\n    if (!hasAccess) {\n      return NextResponse.json(ApiResponseHelper.error(\"Access denied to channel\", \"FORBIDDEN\"), { status: HttpStatus.FORBIDDEN });\n    }\n\n    // Get active typing indicators for the channel\n    const now = new Date().toISOString();\n    const typingQuery = dbAdmin.collection('typingIndicators')\n      .where('channelId', '==', channelId)\n      .where('expiresAt', '>', now);\n\n    const typingSnapshot = await typingQuery.get();\n    const typingUsers = typingSnapshot.docs\n      .map(doc => doc.data() as TypingIndicator)\n      .filter(indicator => indicator.userId !== user.uid) // Exclude current user\n      .map(indicator => ({\n        userId: indicator.userId,\n        userName: indicator.userName,\n        startedAt: indicator.startedAt\n      }));\n\n    const typingStatus: TypingStatus = {\n      channelId,\n      isTyping: typingUsers.length > 0,\n      typingUsers,\n      lastUpdate: new Date().toISOString()\n    };\n\n    return NextResponse.json(typingStatus);\n  } catch (error) {\n    logger.error('Error getting typing status', { error: error, endpoint: '/api/realtime/typing' });\n    return NextResponse.json(ApiResponseHelper.error(\"Failed to get typing status\", \"INTERNAL_ERROR\"), { status: HttpStatus.INTERNAL_SERVER_ERROR });\n  }\n}\n\n// Helper function to verify channel access\nasync function verifyChannelAccess(userId: string, channelId: string, spaceId: string): Promise<boolean> {\n  try {\n    // Check space membership\n    const memberQuery = dbAdmin.collection('members')\n      .where('userId', '==', userId)\n      .where('spaceId', '==', spaceId)\n      .where('status', '==', 'active');\n\n    const memberSnapshot = await memberQuery.get();\n    if (memberSnapshot.empty) {\n      return false;\n    }\n\n    // Check channel access\n    const channelDoc = await dbAdmin.collection('chatChannels').doc(channelId).get();\n    if (!channelDoc.exists) {\n      return false;\n    }\n\n    const channel = channelDoc.data();\n    if (!channel) {\n      return false;\n    }\n    \n    // Check if user is in channel participants (for private channels)\n    if (channel.type === 'private' && channel.participants && !channel.participants.includes(userId)) {\n      return false;\n    }\n\n    return true;\n  } catch (error) {\n    logger.error('Error verifying channel access', { error: error, endpoint: '/api/realtime/typing' });\n    return false;\n  }\n}\n\n// Helper function to broadcast typing indicator\nasync function broadcastTypingIndicator(indicator: TypingIndicator, action: 'start' | 'stop'): Promise<void> {\n  try {\n    const realtimeMessage = {\n      id: `typing_${action}_${indicator.id}_${Date.now()}`,\n      type: 'chat',\n      channel: `space:${indicator.spaceId}:typing`,\n      senderId: 'system',\n      content: {\n        action: `typing_${action}`,\n        channelId: indicator.channelId,\n        userId: indicator.userId,\n        userName: indicator.userName,\n        timestamp: new Date().toISOString()\n      },\n      metadata: {\n        timestamp: new Date().toISOString(),\n        priority: 'low',\n        requiresAck: false,\n        retryCount: 0\n      },\n      delivery: {\n        sent: [],\n        delivered: [],\n        read: [],\n        failed: []\n      }\n    };\n\n    await dbAdmin.collection('realtimeMessages').add(realtimeMessage);\n  } catch (error) {\n    logger.error('Error broadcasting typing indicator', { error: error, endpoint: '/api/realtime/typing' });\n  }\n}\n\n// Background cleanup function for expired typing indicators\nasync function cleanupExpiredTypingIndicators(): Promise<number> {\n  try {\n    const now = new Date().toISOString();\n    const expiredQuery = dbAdmin.collection('typingIndicators')\n      .where('expiresAt', '<', now);\n\n    const expiredSnapshot = await expiredQuery.get();\n    let cleaned = 0;\n\n    for (const doc of expiredSnapshot.docs) {\n      await doc.ref.delete();\n      cleaned++;\n    }\n\n    return cleaned;\n  } catch (error) {\n    logger.error('Error cleaning up expired typing indicators', { error: error, endpoint: '/api/realtime/typing' });\n    return 0;\n  }\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/realtime/websocket/route.ts","messages":[{"ruleId":"no-undef","severity":2,"message":"'realtimeService' is not defined.","line":123,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":123,"endColumn":26}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server';\n// Use admin SDK methods since we're in an API route\nimport { dbAdmin } from '@/lib/firebase-admin';\nimport { getCurrentUser } from '@/lib/auth-server';\nimport { logger } from \"@/lib/logger\";\nimport { ApiResponseHelper, HttpStatus, ErrorCodes } from \"@/lib/api-response-types\";\nimport { sseRealtimeService } from '@/lib/sse-realtime-service';\n\n// WebSocket connection interfaces\ninterface WebSocketConnection {\n  id: string;\n  userId: string;\n  socketId: string;\n  spaceId?: string;\n  connectionType: 'chat' | 'notifications' | 'tool_updates' | 'presence' | 'feed';\n  status: 'connected' | 'disconnected' | 'reconnecting';\n  channels: string[];\n  metadata: {\n    userAgent: string;\n    connectionTime: string;\n    lastActivity: string;\n    platform: string;\n    clientVersion: string;\n  };\n  settings: {\n    enableNotifications: boolean;\n    enablePresence: boolean;\n    enableToolUpdates: boolean;\n    messagePreferences: {\n      sound: boolean;\n      desktop: boolean;\n      mobile: boolean;\n    };\n  };\n}\n\ninterface RealtimeMessage {\n  id: string;\n  type: 'chat' | 'notification' | 'tool_update' | 'presence' | 'system';\n  channel: string;\n  senderId: string;\n  targetUsers?: string[];\n  content: any;\n  metadata: {\n    timestamp: string;\n    priority: 'low' | 'normal' | 'high' | 'urgent';\n    requiresAck: boolean;\n    expiresAt?: string;\n    retryCount: number;\n  };\n  delivery: {\n    sent: string[];\n    delivered: string[];\n    read: string[];\n    failed: string[];\n  };\n}\n\ninterface ChannelSubscription {\n  userId: string;\n  channel: string;\n  permissions: {\n    canRead: boolean;\n    canWrite: boolean;\n    canModerate: boolean;\n  };\n  filters: {\n    messageTypes: string[];\n    senderFilters: string[];\n    priorityFilter: string;\n  };\n  subscriptionTime: string;\n  lastActivity: string;\n}\n\n// POST - Establish WebSocket connection\nexport async function POST(request: NextRequest) {\n  try {\n    const user = await getCurrentUser(request);\n    if (!user) {\n      return NextResponse.json(ApiResponseHelper.error(\"Unauthorized\", \"UNAUTHORIZED\"), { status: HttpStatus.UNAUTHORIZED });\n    }\n\n    const body = await request.json();\n    const {\n      connectionType = 'notifications',\n      spaceId,\n      channels = [],\n      settings = getDefaultConnectionSettings(),\n      clientInfo = {}\n    } = body;\n\n    // Generate connection ID\n    const connectionId = `conn_${user.uid}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    \n    // Create connection record\n    const connection: WebSocketConnection = {\n      id: connectionId,\n      userId: user.uid,\n      socketId: connectionId, // In real implementation, this would be the actual WebSocket ID\n      spaceId,\n      connectionType,\n      status: 'connected',\n      channels: channels,\n      metadata: {\n        userAgent: request.headers.get('user-agent') || 'Unknown',\n        connectionTime: new Date().toISOString(),\n        lastActivity: new Date().toISOString(),\n        platform: clientInfo.platform || 'web',\n        clientVersion: clientInfo.version || '1.0.0'\n      },\n      settings\n    };\n\n    // Store connection in Firestore\n    await dbAdmin.collection('realtimeConnections').doc(connectionId).set(connection);\n\n    // Subscribe to default channels based on connection type\n    const defaultChannels = await getDefaultChannels(user.uid, connectionType, spaceId);\n    await subscribeToChannels(connectionId, user.uid, defaultChannels);\n\n    // Update user presence in Firebase Realtime Database\n    await realtimeService.updatePresence(user.uid, {\n      status: 'online',\n      connectionId,\n      metadata: {\n        platform: clientInfo.platform || 'web',\n        version: clientInfo.version || '1.0.0'\n      }\n    });\n\n    // Update user presence in Firestore (for persistence)\n    await updateUserPresence(user.uid, 'online', connectionId);\n\n    // Start connection monitoring\n    startConnectionMonitoring(connectionId);\n\n    return NextResponse.json({\n      success: true,\n      connectionId,\n      channels: defaultChannels,\n      settings: connection.settings,\n      metadata: {\n        serverTime: new Date().toISOString(),\n        connectionType,\n        supportedFeatures: [\n          'chat',\n          'notifications', \n          'tool_updates',\n          'presence',\n          'typing_indicators',\n          'message_reactions',\n          'file_sharing'\n        ]\n      }\n    });\n  } catch (error) {\n    logger.error('Error establishing WebSocket connection', { error: error, endpoint: '/api/realtime/websocket' });\n    return NextResponse.json(ApiResponseHelper.error(\"Failed to establish connection\", \"INTERNAL_ERROR\"), { status: HttpStatus.INTERNAL_SERVER_ERROR });\n  }\n}\n\n// GET - Get connection info and channel subscriptions\nexport async function GET(request: NextRequest) {\n  try {\n    const user = await getCurrentUser(request);\n    if (!user) {\n      return NextResponse.json(ApiResponseHelper.error(\"Unauthorized\", \"UNAUTHORIZED\"), { status: HttpStatus.UNAUTHORIZED });\n    }\n\n    const { searchParams } = new URL(request.url);\n    const connectionId = searchParams.get('connectionId');\n    const includeChannels = searchParams.get('includeChannels') === 'true';\n\n    if (connectionId) {\n      // Get specific connection\n      const connectionDoc = await dbAdmin.collection('realtimeConnections').doc(connectionId).get();\n      if (!connectionDoc.exists || connectionDoc.data()?.userId !== user.uid) {\n        return NextResponse.json(ApiResponseHelper.error(\"Connection not found\", \"RESOURCE_NOT_FOUND\"), { status: HttpStatus.NOT_FOUND });\n      }\n\n      const connection = { id: connectionDoc.id, ...connectionDoc.data() };\n      \n      let channels = [];\n      if (includeChannels) {\n        channels = await getUserChannelSubscriptions(user.uid);\n      }\n\n      return NextResponse.json({\n        connection,\n        channels,\n        serverTime: new Date().toISOString()\n      });\n    } else {\n      // Get all user connections\n      const connectionsQuery = dbAdmin.collection('realtimeConnections')\n        .where('userId', '==', user.uid)\n        .where('status', '==', 'connected');\n\n      const connectionsSnapshot = await connectionsQuery.get();\n      const connections = connectionsSnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n\n      const channels = includeChannels ? await getUserChannelSubscriptions(user.uid) : [];\n\n      return NextResponse.json({\n        connections,\n        channels,\n        activeConnections: connections.length,\n        serverTime: new Date().toISOString()\n      });\n    }\n  } catch (error) {\n    logger.error('Error getting connection info', { error: error, endpoint: '/api/realtime/websocket' });\n    return NextResponse.json(ApiResponseHelper.error(\"Failed to get connection info\", \"INTERNAL_ERROR\"), { status: HttpStatus.INTERNAL_SERVER_ERROR });\n  }\n}\n\n// PUT - Update connection settings or channels\nexport async function PUT(request: NextRequest) {\n  try {\n    const user = await getCurrentUser(request);\n    if (!user) {\n      return NextResponse.json(ApiResponseHelper.error(\"Unauthorized\", \"UNAUTHORIZED\"), { status: HttpStatus.UNAUTHORIZED });\n    }\n\n    const body = await request.json();\n    const { connectionId, settings, channels, action = 'update' } = body;\n\n    if (!connectionId) {\n      return NextResponse.json(ApiResponseHelper.error(\"Connection ID required\", \"INVALID_INPUT\"), { status: HttpStatus.BAD_REQUEST });\n    }\n\n    // Verify connection ownership\n    const connectionDoc = await dbAdmin.collection('realtimeConnections').doc(connectionId).get();\n    if (!connectionDoc.exists || connectionDoc.data()?.userId !== user.uid) {\n      return NextResponse.json(ApiResponseHelper.error(\"Connection not found or not owned\", \"RESOURCE_NOT_FOUND\"), { status: HttpStatus.NOT_FOUND });\n    }\n\n    const updates: any = {\n      'metadata.lastActivity': new Date().toISOString()\n    };\n\n    if (settings) {\n      updates.settings = settings;\n    }\n\n    if (channels) {\n      switch (action) {\n        case 'subscribe':\n          await subscribeToChannels(connectionId, user.uid, channels);\n          break;\n        case 'unsubscribe':\n          await unsubscribeFromChannels(connectionId, user.uid, channels);\n          break;\n        case 'replace':\n          await replaceChannelSubscriptions(connectionId, user.uid, channels);\n          break;\n      }\n    }\n\n    // Update connection\n    await dbAdmin.collection('realtimeConnections').doc(connectionId).update(updates);\n\n    return NextResponse.json({\n      success: true,\n      connectionId,\n      action,\n      updatedAt: new Date().toISOString()\n    });\n  } catch (error) {\n    logger.error('Error updating connection', { error: error, endpoint: '/api/realtime/websocket' });\n    return NextResponse.json(ApiResponseHelper.error(\"Failed to update connection\", \"INTERNAL_ERROR\"), { status: HttpStatus.INTERNAL_SERVER_ERROR });\n  }\n}\n\n// DELETE - Close WebSocket connection\nexport async function DELETE(request: NextRequest) {\n  try {\n    const user = await getCurrentUser(request);\n    if (!user) {\n      return NextResponse.json(ApiResponseHelper.error(\"Unauthorized\", \"UNAUTHORIZED\"), { status: HttpStatus.UNAUTHORIZED });\n    }\n\n    const { searchParams } = new URL(request.url);\n    const connectionId = searchParams.get('connectionId');\n    const closeAll = searchParams.get('closeAll') === 'true';\n\n    if (closeAll) {\n      // Close all connections for user\n      const connectionsQuery = dbAdmin.collection('realtimeConnections')\n        .where('userId', '==', user.uid);\n\n      const connectionsSnapshot = await connectionsQuery.get();\n      let closedCount = 0;\n\n      for (const connectionDoc of connectionsSnapshot.docs) {\n        await closeConnection(connectionDoc.id, user.uid);\n        closedCount++;\n      }\n\n      // Update user presence to offline\n      await updateUserPresence(user.uid, 'offline');\n\n      return NextResponse.json({\n        success: true,\n        closedConnections: closedCount,\n        message: 'All connections closed'\n      });\n    } else if (connectionId) {\n      // Close specific connection\n      const success = await closeConnection(connectionId, user.uid);\n      \n      if (!success) {\n        return NextResponse.json(ApiResponseHelper.error(\"Connection not found or not owned\", \"RESOURCE_NOT_FOUND\"), { status: HttpStatus.NOT_FOUND });\n      }\n\n      // Check if user has other active connections\n      const remainingConnectionsQuery = dbAdmin.collection('realtimeConnections')\n        .where('userId', '==', user.uid)\n        .where('status', '==', 'connected');\n\n      const remainingSnapshot = await remainingConnectionsQuery.get();\n      \n      if (remainingSnapshot.empty) {\n        await updateUserPresence(user.uid, 'offline');\n      }\n\n      return NextResponse.json({\n        success: true,\n        connectionId,\n        message: 'Connection closed'\n      });\n    } else {\n      return NextResponse.json(ApiResponseHelper.error(\"Connection ID required\", \"INVALID_INPUT\"), { status: HttpStatus.BAD_REQUEST });\n    }\n  } catch (error) {\n    logger.error('Error closing connection', { error: error, endpoint: '/api/realtime/websocket' });\n    return NextResponse.json(ApiResponseHelper.error(\"Failed to close connection\", \"INTERNAL_ERROR\"), { status: HttpStatus.INTERNAL_SERVER_ERROR });\n  }\n}\n\n// Helper function to get default connection settings\nfunction getDefaultConnectionSettings(): WebSocketConnection['settings'] {\n  return {\n    enableNotifications: true,\n    enablePresence: true,\n    enableToolUpdates: true,\n    messagePreferences: {\n      sound: true,\n      desktop: true,\n      mobile: true\n    }\n  };\n}\n\n// Helper function to get default channels for connection type\nasync function getDefaultChannels(userId: string, connectionType: string, spaceId?: string): Promise<string[]> {\n  const channels: string[] = [];\n\n  // Always subscribe to user-specific channels\n  channels.push(`user:${userId}:notifications`);\n  channels.push(`user:${userId}:presence`);\n\n  switch (connectionType) {\n    case 'chat':\n      if (spaceId) {\n        channels.push(`space:${spaceId}:chat`);\n        channels.push(`space:${spaceId}:typing`);\n      }\n      break;\n\n    case 'notifications': {\n      channels.push('system:announcements');\n      // Add space notification channels for user's spaces\n      const userSpaces = await getUserSpaces(userId);\n      userSpaces.forEach(space => {\n        channels.push(`space:${space}:notifications`);\n      });\n      break;\n    }\n\n    case 'tool_updates':\n      if (spaceId) {\n        channels.push(`space:${spaceId}:tools`);\n      }\n      channels.push(`user:${userId}:tools`);\n      break;\n\n    case 'presence':\n      if (spaceId) {\n        channels.push(`space:${spaceId}:presence`);\n      }\n      break;\n\n    case 'feed':\n      channels.push(`user:${userId}:feed`);\n      break;\n  }\n\n  return channels;\n}\n\n// Helper function to get user's spaces\nasync function getUserSpaces(userId: string): Promise<string[]> {\n  try {\n    const membershipsQuery = dbAdmin.collection('members')\n      .where('userId', '==', userId)\n      .where('status', '==', 'active');\n\n    const membershipsSnapshot = await membershipsQuery.get();\n    return membershipsSnapshot.docs.map(doc => doc.data().spaceId);\n  } catch (error) {\n    logger.error('Error getting user spaces', { error: error, endpoint: '/api/realtime/websocket' });\n    return [];\n  }\n}\n\n// Helper function to subscribe to channels\nasync function subscribeToChannels(connectionId: string, userId: string, channels: string[]): Promise<void> {\n  try {\n    for (const channel of channels) {\n      const subscription: ChannelSubscription = {\n        userId,\n        channel,\n        permissions: await getChannelPermissions(userId, channel),\n        filters: {\n          messageTypes: ['all'],\n          senderFilters: [],\n          priorityFilter: 'normal'\n        },\n        subscriptionTime: new Date().toISOString(),\n        lastActivity: new Date().toISOString()\n      };\n\n      const subscriptionId = `${connectionId}_${channel}`;\n      await dbAdmin.collection('channelSubscriptions').doc(subscriptionId).set({\n        ...subscription,\n        connectionId\n      });\n    }\n\n    // Update connection with new channels\n    const connectionDoc = await dbAdmin.collection('realtimeConnections').doc(connectionId).get();\n    if (connectionDoc.exists) {\n      const currentChannels = connectionDoc.data()?.channels || [];\n      const updatedChannels = [...new Set([...currentChannels, ...channels])];\n      \n      await dbAdmin.collection('realtimeConnections').doc(connectionId).update({\n        channels: updatedChannels\n      });\n    }\n  } catch (error) {\n    logger.error('Error subscribing to channels', { error: error, endpoint: '/api/realtime/websocket' });\n  }\n}\n\n// Helper function to get channel permissions\nasync function getChannelPermissions(userId: string, channel: string): Promise<ChannelSubscription['permissions']> {\n  // Parse channel format: type:id:subtype\n  const [type, id, subtype] = channel.split(':');\n\n  switch (type) {\n    case 'user':\n      return {\n        canRead: id === userId,\n        canWrite: id === userId,\n        canModerate: id === userId\n      };\n\n    case 'space': {\n      // Check space membership and role\n      const membershipQuery = dbAdmin.collection('members')\n        .where('userId', '==', userId)\n        .where('spaceId', '==', id)\n        .where('status', '==', 'active');\n\n      const membershipSnapshot = await membershipQuery.get();\n      if (membershipSnapshot.empty) {\n        return { canRead: false, canWrite: false, canModerate: false };\n      }\n\n      const memberData = membershipSnapshot.docs[0].data();\n      const role = memberData.role || 'member';\n\n      return {\n        canRead: true,\n        canWrite: ['builder', 'admin', 'moderator'].includes(role) || subtype !== 'announcements',\n        canModerate: ['admin', 'moderator'].includes(role)\n      };\n    }\n\n    case 'system':\n      return {\n        canRead: true,\n        canWrite: false, // Only system can write to system channels\n        canModerate: false\n      };\n\n    default:\n      return { canRead: false, canWrite: false, canModerate: false };\n  }\n}\n\n// Helper function to unsubscribe from channels\nasync function unsubscribeFromChannels(connectionId: string, userId: string, channels: string[]): Promise<void> {\n  try {\n    for (const channel of channels) {\n      const subscriptionId = `${connectionId}_${channel}`;\n      await dbAdmin.collection('channelSubscriptions').doc(subscriptionId).delete();\n    }\n\n    // Update connection channels\n    const connectionDoc = await dbAdmin.collection('realtimeConnections').doc(connectionId).get();\n    if (connectionDoc.exists) {\n      const currentChannels = connectionDoc.data()?.channels || [];\n      const updatedChannels = currentChannels.filter((ch: string) => !channels.includes(ch));\n      \n      await dbAdmin.collection('realtimeConnections').doc(connectionId).update({\n        channels: updatedChannels\n      });\n    }\n  } catch (error) {\n    logger.error('Error unsubscribing from channels', { error: error, endpoint: '/api/realtime/websocket' });\n  }\n}\n\n// Helper function to replace channel subscriptions\nasync function replaceChannelSubscriptions(connectionId: string, userId: string, channels: string[]): Promise<void> {\n  try {\n    // Get current subscriptions\n    const currentSubscriptionsQuery = dbAdmin.collection('channelSubscriptions')\n      .where('connectionId', '==', connectionId);\n\n    const currentSubscriptionsSnapshot = await currentSubscriptionsQuery.get();\n    \n    // Remove all current subscriptions\n    for (const subDoc of currentSubscriptionsSnapshot.docs) {\n      await subDoc.ref.delete();\n    }\n\n    // Add new subscriptions\n    await subscribeToChannels(connectionId, userId, channels);\n  } catch (error) {\n    logger.error('Error replacing channel subscriptions', { error: error, endpoint: '/api/realtime/websocket' });\n  }\n}\n\n// Helper function to get user channel subscriptions\nasync function getUserChannelSubscriptions(userId: string): Promise<any[]> {\n  try {\n    const subscriptionsQuery = dbAdmin.collection('channelSubscriptions')\n      .where('userId', '==', userId);\n\n    const subscriptionsSnapshot = await subscriptionsQuery.get();\n    return subscriptionsSnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    }));\n  } catch (error) {\n    logger.error('Error getting channel subscriptions', { error: error, endpoint: '/api/realtime/websocket' });\n    return [];\n  }\n}\n\n// Helper function to update user presence\nasync function updateUserPresence(userId: string, status: 'online' | 'offline' | 'away', connectionId?: string): Promise<void> {\n  try {\n    const presenceData = {\n      userId,\n      status,\n      lastSeen: new Date().toISOString(),\n      connectionId,\n      updatedAt: new Date().toISOString()\n    };\n\n    await dbAdmin.collection('userPresence').doc(userId).set(presenceData);\n\n    // Broadcast presence update to relevant channels\n    const userSpaces = await getUserSpaces(userId);\n    for (const spaceId of userSpaces) {\n      await broadcastPresenceUpdate(spaceId, userId, status);\n    }\n  } catch (error) {\n    logger.error('Error updating user presence', { error: error, endpoint: '/api/realtime/websocket' });\n  }\n}\n\n// Helper function to broadcast presence update\nasync function broadcastPresenceUpdate(spaceId: string, userId: string, status: string): Promise<void> {\n  try {\n    const presenceMessage: RealtimeMessage = {\n      id: `presence_${userId}_${Date.now()}`,\n      type: 'presence',\n      channel: `space:${spaceId}:presence`,\n      senderId: 'system',\n      content: {\n        userId,\n        status,\n        timestamp: new Date().toISOString()\n      },\n      metadata: {\n        timestamp: new Date().toISOString(),\n        priority: 'low',\n        requiresAck: false,\n        retryCount: 0\n      },\n      delivery: {\n        sent: [],\n        delivered: [],\n        read: [],\n        failed: []\n      }\n    };\n\n    await dbAdmin.collection('realtimeMessages').add(presenceMessage);\n  } catch (error) {\n    logger.error('Error broadcasting presence update', { error: error, endpoint: '/api/realtime/websocket' });\n  }\n}\n\n// Helper function to close connection\nasync function closeConnection(connectionId: string, userId: string): Promise<boolean> {\n  try {\n    const connectionDoc = await dbAdmin.collection('realtimeConnections').doc(connectionId).get();\n    \n    if (!connectionDoc.exists || connectionDoc.data()?.userId !== userId) {\n      return false;\n    }\n\n    // Update connection status\n    await dbAdmin.collection('realtimeConnections').doc(connectionId).update({\n      status: 'disconnected',\n      'metadata.lastActivity': new Date().toISOString()\n    });\n\n    // Remove channel subscriptions\n    const subscriptionsQuery = dbAdmin.collection('channelSubscriptions')\n      .where('connectionId', '==', connectionId);\n\n    const subscriptionsSnapshot = await subscriptionsQuery.get();\n    for (const subDoc of subscriptionsSnapshot.docs) {\n      await subDoc.ref.delete();\n    }\n\n    return true;\n  } catch (error) {\n    logger.error('Error closing connection', { error: error, endpoint: '/api/realtime/websocket' });\n    return false;\n  }\n}\n\n// Helper function to start connection monitoring\nfunction startConnectionMonitoring(connectionId: string): void {\n  // In a real implementation, this would set up monitoring\n  // For now, we'll just log that monitoring started\n  logger.info('Started monitoring connection', { connectionId, endpoint: '/api/realtime/websocket' });\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/rituals/[ritualId]/participate/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/rituals/[ritualId]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/rituals/join/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/rituals/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/schools/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/search/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/[spaceId]/analytics/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/[spaceId]/builder-status/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/[spaceId]/coordination/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/[spaceId]/events/[eventId]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/[spaceId]/events/[eventId]/rsvp/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/[spaceId]/events/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/[spaceId]/feed/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/[spaceId]/members/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/[spaceId]/membership/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/[spaceId]/posts/[postId]/comments/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/[spaceId]/posts/[postId]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/[spaceId]/posts/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/[spaceId]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/[spaceId]/tools/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/[spaceId]/widgets/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/activate/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/auto-create/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/auto-join/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/auto-join/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/browse/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/cohort/auto-create/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/cohort/initialize/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/cohort/seed-ub/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/diagnostic/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/join/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/leave/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/migrate-ub/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/my/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/overview/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/recommendations/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/request-to-lead/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/rss-integration/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/search/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/seed/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/social-proof/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/test/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/transfer/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/spaces/update-memberships/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/[toolId]/analytics/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/[toolId]/deploy/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/[toolId]/reviews/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/[toolId]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/[toolId]/share/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/[toolId]/state/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/browse/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/deploy/[deploymentId]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/deploy/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/event-system/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/execute/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/feed-integration/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/install/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/personal/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/publish/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/recommendations/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/review/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/search/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/state/[deploymentId]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/tools/usage-stats/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/users/search/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/api/waitlist/join/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/auth/expired/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/auth/login/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","message":"Definition for rule '@typescript-eslint/no-unused-vars' was not found.","line":32,"column":3,"endLine":32,"endColumn":64,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect, Suspense } from 'react';\n\n// Force dynamic rendering to avoid SSG issues with auth\nexport const dynamic = 'force-dynamic';\nimport { useSearchParams, useRouter } from 'next/navigation';\nimport { Loader2, Mail, ArrowLeft } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport Link from 'next/link';\nimport { HiveButton, HiveInput, HiveCard, HiveLogo } from \"@hive/ui\";\nimport { HiveModal } from \"@/components/temp-stubs\";\n\ninterface LoginFormData {\n  email: string;\n}\n\nfunction LoginPageContent() {\n  const searchParams = useSearchParams();\n  const router = useRouter();\n  \n  // Safely get search params with null checks\n  const schoolId = searchParams?.get('schoolId') || null;\n  const schoolName = searchParams?.get('schoolName') || null;\n  const schoolDomain = searchParams?.get('domain') || null;\n\n  const [formData, setFormData] = useState<LoginFormData>({ email: '' });\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState(false);\n  const [devMagicLink, setDevMagicLink] = useState<string | null>(null);\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [_isRedirecting, _setIsRedirecting] = useState(false);\n\n  // Redirect if missing required school context\n  useEffect(() => {\n    if (!schoolId || !schoolName || !schoolDomain) {\n      router.push('/schools');\n    }\n  }, [schoolId, schoolName, schoolDomain, router]);\n\n  // Show loading if redirecting due to missing school context\n  if (!schoolId || !schoolName || !schoolDomain) {\n    return (\n      <div className=\"min-h-screen bg-[var(--hive-background-primary)] flex items-center justify-center\">\n        <div className=\"text-center space-y-4\">\n          <Loader2 className=\"h-8 w-8 text-[var(--hive-brand-primary)] animate-spin mx-auto\" />\n          <p className=\"text-[var(--hive-text-secondary)]\">Redirecting to school selection...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError(null);\n\n    // Validate email before submitting\n    const emailValidationError = validateEmail(formData.email.trim());\n    if (emailValidationError) {\n      setError(emailValidationError);\n      setIsLoading(false);\n      return;\n    }\n\n    try {\n      // Save email for magic link verification\n      window.localStorage.setItem('emailForSignIn', formData.email);\n      \n      const response = await fetch('/api/auth/send-magic-link', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          email: formData.email,\n          schoolId,\n        }),\n      });\n\n      const data = await response.json();\n\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to send magic link');\n      }\n\n      // SECURITY: Development auth bypass removed for production safety\n      // All authentication must go through proper magic link verification\n\n      // Store dev magic link if available\n      if (data.devMode && data.magicLink) {\n        setDevMagicLink(data.magicLink);\n      }\n\n      setSuccess(true);\n    } catch (err) {\n      console.error('Authentication error:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Something went wrong';\n      \n      // Provide more specific error messages\n      if (errorMessage.includes('fetch')) {\n        setError('Network error. Please check your connection and try again.');\n      } else if (errorMessage.includes('Invalid email')) {\n        setError('Please enter a valid email address.');\n      } else if (errorMessage.includes('unauthorized')) {\n        setError('This email is not authorized for this school.');\n      } else {\n        setError(errorMessage);\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const validateEmail = (email: string): string | null => {\n    if (!email) return null;\n    \n    // Basic email format validation\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email)) {\n      return 'Please enter a valid email address';\n    }\n    \n    // Domain validation (bypass for test.edu domain)\n    const isTestDomain = schoolDomain === 'test.edu';\n    if (!isTestDomain && schoolDomain && !email.toLowerCase().endsWith(`@${schoolDomain.toLowerCase()}`)) {\n      return `Please use your @${schoolDomain} email address`;\n    }\n    \n    return null;\n  };\n\n  const handleEmailChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const email = e.target.value;\n    setFormData({ email });\n    \n    // Clear previous errors\n    setError(null);\n    \n    // Validate email if not empty\n    if (email.trim()) {\n      const validationError = validateEmail(email.trim());\n      if (validationError) {\n        setError(validationError);\n      }\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-[var(--hive-background-primary)] text-[var(--hive-text-primary)] flex flex-col\">\n      {/* Background Effects */}\n      <div className=\"absolute inset-0 bg-gradient-to-br from-[var(--hive-background-primary)] via-[var(--hive-background-secondary)] to-[var(--hive-background-primary)]\" />\n      <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_30%_40%,rgba(255,255,255,0.02)_0%,transparent_50%),radial-gradient(circle_at_70%_60%,rgba(255,215,0,0.03)_0%,transparent_50%)]\" />\n      \n      {/* Header */}\n      <motion.div \n        className=\"relative z-10 border-b border-[var(--hive-border-primary)]/20 backdrop-blur-sm\"\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.6 }}\n      >\n        <div className=\"max-w-6xl mx-auto px-6 py-6\">\n          <div className=\"flex items-center justify-between\">\n            <Link \n              href=\"/schools\" \n              className=\"flex items-center gap-2 text-[var(--hive-text-muted)] hover:text-[var(--hive-text-primary)] transition-colors duration-200 group\"\n            >\n              <ArrowLeft className=\"w-4 h-4 group-hover:-translate-x-1 transition-transform duration-200\" />\n              <span className=\"text-sm font-medium\">Back to schools</span>\n            </Link>\n            \n            <div className=\"absolute left-1/2 transform -translate-x-1/2\">\n              <Link href=\"/landing\" className=\"hover:opacity-80 transition-opacity duration-200\">\n                <HiveLogo size=\"md\" variant=\"gold\" showWordmark={true} />\n              </Link>\n            </div>\n            \n            <div className=\"w-32\" />\n          </div>\n        </div>\n      </motion.div>\n\n      {/* Main Content */}\n      <div className=\"relative z-10 flex-1 flex items-center justify-center px-6 py-12\">\n        <div className=\"w-full max-w-md\">\n          \n          {/* Development Mode Badge */}\n          {schoolDomain === 'test.edu' && (\n            <motion.div\n              initial={{ opacity: 0, scale: 0.95 }}\n              animate={{ opacity: 1, scale: 1 }}\n              transition={{ duration: 0.4, delay: 0.1 }}\n              className=\"mb-8\"\n            >\n              <HiveCard className=\"text-center p-4 bg-[var(--hive-overlay-gold-subtle)] border-[var(--hive-border-gold)]\">\n                <p className=\"text-sm text-[var(--hive-brand-primary)] font-medium\">\n                  ðŸ› ï¸ Development Mode Active\n                </p>\n              </HiveCard>\n            </motion.div>\n          )}\n\n          {/* Title Section */}\n          <motion.div\n            className=\"text-center mb-10\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.6, delay: 0.2 }}\n          >\n            <h1 className=\"text-4xl lg:text-5xl font-bold text-[var(--hive-text-primary)] tracking-tight leading-tight mb-4\">\n              Sign in to HIVE\n            </h1>\n            <p className=\"text-lg text-[var(--hive-text-secondary)] leading-relaxed\">\n              Join <span className=\"text-[var(--hive-brand-primary)] font-semibold\">{schoolName}</span> on HIVE\n            </p>\n          </motion.div>\n\n          {/* Login Form */}\n          <motion.div\n            initial={{ opacity: 0, y: 30 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.6, delay: 0.4 }}\n            className=\"mb-6\"\n          >\n            <HiveCard className=\"p-8 bg-[var(--hive-background-secondary)] border-[var(--hive-border-default)] shadow-[var(--hive-shadow-level2)]\">\n              <form onSubmit={handleSubmit} className=\"space-y-6\">\n                <div className=\"space-y-4\">\n                  <div>\n                    <label htmlFor=\"email\" className=\"block text-sm font-medium text-[var(--hive-text-primary)] mb-3\">\n                      School email address\n                    </label>\n                  <HiveInput\n                    id=\"email\"\n                    type=\"email\"\n                    value={formData.email}\n                    onChange={handleEmailChange}\n                    placeholder={schoolDomain === 'test.edu' ? 'Enter any email address (dev mode)' : `Enter your @${schoolDomain} address`}\n                    required\n                    disabled={isLoading}\n                    autoComplete=\"email\"\n                    autoFocus\n                    variant={error ? 'error' : 'default'}\n                    size=\"lg\"\n                    className=\"w-full\"\n                    data-testid=\"email-input\"\n                    aria-label={`Email address for ${schoolName}`}\n                    aria-required=\"true\"\n                    aria-invalid={!!error}\n                    aria-describedby={error ? \"email-error\" : undefined}\n                  />\n                  </div>\n                  \n                  {!error && schoolDomain === 'test.edu' && (\n                    <p className=\"text-xs text-[var(--hive-text-tertiary)]\">\n                      Dev mode: Any email will work for testing\n                    </p>\n                  )}\n                </div>\n\n                <AnimatePresence>\n                  {error && (\n                    <motion.div\n                      initial={{ opacity: 0, height: 0 }}\n                      animate={{ opacity: 1, height: 'auto' }}\n                      exit={{ opacity: 0, height: 0 }}\n                      transition={{ duration: 0.3 }}\n                      className=\"overflow-hidden\"\n                    >\n                      <div id=\"email-error\" className=\"p-4 rounded-xl bg-[var(--hive-status-error)]/10 border border-[var(--hive-status-error)]/20\">\n                        <p className=\"text-sm text-[var(--hive-status-error)]\" role=\"alert\" aria-live=\"polite\">{error}</p>\n                      </div>\n                    </motion.div>\n                  )}\n                </AnimatePresence>\n\n                <HiveButton\n                  type=\"submit\"\n                  disabled={isLoading || !formData.email || !!error}\n                  variant=\"premium\"\n                  size=\"xl\"\n                  className=\"w-full\"\n                  data-testid=\"send-magic-link-button\"\n                  aria-label=\"Send magic link to email\"\n                >\n                  {isLoading ? (\n                    <div className=\"flex items-center justify-center gap-3\">\n                      <Loader2 className=\"w-5 h-5 animate-spin\" />\n                      <span>Sending magic link...</span>\n                    </div>\n                  ) : (\n                    'Send magic link'\n                  )}\n                </HiveButton>\n              </form>\n            </HiveCard>\n          </motion.div>\n\n\n        </div>\n      </div>\n\n      {/* Redirect Success Modal */}\n      <HiveModal\n        isOpen={_isRedirecting}\n        onClose={() => {}}\n        title=\"Authentication successful\"\n        size=\"sm\"\n        showCloseButton={false}\n      >\n        <motion.div \n          className=\"text-center space-y-6\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.3 }}\n        >\n          <div className=\"w-16 h-16 mx-auto rounded-2xl flex items-center justify-center bg-[var(--hive-status-success)]/20 border border-[var(--hive-status-success)]/30\">\n            <Loader2 className=\"w-8 h-8 text-[var(--hive-status-success)] animate-spin\" />\n          </div>\n          \n          <div className=\"space-y-3\">\n            <h3 className=\"text-lg font-semibold text-[var(--hive-text-primary)]\">\n              Welcome to HIVE!\n            </h3>\n            <p className=\"text-[var(--hive-text-secondary)]\">\n              Redirecting you to the platform...\n            </p>\n          </div>\n        </motion.div>\n      </HiveModal>\n\n      {/* Success Modal */}\n      <HiveModal\n        isOpen={success}\n        onClose={() => setSuccess(false)}\n        title=\"Check your inbox\"\n        size=\"sm\"\n      >\n        <motion.div \n          className=\"text-center space-y-6\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.3 }}\n        >\n          <div className=\"w-16 h-16 mx-auto rounded-2xl flex items-center justify-center bg-[var(--hive-status-success)]/20 border border-[var(--hive-status-success)]/30\">\n            <Mail className=\"w-8 h-8 text-[var(--hive-status-success)]\" />\n          </div>\n          \n          <div className=\"space-y-3\">\n            <p className=\"text-[var(--hive-text-secondary)]\">\n              Magic link sent to\n            </p>\n            <p className=\"text-[var(--hive-brand-primary)] font-semibold break-all\">\n              {formData.email}\n            </p>\n            \n            {/* Development mode - show the magic link */}\n            {devMagicLink && schoolDomain === 'test.edu' && (\n              <HiveCard className=\"p-4 bg-[var(--hive-brand-primary)]/10 border-[var(--hive-brand-primary)]/30 text-left\">\n                <p className=\"text-xs text-[var(--hive-brand-primary)] font-medium mb-2\">\n                  ðŸ› ï¸ Development Mode - Magic Link:\n                </p>\n                <a \n                  href={devMagicLink}\n                  className=\"text-xs text-[var(--hive-brand-primary)] hover:underline break-all\"\n                >\n                  {devMagicLink}\n                </a>\n              </HiveCard>\n            )}\n          </div>\n\n          <div className=\"space-y-4 pt-4\">\n            {devMagicLink && schoolDomain === 'test.edu' && (\n              <HiveButton\n                variant=\"premium\"\n                size=\"xl\"\n                className=\"w-full\"\n                onClick={() => window.location.href = devMagicLink}\n              >\n                Use Dev Magic Link\n              </HiveButton>\n            )}\n            <HiveButton\n              variant=\"secondary\"\n              size=\"xl\"\n              className=\"w-full\"\n              onClick={() => {\n                setSuccess(false);\n                setDevMagicLink(null);\n              }}\n            >\n              Send another link\n            </HiveButton>\n          </div>\n        </motion.div>\n      </HiveModal>\n    </div>\n  );\n}\n\nfunction LoginPageWrapper() {\n  return (\n    <Suspense fallback={\n      <div className=\"min-h-screen bg-[var(--hive-background-primary)] flex items-center justify-center\">\n        <div className=\"flex items-center gap-3\">\n          <Loader2 className=\"h-6 w-6 text-[var(--hive-brand-primary)] animate-spin\" />\n          <span className=\"text-[var(--hive-text-secondary)]\">Loading...</span>\n        </div>\n      </div>\n    }>\n      <LoginPageContent />\n    </Suspense>\n  );\n}\n\nexport default function LoginPage() {\n  return <LoginPageWrapper />;\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/auth/verify/page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'searchParams' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":14,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"searchParams"},"fix":{"range":[493,532],"text":""},"desc":"Remove unused variable 'searchParams'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState, Suspense } from \"react\";\n\n// Force dynamic rendering to avoid SSG issues with auth\nexport const dynamic = 'force-dynamic';\nimport { useSearchParams, useRouter } from \"next/navigation\";\nimport { Loader2 } from \"lucide-react\";\nimport { useUnifiedAuth, HiveButton } from \"@hive/ui\";\nimport { AuthLayout } from \"../../../components/auth/auth-layout\";\nimport { AuthStatus } from \"../../../components/auth/auth-status\";\n\nfunction VerifyPageContent() {\n  const searchParams = useSearchParams();\n  const router = useRouter();\n  const unifiedAuth = useUnifiedAuth();\n  \n  const [status, setStatus] = useState<\"loading\" | \"success\" | \"error\">(\"loading\");\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const handleMagicLink = async () => {\n      try {\n        const urlParams = new URLSearchParams(window.location.search);\n        const oobCode = urlParams.get('oobCode');\n        const token = urlParams.get('token');\n        const email = urlParams.get('email');\n        const schoolId = urlParams.get('schoolId');\n        \n        // Get email from URL or fallback to stored email\n        const userEmail = email || (typeof window !== 'undefined' ? window.localStorage.getItem(\"emailForSignIn\") : null);\n        \n        if (!userEmail) {\n          setStatus(\"error\");\n          setError(\"Email is required to complete sign in. Please use the magic link from your email.\");\n          return;\n        }\n\n        if (!schoolId) {\n          setStatus(\"error\");\n          setError(\"School information is missing\");\n          return;\n        }\n\n        // Clear temporary email storage\n        if (typeof window !== 'undefined') {\n          window.localStorage.removeItem(\"emailForSignIn\");\n        }\n\n        // Call our backend API to verify the magic link\n        const response = await fetch('/api/auth/verify-magic-link', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            email: userEmail,\n            schoolId: schoolId,\n            token: oobCode || token || 'DEV_MODE',\n          }),\n        });\n\n        const data = await response.json();\n\n        if (!response.ok) {\n          throw new Error(data.error || 'Failed to verify magic link');\n        }\n\n        setStatus(\"success\");\n\n        // Create user session through UnifiedAuth context\n        if (data.userId) {\n          const sessionData = {\n            userId: data.userId,\n            email: userEmail,\n            schoolId: schoolId,\n            onboardingCompleted: !data.needsOnboarding,\n            verifiedAt: new Date().toISOString(),\n            token: data.token || `dev_token_${data.userId}`,\n            developmentMode: oobCode === 'DEV_MODE' || token === 'DEV_MODE',\n            profileData: data.profileData || {},\n          };\n          \n          // Store session for UnifiedAuth to pick up\n          if (typeof window !== 'undefined') {\n            window.localStorage.setItem('hive_session', JSON.stringify(sessionData));\n            if (sessionData.developmentMode) {\n              window.localStorage.setItem('dev_auth_mode', 'true');\n            }\n          }\n          \n          // Refresh auth state to pick up the new session\n          await unifiedAuth.refreshSession();\n        }\n\n        // Redirect based on onboarding status\n        setTimeout(() => {\n          if (data.needsOnboarding) {\n            router.push(\"/onboarding\");\n          } else {\n            router.push(\"/\");\n          }\n        }, 1500);\n\n      } catch (err: any) {\n        setStatus(\"error\");\n        setError(err.message || \"Failed to verify magic link. The link may have expired or been used already.\");\n      }\n    };\n\n    handleMagicLink();\n  }, [router, unifiedAuth]);\n\n  return (\n    <AuthLayout title=\"Verifying Access\">\n      {status === \"loading\" && (\n        <AuthStatus\n          type=\"loading\"\n          title=\"Verifying your access\"\n          message=\"Please wait while we verify your magic link\"\n        />\n      )}\n\n      {status === \"success\" && (\n        <AuthStatus\n          type=\"success\"\n          title=\"Welcome to HIVE!\"\n          message=\"You've been successfully signed in. Taking you to your digital campus...\"\n        />\n      )}\n\n      {status === \"error\" && (\n        <AuthStatus\n          type=\"error\"\n          title=\"Verification Failed\"\n          message={error || \"Unable to verify your magic link. The link may have expired or been used already.\"}\n          action={\n            <HiveButton\n              variant=\"secondary\"\n              size=\"xl\"\n              className=\"w-full\"\n              onClick={() => router.push(\"/schools\")}\n            >\n              Try again\n            </HiveButton>\n          }\n        />\n      )}\n    </AuthLayout>\n  );\n}\n\nexport default function VerifyPage() {\n  return (\n    <Suspense fallback={\n      <div className=\"min-h-screen bg-[var(--hive-background-primary)] flex items-center justify-center\">\n        <Loader2 className=\"h-8 w-8 text-[var(--hive-brand-primary)] animate-spin\" />\n      </div>\n    }>\n      <VerifyPageContent />\n    </Suspense>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/debug-auth/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/dev-login/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/dev-redirect.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/landing/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/legal/community-guidelines/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/legal/privacy/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/legal/terms/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/not-found.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/onboarding/components/hive-onboarding-wizard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/onboarding/components/steps/hive-academics-step.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/onboarding/components/steps/hive-builder-step.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/onboarding/components/steps/hive-faculty-info-step.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/onboarding/components/steps/hive-handle-step.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/onboarding/components/steps/hive-legal-step.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/onboarding/components/steps/hive-name-step.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/onboarding/components/steps/hive-photo-step.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":246,"column":15,"nodeType":"JSXOpeningElement","endLine":252,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/onboarding/components/steps/hive-user-type-step.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/onboarding/components/steps/hive-welcome-step.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/onboarding/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/profile/[handle]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/providers.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/schools/components/school-search.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/schools/page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'router' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":274,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":274,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"router"},"fix":{"range":[5891,5918],"text":""},"desc":"Remove unused variable 'router'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { Search, Users, ArrowRight, MapPin } from 'lucide-react';\nimport { motion } from 'framer-motion';\nimport { SchoolsPageHeader } from '../../components/temp-stubs';\n\n\ninterface School {\n  id: string;\n  name: string;\n  domain: string;\n  location: string;\n  signupCount?: number;\n  activationThreshold?: number;\n  isActive?: boolean;\n  isComingSoon?: boolean;\n  status?: 'active' | 'waitlist' | 'inactive';\n}\n\n// Fallback for development only\nconst fallbackSchools: School[] = [\n  // Development Test School - Always first for easy access\n  {\n    id: 'test-university',\n    name: 'Test University (Development)',\n    domain: 'test.edu',\n    location: 'Development, NY',\n    signupCount: 999,\n    activationThreshold: 350,\n    isActive: true,\n  },\n  // SUNY Schools - Major Campuses\n  {\n    id: 'ub',\n    name: 'University at Buffalo',\n    domain: 'buffalo.edu',\n    location: 'Buffalo, NY',\n    signupCount: 350,\n    activationThreshold: 350,\n    isActive: true,\n  },\n  {\n    id: 'stonybrook',\n    name: 'Stony Brook University',\n    domain: 'stonybrook.edu',\n    location: 'Stony Brook, NY',\n    signupCount: 312,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'binghamton',\n    name: 'Binghamton University',\n    domain: 'binghamton.edu',\n    location: 'Binghamton, NY',\n    signupCount: 298,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'albany',\n    name: 'University at Albany',\n    domain: 'albany.edu',\n    location: 'Albany, NY',\n    signupCount: 267,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'newpaltz',\n    name: 'SUNY New Paltz',\n    domain: 'newpaltz.edu',\n    location: 'New Paltz, NY',\n    signupCount: 189,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'geneseo',\n    name: 'SUNY Geneseo',\n    domain: 'geneseo.edu',\n    location: 'Geneseo, NY',\n    signupCount: 156,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'oswego',\n    name: 'SUNY Oswego',\n    domain: 'oswego.edu',\n    location: 'Oswego, NY',\n    signupCount: 134,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'brockport',\n    name: 'SUNY Brockport',\n    domain: 'brockport.edu',\n    location: 'Brockport, NY',\n    signupCount: 112,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'cortland',\n    name: 'SUNY Cortland',\n    domain: 'cortland.edu',\n    location: 'Cortland, NY',\n    signupCount: 98,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'plattsburgh',\n    name: 'SUNY Plattsburgh',\n    domain: 'plattsburgh.edu',\n    location: 'Plattsburgh, NY',\n    signupCount: 87,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'oneonta',\n    name: 'SUNY Oneonta',\n    domain: 'oneonta.edu',\n    location: 'Oneonta, NY',\n    signupCount: 76,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'potsdam',\n    name: 'SUNY Potsdam',\n    domain: 'potsdam.edu',\n    location: 'Potsdam, NY',\n    signupCount: 65,\n    activationThreshold: 350,\n    isActive: false,\n  },\n\n  // Private Universities in NY\n  {\n    id: 'nyu',\n    name: 'New York University',\n    domain: 'nyu.edu',\n    location: 'New York, NY',\n    signupCount: 289,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'cornell',\n    name: 'Cornell University',\n    domain: 'cornell.edu',\n    location: 'Ithaca, NY',\n    signupCount: 234,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'columbia',\n    name: 'Columbia University',\n    domain: 'columbia.edu',\n    location: 'New York, NY',\n    signupCount: 187,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'syracuse',\n    name: 'Syracuse University',\n    domain: 'syr.edu',\n    location: 'Syracuse, NY',\n    signupCount: 176,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'rochester',\n    name: 'University of Rochester',\n    domain: 'rochester.edu',\n    location: 'Rochester, NY',\n    signupCount: 145,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'fordham',\n    name: 'Fordham University',\n    domain: 'fordham.edu',\n    location: 'Bronx, NY',\n    signupCount: 123,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'hofstra',\n    name: 'Hofstra University',\n    domain: 'hofstra.edu',\n    location: 'Hempstead, NY',\n    signupCount: 98,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'pace',\n    name: 'Pace University',\n    domain: 'pace.edu',\n    location: 'New York, NY',\n    signupCount: 87,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'rpi',\n    name: 'Rensselaer Polytechnic Institute',\n    domain: 'rpi.edu',\n    location: 'Troy, NY',\n    signupCount: 76,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'stjohns',\n    name: \"St. John's University\",\n    domain: 'stjohns.edu',\n    location: 'Queens, NY',\n    signupCount: 65,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'adelphi',\n    name: 'Adelphi University',\n    domain: 'adelphi.edu',\n    location: 'Garden City, NY',\n    signupCount: 54,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'marist',\n    name: 'Marist College',\n    domain: 'marist.edu',\n    location: 'Poughkeepsie, NY',\n    signupCount: 43,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'iona',\n    name: 'Iona University',\n    domain: 'iona.edu',\n    location: 'New Rochelle, NY',\n    signupCount: 32,\n    activationThreshold: 350,\n    isActive: false,\n  },\n  {\n    id: 'manhattan',\n    name: 'Manhattan College',\n    domain: 'manhattan.edu',\n    location: 'Riverdale, NY',\n    signupCount: 21,\n    activationThreshold: 350,\n    isActive: false,\n  },\n];\n\nexport default function SchoolsPage() {\n  const router = useRouter();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [isComingSoonOpen, setIsComingSoonOpen] = useState(false);\n  const [schools, setSchools] = useState<School[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [isMounted, setIsMounted] = useState(false);\n\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  // Fetch schools from API\n  useEffect(() => {\n    async function fetchSchools() {\n      try {\n        const response = await fetch('/api/schools');\n        if (response.ok) {\n          const schoolsData = await response.json();\n          const formattedSchools = schoolsData\n            .filter((school: any) => school && school.name && school.location)\n            .map((school: any) => {\n              // Handle location field - convert object to string if needed\n              let locationString = school.location;\n              if (typeof school.location === 'object' && school.location !== null) {\n                // Convert {city, state, country} object to string\n                const { city, state, country } = school.location;\n                locationString = [city, state, country].filter(Boolean).join(', ');\n              }\n              \n              return {\n                ...school,\n                location: locationString,\n                isActive: school.status === 'active',\n                isComingSoon: school.status === 'waitlist',\n                signupCount: school.signupCount || 0,\n                activationThreshold: school.activationThreshold || 350\n              };\n            });\n          setSchools(formattedSchools);\n        } else {\n          // Fallback to hardcoded data only in development\n          console.warn('Failed to fetch schools from API, using fallback');\n          setSchools(fallbackSchools);\n        }\n      } catch (_error) {\n        console.error('Error fetching schools:', _error);\n        setSchools(fallbackSchools);\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchSchools();\n  }, []);\n\n  const filteredSchools = schools.filter(school => {\n    if (!school || !school.name || !school.location) return false;\n    return school.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n           school.location.toLowerCase().includes(searchTerm.toLowerCase());\n  });\n\n  const handleSchoolSelect = (school: School) => {\n    if (school.isActive) {\n      const params = new URLSearchParams({\n        schoolId: school.id,\n        schoolName: school.name,\n        domain: school.domain,\n      });\n      // Use window.location for more reliable navigation in E2E tests\n      window.location.href = `/auth/login?${params.toString()}`;\n    }\n  };\n\n  if (!isMounted) {\n    return (\n      <div className=\"relative min-h-screen overflow-hidden hive-font-sans bg-hive-background-primary text-hive-text-primary\" \n           style={{ backgroundColor: '#0A0A0B', color: '#F5F5F7' }}>\n        <div className=\"flex items-center justify-center min-h-screen\">\n          <div className=\"w-6 h-6 border-2 border-white/20 border-t-white/60 rounded-full animate-spin\" />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <React.Fragment>\n      <motion.div \n        className=\"relative min-h-screen overflow-hidden hive-font-sans bg-hive-background-primary text-hive-text-primary\" \n        style={{ backgroundColor: '#0A0A0B', color: '#F5F5F7' }}\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ duration: 0.3, ease: [0.23, 1, 0.32, 1] }}\n      >\n      {/* Enhanced Glassy Background */}\n      <div className=\"absolute inset-0\" style={{ \n        background: 'radial-gradient(circle at 30% 40%, rgba(255, 255, 255, 0.02) 0%, transparent 50%), radial-gradient(circle at 70% 60%, rgba(255, 191, 0, 0.03) 0%, transparent 50%)',\n        backdropFilter: 'blur(40px)'\n      }} />\n      \n      {/* Header */}\n      <SchoolsPageHeader onComingSoonClick={() => setIsComingSoonOpen(true)} />\n\n      {/* Main Content */}\n      <div className=\"relative z-10 max-w-6xl mx-auto p-6 py-12\">\n        <div className=\"text-center mb-16\">\n          <h1 className=\"hive-font-sans text-4xl md:text-5xl lg:text-6xl font-bold leading-tight tracking-tight mb-6\" style={{ color: '#F5F5F7' }}>\n            Find your campus\n          </h1>\n          <p className=\"hive-font-sans text-lg md:text-xl leading-relaxed max-w-3xl mx-auto mb-8\" style={{ color: '#9A9AA1' }}>\n            Join the students building the future of campus life at your university\n          </p>\n\n          {/* Search Bar */}\n          <div className=\"max-w-md mx-auto\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/40\" />\n              <input\n                type=\"text\"\n                placeholder=\"Search universities...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/40 focus:outline-none focus:border-white/20 focus:bg-white/10 transition-all\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Loading State */}\n        {loading && (\n          <div className=\"text-center py-12\">\n            <div className=\"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <div className=\"w-6 h-6 border-2 border-white/20 border-t-white/60 rounded-full animate-spin\" />\n            </div>\n            <p className=\"hive-font-sans text-sm\" style={{ color: '#9A9AA1' }}>\n              Loading universities...\n            </p>\n          </div>\n        )}\n\n        {/* Schools Grid */}\n        {!loading && (\n          <div className=\"grid gap-4 hive-animate-liquid-reveal mb-16\">\n            {filteredSchools.map((school, _index) => (\n            <div\n              key={school.id}\n              data-testid={`school-${school.id}`}\n              className=\"group relative overflow-hidden rounded-2xl border border-white/5 hover:border-white/10 transition-all duration-500 cursor-pointer hive-interactive\"\n              onClick={() => handleSchoolSelect(school)}\n              style={{\n                background: 'rgba(255, 255, 255, 0.02)',\n                backdropFilter: 'blur(20px)',\n                boxShadow: '0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1)'\n              }}\n            >\n              {/* Glass reflection effect */}\n              <div className=\"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-transparent opacity-50\" />\n              <div className=\"absolute inset-0 bg-gradient-to-tl from-yellow-500/5 via-transparent to-transparent\" />\n              \n              <div className=\"relative p-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center hive-gap-md mb-3\">\n                      <h3 className=\"hive-font-sans text-lg font-semibold tracking-tight\" style={{ color: '#F5F5F7' }}>\n                        {school.name}\n                      </h3>\n                      {school.isActive && (\n                        <div className=\"px-3 py-1 bg-white/10 backdrop-blur-sm text-white text-xs rounded-full border border-white/20 font-medium\">\n                          LIVE\n                        </div>\n                      )}\n                      {school.isComingSoon && (\n                        <div className=\"px-3 py-1 bg-yellow-500/10 backdrop-blur-sm text-yellow-300 text-xs rounded-full border border-yellow-500/20 font-medium\">\n                          SOON\n                        </div>\n                      )}\n                    </div>\n                    \n                    <div className=\"flex items-center hive-gap-md hive-font-sans text-sm\" style={{ color: '#9A9AA1' }}>\n                      <div className=\"flex items-center hive-gap-xs\">\n                        <MapPin className=\"w-4 h-4\" />\n                        <span className=\"font-medium\">{school.location}</span>\n                      </div>\n                      <div className=\"flex items-center hive-gap-xs\">\n                        <Users className=\"w-4 h-4\" />\n                        <span className=\"font-mono text-xs\">@{school.domain}</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"ml-6 opacity-60 group-hover:opacity-100 transition-opacity\">\n                    {school.isActive ? (\n                      <div className=\"flex items-center hive-gap-sm text-white\">\n                        <span className=\"hive-font-sans font-medium text-sm\">Enter HIVE</span>\n                        <ArrowRight className=\"w-4 h-4\" />\n                      </div>\n                    ) : (\n                      <div className=\"text-center\">\n                        <div className=\"hive-font-sans text-sm font-medium\" style={{ color: '#C1C1C4' }}>\n                          {school.isComingSoon ? 'Coming Soon' : 'Join Waitlist'}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n              \n              {/* Hover glow effect */}\n              <div className=\"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none\">\n                <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent\" />\n              </div>\n            </div>\n            ))}\n          </div>\n        )}\n\n        {/* Empty State */}\n        {filteredSchools.length === 0 && (\n          <div className=\"text-center py-12 hive-animate-silk-emerge\">\n            <div className=\"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <Search className=\"w-6 h-6 text-white/40\" />\n            </div>\n            <h3 className=\"hive-font-sans text-lg font-semibold mb-2\" style={{ color: '#F5F5F7' }}>\n              No universities found\n            </h3>\n            <p className=\"hive-font-sans text-sm leading-relaxed\" style={{ color: '#9A9AA1' }}>\n              Try adjusting your search or check back later for more campuses\n            </p>\n          </div>\n        )}\n\n        {/* Call to Action */}\n        <div className=\"text-center\">\n          <div className=\"hive-glass-strong p-8 rounded-xl max-w-2xl mx-auto\" style={{ border: '1px solid rgba(255, 191, 0, 0.3)' }}>\n            <h3 className=\"hive-font-sans text-xl md:text-2xl font-bold mb-4 tracking-tight\" style={{ color: '#F5F5F7' }}>\n              Don't see your university?\n            </h3>\n            <p className=\"hive-font-sans text-base mb-6 leading-relaxed\" style={{ color: '#9A9AA1' }}>\n              We're expanding to more campuses every month. Join our general waitlist to be notified when HIVE arrives at your school.\n            </p>\n            <button className=\"hive-button-primary px-8 py-3\">\n              Join General Waitlist\n            </button>\n          </div>\n        </div>\n      </div>\n      </motion.div>\n\n      {/* Coming Soon Modal */}\n      {isComingSoonOpen && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-black/90 border border-white/10 rounded-2xl p-8 max-w-md w-full\">\n            <h2 className=\"text-2xl font-bold text-white mb-4\">What's Coming to HIVE</h2>\n            <p className=\"text-white/70 mb-6\">\n              We're building the future of campus collaboration. Check back soon for new features and campus expansions.\n            </p>\n            <button\n              onClick={() => setIsComingSoonOpen(false)}\n              className=\"w-full bg-white/10 hover:bg-white/20 text-white px-6 py-3 rounded-xl transition-all\"\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      )}\n    </React.Fragment>\n  );\n} ","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/waitlist/[schoolId]/components/waitlist-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/waitlist/[schoolId]/components/waitlist-progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/app/waitlist/[schoolId]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/app-layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/auth-guard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/auth-test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/auth/advanced-auth-loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/auth/auth-layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/auth/auth-status.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/enhanced-dashboard-layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/error-boundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/error-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/events/create-event-modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/events/event-details-modal.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Alert' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Alert"},"fix":{"range":[108,156],"text":""},"desc":"Remove unused variable 'Alert'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState } from \"react\";\nimport { HiveModal, Button, Badge, Card } from \"@hive/ui\";\nimport { Alert } from \"@/components/temp-stubs\";\nimport { \n  Calendar, \n  MapPin, \n  Users, \n  Clock, \n  Zap, \n  Star,\n  Heart,\n  MessageCircle,\n  Share2,\n  ExternalLink,\n  Settings,\n  UserPlus,\n  AlertTriangle,\n  CheckCircle\n} from \"lucide-react\";\nimport { EventToolIntegration } from \"./event-tool-integration\";\n\ninterface EventDetailsModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  event: EventData | null;\n  currentUserId?: string;\n  onRSVP: (_eventId: string, _status: 'going' | 'interested' | 'not_going') => void;\n  onBookmark: (_eventId: string) => void;\n}\n\ninterface EventData {\n  id: string;\n  title: string;\n  description: string;\n  type: 'academic' | 'social' | 'professional' | 'recreational' | 'official';\n  organizer: {\n    id: string;\n    name: string;\n    handle: string;\n    avatar?: string;\n    verified?: boolean;\n  };\n  space?: {\n    id: string;\n    name: string;\n    type: string;\n  };\n  datetime: {\n    start: string;\n    end: string;\n    timezone: string;\n  };\n  location: {\n    type: 'physical' | 'virtual' | 'hybrid';\n    name: string;\n    address?: string;\n    virtualLink?: string;\n  };\n  capacity: {\n    max: number;\n    current: number;\n    waitlist: number;\n  };\n  tools: string[];\n  tags: string[];\n  visibility: 'public' | 'space_only' | 'invited_only';\n  rsvpStatus?: 'going' | 'interested' | 'not_going' | null;\n  isBookmarked: boolean;\n  engagement: {\n    going: number;\n    interested: number;\n    comments: number;\n    shares: number;\n  };\n  requirements?: string[];\n  createdAt: string;\n  updatedAt: string;\n}\n\n\nexport function EventDetailsModal({ \n  isOpen, \n  onClose, \n  event, \n  currentUserId,\n  onRSVP, \n  onBookmark \n}: EventDetailsModalProps) {\n  const [activeTab, setActiveTab] = useState<'details' | 'tools' | 'attendees' | 'discussion'>('details');\n  const [copiedLink, setCopiedLink] = useState(false);\n\n  if (!event) return null;\n\n  const formatEventTime = (startTime: string, endTime: string) => {\n    const start = new Date(startTime);\n    const end = new Date(endTime);\n    const now = new Date();\n    \n    const isToday = start.toDateString() === now.toDateString();\n    const isTomorrow = start.toDateString() === new Date(now.getTime() + 24 * 60 * 60 * 1000).toDateString();\n    \n    let dayText = '';\n    if (isToday) dayText = 'Today';\n    else if (isTomorrow) dayText = 'Tomorrow';\n    else dayText = start.toLocaleDateString('en-US', { \n      weekday: 'long', \n      month: 'long', \n      day: 'numeric',\n      year: start.getFullYear() !== now.getFullYear() ? 'numeric' : undefined \n    });\n    \n    const timeText = `${start.toLocaleTimeString('en-US', { \n      hour: 'numeric', \n      minute: '2-digit',\n      hour12: true \n    })} - ${end.toLocaleTimeString('en-US', { \n      hour: 'numeric', \n      minute: '2-digit',\n      hour12: true \n    })}`;\n    \n    return { dayText, timeText };\n  };\n\n  const getEventTypeColor = (type: EventData['type']) => {\n    switch (type) {\n      case 'academic': return 'bg-blue-500';\n      case 'social': return 'bg-pink-500';\n      case 'professional': return 'bg-green-500';\n      case 'recreational': return 'bg-orange-500';\n      case 'official': return 'bg-purple-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  const getEventTypeIcon = (type: EventData['type']) => {\n    switch (type) {\n      case 'academic': return 'ðŸ“š';\n      case 'social': return 'ðŸŽ‰';\n      case 'professional': return 'ðŸ’¼';\n      case 'recreational': return 'ðŸŽ®';\n      case 'official': return 'ðŸ›ï¸';\n      default: return 'ðŸ“…';\n    }\n  };\n\n\n  const { dayText, timeText } = formatEventTime(event.datetime.start, event.datetime.end);\n  const isEventFull = event.capacity.current >= event.capacity.max;\n  const isEventPast = new Date(event.datetime.end) < new Date();\n  const isEventSoon = new Date(event.datetime.start) < new Date(Date.now() + 24 * 60 * 60 * 1000);\n\n  const handleCopyLink = async () => {\n    try {\n      await navigator.clipboard.writeText(`${window.location.origin}/events/${event.id}`);\n      setCopiedLink(true);\n      setTimeout(() => setCopiedLink(false), 2000);\n    } catch (err) {\n      console.error('Failed to copy link:', err);\n    }\n  };\n\n  const handleToolLaunch = (toolId: string, config?: any) => {\n    // In a real implementation, this would launch the tool in the context of the event\n    console.log(`Launching tool: ${toolId} for event: ${event.id}`, config);\n    // This would integrate with the actual tool system\n    alert(`Tool \"${toolId}\" launching for event attendees...`);\n  };\n\n  return (\n    <HiveModal\n      isOpen={isOpen}\n      onClose={onClose}\n      title=\"\"\n      size=\"xl\"\n      className=\"max-h-[90vh] overflow-hidden\"\n    >\n      <div className=\"flex flex-col h-full\">\n        {/* Event Header */}\n        <div className=\"p-6 border-b border-zinc-800\">\n          <div className=\"flex items-start space-x-4\">\n            <div className={`w-16 h-16 ${getEventTypeColor(event.type)} rounded-xl flex items-center justify-center text-2xl flex-shrink-0`}>\n              {getEventTypeIcon(event.type)}\n            </div>\n            \n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex items-start justify-between mb-2\">\n                <h2 className=\"text-2xl font-bold text-white leading-tight pr-4\">\n                  {event.title}\n                </h2>\n                <div className=\"flex items-center space-x-2 flex-shrink-0\">\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => onBookmark(event.id)}\n                    className={event.isBookmarked ? 'text-hive-gold' : 'text-zinc-400'}\n                  >\n                    <Heart className={`h-5 w-5 ${event.isBookmarked ? 'fill-current' : ''}`} />\n                  </Button>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={handleCopyLink}\n                    className=\"text-zinc-400 hover:text-white\"\n                  >\n                    {copiedLink ? (\n                      <CheckCircle className=\"h-5 w-5 text-green-400\" />\n                    ) : (\n                      <Share2 className=\"h-5 w-5\" />\n                    )}\n                  </Button>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center space-x-3 text-sm text-zinc-400 mb-3\">\n                <div className=\"flex items-center space-x-1\">\n                  <span>{event.organizer.name}</span>\n                  {event.organizer.verified && (\n                    <Star className=\"h-4 w-4 text-hive-gold fill-current\" />\n                  )}\n                </div>\n                {event.space && (\n                  <>\n                    <span>â€¢</span>\n                    <span className=\"text-hive-gold\">{event.space.name}</span>\n                  </>\n                )}\n                <span>â€¢</span>\n                <Badge variant=\"skill-tag\" className=\"text-xs capitalize\">\n                  {event.type}\n                </Badge>\n              </div>\n\n              {/* Quick Stats */}\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\n                <div className=\"flex items-center space-x-2\">\n                  <Clock className=\"h-4 w-4 text-zinc-400\" />\n                  <div>\n                    <div className=\"text-white font-medium\">{dayText}</div>\n                    <div className=\"text-zinc-400\">{timeText}</div>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center space-x-2\">\n                  <MapPin className=\"h-4 w-4 text-zinc-400\" />\n                  <div>\n                    <div className=\"text-white font-medium\">{event.location.type === 'virtual' ? 'Virtual' : 'In-Person'}</div>\n                    <div className=\"text-zinc-400 truncate\">{event.location.name}</div>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center space-x-2\">\n                  <Users className=\"h-4 w-4 text-zinc-400\" />\n                  <div>\n                    <div className=\"text-white font-medium\">{event.capacity.current}/{event.capacity.max}</div>\n                    <div className=\"text-zinc-400\">attending</div>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center space-x-2\">\n                  <Zap className=\"h-4 w-4 text-zinc-400\" />\n                  <div>\n                    <div className=\"text-white font-medium\">{event.tools.length}</div>\n                    <div className=\"text-zinc-400\">tools</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* RSVP Actions */}\n          <div className=\"flex items-center justify-between mt-6 pt-4 border-t border-zinc-800\">\n            <div className=\"flex items-center space-x-3\">\n              {!isEventPast && (\n                <>\n                  <Button\n                    variant={event.rsvpStatus === 'going' ? 'primary' : 'outline'}\n                    onClick={() => onRSVP(event.id, event.rsvpStatus === 'going' ? 'not_going' : 'going')}\n                    disabled={isEventFull && event.rsvpStatus !== 'going'}\n                    className=\"flex items-center space-x-2\"\n                  >\n                    <CheckCircle className=\"h-4 w-4\" />\n                    <span>Going ({event.engagement.going})</span>\n                  </Button>\n                  \n                  <Button\n                    variant={event.rsvpStatus === 'interested' ? 'primary' : 'outline'}\n                    onClick={() => onRSVP(event.id, event.rsvpStatus === 'interested' ? 'not_going' : 'interested')}\n                  >\n                    <Star className=\"h-4 w-4\" />\n                    <span>Interested ({event.engagement.interested})</span>\n                  </Button>\n                </>\n              )}\n              \n              {isEventFull && event.rsvpStatus !== 'going' && (\n                <Badge variant=\"destructive\" className=\"flex items-center space-x-1\">\n                  <AlertTriangle className=\"h-3 w-3\" />\n                  <span>Event Full</span>\n                </Badge>\n              )}\n              \n              {isEventPast && (\n                <Badge variant=\"skill-tag\" className=\"flex items-center space-x-1\">\n                  <Clock className=\"h-3 w-3\" />\n                  <span>Event Ended</span>\n                </Badge>\n              )}\n            </div>\n\n            {isEventSoon && event.rsvpStatus === 'going' && (\n              <Badge variant=\"building-tools\" className=\"animate-pulse\">\n                Starting Soon!\n              </Badge>\n            )}\n          </div>\n        </div>\n\n        {/* Tab Navigation */}\n        <div className=\"flex space-x-1 px-6 pt-4 border-b border-zinc-800\">\n          {[\n            { id: 'details', label: 'Details', icon: Calendar },\n            { id: 'tools', label: 'Tools', icon: Zap, count: event.tools.length },\n            { id: 'attendees', label: 'Attendees', icon: Users, count: event.capacity.current },\n            { id: 'discussion', label: 'Discussion', icon: MessageCircle, count: event.engagement.comments }\n          ].map((tab) => {\n            const Icon = tab.icon;\n            return (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id as any)}\n                className={`flex items-center space-x-2 px-4 py-2 rounded-t-lg transition-colors ${\n                  activeTab === tab.id\n                    ? 'bg-hive-gold text-hive-obsidian font-medium'\n                    : 'text-zinc-400 hover:text-white hover:bg-zinc-800/50'\n                }`}\n              >\n                <Icon className=\"h-4 w-4\" />\n                <span>{tab.label}</span>\n                {tab.count !== undefined && (\n                  <Badge \n                    variant=\"skill-tag\" \n                    className={`text-xs ${activeTab === tab.id ? 'bg-hive-obsidian text-hive-gold' : ''}`}\n                  >\n                    {tab.count}\n                  </Badge>\n                )}\n              </button>\n            );\n          })}\n        </div>\n\n        {/* Tab Content */}\n        <div className=\"flex-1 overflow-y-auto p-6\">\n          {/* Details Tab */}\n          {activeTab === 'details' && (\n            <div className=\"space-y-6\">\n              {/* Description */}\n              <div>\n                <h3 className=\"text-lg font-semibold text-white mb-3\">About this event</h3>\n                <p className=\"text-zinc-300 leading-relaxed\">{event.description}</p>\n              </div>\n\n              {/* Location Details */}\n              <div>\n                <h3 className=\"text-lg font-semibold text-white mb-3\">Location</h3>\n                <Card className=\"p-4 bg-zinc-800/50 border-zinc-700\">\n                  <div className=\"flex items-start space-x-3\">\n                    <MapPin className=\"h-5 w-5 text-zinc-400 mt-0.5\" />\n                    <div>\n                      <div className=\"font-medium text-white\">{event.location.name}</div>\n                      {event.location.address && (\n                        <div className=\"text-sm text-zinc-400 mt-1\">{event.location.address}</div>\n                      )}\n                      {event.location.virtualLink && (\n                        <div className=\"mt-2\">\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => window.open(event.location.virtualLink, '_blank')}\n                            className=\"flex items-center space-x-2\"\n                          >\n                            <ExternalLink className=\"h-4 w-4\" />\n                            <span>Join Virtual Event</span>\n                          </Button>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </Card>\n              </div>\n\n              {/* Requirements */}\n              {event.requirements && event.requirements.length > 0 && (\n                <div>\n                  <h3 className=\"text-lg font-semibold text-white mb-3\">Requirements</h3>\n                  <div className=\"space-y-2\">\n                    {event.requirements.map((req, index) => (\n                      <div key={index} className=\"flex items-center space-x-2 text-sm\">\n                        <CheckCircle className=\"h-4 w-4 text-green-400\" />\n                        <span className=\"text-zinc-300\">{req}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Tags */}\n              {event.tags.length > 0 && (\n                <div>\n                  <h3 className=\"text-lg font-semibold text-white mb-3\">Tags</h3>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {event.tags.map((tag) => (\n                      <Badge key={tag} variant=\"skill-tag\">\n                        #{tag}\n                      </Badge>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Tools Tab */}\n          {activeTab === 'tools' && (\n            <EventToolIntegration\n              eventId={event.id}\n              availableTools={event.tools}\n              isEventActive={isEventSoon || (new Date(event.datetime.start) <= new Date() && new Date() <= new Date(event.datetime.end))}\n              userRole={event.organizer.id === currentUserId ? 'organizer' : event.rsvpStatus === 'going' ? 'attendee' : 'viewer'}\n              onToolLaunch={handleToolLaunch}\n            />\n          )}\n\n          {/* Attendees Tab */}\n          {activeTab === 'attendees' && (\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-lg font-semibold text-white\">\n                  Attendees ({event.capacity.current})\n                </h3>\n                <div className=\"flex items-center space-x-2\">\n                  <Badge variant=\"skill-tag\" className=\"text-xs\">\n                    {event.capacity.max - event.capacity.current} spots left\n                  </Badge>\n                  {event.organizer.id === currentUserId && (\n                    <Button variant=\"outline\" size=\"sm\">\n                      <UserPlus className=\"h-4 w-4 mr-1\" />\n                      Invite\n                    </Button>\n                  )}\n                </div>\n              </div>\n              \n              {/* Attendee List */}\n              <div className=\"space-y-4\">\n                {/* Going Attendees */}\n                <div>\n                  <h4 className=\"text-sm font-medium text-zinc-400 mb-3\">\n                    Going ({event.engagement.going})\n                  </h4>\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n                    {/* Organizer */}\n                    <div className=\"flex items-center space-x-3 p-3 bg-zinc-800/50 rounded-lg\">\n                      <div className=\"w-10 h-10 bg-hive-gold rounded-full flex items-center justify-center\">\n                        <span className=\"text-hive-obsidian font-semibold text-sm\">\n                          {event.organizer.name.split(' ').map(n => n[0]).join('')}\n                        </span>\n                      </div>\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center space-x-2\">\n                          <span className=\"font-medium text-white\">{event.organizer.name}</span>\n                          {event.organizer.verified && (\n                            <Star className=\"h-3 w-3 text-hive-gold fill-current\" />\n                          )}\n                          <Badge variant=\"building-tools\" className=\"text-xs\">\n                            Organizer\n                          </Badge>\n                        </div>\n                        <div className=\"text-sm text-zinc-400\">@{event.organizer.handle}</div>\n                      </div>\n                    </div>\n                    \n                    {/* Mock other attendees */}\n                    {Array.from({ length: Math.min(event.engagement.going - 1, 5) }, (_, i) => (\n                      <div key={i} className=\"flex items-center space-x-3 p-3 bg-zinc-800/50 rounded-lg\">\n                        <div className=\"w-10 h-10 bg-zinc-600 rounded-full flex items-center justify-center\">\n                          <span className=\"text-white font-semibold text-sm\">\n                            {String.fromCharCode(65 + i)}{String.fromCharCode(65 + ((i + 3) % 26))}\n                          </span>\n                        </div>\n                        <div className=\"flex-1\">\n                          <div className=\"font-medium text-white\">\n                            {['Alex Chen', 'Maria Rodriguez', 'David Kim', 'Sarah Johnson', 'Mike Wilson'][i]}\n                          </div>\n                          <div className=\"text-sm text-zinc-400\">\n                            @{['alexc', 'mariar', 'davidk', 'sarahj', 'mikew'][i]}\n                          </div>\n                        </div>\n                        {currentUserId === event.organizer.id && (\n                          <Button variant=\"ghost\" size=\"sm\" className=\"text-zinc-400\">\n                            <MessageCircle className=\"h-4 w-4\" />\n                          </Button>\n                        )}\n                      </div>\n                    ))}\n                    \n                    {event.engagement.going > 6 && (\n                      <div className=\"flex items-center justify-center p-3 bg-zinc-800/30 rounded-lg border-2 border-dashed border-zinc-700\">\n                        <span className=\"text-zinc-400 text-sm\">\n                          +{event.engagement.going - 6} more attendees\n                        </span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n                \n                {/* Interested Attendees */}\n                {event.engagement.interested > 0 && (\n                  <div>\n                    <h4 className=\"text-sm font-medium text-zinc-400 mb-3\">\n                      Interested ({event.engagement.interested})\n                    </h4>\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n                      {Array.from({ length: Math.min(event.engagement.interested, 4) }, (_, i) => (\n                        <div key={i} className=\"flex items-center space-x-3 p-3 bg-zinc-800/30 rounded-lg\">\n                          <div className=\"w-10 h-10 bg-zinc-700 rounded-full flex items-center justify-center\">\n                            <Star className=\"h-4 w-4 text-yellow-400\" />\n                          </div>\n                          <div className=\"flex-1\">\n                            <div className=\"font-medium text-white\">\n                              {['Emma Davis', 'John Smith', 'Lisa Wang', 'Tom Brown'][i]}\n                            </div>\n                            <div className=\"text-sm text-zinc-400\">\n                              @{['emmad', 'johns', 'lisaw', 'tomb'][i]}\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                      \n                      {event.engagement.interested > 4 && (\n                        <div className=\"flex items-center justify-center p-3 bg-zinc-800/20 rounded-lg border-2 border-dashed border-zinc-700\">\n                          <span className=\"text-zinc-400 text-sm\">\n                            +{event.engagement.interested - 4} more interested\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n                \n                {/* Waitlist */}\n                {event.capacity.waitlist > 0 && (\n                  <div>\n                    <h4 className=\"text-sm font-medium text-zinc-400 mb-3\">\n                      Waitlist ({event.capacity.waitlist})\n                    </h4>\n                    <div className=\"text-center p-4 bg-zinc-800/30 rounded-lg border border-zinc-700\">\n                      <Clock className=\"h-8 w-8 text-zinc-500 mx-auto mb-2\" />\n                      <p className=\"text-sm text-zinc-400\">\n                        {event.capacity.waitlist} people waiting for spots to open up\n                      </p>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Discussion Tab */}\n          {activeTab === 'discussion' && (\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-lg font-semibold text-white\">\n                  Discussion ({event.engagement.comments})\n                </h3>\n                {event.organizer.id === currentUserId && (\n                  <Button variant=\"outline\" size=\"sm\">\n                    <Settings className=\"h-4 w-4 mr-1\" />\n                    Moderate\n                  </Button>\n                )}\n              </div>\n              \n              {/* Comment Input */}\n              <div className=\"flex items-start space-x-3 p-4 bg-zinc-800/30 rounded-lg\">\n                <div className=\"w-10 h-10 bg-zinc-600 rounded-full flex items-center justify-center flex-shrink-0\">\n                  <span className=\"text-white font-semibold text-sm\">You</span>\n                </div>\n                <div className=\"flex-1\">\n                  <textarea\n                    placeholder=\"Ask a question or share a comment...\"\n                    className=\"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-zinc-400 focus:border-hive-gold focus:outline-none resize-none\"\n                    rows={3}\n                  />\n                  <div className=\"flex items-center justify-between mt-2\">\n                    <div className=\"flex items-center space-x-2 text-xs text-zinc-400\">\n                      <span>ðŸ’¡ Ask about logistics, requirements, or coordination</span>\n                    </div>\n                    <Button size=\"sm\" className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\">\n                      Comment\n                    </Button>\n                  </div>\n                </div>\n              </div>\n              \n              {/* Comments List */}\n              <div className=\"space-y-4\">\n                {event.engagement.comments > 0 ? (\n                  <>\n                    {/* Sample Comments */}\n                    <div className=\"space-y-4\">\n                      <div className=\"flex items-start space-x-3 p-4 bg-zinc-800/20 rounded-lg\">\n                        <div className=\"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0\">\n                          <span className=\"text-white font-semibold text-sm\">AC</span>\n                        </div>\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center space-x-2 mb-1\">\n                            <span className=\"font-medium text-white\">Alex Chen</span>\n                            <span className=\"text-xs text-zinc-400\">2 hours ago</span>\n                          </div>\n                          <p className=\"text-zinc-300 text-sm leading-relaxed\">\n                            Should I bring my own laptop or will there be computers available? Also, is there a specific IDE we should use for the coding exercises?\n                          </p>\n                          <div className=\"flex items-center space-x-4 mt-2\">\n                            <Button variant=\"ghost\" size=\"sm\" className=\"text-zinc-400 hover:text-white text-xs\">\n                              <Heart className=\"h-3 w-3 mr-1\" />\n                              3\n                            </Button>\n                            <Button variant=\"ghost\" size=\"sm\" className=\"text-zinc-400 hover:text-white text-xs\">\n                              Reply\n                            </Button>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      {/* Organizer Reply */}\n                      <div className=\"flex items-start space-x-3 p-4 bg-hive-gold/5 border-l-2 border-hive-gold rounded-lg ml-6\">\n                        <div className=\"w-10 h-10 bg-hive-gold rounded-full flex items-center justify-center flex-shrink-0\">\n                          <span className=\"text-hive-obsidian font-semibold text-sm\">SC</span>\n                        </div>\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center space-x-2 mb-1\">\n                            <span className=\"font-medium text-white\">{event.organizer.name}</span>\n                            <Badge variant=\"building-tools\" className=\"text-xs\">\n                              Organizer\n                            </Badge>\n                            <span className=\"text-xs text-zinc-400\">1 hour ago</span>\n                          </div>\n                          <p className=\"text-zinc-300 text-sm leading-relaxed\">\n                            Great question! Please bring your own laptop with your preferred IDE installed. We'll be using various languages so having your familiar setup will help. I've also added \"Laptop\" to the requirements list above.\n                          </p>\n                          <div className=\"flex items-center space-x-4 mt-2\">\n                            <Button variant=\"ghost\" size=\"sm\" className=\"text-zinc-400 hover:text-white text-xs\">\n                              <Heart className=\"h-3 w-3 mr-1\" />\n                              5\n                            </Button>\n                            <Button variant=\"ghost\" size=\"sm\" className=\"text-zinc-400 hover:text-white text-xs\">\n                              Reply\n                            </Button>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex items-start space-x-3 p-4 bg-zinc-800/20 rounded-lg\">\n                        <div className=\"w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center flex-shrink-0\">\n                          <span className=\"text-white font-semibold text-sm\">MR</span>\n                        </div>\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center space-x-2 mb-1\">\n                            <span className=\"font-medium text-white\">Maria Rodriguez</span>\n                            <span className=\"text-xs text-zinc-400\">45 minutes ago</span>\n                          </div>\n                          <p className=\"text-zinc-300 text-sm leading-relaxed\">\n                            Looking forward to this! I've been working through CLRS chapters 15-16. Are we focusing on any specific algorithms or should I review everything?\n                          </p>\n                          <div className=\"flex items-center space-x-4 mt-2\">\n                            <Button variant=\"ghost\" size=\"sm\" className=\"text-zinc-400 hover:text-white text-xs\">\n                              <Heart className=\"h-3 w-3 mr-1\" />\n                              2\n                            </Button>\n                            <Button variant=\"ghost\" size=\"sm\" className=\"text-zinc-400 hover:text-white text-xs\">\n                              Reply\n                            </Button>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {event.engagement.comments > 3 && (\n                      <div className=\"text-center\">\n                        <Button variant=\"outline\" size=\"sm\">\n                          Load {event.engagement.comments - 3} more comments\n                        </Button>\n                      </div>\n                    )}\n                  </>\n                ) : (\n                  <div className=\"text-center py-8\">\n                    <MessageCircle className=\"h-12 w-12 text-zinc-600 mx-auto mb-3\" />\n                    <p className=\"text-zinc-400\">No comments yet</p>\n                    <p className=\"text-sm text-zinc-500 mt-1\">\n                      Be the first to ask a question or share your thoughts\n                    </p>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </HiveModal>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/events/event-tool-integration.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/feedback-toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/lazy-page-loader.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'userId' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":26,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"userId"},"fix":{"range":[1280,1287],"text":""},"desc":"Remove unused variable 'userId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'userName' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":26,"column":55,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":63,"suggestions":[{"messageId":"removeVar","data":{"varName":"userName"},"fix":{"range":[1286,1296],"text":""},"desc":"Remove unused variable 'userName'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'toolId' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":50,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"toolId"},"fix":{"range":[2043,2073],"text":""},"desc":"Remove unused variable 'toolId'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { lazy, Suspense } from 'react';\n\n// Lazy load page components for better performance\nconst LazyProfilePage = lazy(() => import('../app/(dashboard)/profile/page'));\nconst LazySpacesPage = lazy(() => import('../app/(dashboard)/spaces/page'));\nconst LazySpaceDetailsPage = lazy(() => import('../app/(dashboard)/spaces/[spaceId]/page'));\nconst LazyToolsPage = lazy(() => import('../app/(dashboard)/tools/page'));\nconst LazyToolDetailsPage = lazy(() => import('../app/(dashboard)/tools/[toolId]/run/page'));\nconst LazyFeedPage = lazy(() => import('../app/(dashboard)/feed/page'));\nconst LazyCalendarPage = lazy(() => import('../app/(dashboard)/calendar/page'));\nconst LazySettingsPage = lazy(() => import('../app/(dashboard)/settings/page'));\n\n// Loading fallback component\nconst LoadingFallback = ({ pageName }: { pageName: string }) => (\n  <div className=\"min-h-screen flex items-center justify-center\">\n    <div className=\"text-center space-y-4\">\n      <div className=\"w-8 h-8 border-2 border-hive-gold border-t-transparent rounded-full animate-spin mx-auto\"></div>\n      <p className=\"text-hive-text-secondary\">Loading {pageName}...</p>\n    </div>\n  </div>\n);\n\n// Lazy page components with React Suspense\nexport const LazyProfilePageWithSuspense = ({ userId, userName }: { userId?: string; userName?: string }) => (\n  <Suspense fallback={<LoadingFallback pageName=\"Profile\" />}>\n    <LazyProfilePage />\n  </Suspense>\n);\n\nexport const LazySpacesPageWithSuspense = () => (\n  <Suspense fallback={<LoadingFallback pageName=\"Spaces\" />}>\n    <LazySpacesPage />\n  </Suspense>\n);\n\nexport const LazySpaceDetailsPageWithSuspense = ({ spaceId }: { spaceId: string }) => (\n  <Suspense fallback={<LoadingFallback pageName=\"Space Details\" />}>\n    <LazySpaceDetailsPage params={Promise.resolve({ spaceId })} />\n  </Suspense>\n);\n\nexport const LazyToolsPageWithSuspense = () => (\n  <Suspense fallback={<LoadingFallback pageName=\"Tools\" />}>\n    <LazyToolsPage />\n  </Suspense>\n);\n\nexport const LazyToolDetailsPageWithSuspense = ({ toolId }: { toolId: string }) => (\n  <Suspense fallback={<LoadingFallback pageName=\"Tool\" />}>\n    <LazyToolDetailsPage />\n  </Suspense>\n);\n\nexport const LazyFeedPageWithSuspense = () => (\n  <Suspense fallback={<LoadingFallback pageName=\"Feed\" />}>\n    <LazyFeedPage />\n  </Suspense>\n);\n\nexport const LazyCalendarPageWithSuspense = () => (\n  <Suspense fallback={<LoadingFallback pageName=\"Calendar\" />}>\n    <LazyCalendarPage />\n  </Suspense>\n);\n\nexport const LazySettingsPageWithSuspense = () => (\n  <Suspense fallback={<LoadingFallback pageName=\"Settings\" />}>\n    <LazySettingsPage />\n  </Suspense>\n);\n\n// Generic lazy loader with context\ninterface LazyPageLoaderProps {\n  pageType: 'profile' | 'spaces' | 'space-details' | 'tools' | 'tool-details' | 'feed' | 'calendar' | 'settings';\n  context?: {\n    userId?: string;\n    userName?: string;\n    spaceId?: string;\n    toolId?: string;\n  };\n}\n\nexport function LazyPageLoader({ pageType, context }: LazyPageLoaderProps) {\n  switch (pageType) {\n    case 'profile':\n      return <LazyProfilePageWithSuspense userId={context?.userId} userName={context?.userName} />;\n    case 'spaces':\n      return <LazySpacesPageWithSuspense />;\n    case 'space-details':\n      return <LazySpaceDetailsPageWithSuspense spaceId={context?.spaceId || ''} />;\n    case 'tools':\n      return <LazyToolsPageWithSuspense />;\n    case 'tool-details':\n      return <LazyToolDetailsPageWithSuspense toolId={context?.toolId || ''} />;\n    case 'feed':\n      return <LazyFeedPageWithSuspense />;\n    case 'calendar':\n      return <LazyCalendarPageWithSuspense />;\n    case 'settings':\n      return <LazySettingsPageWithSuspense />;\n    default:\n      return <LazyProfilePageWithSuspense />;\n  }\n}\n\nexport default LazyPageLoader;","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/navigation/command-nav-layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/navigation/sidebar-layout.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":213,"column":17,"nodeType":"JSXOpeningElement","endLine":217,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { useState } from 'react';\nimport { useSession } from '@/hooks/use-session';\nimport { usePathname, useRouter } from 'next/navigation';\nimport Image from 'next/image';\nimport { \n  Home, \n  Users, \n  User, \n  Hexagon,\n  Search, \n  Bell, \n  MessageCircle, \n  Calendar,\n  Settings,\n  PlusCircle,\n  Menu,\n  X\n} from 'lucide-react';\n\n// Nav Shell Component with HIVE Design System Integration\ninterface SidebarLayoutProps {\n  children: React.ReactNode;\n}\n\nexport function SidebarLayout({ children }: SidebarLayoutProps) {\n  const { user } = useSession();\n  const pathname = usePathname();\n  const router = useRouter();\n  const [isExpanded, setIsExpanded] = useState(true);\n  const [notifications, setNotifications] = useState(3);\n\n  // Determine current destination based on pathname\n  const getCurrentDestination = (): 'feed' | 'spaces' | 'profile' | 'hivelab' => {\n    if (pathname.startsWith('/spaces')) return 'spaces';\n    if (pathname.startsWith('/profile')) return 'profile';\n    if (pathname.startsWith('/tools') || pathname.startsWith('/hivelab')) return 'hivelab';\n    return 'feed';\n  };\n\n  const currentDestination = getCurrentDestination();\n\n  const primaryDestinations = [\n    {\n      id: 'feed',\n      label: 'Feed',\n      icon: Home,\n      description: 'Your personalized campus feed',\n      href: '/',\n      badge: null\n    },\n    {\n      id: 'spaces',\n      label: 'Spaces',\n      icon: Users,\n      description: 'Communities & groups',\n      href: '/spaces',\n      badge: '2' // New activity\n    },\n    {\n      id: 'profile',\n      label: 'Profile',\n      icon: User,\n      description: 'Your profile & dashboard',\n      href: '/profile',\n      badge: null\n    },\n    {\n      id: 'hivelab',\n      label: 'HiveLAB',\n      icon: Hexagon,\n      description: 'Build & discover tools',\n      href: '/tools',\n      badge: 'new' // New feature\n    }\n  ];\n\n  const quickActions = [\n    { id: 'search', icon: Search, label: 'Search' },\n    { id: 'notifications', icon: Bell, label: 'Notifications', badge: notifications },\n    { id: 'messages', icon: MessageCircle, label: 'Messages', badge: '5' },\n    { id: 'calendar', icon: Calendar, label: 'Calendar' }\n  ];\n\n  const handleNavigate = (destination: string) => {\n    const dest = primaryDestinations.find(d => d.id === destination);\n    if (dest) {\n      router.push(dest.href);\n    }\n  };\n\n  const handleAction = (actionId: string) => {\n    if (actionId === 'notifications') {\n      setNotifications(0);\n      // TODO: Open notifications panel\n    } else if (actionId === 'search') {\n      // TODO: Open command palette\n    } else if (actionId === 'messages') {\n      router.push('/messages');\n    } else if (actionId === 'calendar') {\n      router.push('/calendar');\n    } else if (actionId === 'create') {\n      // TODO: Open creation modal\n    } else if (actionId === 'settings') {\n      router.push('/settings');\n    }\n  };\n\n  // Mobile detection (simplified)\n  const [isMobile, setIsMobile] = useState(false);\n\n  React.useEffect(() => {\n    const checkMobile = () => setIsMobile(window.innerWidth < 768);\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n\n  // Mobile Bottom Tab Bar\n  if (isMobile) {\n    return (\n      <div className=\"min-h-screen bg-hive-background-primary pb-16\">\n        <main className=\"h-full\">\n          {children}\n        </main>\n        \n        {/* Mobile Bottom Tab Bar */}\n        <div className=\"fixed bottom-0 left-0 right-0 z-50 bg-hive-background-secondary border-t border-hive-border-default\">\n          <div className=\"flex items-center justify-around px-2 py-2 safe-bottom\">\n            {primaryDestinations.map((destination) => {\n              const Icon = destination.icon;\n              const isActive = currentDestination === destination.id;\n              \n              return (\n                <button\n                  key={destination.id}\n                  onClick={() => handleNavigate(destination.id)}\n                  className={`\n                    flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 relative\n                    ${isActive \n                      ? 'text-hive-brand-secondary bg-hive-brand-secondary/10' \n                      : 'text-hive-text-secondary hover:text-hive-text-primary hover:bg-hive-interactive-hover'\n                    }\n                  `}\n                >\n                  <div className=\"relative\">\n                    <Icon size={20} />\n                    {destination.badge && (\n                      <div className={`\n                        absolute -top-1 -right-1 px-1 py-0.5 rounded-full text-xs font-medium\n                        ${destination.badge === 'new' \n                          ? 'bg-hive-brand-secondary text-hive-text-primary' \n                          : 'bg-hive-status-error text-white'\n                        }\n                        ${destination.badge.length === 1 ? 'w-4 h-4 flex items-center justify-center p-0' : ''}\n                      `}>\n                        {destination.badge === 'new' ? 'â—' : destination.badge}\n                      </div>\n                    )}\n                  </div>\n                  <span className=\"text-xs mt-1 font-medium\">{destination.label}</span>\n                  {isActive && (\n                    <div className=\"absolute top-0 left-1/2 transform -translate-x-1/2 w-8 h-0.5 bg-hive-brand-secondary rounded-full\" />\n                  )}\n                </button>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Desktop Left Sidebar\n  return (\n    <div className=\"min-h-screen bg-hive-background-primary flex\">\n      <div className={`\n        fixed left-0 top-0 bottom-0 z-40 transition-all duration-300 ease-in-out\n        ${isExpanded ? 'w-64' : 'w-16'}\n        bg-hive-background-secondary border-r border-hive-border-default\n      `}>\n        <div className=\"flex flex-col h-full\">\n          \n          {/* Header with HIVE Brand & Toggle */}\n          <div className=\"flex items-center justify-between p-4 border-b border-hive-border-default\">\n            {isExpanded && (\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-8 h-8 flex items-center justify-center\">\n                  <Image\n                    src=\"/assets/hive-logo-white.svg\"\n                    alt=\"HIVE Logo\"\n                    width={32}\n                    height={32}\n                    className=\"w-8 h-8\"\n                  />\n                </div>\n                <span className=\"text-lg font-bold text-hive-text-primary\">HIVE</span>\n              </div>\n            )}\n            <button\n              onClick={() => setIsExpanded(!isExpanded)}\n              className=\"p-2 rounded-lg hover:bg-hive-interactive-hover text-hive-text-secondary hover:text-hive-text-primary transition-colors\"\n            >\n              {isExpanded ? <X size={16} /> : <Menu size={16} />}\n            </button>\n          </div>\n\n          {/* User Profile Section */}\n          {isExpanded && user && (\n            <div className=\"p-4 border-b border-hive-border-default\">\n              <div className=\"flex items-center gap-3\">\n                <img \n                  src={user.avatarUrl || '/api/placeholder/40/40'} \n                  alt={user.fullName || 'User'}\n                  className=\"w-10 h-10 rounded-full object-cover\"\n                />\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"font-medium text-hive-text-primary truncate\">\n                    {user.fullName || 'User'}\n                  </div>\n                  <div className=\"text-sm text-hive-text-tertiary truncate\">\n                    @{user.handle || 'user'}\n                  </div>\n                </div>\n                <div className=\"px-2 py-1 rounded-full text-xs font-medium bg-hive-brand-secondary/20 text-hive-brand-secondary\">\n                  {'student'}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Primary Navigation */}\n          <div className=\"flex-1 p-2\">\n            <div className=\"space-y-1\">\n              {primaryDestinations.map((destination) => {\n                const Icon = destination.icon;\n                const isActive = currentDestination === destination.id;\n                \n                return (\n                  <button\n                    key={destination.id}\n                    onClick={() => handleNavigate(destination.id)}\n                    className={`\n                      w-full flex items-center gap-3 p-3 rounded-lg transition-all duration-200 relative group\n                      ${isActive \n                        ? 'bg-hive-brand-secondary/10 text-hive-brand-secondary border-l-2 border-hive-brand-secondary' \n                        : 'text-hive-text-secondary hover:text-hive-text-primary hover:bg-hive-interactive-hover'\n                      }\n                    `}\n                  >\n                    <div className=\"relative flex-shrink-0\">\n                      <Icon size={20} />\n                      {destination.badge && (\n                        <div className={`\n                          absolute -top-1 -right-1 px-1 py-0.5 rounded-full text-xs font-medium\n                          ${destination.badge === 'new' \n                            ? 'bg-hive-brand-secondary text-hive-text-primary' \n                            : 'bg-hive-status-error text-white'\n                          }\n                          ${destination.badge.length === 1 ? 'w-4 h-4 flex items-center justify-center p-0' : ''}\n                        `}>\n                          {destination.badge === 'new' ? 'â—' : destination.badge}\n                        </div>\n                      )}\n                    </div>\n                    \n                    {isExpanded && (\n                      <div className=\"flex-1 text-left\">\n                        <div className=\"font-medium\">{destination.label}</div>\n                        <div className=\"text-xs text-hive-text-tertiary mt-0.5\">\n                          {destination.description}\n                        </div>\n                      </div>\n                    )}\n                    \n                    {!isExpanded && (\n                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-hive-background-secondary border border-hive-border-default rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50\">\n                        <div className=\"text-sm font-medium text-hive-text-primary\">{destination.label}</div>\n                        <div className=\"text-xs text-hive-text-tertiary\">{destination.description}</div>\n                      </div>\n                    )}\n                  </button>\n                );\n              })}\n            </div>\n\n            {/* Quick Actions */}\n            <div className=\"mt-6 pt-4 border-t border-hive-border-default\">\n              {isExpanded && (\n                <div className=\"text-xs font-medium text-hive-text-tertiary uppercase tracking-wider mb-2 px-3\">\n                  Quick Actions\n                </div>\n              )}\n              <div className=\"space-y-1\">\n                {quickActions.map((action) => {\n                  const Icon = action.icon;\n                  \n                  return (\n                    <button\n                      key={action.id}\n                      onClick={() => handleAction(action.id)}\n                      className=\"w-full flex items-center gap-3 p-3 rounded-lg transition-all duration-200 text-hive-text-secondary hover:text-hive-text-primary hover:bg-hive-interactive-hover relative group\"\n                    >\n                      <div className=\"relative flex-shrink-0\">\n                        <Icon size={18} />\n                        {action.badge && (\n                          <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-hive-status-error text-white rounded-full flex items-center justify-center text-xs font-medium\">\n                            {action.badge}\n                          </div>\n                        )}\n                      </div>\n                      \n                      {isExpanded && (\n                        <span className=\"font-medium\">{action.label}</span>\n                      )}\n                      \n                      {!isExpanded && (\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-hive-background-secondary border border-hive-border-default rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50\">\n                          <div className=\"text-sm font-medium text-hive-text-primary whitespace-nowrap\">{action.label}</div>\n                        </div>\n                      )}\n                    </button>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n\n          {/* Footer Actions */}\n          <div className=\"p-2 border-t border-hive-border-default\">\n            <button\n              onClick={() => handleAction('create')}\n              className={`\n                w-full flex items-center justify-center gap-2 p-3 rounded-lg transition-all duration-200\n                bg-hive-brand-secondary hover:bg-hive-brand-hover text-hive-text-primary font-medium\n              `}\n            >\n              <PlusCircle size={18} />\n              {isExpanded && <span>Create</span>}\n            </button>\n            \n            {isExpanded && (\n              <button\n                onClick={() => handleAction('settings')}\n                className=\"w-full flex items-center gap-3 p-3 rounded-lg transition-all duration-200 text-hive-text-secondary hover:text-hive-text-primary hover:bg-hive-interactive-hover mt-1\"\n              >\n                <Settings size={18} />\n                <span>Settings</span>\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content Area */}\n      <div className={`flex-1 transition-all duration-300 ${isExpanded ? 'ml-64' : 'ml-16'}`}>\n        <main className=\"h-full min-h-screen\">\n          {children}\n        </main>\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/navigation/top-nav-layout.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'BookOpen' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"BookOpen"},"fix":{"range":[295,307],"text":""},"desc":"Remove unused variable 'BookOpen'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { useState } from 'react';\nimport { useSession } from '@/hooks/use-session';\nimport Image from 'next/image';\nimport { Button } from \"@hive/ui\";\nimport { \n  Search, \n  Bell, \n  User, \n  Settings, \n  LogOut,\n  ChevronDown,\n  Command,\n  Home,\n  Users,\n  Zap,\n  Calendar,\n  BookOpen,\n  Menu,\n  X,\n} from 'lucide-react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\n\ninterface TopNavLayoutProps {\n  children: React.ReactNode;\n}\n\nconst NAVIGATION_ITEMS = [\n  { href: '/', label: 'Feed', icon: Home },\n  { href: '/spaces', label: 'Spaces', icon: Users },\n  { href: '/tools', label: 'Build', icon: Zap },\n  { href: '/rituals', label: 'Rituals', icon: Calendar },\n  { href: '/events', label: 'Events', icon: Calendar },\n];\n\nexport function TopNavLayout({ children }: TopNavLayoutProps) {\n  const { user } = useSession();\n  const pathname = usePathname();\n  const [isProfileOpen, setIsProfileOpen] = useState(false);\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n\n  return (\n    <div className=\"min-h-screen bg-[#0A0A0A]\">\n      {/* Top Navigation Bar */}\n      <nav className=\"bg-zinc-900 border-b border-zinc-800 sticky top-0 z-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between h-16\">\n            {/* Left side - Logo and Navigation */}\n            <div className=\"flex items-center\">\n              {/* Logo */}\n              <Link href=\"/\" className=\"flex items-center space-x-2\">\n                <div className=\"w-8 h-8 flex items-center justify-center\">\n                  <Image\n                    src=\"/assets/hive-logo-white.svg\"\n                    alt=\"HIVE Logo\"\n                    width={32}\n                    height={32}\n                    className=\"w-8 h-8\"\n                  />\n                </div>\n                <span className=\"text-white font-bold text-xl\">HIVE</span>\n              </Link>\n\n              {/* Desktop Navigation */}\n              <div className=\"hidden md:flex items-center space-x-1 ml-10\">\n                {NAVIGATION_ITEMS.map((item) => {\n                  const Icon = item.icon;\n                  const isActive = pathname === item.href;\n                  \n                  return (\n                    <Link\n                      key={item.href}\n                      href={item.href}\n                      className={`flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors ${\n                        isActive\n                          ? 'bg-[#FFD700] text-[#0A0A0A]'\n                          : 'text-zinc-300 hover:text-white hover:bg-zinc-800'\n                      }`}\n                    >\n                      <Icon className=\"w-4 h-4 mr-2\" />\n                      {item.label}\n                    </Link>\n                  );\n                })}\n              </div>\n            </div>\n\n            {/* Center - Search */}\n            <div className=\"flex-1 max-w-lg mx-8 hidden lg:block\">\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <Search className=\"h-4 w-4 text-zinc-400\" />\n                </div>\n                <input\n                  type=\"text\"\n                  placeholder=\"Search tools, spaces, or people...\"\n                  className=\"w-full pl-10 pr-4 py-2 bg-zinc-800 border border-zinc-700 rounded-md text-white placeholder-zinc-400 focus:border-[#FFD700] focus:outline-none focus:ring-1 focus:ring-[#FFD700]\"\n                />\n                <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center\">\n                  <kbd className=\"inline-flex items-center px-2 py-1 border border-zinc-600 rounded text-xs text-zinc-400\">\n                    <Command className=\"w-3 h-3 mr-1\" />\n                    K\n                  </kbd>\n                </div>\n              </div>\n            </div>\n\n            {/* Right side - User actions */}\n            <div className=\"flex items-center space-x-4\">\n              {/* Notifications */}\n              <Button variant=\"ghost\" size=\"sm\" className=\"relative text-zinc-400 hover:text-white\">\n                <Bell className=\"w-5 h-5\" />\n                <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-xs text-white flex items-center justify-center\">\n                  3\n                </span>\n              </Button>\n\n              {/* User Menu */}\n              <div className=\"relative\">\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => setIsProfileOpen(!isProfileOpen)}\n                  className=\"flex items-center space-x-2 text-zinc-300 hover:text-white\"\n                >\n                  <div className=\"w-8 h-8 bg-zinc-700 rounded-full flex items-center justify-center\">\n                    {user?.avatarUrl ? (\n                      <Image\n                        src={user.avatarUrl}\n                        alt={user.fullName || 'User'}\n                        width={32}\n                        height={32}\n                        className=\"w-8 h-8 rounded-full\"\n                      />\n                    ) : (\n                      <User className=\"w-4 h-4\" />\n                    )}\n                  </div>\n                  <span className=\"hidden sm:block text-sm\">\n                    {user?.fullName?.split(' ')[0] || 'User'}\n                  </span>\n                  <ChevronDown className=\"w-4 h-4\" />\n                </Button>\n\n                {/* Profile Dropdown */}\n                {isProfileOpen && (\n                  <div className=\"absolute right-0 mt-2 w-48 bg-zinc-800 border border-zinc-700 rounded-md shadow-lg z-50\">\n                    <div className=\"p-3 border-b border-zinc-700\">\n                      <p className=\"text-sm font-medium text-white\">{user?.fullName}</p>\n                      <p className=\"text-sm text-zinc-400\">@{user?.handle}</p>\n                    </div>\n                    <div className=\"py-1\">\n                      <Link\n                        href=\"/dashboard/profile\"\n                        className=\"flex items-center px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white\"\n                      >\n                        <User className=\"w-4 h-4 mr-3\" />\n                        Profile\n                      </Link>\n                      <Link\n                        href=\"/settings\"\n                        className=\"flex items-center px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white\"\n                      >\n                        <Settings className=\"w-4 h-4 mr-3\" />\n                        Settings\n                      </Link>\n                      <button className=\"flex items-center w-full px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 hover:text-white\">\n                        <LogOut className=\"w-4 h-4 mr-3\" />\n                        Sign Out\n                      </button>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {/* Mobile menu button */}\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"md:hidden text-zinc-400\"\n                onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\n              >\n                {isMobileMenuOpen ? <X className=\"w-5 h-5\" /> : <Menu className=\"w-5 h-5\" />}\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        {/* Mobile Navigation Menu */}\n        {isMobileMenuOpen && (\n          <div className=\"md:hidden border-t border-zinc-800\">\n            <div className=\"px-2 pt-2 pb-3 space-y-1\">\n              {NAVIGATION_ITEMS.map((item) => {\n                const Icon = item.icon;\n                const isActive = pathname === item.href;\n                \n                return (\n                  <Link\n                    key={item.href}\n                    href={item.href}\n                    className={`flex items-center px-3 py-2 rounded-md text-sm font-medium ${\n                      isActive\n                        ? 'bg-[#FFD700] text-[#0A0A0A]'\n                        : 'text-zinc-300 hover:text-white hover:bg-zinc-800'\n                    }`}\n                    onClick={() => setIsMobileMenuOpen(false)}\n                  >\n                    <Icon className=\"w-4 h-4 mr-3\" />\n                    {item.label}\n                  </Link>\n                );\n              })}\n            </div>\n            \n            {/* Mobile Search */}\n            <div className=\"px-4 pb-3\">\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <Search className=\"h-4 w-4 text-zinc-400\" />\n                </div>\n                <input\n                  type=\"text\"\n                  placeholder=\"Search...\"\n                  className=\"w-full pl-10 pr-4 py-2 bg-zinc-800 border border-zinc-700 rounded-md text-white placeholder-zinc-400 focus:border-[#FFD700] focus:outline-none\"\n                />\n              </div>\n            </div>\n          </div>\n        )}\n      </nav>\n\n      {/* Main Content */}\n      <main className=\"flex-1\">\n        {children}\n      </main>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/onboarding/space-creation-preview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/onboarding/steps.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'handleSubmit' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":350,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":350,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleSubmit"},"fix":{"range":[10390,10565],"text":""},"desc":"Remove unused variable 'handleSubmit'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'handleSubmit' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":367,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":367,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleSubmit"},"fix":{"range":[10885,11052],"text":""},"desc":"Remove unused variable 'handleSubmit'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'handleSkip' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":373,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":373,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleSkip"},"fix":{"range":[11056,11178],"text":""},"desc":"Remove unused variable 'handleSkip'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'handleSubmit' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":390,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":390,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleSubmit"},"fix":{"range":[11495,11666],"text":""},"desc":"Remove unused variable 'handleSubmit'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'handleSubmit' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":407,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":407,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleSubmit"},"fix":{"range":[11988,12222],"text":""},"desc":"Remove unused variable 'handleSubmit'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport {\n  Button,\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n  Input,\n  Label,\n  // Select,\n  // SelectContent,\n  // SelectItem,\n  // SelectTrigger,\n  // SelectValue,\n  // Checkbox,\n} from \"@hive/ui\";\nimport { Loader2 } from \"lucide-react\";\nimport { debounce } from \"lodash\";\nimport { User } from \"@/hooks/use-session\";\nimport { type OnboardingStepName } from \"@hive/core\";\n\n// A utility to generate a handle from a name\nconst generateHandle = (name: string) => {\n  return name\n    .toLowerCase()\n    .replace(/[^a-z0-9\\\\s]/g, \"\") // remove special characters\n    .trim()\n    .replace(/\\\\s+/g, \"-\"); // replace spaces with hyphens\n};\n\ninterface StepProps {\n  user: User;\n  onNext: (_nextStep?: number) => void;\n  onPrev?: () => void;\n  setCompletedSteps?: (_updater: (_prev: OnboardingStepName[]) => OnboardingStepName[]) => void;\n}\n\nexport const DisplayNameStep: React.FC<StepProps> = ({\n  user,\n  onNext,\n  onPrev,\n  setCompletedSteps,\n}) => {\n  const [fullName, setFullName] = useState(\"\");\n  const [handle, setHandle] = useState(\"\");\n  const [isCheckingHandle, setIsCheckingHandle] = useState(false);\n  const [handleError, setHandleError] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Prefill from email\n  useEffect(() => {\n    if (user?.email) {\n      const nameFromEmail = user.email\n        .split(\"@\")[0]\n        .replace(/[._0-9]/g, \" \")\n        .replace(/\\\\s+/g, \" \");\n      const capitalized = nameFromEmail\n        .split(\" \")\n        .map((n) => n.charAt(0).toUpperCase() + n.slice(1))\n        .join(\" \");\n      setFullName(capitalized);\n      setHandle(generateHandle(capitalized));\n    }\n  }, [user]);\n\n  // Create a debounced function for handle checking\n  const debouncedCheck = debounce(async (h: string) => {\n      if (h.length < 3) {\n        setHandleError(\"Handle must be at least 3 characters.\");\n        setIsCheckingHandle(false);\n        return;\n      }\n      setIsCheckingHandle(true);\n      const isAvailable = ![\"admin\", \"test\", \"root\"].includes(h); // Mocking\n      setHandleError(isAvailable ? null : \"This handle is already taken.\");\n      setIsCheckingHandle(false);\n  }, 500);\n\n  useEffect(() => {\n    if (handle) {\n      void debouncedCheck(handle);\n    }\n  }, [handle, debouncedCheck]);\n\n  const handleStepComplete = useCallback((step: OnboardingStepName) => {\n    setCompletedSteps?.(prev => [...prev, step]);\n  }, [setCompletedSteps]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (handleError || isCheckingHandle) return;\n\n    setIsLoading(true);\n    try {\n      console.info(\"Saving:\", { fullName, handle });\n      onNext(); // Proceed to the next step\n      handleStepComplete(\"name\");\n    } catch (error) {\n      console.error(\"Failed to save display name\", error);\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Card className=\"w-full max-w-lg bg-zinc-900 border-zinc-800\">\n      <CardHeader>\n        <CardTitle className=\"text-white\">Welcome to HIVE</CardTitle>\n        <CardDescription className=\"text-zinc-400\">\n          Let&apos;s set up your profile. How should we address you?\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"fullName\" className=\"text-zinc-300\">\n              Full Name\n            </Label>\n            <Input\n              id=\"fullName\"\n              value={fullName}\n              onChange={(e) => {\n                setFullName(e.target.value);\n                setHandle(generateHandle(e.target.value));\n              }}\n              className=\"bg-zinc-800 border-zinc-700\"\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"handle\" className=\"text-zinc-300\">\n              Username (@handle)\n            </Label>\n            <div className=\"relative\">\n              <Input\n                id=\"handle\"\n                value={handle}\n                onChange={(e) => setHandle(e.target.value)}\n                className=\"bg-zinc-800 border-zinc-700 pl-8\"\n                required\n              />\n              <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500\">\n                @\n              </span>\n              {isCheckingHandle && (\n                <Loader2 className=\"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 animate-spin\" />\n              )}\n            </div>\n            {handleError && (\n              <p className=\"text-xs text-red-500 pt-1\">{handleError}</p>\n            )}\n          </div>\n          <div className=\"flex gap-2\">\n            {onPrev && (\n              <Button type=\"button\" variant=\"outline\" onClick={onPrev}>\n                Back\n              </Button>\n            )}\n            <Button\n              type=\"submit\"\n              className=\"w-full bg-yellow-500 text-black hover:bg-yellow-600\"\n              disabled={!!handleError || isCheckingHandle || isLoading}\n            >\n              {isLoading ? (\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              ) : null}\n              Continue\n            </Button>\n          </div>\n        </form>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport const LeaderQuestionStep: React.FC<StepProps> = ({\n  onNext,\n  onPrev,\n  setCompletedSteps,\n}) => {\n  const [choice, setChoice] = useState<boolean | null>(null);\n\n  const handleStepComplete = useCallback((step: OnboardingStepName) => {\n    setCompletedSteps?.(prev => [...prev, step]);\n  }, [setCompletedSteps]);\n\n  const handleSubmit = async () => {\n    try {\n      console.info(\"Saving leader question response\");\n      onNext();\n      handleStepComplete(\"builder\");\n    } catch (error) {\n      console.error(\"Failed to save leader question\", error);\n    }\n  };\n\n  return (\n    <Card className=\"w-full max-w-lg bg-zinc-900 border-zinc-800\">\n      <CardHeader>\n        <CardTitle className=\"text-white\">Leadership Role</CardTitle>\n        <CardDescription className=\"text-zinc-400\">\n          Would you like to take on a leadership role in your campus community?\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-4\">\n          <Button\n            type=\"button\"\n            onClick={() => setChoice(true)}\n            className={`w-full ${\n              choice === true\n                ? \"bg-yellow-500 text-black hover:bg-yellow-600\"\n                : \"bg-zinc-800 text-zinc-300 hover:bg-zinc-700\"\n            }`}\n          >\n            Yes, I&apos;d like to lead\n          </Button>\n          <Button\n            type=\"button\"\n            onClick={() => setChoice(false)}\n            className={`w-full ${\n              choice === false\n                ? \"bg-yellow-500 text-black hover:bg-yellow-600\"\n                : \"bg-zinc-800 text-zinc-300 hover:bg-zinc-700\"\n            }`}\n          >\n            No, I&apos;ll pass for now\n          </Button>\n        </div>\n        <div className=\"mt-6 flex gap-2\">\n          {onPrev && (\n            <Button type=\"button\" variant=\"outline\" onClick={onPrev}>\n              Back\n            </Button>\n          )}\n          <Button\n            type=\"button\"\n            onClick={handleSubmit}\n            className=\"w-full bg-zinc-700 text-white hover:bg-zinc-600\"\n            disabled={choice === null}\n          >\n            Continue\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport const ClaimSpaceStep: React.FC<StepProps> = ({\n  onNext,\n  onPrev,\n  setCompletedSteps,\n}) => {\n  const handleStepComplete = useCallback((step: OnboardingStepName) => {\n    setCompletedSteps?.(prev => [...prev, step]);\n  }, [setCompletedSteps]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      console.info(\"Saving space claims\");\n      onNext();\n      handleStepComplete(\"builder\");\n    } catch (error) {\n      console.error(\"Failed to save space claims\", error);\n    }\n  };\n\n  return (\n    <Card className=\"w-full max-w-lg bg-zinc-900 border-zinc-800\">\n      <CardHeader>\n        <CardTitle className=\"text-white\">Claim Your Space</CardTitle>\n        <CardDescription className=\"text-zinc-400\">\n          Select the spaces you&apos;d like to lead\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div className=\"space-y-4\">\n            {/* Space list will be populated here */}\n          </div>\n          <div className=\"flex gap-2\">\n            {onPrev && (\n              <Button type=\"button\" variant=\"outline\" onClick={onPrev}>\n                Back\n              </Button>\n            )}\n            <Button\n              type=\"submit\"\n              className=\"w-full bg-yellow-500 text-black hover:bg-yellow-600\"\n            >\n              Continue\n            </Button>\n          </div>\n        </form>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport const PendingNoticeStep: React.FC<StepProps> = ({\n  onNext,\n  setCompletedSteps,\n}) => {\n  const handleStepComplete = useCallback((step: OnboardingStepName) => {\n    setCompletedSteps?.(prev => [...prev, step]);\n  }, [setCompletedSteps]);\n\n  const handleSubmit = async () => {\n    try {\n      console.info(\"Proceeding from pending notice\");\n      onNext();\n      handleStepComplete(\"builder\");\n    } catch (error) {\n      console.error(\"Failed to proceed from pending notice\", error);\n    }\n  };\n\n  return (\n    <Card className=\"w-full max-w-lg bg-zinc-900 border-zinc-800\">\n      <CardHeader>\n        <CardTitle className=\"text-white\">Request Pending</CardTitle>\n        <CardDescription className=\"text-zinc-400\">\n          Your space leadership request is being reviewed\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <Button\n          onClick={handleSubmit}\n          className=\"w-full bg-yellow-500 text-black hover:bg-yellow-600\"\n        >\n          Continue\n        </Button>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport const AcademicCardStep: React.FC<StepProps> = ({\n  onNext,\n  setCompletedSteps,\n}) => {\n  const handleStepComplete = useCallback((step: OnboardingStepName) => {\n    setCompletedSteps?.(prev => [...prev, step]);\n  }, [setCompletedSteps]);\n\n  const handleSubmit = async (data: Record<string, unknown> | null) => {\n    console.info(\"Saving academic card:\", data);\n    onNext();\n    handleStepComplete(\"academics\");\n  };\n\n  return <div>Academic Card Step - Component not available</div>;\n};\n\nexport const AvatarUploadStep: React.FC<StepProps> = ({\n  onNext,\n  setCompletedSteps,\n}) => {\n  const handleStepComplete = useCallback((step: OnboardingStepName) => {\n    setCompletedSteps?.(prev => [...prev, step]);\n  }, [setCompletedSteps]);\n\n  const handleSubmit = async (data: Record<string, unknown> | null) => {\n    console.info(\"Uploading avatar:\", data);\n    onNext();\n    handleStepComplete(\"photo\");\n  };\n\n  const handleSkip = () => {\n    console.info(\"Skipping avatar upload\");\n    onNext();\n    handleStepComplete(\"photo\");\n  };\n\n  return <div>Avatar Upload Step - Component not available</div>;\n};\n\nexport const InterestsStep: React.FC<StepProps> = ({\n  onNext,\n  setCompletedSteps,\n}) => {\n  const handleStepComplete = useCallback((step: OnboardingStepName) => {\n    setCompletedSteps?.(prev => [...prev, step]);\n  }, [setCompletedSteps]);\n\n  const handleSubmit = async (data: Record<string, unknown> | null) => {\n    console.info(\"Saving interests:\", data);\n    onNext();\n    handleStepComplete(\"academics\");\n  };\n\n  return <div>Interests Step - Component not available</div>;\n};\n\nexport const OnboardingCompleteStep: React.FC<StepProps> = ({\n  onNext,\n  setCompletedSteps,\n}) => {\n  const handleStepComplete = useCallback((step: OnboardingStepName) => {\n    setCompletedSteps?.(prev => [...prev, step]);\n  }, [setCompletedSteps]);\n\n  const handleSubmit = async () => {\n    try {\n      console.info(\"Completing onboarding\");\n      onNext();\n      handleStepComplete(\"legal\");\n    } catch (error) {\n      console.error(\"Failed to complete onboarding\", error);\n    }\n  };\n\n  return <div>Onboarding Complete Step - Component not available</div>;\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/profile/atoms/ProfileAvatar.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'file' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":13,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"file"},"fix":{"range":[267,277],"text":""},"desc":"Remove unused variable 'file'."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":76,"column":11,"nodeType":"JSXOpeningElement","endLine":81,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { useState } from 'react';\nimport { Camera, User } from 'lucide-react';\n\ninterface ProfileAvatarProps {\n  user: {\n    name: string;\n    avatar?: string;\n  };\n  size?: 'sm' | 'md' | 'lg' | 'xl';\n  isEditable?: boolean;\n  onAvatarChange?: (file: File) => void;\n  className?: string;\n}\n\nconst sizeClasses = {\n  sm: 'w-8 h-8 text-xs',\n  md: 'w-12 h-12 text-sm', \n  lg: 'w-16 h-16 text-base',\n  xl: 'w-24 h-24 text-lg'\n};\n\nconst iconSizeClasses = {\n  sm: 'w-3 h-3',\n  md: 'w-4 h-4',\n  lg: 'w-5 h-5', \n  xl: 'w-6 h-6'\n};\n\nexport function ProfileAvatar({ \n  user, \n  size = 'md', \n  isEditable = false, \n  onAvatarChange,\n  className = '' \n}: ProfileAvatarProps) {\n  const [isLoading, setIsLoading] = useState(false);\n  const [hasError, setHasError] = useState(false);\n\n  const handleFileChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file || !onAvatarChange) return;\n\n    setIsLoading(true);\n    setHasError(false);\n\n    try {\n      await onAvatarChange(file);\n    } catch {\n      setHasError(true);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const initials = user.name\n    .split(' ')\n    .map(n => n[0])\n    .join('')\n    .toUpperCase()\n    .slice(0, 2);\n\n  return (\n    <div className={`relative ${className}`}>\n      <div className={`\n        ${sizeClasses[size]} \n        rounded-full \n        flex items-center justify-center\n        overflow-hidden\n        ${isEditable ? 'cursor-pointer hover:opacity-80 transition-opacity touch-manipulation' : ''}\n        ${hasError ? 'ring-2 ring-red-400' : ''}\n        ${isLoading ? 'animate-pulse' : ''}\n      `}>\n        {user.avatar && !hasError ? (\n          <img\n            src={user.avatar}\n            alt={`${user.name}'s avatar`}\n            className=\"w-full h-full object-cover\"\n            onError={() => setHasError(true)}\n          />\n        ) : (\n          <div className=\"w-full h-full bg-hive-brand-secondary flex items-center justify-center text-hive-text-primary font-medium\">\n            {initials || <User className={iconSizeClasses[size]} />}\n          </div>\n        )}\n      </div>\n\n      {isEditable && (\n        <>\n          <button\n            className={`\n              absolute -bottom-1 -right-1 \n              w-8 h-8 sm:w-6 sm:h-6 bg-hive-gold text-hive-background-primary \n              rounded-full flex items-center justify-center\n              hover:bg-hive-gold/90 transition-colors touch-manipulation\n              ${isLoading ? 'animate-spin' : ''}\n            `}\n            onClick={() => document.getElementById('avatar-upload')?.click()}\n            disabled={isLoading}\n          >\n            <Camera className=\"w-4 h-4 sm:w-3 sm:h-3\" />\n          </button>\n          <input\n            id=\"avatar-upload\"\n            type=\"file\"\n            accept=\"image/*\"\n            className=\"hidden\"\n            onChange={handleFileChange}\n            disabled={isLoading}\n          />\n        </>\n      )}\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/profile/atoms/ProfileStat.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/profile/card-customization-modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/profile/confirmation-modal.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Alert' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Alert"},"fix":{"range":[193,241],"text":""},"desc":"Remove unused variable 'Alert'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@hive/ui\";\nimport { Alert } from \"@/components/temp-stubs\";\nimport { AlertTriangle, Trash2, Shield } from 'lucide-react';\n\ninterface ConfirmationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: () => void;\n  title: string;\n  description: string;\n  confirmText?: string;\n  cancelText?: string;\n  variant?: 'destructive' | 'warning' | 'default';\n  isLoading?: boolean;\n}\n\nexport function ConfirmationModal({\n  isOpen,\n  onClose,\n  onConfirm,\n  title,\n  description,\n  confirmText = 'Confirm',\n  cancelText = 'Cancel',\n  variant = 'default',\n  isLoading = false\n}: ConfirmationModalProps) {\n  const getVariantIcon = () => {\n    switch (variant) {\n      case 'destructive':\n        return <Trash2 className=\"h-5 w-5 text-red-400\" />;\n      case 'warning':\n        return <AlertTriangle className=\"h-5 w-5 text-yellow-400\" />;\n      default:\n        return <Shield className=\"h-5 w-5 text-blue-400\" />;\n    }\n  };\n\n  const getVariantStyles = () => {\n    switch (variant) {\n      case 'destructive':\n        return {\n          headerBg: 'bg-gradient-to-r from-red-500/10 to-red-600/10',\n          border: 'border-red-500/20',\n          buttonClass: 'bg-red-500 hover:bg-red-600 text-white'\n        };\n      case 'warning':\n        return {\n          headerBg: 'bg-gradient-to-r from-yellow-500/10 to-yellow-600/10',\n          border: 'border-yellow-500/20',\n          buttonClass: 'bg-yellow-500 hover:bg-yellow-600 text-black'\n        };\n      default:\n        return {\n          headerBg: 'bg-gradient-to-r from-blue-500/10 to-blue-600/10',\n          border: 'border-blue-500/20',\n          buttonClass: 'bg-hive-gold hover:bg-hive-champagne text-hive-obsidian'\n        };\n    }\n  };\n\n  const styles = getVariantStyles();\n\n  return (\n    <AlertDialog open={isOpen} onOpenChange={onClose}>\n      <AlertDialogContent className={`max-w-md ${styles.border}`}>\n        <AlertDialogHeader className={`p-4 rounded-t-lg ${styles.headerBg}`}>\n          <AlertDialogTitle className=\"flex items-center space-x-3\">\n            {getVariantIcon()}\n            <span className=\"text-white\">{title}</span>\n          </AlertDialogTitle>\n        </AlertDialogHeader>\n        \n        <div className=\"p-6\">\n          <AlertDialogDescription className=\"text-hive-text-mutedLight leading-relaxed\">\n            {description}\n          </AlertDialogDescription>\n        </div>\n        \n        <AlertDialogFooter className=\"p-6 pt-0\">\n          <AlertDialogCancel \n            onClick={onClose}\n            disabled={isLoading}\n            className=\"border-hive-border-default hover:bg-hive-background-secondary\"\n          >\n            {cancelText}\n          </AlertDialogCancel>\n          <AlertDialogAction\n            onClick={onConfirm}\n            disabled={isLoading}\n            className={styles.buttonClass}\n          >\n            {isLoading ? (\n              <>\n                <span className=\"animate-spin mr-2 h-4 w-4 border-2 border-current border-t-transparent rounded-full\" />\n                Processing...\n              </>\n            ) : (\n              confirmText\n            )}\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n}\n\n// Preset confirmation modals for common actions\nexport function DeleteAccountModal(props: Omit<ConfirmationModalProps, 'title' | 'description' | 'variant' | 'confirmText'>) {\n  return (\n    <ConfirmationModal\n      {...props}\n      title=\"Delete Account\"\n      description=\"This action cannot be undone. Your profile, posts, and all associated data will be permanently deleted from HIVE.\"\n      confirmText=\"Delete Account\"\n      variant=\"destructive\"\n    />\n  );\n}\n\nexport function DisconnectIntegrationModal(props: Omit<ConfirmationModalProps, 'title' | 'description' | 'variant' | 'confirmText'> & { integrationName: string }) {\n  return (\n    <ConfirmationModal\n      {...props}\n      title={`Disconnect ${props.integrationName}`}\n      description={`This will remove access to your ${props.integrationName} data and disable related features. You can reconnect at any time.`}\n      confirmText=\"Disconnect\"\n      variant=\"warning\"\n    />\n  );\n}\n\nexport function EnableGhostModeModal(props: Omit<ConfirmationModalProps, 'title' | 'description' | 'confirmText'>) {\n  return (\n    <ConfirmationModal\n      {...props}\n      title=\"Enable Ghost Mode\"\n      description=\"Ghost mode will hide your activity and presence from other users. Your profile will be less discoverable, but you can still use all HIVE features.\"\n      confirmText=\"Enable Ghost Mode\"\n    />\n  );\n}\n\nexport function LeaveSpaceModal(props: Omit<ConfirmationModalProps, 'title' | 'description' | 'variant' | 'confirmText'> & { spaceName: string }) {\n  return (\n    <ConfirmationModal\n      {...props}\n      title={`Leave ${props.spaceName}`}\n      description=\"You'll lose access to this space's posts, events, and tools. You can rejoin later if the space is public.\"\n      confirmText=\"Leave Space\"\n      variant=\"warning\"\n    />\n  );\n}\n\nexport function ResetLayoutModal(props: Omit<ConfirmationModalProps, 'title' | 'description' | 'confirmText'>) {\n  return (\n    <ConfirmationModal\n      {...props}\n      title=\"Reset Layout\"\n      description=\"This will restore your profile layout to the default configuration. Your custom layout will be lost.\"\n      confirmText=\"Reset Layout\"\n    />\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/profile/enhanced-privacy-modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/profile/hive-avatar-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/profile/integration-connection-modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/profile/molecules/ProfileHeader.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'file' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":24,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"file"},"fix":{"range":[570,580],"text":""},"desc":"Remove unused variable 'file'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React from 'react';\nimport { Edit3, MapPin, School, Calendar } from 'lucide-react';\nimport { ProfileAvatar } from '../atoms/ProfileAvatar';\n\ninterface ProfileHeaderProps {\n  user: {\n    id: string;\n    name: string;\n    handle: string;\n    avatar?: string;\n    bio?: string;\n    location?: string;\n    school?: string;\n    major?: string;\n    year?: string;\n    joinedAt?: string;\n    status?: 'online' | 'offline' | 'busy' | 'away' | 'studying';\n  };\n  completionPercentage: number;\n  isOnline: boolean;\n  onEdit?: () => void;\n  onAvatarChange?: (file: File) => void;\n  className?: string;\n}\n\nconst statusColors = {\n  online: 'bg-green-500',\n  offline: 'bg-hive-text-disabled',\n  busy: 'bg-red-500',\n  away: 'bg-yellow-500',\n  studying: 'bg-hive-brand-secondary'\n};\n\nconst statusLabels = {\n  online: 'Online',\n  offline: 'Offline', \n  busy: 'Busy',\n  away: 'Away',\n  studying: 'Studying'\n};\n\nexport function ProfileHeader({ \n  user, \n  completionPercentage, \n  onEdit, \n  onAvatarChange,\n  className = '' \n}: ProfileHeaderProps) {\n  const statusColor = statusColors[user.status || 'offline'];\n  const statusLabel = statusLabels[user.status || 'offline'];\n  \n  const joinedDate = user.joinedAt ? new Date(user.joinedAt).toLocaleDateString() : '';\n\n  return (\n    <div className={`\n      p-4 sm:p-6 rounded-xl border border-hive-border-subtle\n      bg-gradient-to-br from-hive-background-secondary/80 to-hive-background-secondary/40\n      backdrop-blur-sm\n      ${className}\n    `}>\n      <div className=\"flex items-start gap-3 sm:gap-4\">\n        {/* Avatar with Status */}\n        <div className=\"relative\">\n          <ProfileAvatar\n            user={user}\n            size=\"xl\"\n            isEditable={!!onAvatarChange}\n            onAvatarChange={onAvatarChange}\n          />\n          <div className={`\n            absolute -bottom-1 -right-1 w-6 h-6 \n            ${statusColor} border-2 border-hive-background-primary\n            rounded-full\n          `} title={statusLabel} />\n        </div>\n\n        {/* User Info */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-start justify-between\">\n            <div>\n              <h1 className=\"text-xl sm:text-2xl font-bold text-hive-text-primary mb-1\">\n                {user.name}\n              </h1>\n              <p className=\"text-sm sm:text-base text-hive-brand-secondary font-medium mb-2\">\n                @{user.handle}\n              </p>\n            </div>\n            \n            {onEdit && (\n              <button\n                onClick={onEdit}\n                className=\"\n                  p-3 sm:p-2 rounded-lg border border-hive-border-subtle\n                  hover:border-hive-border-focus hover:bg-hive-background-secondary\n                  transition-all text-hive-text-secondary hover:text-hive-text-primary\n                  touch-manipulation active:scale-95 min-h-[44px] min-w-[44px] sm:min-h-[36px] sm:min-w-[36px]\n                  flex items-center justify-center\n                \"\n              >\n                <Edit3 className=\"w-5 h-5 sm:w-4 sm:h-4\" />\n              </button>\n            )}\n          </div>\n\n          {/* Bio */}\n          {user.bio && (\n            <p className=\"text-sm sm:text-base text-hive-text-secondary mb-3 leading-relaxed\">\n              {user.bio}\n            </p>\n          )}\n\n          {/* Academic & Location Info */}\n          <div className=\"flex flex-wrap gap-3 sm:gap-4 text-xs sm:text-sm text-hive-text-secondary mb-3\">\n            {user.major && user.year && (\n              <div className=\"flex items-center gap-1\">\n                <School className=\"w-3 h-3 sm:w-4 sm:h-4\" />\n                <span>{user.major} â€¢ {user.year}</span>\n              </div>\n            )}\n            {user.location && (\n              <div className=\"flex items-center gap-1\">\n                <MapPin className=\"w-3 h-3 sm:w-4 sm:h-4\" />\n                <span>{user.location}</span>\n              </div>\n            )}\n            {joinedDate && (\n              <div className=\"flex items-center gap-1\">\n                <Calendar className=\"w-3 h-3 sm:w-4 sm:h-4\" />\n                <span>Joined {joinedDate}</span>\n              </div>\n            )}\n          </div>\n\n          {/* Profile Completion */}\n          <div className=\"flex items-center gap-2 sm:gap-3\">\n            <div className=\"flex-1 max-w-40 sm:max-w-48\">\n              <div className=\"flex items-center justify-between text-xs mb-1\">\n                <span className=\"text-hive-text-secondary\">Profile</span>\n                <span className=\"text-hive-text-primary font-medium\">{completionPercentage}%</span>\n              </div>\n              <div className=\"h-2 bg-hive-background-primary rounded-full overflow-hidden\">\n                <div \n                  className=\"h-full bg-gradient-to-r from-hive-brand-secondary to-hive-gold transition-all duration-500\"\n                  style={{ width: `${completionPercentage}%` }}\n                />\n              </div>\n            </div>\n            \n            {completionPercentage < 100 && (\n              <button\n                onClick={onEdit}\n                className=\"text-xs text-hive-brand-secondary hover:text-hive-brand-hover font-medium touch-manipulation p-1 -m-1\"\n              >\n                Complete Profile\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/profile/molecules/ProfileStatsGrid.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'statType' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":20,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":79,"suggestions":[{"messageId":"removeVar","data":{"varName":"statType"},"fix":{"range":[626,687],"text":""},"desc":"Remove unused variable 'statType'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React from 'react';\nimport { Users, Zap, TrendingUp, Award } from 'lucide-react';\nimport { ProfileStat } from '../atoms/ProfileStat';\n\ninterface ProfileStatsGridProps {\n  stats: {\n    connections?: number;\n    spaces?: number;\n    tools?: number;\n    achievements?: number;\n  };\n  trends?: {\n    connections?: { direction: 'up' | 'down' | 'neutral'; value: string };\n    spaces?: { direction: 'up' | 'down' | 'neutral'; value: string };\n    tools?: { direction: 'up' | 'down' | 'neutral'; value: string };\n    achievements?: { direction: 'up' | 'down' | 'neutral'; value: string };\n  };\n  onStatClick?: (statType: 'connections' | 'spaces' | 'tools' | 'achievements') => void;\n  isLoading?: boolean;\n  className?: string;\n}\n\nexport function ProfileStatsGrid({ \n  stats, \n  trends, \n  onStatClick,\n  isLoading = false,\n  className = '' \n}: ProfileStatsGridProps) {\n  return (\n    <div className={`\n      grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4\n      ${className}\n    `}>\n      <ProfileStat\n        icon={Users}\n        label=\"Connections\"\n        value={stats.connections || 0}\n        trend={trends?.connections}\n        onClick={onStatClick ? () => onStatClick('connections') : undefined}\n        isLoading={isLoading}\n      />\n      \n      <ProfileStat\n        icon={Zap}\n        label=\"Spaces\"\n        value={stats.spaces || 0}\n        trend={trends?.spaces}\n        onClick={onStatClick ? () => onStatClick('spaces') : undefined}\n        isLoading={isLoading}\n      />\n      \n      <ProfileStat\n        icon={TrendingUp}\n        label=\"Tools Used\"\n        value={stats.tools || 0}\n        trend={trends?.tools}\n        onClick={onStatClick ? () => onStatClick('tools') : undefined}\n        isLoading={isLoading}\n      />\n      \n      <ProfileStat\n        icon={Award}\n        label=\"Achievements\"\n        value={stats.achievements || 0}\n        trend={trends?.achievements}\n        onClick={onStatClick ? () => onStatClick('achievements') : undefined}\n        isLoading={isLoading}\n      />\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/profile/organisms/ProfileDashboardMain.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'file' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":38,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"file"},"fix":{"range":[905,915],"text":""},"desc":"Remove unused variable 'file'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'statType' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":39,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"statType"},"fix":{"range":[943,959],"text":""},"desc":"Remove unused variable 'statType'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { useState, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { ProfileHeader } from '../molecules/ProfileHeader';\nimport { ProfileStatsGrid } from '../molecules/ProfileStatsGrid';\nimport { ErrorBoundary } from '../../error-boundary';\n\ninterface ProfileUser {\n  id: string;\n  name: string;\n  handle: string;\n  email: string;\n  avatar?: string;\n  bio?: string;\n  location?: string;\n  school?: string;\n  major?: string;\n  year?: string;\n  joinedAt?: string;\n  status?: 'online' | 'offline' | 'busy' | 'away' | 'studying';\n  isOnline: boolean;\n  completionPercentage: number;\n}\n\ninterface ProfileStats {\n  connections?: number;\n  spaces?: number;\n  tools?: number;\n  achievements?: number;\n}\n\ninterface ProfileDashboardMainProps {\n  user: ProfileUser;\n  stats?: ProfileStats;\n  isLoading?: boolean;\n  onEditProfile?: () => void;\n  onAvatarChange?: (file: File) => void;\n  onStatClick?: (statType: string) => void;\n  className?: string;\n}\n\nexport function ProfileDashboardMain({ \n  user, \n  stats, \n  isLoading = false,\n  onEditProfile,\n  onAvatarChange,\n  onStatClick,\n  className = '' \n}: ProfileDashboardMainProps) {\n  const router = useRouter();\n  const [localLoading, setLocalLoading] = useState(false);\n\n  // Handle avatar upload with loading state\n  const handleAvatarChange = useCallback(async (file: File) => {\n    if (!onAvatarChange) return;\n    \n    setLocalLoading(true);\n    try {\n      await onAvatarChange(file);\n    } catch (error) {\n      console.error('Avatar upload failed:', error);\n      // Error handling could be improved with toast notifications\n    } finally {\n      setLocalLoading(false);\n    }\n  }, [onAvatarChange]);\n\n  // Handle stat clicks with navigation\n  const handleStatClick = useCallback((statType: 'connections' | 'spaces' | 'tools' | 'achievements') => {\n    if (onStatClick) {\n      onStatClick(statType);\n    } else {\n      // Default navigation behavior\n      switch (statType) {\n        case 'spaces':\n          router.push('/spaces');\n          break;\n        case 'tools':\n          router.push('/tools');\n          break;\n        case 'connections':\n          router.push('/profile/connections');\n          break;\n        case 'achievements':\n          router.push('/profile/achievements');\n          break;\n      }\n    }\n  }, [onStatClick, router]);\n\n  // Loading skeleton for when user data is not available\n  if (!user && isLoading) {\n    return (\n      <div className={`space-y-4 sm:space-y-6 ${className}`}>\n        {/* Header Skeleton */}\n        <div className=\"p-4 sm:p-6 rounded-xl border border-hive-border-subtle bg-hive-background-secondary/50 animate-pulse\">\n          <div className=\"flex items-start gap-3 sm:gap-4\">\n            <div className=\"w-16 h-16 sm:w-24 sm:h-24 bg-hive-background-primary rounded-full\" />\n            <div className=\"flex-1 space-y-3\">\n              <div className=\"h-6 sm:h-8 bg-hive-background-primary rounded w-32 sm:w-48\" />\n              <div className=\"h-4 bg-hive-background-primary rounded w-32\" />\n              <div className=\"h-4 bg-hive-background-primary rounded w-full max-w-md\" />\n            </div>\n          </div>\n        </div>\n\n        {/* Stats Skeleton */}\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4\">\n          {[...Array(4)].map((_, i) => (\n            <div \n              key={i}\n              className=\"p-3 sm:p-4 rounded-xl border border-hive-border-subtle bg-hive-background-secondary/50 animate-pulse\"\n            >\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-9 h-9 bg-hive-background-primary rounded-lg\" />\n                <div className=\"flex-1 space-y-2\">\n                  <div className=\"h-6 bg-hive-background-primary rounded w-16\" />\n                  <div className=\"h-4 bg-hive-background-primary rounded w-20\" />\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  // Error state\n  if (!user && !isLoading) {\n    return (\n      <div className={`\n        p-8 rounded-xl border border-hive-border-subtle\n        bg-hive-background-secondary/50 text-center\n        ${className}\n      `}>\n        <p className=\"text-hive-text-secondary mb-4\">\n          Unable to load profile information\n        </p>\n        <button\n          onClick={() => window.location.reload()}\n          className=\"px-4 py-2 bg-hive-brand-secondary text-hive-text-primary rounded-lg hover:bg-hive-brand-hover transition-colors\"\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <ErrorBoundary>\n      <div className={`space-y-6 ${className}`}>\n        {/* Profile Header */}\n        <ProfileHeader\n          user={user}\n          completionPercentage={user.completionPercentage}\n          isOnline={user.isOnline}\n          onEdit={onEditProfile}\n          onAvatarChange={handleAvatarChange}\n        />\n\n        {/* Stats Grid */}\n        <ProfileStatsGrid\n          stats={stats}\n          onStatClick={handleStatClick}\n          isLoading={isLoading || localLoading}\n        />\n      </div>\n    </ErrorBoundary>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/profile/personal-tools-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/profile/photo-upload-modal.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Alert' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Alert"},"fix":{"range":[268,316],"text":""},"desc":"Remove unused variable 'Alert'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useRef, useCallback } from 'react';\nimport Image from 'next/image';\nimport { Button, Progress } from \"@hive/ui\";\nimport { HiveModal, HiveModalContent, HiveModalHeader, HiveModalTitle, HiveModalFooter } from \"@/components/temp-stubs\";\nimport { Alert } from \"@/components/temp-stubs\";\nimport { \n  Upload, \n  Camera, \n  RotateCcw, \n  Check,\n  AlertTriangle\n} from 'lucide-react';\n\ninterface PhotoUploadModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onUpload: (_file: File) => Promise<void>;\n  currentPhotoUrl?: string;\n  isUploading?: boolean;\n  uploadProgress?: number;\n}\n\nexport function PhotoUploadModal({\n  isOpen,\n  onClose,\n  onUpload,\n  currentPhotoUrl,\n  isUploading = false,\n  uploadProgress = 0\n}: PhotoUploadModalProps) {\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n  const [dragOver, setDragOver] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileSelect = useCallback((file: File) => {\n    setError(null);\n    \n    // Validate file type\n    if (!file.type.startsWith('image/')) {\n      setError('Please select an image file (PNG, JPG, GIF)');\n      return;\n    }\n    \n    // Validate file size (5MB max)\n    if (file.size > 5 * 1024 * 1024) {\n      setError('Image must be smaller than 5MB');\n      return;\n    }\n    \n    setSelectedFile(file);\n    \n    // Create preview URL\n    const url = URL.createObjectURL(file);\n    setPreviewUrl(url);\n  }, []);\n\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setDragOver(false);\n    \n    const files = Array.from(e.dataTransfer.files);\n    if (files.length > 0) {\n      handleFileSelect(files[0]);\n    }\n  }, [handleFileSelect]);\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setDragOver(true);\n  }, []);\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setDragOver(false);\n  }, []);\n\n  const handleFileInputChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      handleFileSelect(file);\n    }\n  }, [handleFileSelect]);\n\n  const handleUpload = async () => {\n    if (!selectedFile) return;\n    \n    try {\n      await onUpload(selectedFile);\n      handleClose();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Upload failed');\n    }\n  };\n\n  const handleClose = () => {\n    setSelectedFile(null);\n    setPreviewUrl(null);\n    setError(null);\n    setDragOver(false);\n    onClose();\n  };\n\n  const handleReset = () => {\n    setSelectedFile(null);\n    setPreviewUrl(null);\n    setError(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  return (\n    <HiveModal open={isOpen} onOpenChange={handleClose} size=\"lg\">\n      <HiveModalContent className=\"max-w-2xl\">\n        <HiveModalHeader>\n          <HiveModalTitle className=\"flex items-center space-x-2\">\n            <Camera className=\"h-5 w-5\" />\n            <span>Upload Profile Photo</span>\n          </HiveModalTitle>\n        </HiveModalHeader>\n\n        <div className=\"space-y-6 p-6\">\n          {/* Current Photo Display */}\n          {currentPhotoUrl && !previewUrl && (\n            <div className=\"text-center\">\n              <p className=\"text-sm text-hive-text-mutedLight mb-3\">Current Photo</p>\n              <div className=\"relative w-32 h-32 mx-auto rounded-full overflow-hidden bg-hive-background-tertiary\">\n                <Image\n                  src={currentPhotoUrl}\n                  alt=\"Current profile photo\"\n                  fill\n                  className=\"object-cover\"\n                />\n              </div>\n            </div>\n          )}\n\n          {/* Upload Area */}\n          <div\n            className={`\n              relative border-2 border-dashed rounded-lg p-8 text-center transition-all duration-200\n              ${dragOver \n                ? 'border-hive-gold bg-hive-gold/5' \n                : 'border-hive-border-default hover:border-hive-border-hover'\n              }\n              ${selectedFile ? 'border-green-500 bg-green-500/5' : ''}\n            `}\n            onDrop={handleDrop}\n            onDragOver={handleDragOver}\n            onDragLeave={handleDragLeave}\n            onClick={() => fileInputRef.current?.click()}\n          >\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handleFileInputChange}\n              className=\"hidden\"\n            />\n\n            {previewUrl ? (\n              <div className=\"space-y-4\">\n                <div className=\"relative w-48 h-48 mx-auto rounded-lg overflow-hidden bg-hive-background-tertiary\">\n                  <Image\n                    src={previewUrl}\n                    alt=\"Preview\"\n                    fill\n                    className=\"object-cover\"\n                  />\n                </div>\n                <div className=\"flex items-center justify-center space-x-4\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleReset();\n                    }}\n                  >\n                    <RotateCcw className=\"h-4 w-4 mr-2\" />\n                    Choose Different\n                  </Button>\n                </div>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                <div className=\"w-16 h-16 bg-hive-background-secondary rounded-full flex items-center justify-center mx-auto\">\n                  <Upload className=\"h-8 w-8 text-hive-text-mutedLight\" />\n                </div>\n                <div>\n                  <p className=\"text-white font-medium\">Drop your photo here, or click to browse</p>\n                  <p className=\"text-sm text-hive-text-mutedLight mt-1\">\n                    PNG, JPG, GIF up to 5MB\n                  </p>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Upload Progress */}\n          {isUploading && (\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-white\">Uploading...</span>\n                <span className=\"text-hive-text-mutedLight\">{uploadProgress}%</span>\n              </div>\n              <Progress value={uploadProgress} className=\"h-2\" />\n            </div>\n          )}\n\n          {/* Error Display */}\n          {error && (\n            <div className=\"flex items-center space-x-2 p-3 rounded-lg bg-red-500/10 border border-red-500/20\">\n              <AlertTriangle className=\"h-4 w-4 text-red-400\" />\n              <p className=\"text-sm text-red-200\">{error}</p>\n            </div>\n          )}\n\n          {/* Upload Guidelines */}\n          <div className=\"text-xs text-hive-text-mutedLight space-y-1\">\n            <p>â€¢ Image will be cropped to a square automatically</p>\n            <p>â€¢ Recommended size: 400x400 pixels or larger</p>\n            <p>â€¢ Keep your photo appropriate for campus community</p>\n          </div>\n        </div>\n\n        <HiveModalFooter>\n          <Button\n            variant=\"outline\"\n            onClick={handleClose}\n            disabled={isUploading}\n          >\n            Cancel\n          </Button>\n          <Button\n            onClick={handleUpload}\n            disabled={!selectedFile || isUploading}\n            className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n          >\n            {isUploading ? (\n              <>\n                <Upload className=\"h-4 w-4 mr-2 animate-pulse\" />\n                Uploading...\n              </>\n            ) : (\n              <>\n                <Check className=\"h-4 w-4 mr-2\" />\n                Upload Photo\n              </>\n            )}\n          </Button>\n        </HiveModalFooter>\n      </HiveModalContent>\n    </HiveModal>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/profile/profile-board-system.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'widgetId' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":153,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":153,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"widgetId"},"fix":{"range":[3460,3476],"text":""},"desc":"Remove unused variable 'widgetId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'widgetId' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":553,"column":88,"nodeType":"Identifier","messageId":"unusedVar","endLine":553,"endColumn":104,"suggestions":[{"messageId":"removeVar","data":{"varName":"widgetId"},"fix":{"range":[18095,18111],"text":""},"desc":"Remove unused variable 'widgetId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'imageError' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":554,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":554,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"imageError"},"fix":{"range":[18141,18151],"text":""},"desc":"Remove unused variable 'imageError'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'setImageError' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":554,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":554,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"setImageError"},"fix":{"range":[18151,18166],"text":""},"desc":"Remove unused variable 'setImageError'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'widgetId' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":780,"column":77,"nodeType":"Identifier","messageId":"unusedVar","endLine":780,"endColumn":93,"suggestions":[{"messageId":"removeVar","data":{"varName":"widgetId"},"fix":{"range":[28261,28277],"text":""},"desc":"Remove unused variable 'widgetId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'widgetId' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":947,"column":75,"nodeType":"Identifier","messageId":"unusedVar","endLine":947,"endColumn":91,"suggestions":[{"messageId":"removeVar","data":{"varName":"widgetId"},"fix":{"range":[36083,36099],"text":""},"desc":"Remove unused variable 'widgetId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'widgetId' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":1052,"column":77,"nodeType":"Identifier","messageId":"unusedVar","endLine":1052,"endColumn":93,"suggestions":[{"messageId":"removeVar","data":{"varName":"widgetId"},"fix":{"range":[40563,40579],"text":""},"desc":"Remove unused variable 'widgetId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'widgetId' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":1128,"column":80,"nodeType":"Identifier","messageId":"unusedVar","endLine":1128,"endColumn":96,"suggestions":[{"messageId":"removeVar","data":{"varName":"widgetId"},"fix":{"range":[43778,43794],"text":""},"desc":"Remove unused variable 'widgetId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'widgetId' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":1204,"column":76,"nodeType":"Identifier","messageId":"unusedVar","endLine":1204,"endColumn":92,"suggestions":[{"messageId":"removeVar","data":{"varName":"widgetId"},"fix":{"range":[46917,46933],"text":""},"desc":"Remove unused variable 'widgetId'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { \n  Calendar, \n  Users, \n  Zap, \n  MapPin, \n  Clock, \n  Edit3, \n  Settings, \n  Heart,\n  Sparkles,\n  TrendingUp,\n  Award,\n  Camera,\n  ChevronRight,\n  Plus,\n  X,\n  Check,\n  AlertTriangle\n} from 'lucide-react';\nimport { useRouter } from 'next/navigation';\nimport Image from 'next/image';\n\n// Enhanced HIVE animations\nconst hiveAnimationStyles = `\n  @keyframes hive-modal-enter {\n    from {\n      opacity: 0;\n      transform: scale(0.95) translateY(10px);\n    }\n    to {\n      opacity: 1;\n      transform: scale(1) translateY(0);\n    }\n  }\n\n  @keyframes hive-upload-bounce {\n    0%, 100% { transform: scale(1); }\n    50% { transform: scale(1.05); }\n  }\n\n  @keyframes hive-photo-slide {\n    from { transform: translateX(10px); opacity: 0; }\n    to { transform: translateX(0); opacity: 1; }\n  }\n\n  .animate-hive-modal-enter {\n    animation: hive-modal-enter var(--hive-duration-slow, 300ms) var(--hive-liquid-smooth, cubic-bezier(0.4, 0, 0.1, 1));\n  }\n\n  .animate-hive-upload-bounce {\n    animation: hive-upload-bounce var(--hive-duration-base, 200ms) var(--hive-liquid-smooth, cubic-bezier(0.4, 0, 0.1, 1));\n  }\n\n  .animate-hive-photo-slide {\n    animation: hive-photo-slide var(--hive-duration-base, 200ms) var(--hive-liquid-smooth, cubic-bezier(0.4, 0, 0.1, 1));\n  }\n`;\n\n// Inject styles on component mount\nif (typeof document !== 'undefined' && !document.getElementById('hive-profile-animations')) {\n  const styleSheet = document.createElement('style');\n  styleSheet.id = 'hive-profile-animations';\n  styleSheet.textContent = hiveAnimationStyles;\n  document.head.appendChild(styleSheet);\n}\n\n// Define proper types for API responses\ninterface RitualData {\n  id: string;\n  name: string;\n  type: string;\n  tagline?: string;\n  description?: string;\n  completedToday?: number;\n  userParticipation?: {\n    sessionsCompleted: number;\n    currentStreak: number;\n    longestStreak: number;\n    progressPercentage: number;\n    lastSessionAt?: string;\n  };\n  milestones?: {\n    id: string;\n    name: string;\n    description: string;\n    isReached: boolean;\n    progress?: number;\n    progressThreshold?: number;\n    reachedAt?: string;\n  }[];\n}\n\ninterface ConnectionData {\n  id: string;\n  fullName: string;\n  name: string;\n  handle: string;\n  avatarUrl?: string;\n  bio?: string;\n  major?: string;\n  academicYear?: string;\n  isOnline?: boolean;\n  mutualSpaces?: number;\n  connectionType: 'classmate' | 'friend' | 'mutual_friend' | 'colleague';\n  commonInterests?: string[];\n}\n\ninterface SpaceData {\n  id: string;\n  name: string;\n  description?: string;\n  color?: string;\n  memberCount?: number;\n  unreadCount?: number;\n  role?: 'admin' | 'member' | 'moderator';\n}\n\ninterface CalendarEvent {\n  id: string;\n  title: string;\n  description?: string;\n  startDate: string;\n  endDate: string;\n  location?: string;\n  type?: 'class' | 'study' | 'meeting' | 'exam' | 'social' | 'other';\n}\n\ninterface ProfileBoardSystemProps {\n  user: {\n    id: string;\n    name: string;\n    handle: string;\n    avatar?: string;\n    bio?: string;\n    location?: string;\n    school?: string;\n    major?: string;\n    year?: string;\n    joinedAt?: string;\n    status?: 'online' | 'offline' | 'busy' | 'away' | 'studying';\n  };\n  stats?: {\n    connections?: number;\n    spaces?: number;\n    tools?: number;\n    contributions?: number;\n  };\n  editMode?: boolean;\n  onEditModeToggle?: () => void;\n  onWidgetConfigure?: (widgetId: string) => void;\n  className?: string;\n}\n\nexport function ProfileBoardSystem({ \n  user, \n  stats = {},\n  editMode = false,\n  onEditModeToggle = () => {},\n  onWidgetConfigure = () => {},\n  className = ''\n}: ProfileBoardSystemProps) {\n  const router = useRouter();\n\n  // Expand & Focus state management\n  const [expandedWidget, setExpandedWidget] = useState<string | null>(null);\n  const [configPanelWidget, setConfigPanelWidget] = useState<string | null>(null);\n  \n  // Widget data state\n  const [currentRitual, setCurrentRitual] = useState<RitualData | null>(null);\n  const [connections, setConnections] = useState<ConnectionData[]>([]);\n  const [mySpaces, setMySpaces] = useState<SpaceData[]>([]);\n  const [todayEvents, setTodayEvents] = useState<CalendarEvent[]>([]);\n  \n  // Loading states for all widgets\n  const [isLoadingRitual, setIsLoadingRitual] = useState(true);\n  const [isLoadingConnections, setIsLoadingConnections] = useState(true);\n  const [isLoadingSpaces, setIsLoadingSpaces] = useState(true);\n  const [isLoadingEvents, setIsLoadingEvents] = useState(true);\n  const [isLoadingProfile, setIsLoadingProfile] = useState(true);\n\n  // Load all widget data with proper loading states\n  const loadData = useCallback(async () => {\n      // Set initial loading states\n      setIsLoadingProfile(true);\n      \n      // Load current ritual\n      try {\n        setIsLoadingRitual(true);\n        const response = await fetch('/api/rituals', {\n          headers: {\n            'Authorization': `Bearer dev_token_${user.id}`\n          }\n        });\n        \n        if (response.ok) {\n          const data = await response.json() as { currentRitual?: RitualData };\n          setCurrentRitual(data.currentRitual || null);\n        }\n      } catch {\n        console.log('Rituals API not available, showing default state');\n      } finally {\n        setIsLoadingRitual(false);\n      }\n\n      // Load connections\n      try {\n        setIsLoadingConnections(true);\n        const response = await fetch('/api/profile/connections', {\n          headers: {\n            'Authorization': `Bearer dev_token_${user.id}`\n          }\n        });\n        \n        if (response.ok) {\n          const data = await response.json() as { connections?: ConnectionData[] };\n          setConnections(data.connections || []);\n        }\n      } catch {\n        console.log('Connections API not available, showing empty state');\n      } finally {\n        setIsLoadingConnections(false);\n      }\n\n      // Load spaces\n      try {\n        setIsLoadingSpaces(true);\n        const response = await fetch('/api/spaces/my', {\n          headers: {\n            'Authorization': `Bearer dev_token_${user.id}`\n          }\n        });\n        \n        if (response.ok) {\n          const data = await response.json() as { spaces?: SpaceData[] };\n          setMySpaces(data.spaces || []);\n        }\n      } catch {\n        console.log('Spaces API not available, showing empty state');\n      } finally {\n        setIsLoadingSpaces(false);\n      }\n\n      // Load calendar events\n      try {\n        setIsLoadingEvents(true);\n        const response = await fetch('/api/calendar', {\n          headers: {\n            'Authorization': `Bearer dev_token_${user.id}`\n          }\n        });\n        \n        if (response.ok) {\n          const data = await response.json() as { events?: CalendarEvent[] };\n          const events = data.events || [];\n          \n          // Filter and validate events for today\n          const validEvents = events.filter((event: CalendarEvent) => {\n            return event.startDate && event.endDate && event.title;\n          });\n\n          const todayEvents = validEvents.filter((event: CalendarEvent) => {\n            const eventDate = new Date(event.startDate);\n            const today = new Date();\n            return eventDate.toDateString() === today.toDateString();\n          });\n\n          const sortedEvents = todayEvents\n            .sort((a: CalendarEvent, b: CalendarEvent) => new Date(a.startDate).getTime() - new Date(b.startDate).getTime())\n            .slice(0, 5);\n\n          setTodayEvents(sortedEvents);\n        }\n      } catch {\n        console.log('Calendar API not available, showing empty state');\n      } finally {\n        setIsLoadingEvents(false);\n      }\n\n      // Overall profile loading complete\n      setIsLoadingProfile(false);\n    }, [user.id]);\n\n  useEffect(() => {\n    loadData();\n  }, [loadData]);\n\n  const handleWidgetExpand = (widgetId: string) => {\n    if (!editMode) {\n      setExpandedWidget(widgetId);\n    }\n  };\n\n  const handleWidgetConfigure = (widgetId: string) => {\n    setConfigPanelWidget(widgetId);\n    onWidgetConfigure(widgetId);\n  };\n\n  const closeExpandedView = () => {\n    setExpandedWidget(null);\n  };\n\n  const closeConfigPanel = () => {\n    setConfigPanelWidget(null);\n  };\n\n  // Skeleton Loading Components\n  const WidgetSkeleton = ({ className = \"\", children }: { className?: string; children?: React.ReactNode }) => (\n    <div className={`animate-pulse ${className}`}>\n      {children}\n    </div>\n  );\n\n  const TextSkeleton = ({ width = \"w-full\", height = \"h-4\" }: { width?: string; height?: string }) => (\n    <div className={`bg-hive-background-secondary rounded-hive-md ${width} ${height}`} />\n  );\n\n  const CircleSkeleton = ({ size = \"w-8 h-8\" }: { size?: string }) => (\n    <div className={`bg-hive-background-secondary rounded-full ${size}`} />\n  );\n\n  const AvatarWidgetSkeleton = () => (\n    <WidgetSkeleton className=\"h-full bg-hive-background-elevated rounded-hive-xl border border-hive-border-default overflow-hidden\">\n      {/* Photo skeleton */}\n      <div className=\"relative h-3/5 bg-hive-background-secondary\" />\n      \n      {/* Info skeleton */}\n      <div className=\"p-hive-4 h-2/5 flex flex-col space-y-hive-2\">\n        <TextSkeleton width=\"w-3/4\" height=\"h-5\" />\n        <TextSkeleton width=\"w-1/2\" height=\"h-4\" />\n        <TextSkeleton width=\"w-2/3\" height=\"h-3\" />\n        \n        <div className=\"flex-1\" />\n        \n        <div className=\"flex items-center justify-between pt-hive-2 border-t border-hive-border-default\">\n          <TextSkeleton width=\"w-16\" height=\"h-3\" />\n          <CircleSkeleton size=\"w-4 h-4\" />\n        </div>\n      </div>\n    </WidgetSkeleton>\n  );\n\n  const CalendarWidgetSkeleton = () => (\n    <WidgetSkeleton className=\"h-full bg-hive-background-elevated rounded-hive-xl border border-hive-border-default p-hive-6\">\n      {/* Header skeleton */}\n      <div className=\"flex items-center justify-between mb-hive-4\">\n        <div className=\"flex items-center gap-hive-2\">\n          <CircleSkeleton size=\"w-4 h-4\" />\n          <TextSkeleton width=\"w-24\" height=\"h-5\" />\n        </div>\n        <TextSkeleton width=\"w-16\" height=\"h-4\" />\n      </div>\n      \n      {/* Events skeleton */}\n      <div className=\"space-y-hive-3\">\n        <div className=\"flex items-center gap-hive-3 p-hive-3 bg-hive-background-primary rounded-hive-lg\">\n          <CircleSkeleton size=\"w-3 h-3\" />\n          <div className=\"flex-1 space-y-hive-1\">\n            <TextSkeleton width=\"w-3/4\" height=\"h-4\" />\n            <TextSkeleton width=\"w-1/2\" height=\"h-3\" />\n          </div>\n        </div>\n        <div className=\"flex items-center gap-hive-3 p-hive-3 bg-hive-background-primary rounded-hive-lg\">\n          <CircleSkeleton size=\"w-3 h-3\" />\n          <div className=\"flex-1 space-y-hive-1\">\n            <TextSkeleton width=\"w-2/3\" height=\"h-4\" />\n            <TextSkeleton width=\"w-1/3\" height=\"h-3\" />\n          </div>\n        </div>\n      </div>\n    </WidgetSkeleton>\n  );\n\n  const RitualWidgetSkeleton = () => (\n    <WidgetSkeleton className=\"h-full bg-hive-background-elevated rounded-hive-xl border border-hive-border-default p-hive-4\">\n      {/* Header skeleton */}\n      <div className=\"flex items-center gap-hive-2 mb-hive-3\">\n        <CircleSkeleton size=\"w-4 h-4\" />\n        <TextSkeleton width=\"w-20\" height=\"h-5\" />\n      </div>\n      \n      {/* Content skeleton */}\n      <div className=\"text-center space-y-hive-3\">\n        <CircleSkeleton size=\"w-16 h-16 mx-auto\" />\n        <TextSkeleton width=\"w-24 mx-auto\" height=\"h-4\" />\n        <TextSkeleton width=\"w-16 mx-auto\" height=\"h-3\" />\n        <div className=\"w-full h-8 bg-hive-background-secondary rounded-hive-lg\" />\n      </div>\n    </WidgetSkeleton>\n  );\n\n  const ConnectionsWidgetSkeleton = () => (\n    <WidgetSkeleton className=\"h-full bg-hive-background-elevated rounded-hive-xl border border-hive-border-default p-hive-4\">\n      {/* Header skeleton */}\n      <div className=\"flex items-center gap-hive-2 mb-hive-3\">\n        <CircleSkeleton size=\"w-4 h-4\" />\n        <TextSkeleton width=\"w-20\" height=\"h-5\" />\n      </div>\n      \n      {/* Stats skeleton */}\n      <div className=\"text-center space-y-hive-2\">\n        <TextSkeleton width=\"w-8 mx-auto\" height=\"h-8\" />\n        <TextSkeleton width=\"w-20 mx-auto\" height=\"h-3\" />\n        \n        {/* Avatar circles skeleton */}\n        <div className=\"flex -space-x-2 justify-center mb-hive-3\">\n          {[1, 2, 3, 4].map(i => (\n            <CircleSkeleton key={i} size=\"w-6 h-6\" />\n          ))}\n        </div>\n        \n        <div className=\"w-full h-8 bg-hive-background-secondary rounded-hive-lg\" />\n      </div>\n    </WidgetSkeleton>\n  );\n\n  const SpacesWidgetSkeleton = () => (\n    <WidgetSkeleton className=\"h-full bg-hive-background-elevated rounded-hive-xl border border-hive-border-default p-hive-4\">\n      {/* Header skeleton */}\n      <div className=\"flex items-center gap-hive-2 mb-hive-3\">\n        <CircleSkeleton size=\"w-4 h-4\" />\n        <TextSkeleton width=\"w-16\" height=\"h-5\" />\n      </div>\n      \n      {/* Stats skeleton */}\n      <div className=\"text-center space-y-hive-2\">\n        <TextSkeleton width=\"w-6 mx-auto\" height=\"h-8\" />\n        <TextSkeleton width=\"w-16 mx-auto\" height=\"h-3\" />\n        \n        {/* Space items skeleton */}\n        <div className=\"space-y-hive-2 mb-hive-3\">\n          <div className=\"flex items-center gap-hive-2 p-hive-2 bg-hive-background-primary rounded-hive-md\">\n            <CircleSkeleton size=\"w-6 h-6\" />\n            <TextSkeleton width=\"w-16\" height=\"h-3\" />\n          </div>\n          <div className=\"flex items-center gap-hive-2 p-hive-2 bg-hive-background-primary rounded-hive-md\">\n            <CircleSkeleton size=\"w-6 h-6\" />\n            <TextSkeleton width=\"w-12\" height=\"h-3\" />\n          </div>\n        </div>\n        \n        <div className=\"w-full h-8 bg-hive-background-secondary rounded-hive-lg\" />\n      </div>\n    </WidgetSkeleton>\n  );\n\n  // Data validation and error handling for Avatar Widget\n  const validateUserData = (userData: ProfileBoardSystemProps['user']) => {\n    const errors: string[] = [];\n    \n    // Required field validation\n    if (!userData?.id) errors.push('User ID is required');\n    if (!userData?.name || typeof userData.name !== 'string' || userData.name.trim().length === 0) {\n      errors.push('User name is required and must be a valid string');\n    }\n    if (!userData?.handle || typeof userData.handle !== 'string' || userData.handle.trim().length === 0) {\n      errors.push('User handle is required and must be a valid string');\n    }\n    \n    // Optional field validation\n    if (userData?.name && userData.name.length > 100) {\n      errors.push('User name must be less than 100 characters');\n    }\n    if (userData?.handle && userData.handle.length > 50) {\n      errors.push('User handle must be less than 50 characters');\n    }\n    if (userData?.bio && userData.bio.length > 500) {\n      errors.push('User bio must be less than 500 characters');\n    }\n    if (userData?.major && userData.major.length > 100) {\n      errors.push('Major must be less than 100 characters');\n    }\n    if (userData?.school && userData.school.length > 200) {\n      errors.push('School name must be less than 200 characters');\n    }\n    \n    // Handle format validation (alphanumeric, underscore, hyphen only)\n    if (userData?.handle && !/^[a-zA-Z0-9_-]+$/.test(userData.handle)) {\n      errors.push('Handle can only contain letters, numbers, underscores, and hyphens');\n    }\n    \n    // Status validation\n    const validStatuses = ['online', 'busy', 'away', 'studying', 'offline'];\n    if (userData?.status && !validStatuses.includes(userData.status)) {\n      errors.push('Invalid user status');\n    }\n    \n    // Avatar URL validation (basic URL format check)\n    if (userData?.avatar && typeof userData.avatar === 'string') {\n      try {\n        new URL(userData.avatar);\n      } catch {\n        errors.push('Invalid avatar URL format');\n      }\n    }\n    \n    return {\n      isValid: errors.length === 0,\n      errors\n    };\n  };\n\n  // Avatar Widget Error Boundary Component\n  const AvatarWidgetErrorBoundary = ({ children }: { children: React.ReactNode }) => {\n    const [hasError, setHasError] = React.useState(false);\n    const [errorMessage, setErrorMessage] = React.useState<string>('');\n\n    React.useEffect(() => {\n      const handleError = (error: ErrorEvent) => {\n        setHasError(true);\n        setErrorMessage(error.message || 'An unexpected error occurred');\n      };\n      \n      window.addEventListener('error', handleError);\n      return () => window.removeEventListener('error', handleError);\n    }, []);\n\n    React.useEffect(() => {\n      setHasError(false);\n      setErrorMessage('');\n    }, []);\n\n    if (hasError) {\n      return (\n        <div className=\"h-full bg-hive-background-elevated rounded-hive-xl border border-hive-status-error p-hive-4 flex flex-col items-center justify-center text-center\">\n          <div className=\"w-12 h-12 bg-hive-status-error/20 rounded-full flex items-center justify-center mb-hive-3\">\n            <X size={24} className=\"text-hive-status-error\" />\n          </div>\n          <h3 className=\"text-heading-sm font-semibold text-hive-text-primary mb-hive-2\">Profile Error</h3>\n          <p className=\"text-body-sm text-hive-text-secondary mb-hive-4 max-w-xs\">\n            {errorMessage || 'There was an issue loading your profile information.'}\n          </p>\n          <button\n            onClick={() => {\n              setHasError(false);\n              setErrorMessage('');\n              window.location.reload();\n            }}\n            className=\"px-hive-4 py-hive-2 bg-hive-brand-secondary text-hive-text-primary rounded-hive-lg text-body-sm font-medium hover:bg-hive-brand-hover transition-colors duration-200\"\n          >\n            Retry\n          </button>\n        </div>\n      );\n    }\n\n    return <>{children}</>;\n  };\n\n  // Campus Identity Widget (1x2) - Student profile showcase\n  const AvatarWidget = ({ editMode, onConfigure }: { editMode: boolean; onConfigure?: (widgetId: string) => void; }) => {\n    const [imageError, setImageError] = React.useState(false);\n    \n    // Always call hooks at the top level\n    const validation = React.useMemo(() => validateUserData(user), []);\n    \n    // Safe user data with fallbacks\n    \n    // Loading state\n    if (isLoadingProfile) {\n      return <AvatarWidgetSkeleton />;\n    }\n\n    // Validation error state\n    if (!validation.isValid) {\n      return (\n        <div className=\"h-full bg-hive-background-elevated rounded-hive-xl border border-hive-status-warning p-hive-4 flex flex-col items-center justify-center text-center\">\n          <div className=\"w-12 h-12 bg-hive-status-warning/20 rounded-full flex items-center justify-center mb-hive-3\">\n            <X size={24} className=\"text-hive-status-warning\" />\n          </div>\n          <h3 className=\"text-heading-sm font-semibold text-hive-text-primary mb-hive-2\">Invalid Profile Data</h3>\n          <div className=\"text-body-xs text-hive-text-secondary space-y-hive-1 mb-hive-4\">\n            {validation.errors.slice(0, 3).map((error, index) => (\n              <p key={index}>â€¢ {error}</p>\n            ))}\n            {validation.errors.length > 3 && (\n              <p>â€¢ ... and {validation.errors.length - 3} more issues</p>\n            )}\n          </div>\n          <button\n            onClick={() => window.location.reload()}\n            className=\"px-hive-4 py-hive-2 border border-hive-border-default text-hive-text-secondary rounded-hive-lg text-body-sm hover:text-hive-text-primary hover:border-hive-border-focus transition-colors duration-200\"\n          >\n            Refresh Profile\n          </button>\n        </div>\n      );\n    }\n\n    return (\n      <AvatarWidgetErrorBoundary>\n        <div \n          className={`h-full bg-hive-background-elevated rounded-hive-xl border border-hive-border-default relative overflow-hidden cursor-pointer hover:bg-hive-interactive-hover hover:border-hive-border-focus hover:shadow-hive-sm transition-all duration-200 ${\n            editMode ? 'ring-2 ring-hive-brand-secondary/20 ring-offset-2 ring-offset-hive-background-primary' : ''\n          }`}\n          onClick={() => handleWidgetExpand('avatar')}\n        >\n          {editMode && (\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                handleWidgetConfigure('avatar');\n              }}\n              className=\"absolute top-hive-2 right-hive-2 z-10 p-hive-1 bg-hive-background-primary rounded-hive-lg border border-hive-border-default hover:bg-hive-interactive-hover transition-colors duration-200\"\n            >\n              <Settings size={12} className=\"text-hive-text-tertiary\" />\n            </button>\n          )}\n          \n          {/* Photo Section */}\n          <div className=\"relative h-3/5 overflow-hidden\">\n            {user.avatar ? (\n              <>\n                <Image \n                  src={user.avatar} \n                  alt={user.name}\n                  fill\n                  className=\"object-cover\"\n                  sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\n                />\n                <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent\" />\n              </>\n            ) : (\n              <div className=\"w-full h-full bg-hive-brand-secondary flex items-center justify-center\">\n                <div className=\"text-white text-4xl font-bold\">\n                  {user.name?.charAt(0).toUpperCase() || 'U'}\n                </div>\n              </div>\n            )}\n            \n            {/* Campus Status Indicator */}\n            <div className=\"absolute top-hive-3 left-hive-3\">\n              <div className={`w-hive-3 h-hive-3 rounded-full border-2 border-white shadow-hive-sm ${\n                user.status === 'online' ? 'bg-hive-status-success' :\n                user.status === 'busy' ? 'bg-hive-status-error' :\n                user.status === 'away' ? 'bg-hive-status-warning' : \n                user.status === 'studying' ? 'bg-hive-status-info' : 'bg-hive-text-tertiary'\n              }`} />\n            </div>\n\n            {/* Photo Edit Button */}\n            <button \n              onClick={(e) => {\n                e.stopPropagation();\n                onConfigure && onConfigure('avatar');\n              }}\n              className=\"absolute bottom-hive-2 right-hive-2 p-hive-2 bg-hive-background-overlay/60 rounded-full text-white hover:bg-hive-background-overlay/80 transition-all duration-200 backdrop-blur-sm\"\n            >\n              <Camera size={14} />\n            </button>\n          </div>\n\n          {/* Campus Identity Info */}\n          <div className=\"p-hive-4 h-2/5 flex flex-col\">\n            <div className=\"flex-1 space-y-hive-1\">\n              <h3 className=\"font-bold text-hive-text-primary text-heading-lg leading-tight\">{user.name}</h3>\n              <p className=\"text-hive-text-secondary text-body-md\">@{user.handle}</p>\n              \n              {user.major && (\n                <p className=\"text-hive-text-tertiary text-body-sm\">\n                  {user.major} â€¢ {user.year || 'Student'}\n                </p>\n              )}\n\n              {user.bio && (\n                <p className=\"text-hive-text-secondary text-body-sm mt-hive-2 line-clamp-2 leading-relaxed\">\n                  {user.bio}\n                </p>\n              )}\n            </div>\n\n            {/* Campus Location & Edit */}\n            <div className=\"flex items-center justify-between mt-hive-2 pt-hive-2 border-t border-hive-border-default\">\n              <div className=\"flex items-center gap-hive-1 text-body-xs text-hive-text-tertiary\">\n                <MapPin size={12} className=\"text-hive-brand-secondary\" />\n                <span>{user.school || 'University at Buffalo'}</span>\n              </div>\n              <button className=\"p-hive-1 rounded-hive-lg hover:bg-hive-interactive-hover transition-colors duration-200\">\n                <Edit3 size={12} className=\"text-hive-text-tertiary hover:text-hive-text-secondary\" />\n              </button>\n            </div>\n          </div>\n        </div>\n      </AvatarWidgetErrorBoundary>\n    );\n  };\n\n  \n  // Calendar Widget Error Boundary Component\n  const CalendarWidgetErrorBoundary = ({ children }: { children: React.ReactNode }) => {\n    const [hasError, setHasError] = React.useState(false);\n    const [errorMessage, setErrorMessage] = React.useState<string>('');\n    const [validationErrors, setValidationErrors] = React.useState<string[]>([]);\n    \n    React.useEffect(() => {\n      const handleError = (error: ErrorEvent) => {\n        setHasError(true);\n        setErrorMessage(error.message || 'An unexpected error occurred in the Calendar Widget');\n      };\n      \n      const handleUnhandledRejection = (event: PromiseRejectionEvent) => {\n        setHasError(true);\n        setErrorMessage(`Calendar data loading failed: ${event.reason}`);\n      };\n      \n      window.addEventListener('error', handleError);\n      window.addEventListener('unhandledrejection', handleUnhandledRejection);\n      \n      return () => {\n        window.removeEventListener('error', handleError);\n        window.removeEventListener('unhandledrejection', handleUnhandledRejection);\n      };\n    }, []);\n    \n    if (hasError) {\n      return (\n        <div className=\"h-full bg-hive-background-secondary rounded-hive-xl border border-hive-status-error p-hive-lg flex flex-col items-center justify-center text-center\">\n          <div className=\"w-12 h-12 bg-hive-status-error/20 rounded-full flex items-center justify-center mb-hive-md\">\n            <AlertTriangle className=\"w-5 h-5 text-hive-status-error\" />\n          </div>\n          <h3 className=\"text-sm font-semibold text-hive-text-primary mb-hive-sm\">Calendar Widget Error</h3>\n          <p className=\"text-hive-text-secondary text-xs mb-hive-md max-w-xs\">{errorMessage}</p>\n          <div className=\"flex gap-hive-sm\">\n            <button \n              onClick={() => {\n                setHasError(false);\n                setErrorMessage('');\n                window.location.reload();\n              }}\n              className=\"px-hive-md py-hive-sm bg-hive-status-error text-white rounded-hive-lg text-xs font-medium hover:bg-red-600 transition-colors\"\n            >\n              Reload\n            </button>\n            <button \n              onClick={() => {\n                setHasError(false);\n                setErrorMessage('');\n              }}\n              className=\"px-hive-md py-hive-sm text-hive-text-secondary text-xs hover:text-hive-text-primary transition-colors\"\n            >\n              Dismiss\n            </button>\n          </div>\n        </div>\n      );\n    }\n    \n    // Show validation errors if any\n    if (validationErrors.length > 0) {\n      return (\n        <div className=\"h-full bg-hive-background-secondary rounded-hive-xl border border-hive-status-warning p-hive-lg flex flex-col items-center justify-center text-center\">\n          <div className=\"w-12 h-12 bg-hive-status-warning/20 rounded-full flex items-center justify-center mb-hive-md\">\n            <AlertTriangle className=\"w-5 h-5 text-hive-status-warning\" />\n          </div>\n          <h3 className=\"text-sm font-semibold text-hive-text-primary mb-hive-sm\">Calendar Data Issues</h3>\n          <div className=\"space-y-hive-xs mb-hive-md max-w-xs\">\n            {validationErrors.slice(0, 3).map((error, index) => (\n              <p key={index} className=\"text-hive-text-secondary text-xs\">â€¢ {error}</p>\n            ))}\n            {validationErrors.length > 3 && (\n              <p className=\"text-hive-text-secondary text-xs\">â€¢ ... and {validationErrors.length - 3} more issues</p>\n            )}\n          </div>\n          <button \n            onClick={() => setValidationErrors([])}\n            className=\"text-hive-brand-secondary text-xs hover:text-hive-brand-primary transition-colors\"\n          >\n            Continue Anyway\n          </button>\n        </div>\n      );\n    }\n    \n    return <>{children}</>;\n  };\n\n  // Calendar Widget (2x1) - Real calendar integration\n  const CalendarWidget = ({ editMode }: { editMode: boolean; onConfigure?: (widgetId: string) => void; }) => {\n    const [calendarError, setCalendarError] = useState<string | null>(null);\n    const [validationErrors, setValidationErrors] = useState<string[]>([]);\n\n\n    // Loading state check after hooks\n    if (isLoadingEvents) {\n      return <CalendarWidgetSkeleton />;\n    }\n\n    // Safe event rendering with fallbacks\n    const getSafeEventTitle = (event: CalendarEvent) => {\n      if (!event?.title || typeof event.title !== 'string') {\n        return 'Untitled Event';\n      }\n      return event.title.trim() || 'Untitled Event';\n    };\n    \n    const getSafeEventTime = (event: CalendarEvent) => {\n      try {\n        const startTime = new Date(event.startDate).toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });\n        const endTime = new Date(event.endDate).toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });\n        return `${startTime} - ${endTime}`;\n      } catch {\n        return 'Time TBD';\n      }\n    };\n    \n    const getSafeEventType = (event: CalendarEvent) => {\n      const validTypes = ['class', 'study', 'meeting', 'exam', 'social', 'other'];\n      return validTypes.includes(event?.type) ? event.type : 'other';\n    };\n    \n    // Show error state if calendar error exists\n    if (calendarError) {\n      return (\n        <CalendarWidgetErrorBoundary>\n          <div className=\"h-full bg-hive-background-secondary rounded-hive-xl border border-hive-status-error p-hive-lg flex flex-col items-center justify-center text-center\">\n            <Calendar className=\"w-8 h-8 text-hive-status-error mb-hive-md\" />\n            <h3 className=\"text-sm font-semibold text-hive-text-primary mb-hive-sm\">Calendar Unavailable</h3>\n            <p className=\"text-hive-text-secondary text-xs mb-hive-md max-w-xs\">{calendarError}</p>\n            <button \n              onClick={() => {\n                setCalendarError(null);\n                setIsLoadingEvents(true);\n                // Trigger re-load\n                window.location.reload();\n              }}\n              className=\"px-hive-md py-hive-sm bg-hive-brand-secondary text-hive-text-primary rounded-hive-lg text-xs font-medium hover:bg-hive-brand-hover transition-colors\"\n            >\n              Try Again\n            </button>\n          </div>\n        </CalendarWidgetErrorBoundary>\n      );\n    }\n    \n    return (\n      <CalendarWidgetErrorBoundary>\n        <div \n          className={`h-full bg-hive-background-elevated rounded-hive-xl border border-hive-border-default p-hive-6 relative cursor-pointer hover:bg-hive-interactive-hover hover:border-hive-border-focus hover:shadow-hive-sm transition-all duration-200 ${\n            editMode ? 'ring-2 ring-hive-brand-secondary/20 ring-offset-2 ring-offset-hive-background-primary' : ''\n          }`}\n          onClick={() => handleWidgetExpand('calendar')}\n        >\n        {editMode && (\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              handleWidgetConfigure('calendar');\n            }}\n            className=\"absolute top-hive-2 right-hive-2 z-10 p-hive-1 bg-hive-background-primary rounded-hive-lg border border-hive-border-default hover:bg-hive-interactive-hover transition-colors duration-200\"\n          >\n            <Settings size={12} className=\"text-hive-text-tertiary\" />\n          </button>\n        )}\n        \n        <div className=\"flex items-center justify-between mb-hive-4\">\n          <div className=\"flex items-center gap-hive-2\">\n            <Calendar size={16} className=\"text-hive-brand-secondary\" />\n            <h3 className=\"font-semibold text-hive-text-primary text-heading-sm\">Campus Schedule</h3>\n          </div>\n          <button \n            onClick={(e) => {\n              e.stopPropagation();\n              // Action handled by modal - no navigation\n            }}\n            className=\"text-body-xs text-hive-text-tertiary hover:text-hive-text-secondary flex items-center gap-hive-1 transition-colors duration-200\"\n          >\n            View All <ChevronRight size={12} />\n          </button>\n        </div>\n\n        {/* Today's Campus Events */}\n        <div className=\"space-y-hive-3\">\n          {isLoadingEvents ? (\n            <div className=\"space-y-hive-2\">\n              <div className=\"h-12 bg-hive-background-primary rounded-hive-lg animate-pulse\" />\n              <div className=\"h-12 bg-hive-background-primary rounded-hive-lg animate-pulse\" />\n            </div>\n          ) : validationErrors.length > 0 ? (\n            <div className=\"text-center py-hive-4\">\n              <AlertTriangle className=\"w-8 h-8 text-hive-status-warning mx-auto mb-hive-2\" />\n              <p className=\"text-sm text-hive-text-primary mb-hive-1\">Calendar Data Issues</p>\n              <p className=\"text-xs text-hive-text-secondary mb-hive-2\">Some events have validation errors</p>\n              <button \n                onClick={() => setValidationErrors([])}\n                className=\"text-xs text-hive-brand-secondary hover:text-hive-brand-primary transition-colors\"\n              >\n                Show Anyway\n              </button>\n            </div>\n          ) : todayEvents.length > 0 ? (\n            todayEvents.map((event: CalendarEvent, index: number) => {\n              const eventType = getSafeEventType(event);\n              return (\n                <div key={event.id || `event-${index}`} className=\"flex items-center gap-hive-3 p-hive-3 bg-hive-background-primary rounded-hive-lg border border-hive-border-default hover:border-hive-border-focus transition-colors duration-200\">\n                  <div className={`w-hive-3 h-hive-3 rounded-full flex-shrink-0 ${\n                    eventType === 'class' ? 'bg-hive-status-info' :\n                    eventType === 'study' ? 'bg-hive-status-success' :\n                    eventType === 'meeting' ? 'bg-hive-status-warning' :\n                    eventType === 'exam' ? 'bg-hive-status-error' :\n                    'bg-hive-brand-secondary'\n                  }`} />\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"text-body-md font-medium text-hive-text-primary truncate\" title={getSafeEventTitle(event)}>\n                      {getSafeEventTitle(event)}\n                    </p>\n                    <p className=\"text-body-xs text-hive-text-tertiary\">\n                      {getSafeEventTime(event)}\n                    </p>\n                    {event.location && (\n                      <p className=\"text-body-xs text-hive-text-tertiary truncate\" title={event.location}>\n                        ðŸ“ {event.location}\n                      </p>\n                    )}\n                  </div>\n                </div>\n              );\n            })\n          ) : (\n            <div className=\"text-center py-hive-4\">\n              <Calendar size={32} className=\"text-hive-text-tertiary mx-auto mb-hive-2\" />\n              <p className=\"text-body-md text-hive-text-tertiary mb-hive-1\">No events today</p>\n              <p className=\"text-body-xs text-hive-text-tertiary\">Perfect time for studying or connecting with friends!</p>\n            </div>\n          )}\n          \n          <div className=\"text-center pt-hive-2\">\n            <button \n              onClick={(e) => {\n                e.stopPropagation();\n                // Action handled by modal - no navigation\n              }}\n              className=\"text-body-xs text-hive-brand-secondary hover:text-hive-brand-hover flex items-center gap-hive-1 mx-auto transition-colors duration-200\"\n            >\n              <Plus size={12} />\n              Add Campus Event\n            </button>\n          </div>\n        </div>\n        </div>\n      </CalendarWidgetErrorBoundary>\n    );\n  };\n\n  // Ritual Widget (1x1) - Real ritual tracking\n  const RitualWidget = ({ editMode }: { editMode: boolean; onConfigure?: (widgetId: string) => void; }) => {\n    if (isLoadingRitual) {\n      return <RitualWidgetSkeleton />;\n    }\n\n    const handleStartSession = async () => {\n      try {\n        const response = await fetch('/api/rituals/start', {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer dev_token_${user.id}`,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            ritualType: currentRitual?.type || 'focus'\n          })\n        });\n        \n        if (response.ok) {\n          // Reload ritual data - no navigation needed\n          loadData();\n        }\n      } catch {\n        console.log('Failed to start ritual session');\n      }\n    };\n\n    return (\n      <div \n        className={`h-full bg-hive-background-elevated rounded-hive-xl border border-hive-border-default p-hive-4 relative cursor-pointer hover:bg-hive-interactive-hover hover:border-hive-border-focus hover:shadow-hive-sm transition-all duration-200 ${\n          editMode ? 'ring-2 ring-hive-brand-secondary/20 ring-offset-2 ring-offset-hive-background-primary' : ''\n        }`}\n        onClick={() => handleWidgetExpand('ritual')}\n      >\n        {editMode && (\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              handleWidgetConfigure('ritual');\n            }}\n            className=\"absolute top-hive-2 right-hive-2 z-10 p-hive-1 bg-hive-background-primary rounded-hive-lg border border-hive-border-default hover:bg-hive-interactive-hover transition-colors duration-200\"\n          >\n            <Settings size={12} className=\"text-hive-text-tertiary\" />\n          </button>\n        )}\n        \n        <div className=\"flex items-center gap-hive-2 mb-hive-3\">\n          <Sparkles size={14} className=\"text-hive-brand-secondary\" />\n          <h3 className=\"font-semibold text-hive-text-primary text-heading-sm\">Campus Rituals</h3>\n        </div>\n        \n        <div className=\"text-center\">\n          {isLoadingRitual ? (\n            <div className=\"py-4\">\n              <div className=\"w-12 h-12 bg-hive-background-primary rounded-full animate-pulse mx-auto mb-2\" />\n              <div className=\"h-4 bg-hive-background-primary rounded animate-pulse mb-1\" />\n              <div className=\"h-3 bg-hive-background-primary rounded animate-pulse\" />\n            </div>\n          ) : currentRitual ? (\n            <>\n              <div className=\"w-16 h-16 bg-hive-brand-secondary/20 rounded-full flex items-center justify-center mx-auto mb-3\">\n                <TrendingUp size={24} className=\"text-hive-brand-secondary\" />\n              </div>\n              <p className=\"text-body-md font-medium text-hive-text-primary\">\n                {currentRitual.name || 'Focus Session'}\n              </p>\n              <p className=\"text-body-xs text-hive-text-tertiary mt-1\">\n                {currentRitual.completedToday || 0} sessions completed\n              </p>\n              \n              <button \n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleStartSession();\n                }}\n                className=\"w-full mt-3 p-2 bg-hive-brand-secondary text-hive-text-primary rounded-lg text-body-xs font-medium hover:bg-hive-brand-hover transition-colors\"\n              >\n                Start Session\n              </button>\n            </>\n          ) : (\n            <>\n              <div className=\"w-16 h-16 bg-hive-background-secondary/50 rounded-full flex items-center justify-center mx-auto mb-3\">\n                <Clock size={24} className=\"text-hive-text-tertiary\" />\n              </div>\n              <p className=\"text-body-md text-hive-text-tertiary mb-1\">No ritual set</p>\n              <p className=\"text-body-xs text-hive-text-tertiary mb-3\">Create your first routine</p>\n              \n              <button \n                onClick={(e) => {\n                  e.stopPropagation();\n                  // Action handled by modal - no navigation\n                }}\n                className=\"w-full p-2 border border-hive-border-default rounded-lg text-body-xs text-hive-text-secondary hover:text-hive-text-primary hover:border-hive-border-focus transition-colors\"\n              >\n                Set Up Ritual\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  // My Spaces Widget (1x1) - Real spaces integration\n  const MySpacesWidget = ({ editMode }: { editMode: boolean; onConfigure?: (widgetId: string) => void; }) => {\n    if (isLoadingSpaces) {\n      return <SpacesWidgetSkeleton />;\n    }\n\n    return (\n      <div \n        className={`h-full bg-hive-background-elevated rounded-xl border border-hive-border-default p-4 relative cursor-pointer hover:bg-hive-interactive-hover transition-colors ${\n          editMode ? 'ring-2 ring-hive-brand-secondary/50' : ''\n        }`}\n        onClick={() => handleWidgetExpand('spaces')}\n      >\n        {editMode && (\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              handleWidgetConfigure('spaces');\n            }}\n            className=\"absolute top-2 right-2 z-10 p-1 bg-hive-background-primary rounded-lg border border-hive-border-default\"\n          >\n            <Settings size={12} />\n          </button>\n        )}\n        \n        <div className=\"flex items-center gap-2 mb-3\">\n          <Users size={14} className=\"text-hive-status-info\" />\n          <h3 className=\"font-semibold text-hive-text-primary text-heading-sm\">My Spaces</h3>\n        </div>\n        \n        <div className=\"space-y-2 mb-4\">\n          {isLoadingSpaces ? (\n            <>\n              <div className=\"h-8 bg-hive-background-primary rounded-lg animate-pulse\" />\n              <div className=\"h-8 bg-hive-background-primary rounded-lg animate-pulse\" />\n            </>\n          ) : mySpaces.length > 0 ? (\n            mySpaces.map((space, index) => (\n              <button\n                key={space.id || index}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  // Action handled by modal - no navigation\n                }}\n                className=\"flex items-center gap-2 p-2 bg-hive-background-primary rounded-lg hover:bg-hive-interactive-hover transition-colors w-full text-left\"\n              >\n                <div className={`w-6 h-6 rounded-lg flex items-center justify-center text-body-xs font-bold text-white`}\n                     style={{ backgroundColor: space.color || '#3B82F6' }}>\n                  {space.name?.charAt(0).toUpperCase() || 'S'}\n                </div>\n                <span className=\"text-body-xs text-hive-text-primary font-medium truncate\">\n                  {space.name || 'Unnamed Space'}\n                </span>\n              </button>\n            ))\n          ) : (\n            <div className=\"text-center py-2\">\n              <p className=\"text-body-xs text-hive-text-tertiary mb-2\">No spaces yet</p>\n              <p className=\"text-body-xs text-hive-text-tertiary\">Join your first space!</p>\n            </div>\n          )}\n        </div>\n        \n        <button \n          onClick={(e) => {\n            e.stopPropagation();\n            // Action handled by modal - no navigation\n          }}\n          className=\"w-full p-2 border border-hive-border-default rounded-lg text-body-xs text-hive-text-secondary hover:text-hive-text-primary hover:border-hive-border-focus transition-colors\"\n        >\n          {mySpaces.length > 0 ? 'Browse All' : 'Find Spaces'}\n        </button>\n      </div>\n    );\n  };\n\n  // Connections Widget (1x1) - Real connections integration\n  const ConnectionsWidget = ({ editMode }: { editMode: boolean; onConfigure?: (widgetId: string) => void; }) => {\n    if (isLoadingConnections) {\n      return <ConnectionsWidgetSkeleton />;\n    }\n\n    return (\n      <div \n        className={`h-full bg-hive-background-elevated rounded-xl border border-hive-border-default p-4 relative cursor-pointer hover:bg-hive-interactive-hover transition-colors ${\n          editMode ? 'ring-2 ring-hive-brand-secondary/50' : ''\n        }`}\n        onClick={() => handleWidgetExpand('connections')}\n      >\n        {editMode && (\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              handleWidgetConfigure('connections');\n            }}\n            className=\"absolute top-2 right-2 z-10 p-1 bg-hive-background-primary rounded-lg border border-hive-border-default\"\n          >\n            <Settings size={12} />\n          </button>\n        )}\n        \n        <div className=\"flex items-center gap-2 mb-3\">\n          <Heart size={14} className=\"text-hive-status-error\" />\n          <h3 className=\"font-semibold text-hive-text-primary text-heading-sm\">Connections</h3>\n        </div>\n        \n        <div className=\"text-center\">\n          <div className=\"text-display-sm font-bold text-hive-text-primary\">{stats.connections || 0}</div>\n          <p className=\"text-body-xs text-hive-text-tertiary mb-3\">Campus friends</p>\n          \n          {connections.length > 0 ? (\n            <div className=\"flex -space-x-2 justify-center mb-3\">\n              {connections.slice(0, 4).map((connection, index) => (\n                <div\n                  key={connection.id || index}\n                  className=\"w-6 h-6 rounded-full border-2 border-hive-background-secondary flex items-center justify-center bg-hive-brand-secondary text-white text-xs font-bold\"\n                  title={connection.fullName || connection.name}\n                >\n                  {connection.avatarUrl ? (\n                    <Image\n                      src={connection.avatarUrl}\n                      alt={connection.fullName || connection.name}\n                      width={24}\n                      height={24}\n                      className=\"rounded-full object-cover\"\n                    />\n                  ) : (\n                    (connection.fullName || connection.name || 'U').charAt(0).toUpperCase()\n                  )}\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"mb-3 py-2\">\n              <p className=\"text-body-xs text-hive-text-tertiary\">No connections yet</p>\n            </div>\n          )}\n          \n          <button \n            onClick={(e) => {\n              e.stopPropagation();\n              router.push('/connections');\n            }}\n            className=\"w-full p-2 border border-hive-border-default rounded-lg text-body-xs text-hive-text-secondary hover:text-hive-text-primary hover:border-hive-border-focus transition-colors\"\n          >\n            {connections.length > 0 ? 'View All' : 'Find Friends'}\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  // HiveLAB Widget (1x1)\n  const HiveLABWidget = ({ editMode }: { editMode: boolean; onConfigure?: (widgetId: string) => void; }) => (\n    <div \n      className={`h-full bg-hive-background-elevated rounded-xl border border-hive-border-default p-4 relative cursor-pointer hover:bg-hive-interactive-hover transition-colors ${\n        editMode ? 'ring-2 ring-hive-brand-secondary/50' : ''\n      }`}\n      onClick={() => handleWidgetExpand('hivelab')}\n    >\n      {editMode && (\n        <button\n          onClick={(e) => {\n            e.stopPropagation();\n            handleWidgetConfigure('hivelab');\n          }}\n          className=\"absolute top-2 right-2 z-10 p-1 bg-hive-background-primary rounded-lg border border-hive-border-default\"\n        >\n          <Settings size={12} />\n        </button>\n      )}\n      \n      <div className=\"flex items-center gap-2 mb-3\">\n        <Zap size={14} className=\"text-hive-brand-secondary\" />\n        <h3 className=\"font-semibold text-hive-text-primary text-heading-sm\">HiveLAB</h3>\n      </div>\n      \n      <div className=\"text-center\">\n        <div className=\"w-12 h-12 bg-hive-brand-secondary/20 rounded-lg flex items-center justify-center mx-auto mb-3\">\n          <Award size={20} className=\"text-hive-brand-secondary\" />\n        </div>\n        <div className=\"text-heading-xl font-bold text-hive-text-primary\">{stats.tools || 0}</div>\n        <p className=\"text-body-xs text-hive-text-tertiary mb-4\">Tools built</p>\n        \n        <button \n          onClick={(e) => {\n            e.stopPropagation();\n            router.push('/tools');\n          }}\n          className=\"w-full p-2 bg-hive-brand-secondary text-hive-text-primary rounded-lg text-body-xs font-medium hover:bg-hive-brand-hover transition-colors\"\n        >\n          Build Tool\n        </button>\n      </div>\n    </div>\n  );\n\n  const renderWidget = (widgetId: string) => {\n    const widgets = {\n      avatar: <AvatarWidget editMode={editMode} onConfigure={onWidgetConfigure} />,\n      calendar: <CalendarWidget editMode={editMode} onConfigure={onWidgetConfigure} />,\n      ritual: <RitualWidget editMode={editMode} onConfigure={onWidgetConfigure} />,\n      spaces: <MySpacesWidget editMode={editMode} onConfigure={onWidgetConfigure} />,\n      connections: <ConnectionsWidget editMode={editMode} onConfigure={onWidgetConfigure} />,\n      hivelab: <HiveLABWidget editMode={editMode} onConfigure={onWidgetConfigure} />\n    };\n    return widgets[widgetId as keyof typeof widgets];\n  };\n\n  return (\n    <div className={`w-full ${className}`}>\n      {/* Global Loading Overlay */}\n      {isLoadingProfile && (\n        <div className=\"fixed inset-0 bg-hive-background-primary/80 backdrop-blur-sm z-50 flex items-center justify-center\">\n          <div className=\"text-center space-y-hive-4\">\n            <div className=\"w-12 h-12 border-4 border-hive-brand-secondary border-t-transparent rounded-full animate-spin mx-auto\" />\n            <div className=\"space-y-hive-1\">\n              <p className=\"text-heading-sm font-semibold text-hive-text-primary\">Loading Your Campus Profile</p>\n              <p className=\"text-body-sm text-hive-text-secondary\">Setting up your command center...</p>\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {/* Profile Header - Campus Command Center */}\n      <div className=\"flex items-center justify-between mb-hive-6 p-hive-6 bg-hive-background-secondary rounded-hive-xl border border-hive-border-default\">\n        <div className=\"space-y-hive-1\">\n          <h1 className=\"text-display-md font-bold text-hive-text-primary\">Your Profile</h1>\n          <p className=\"text-body-md text-hive-text-secondary\">Campus command center - where connections meet purpose</p>\n        </div>\n        <div className=\"flex items-center gap-hive-3\">\n          <button\n            onClick={onEditModeToggle}\n            className={`px-hive-4 py-hive-2 rounded-hive-lg font-medium transition-all duration-200 ${\n              editMode \n                ? 'bg-hive-brand-secondary text-hive-text-on-brand shadow-hive-sm' \n                : 'border border-hive-border-default text-hive-text-secondary hover:text-hive-text-primary hover:border-hive-border-focus hover:shadow-hive-sm'\n            }`}\n          >\n            <Edit3 size={16} className=\"mr-hive-2 inline\" />\n            {editMode ? 'Done' : 'Customize'}\n          </button>\n        </div>\n      </div>\n\n      {/* 4-Column Campus Widget Grid */}\n      <div className=\"grid grid-cols-4 gap-hive-4 h-[600px]\">\n        {/* Avatar Widget - 1x2 */}\n        <div className=\"col-span-1 row-span-2\">\n          {renderWidget('avatar')}\n        </div>\n        \n        {/* Calendar Widget - 2x1 */}\n        <div className=\"col-span-2 row-span-1\">\n          {renderWidget('calendar')}\n        </div>\n        \n        {/* Ritual Widget - 1x1 */}\n        <div className=\"col-span-1 row-span-1\">\n          {renderWidget('ritual')}\n        </div>\n        \n        {/* My Spaces Widget - 1x1 */}\n        <div className=\"col-span-1 row-span-1\">\n          {renderWidget('spaces')}\n        </div>\n        \n        {/* Connections Widget - 1x1 */}\n        <div className=\"col-span-1 row-span-1\">\n          {renderWidget('connections')}\n        </div>\n        \n        {/* HiveLAB Widget - 1x1 */}\n        <div className=\"col-span-1 row-span-1\">\n          {renderWidget('hivelab')}\n        </div>\n      </div>\n\n      {/* Edit Mode Instructions */}\n      {editMode && (\n        <div className=\"mt-6 p-4 bg-hive-brand-secondary/10 border border-hive-brand-secondary/20 rounded-xl\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <Settings size={16} className=\"text-hive-brand-secondary\" />\n            <h3 className=\"font-medium text-hive-text-primary text-heading-sm\">Customize Mode</h3>\n          </div>\n          <p className=\"text-body-md text-hive-text-secondary\">\n            Click the settings icon on any widget to configure it. Your layout will be saved automatically.\n          </p>\n        </div>\n      )}\n\n      {/* Expand & Focus Modal Overlay */}\n      {expandedWidget && (\n        <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-hive-background-primary border border-hive-border-default rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-auto\">\n            {/* Modal Header */}\n            <div className=\"flex items-center justify-between p-6 border-b border-hive-border-default\">\n              <h2 className=\"text-heading-lg font-semibold text-hive-text-primary\">\n                {expandedWidget === 'avatar' && 'Profile Details'}\n                {expandedWidget === 'calendar' && 'Schedule Overview'}\n                {expandedWidget === 'ritual' && 'Today\\'s Ritual'}\n                {expandedWidget === 'spaces' && 'My Spaces'}\n                {expandedWidget === 'connections' && 'Connections'}\n                {expandedWidget === 'hivelab' && 'HiveLAB Tools'}\n              </h2>\n              <button\n                onClick={closeExpandedView}\n                className=\"p-2 rounded-lg hover:bg-hive-interactive-hover transition-colors\"\n              >\n                <X size={20} className=\"text-hive-text-secondary\" />\n              </button>\n            </div>\n            \n            {/* Modal Content */}\n            <div className=\"p-6\">\n              {expandedWidget === 'avatar' && (\n                <div className=\"text-center\">\n                  <div className=\"w-32 h-32 mx-auto mb-6\">\n                    {user.avatar ? (\n                      <Image src={user.avatar} alt={user.name} width={128} height={128} className=\"rounded-full object-cover\" />\n                    ) : (\n                      <div className=\"w-full h-full bg-hive-brand-secondary rounded-full flex items-center justify-center\">\n                        <span className=\"text-white text-4xl font-bold\">{user.name?.charAt(0).toUpperCase()}</span>\n                      </div>\n                    )}\n                  </div>\n                  <h3 className=\"text-heading-xl font-bold text-hive-text-primary mb-2\">{user.name}</h3>\n                  <p className=\"text-body-lg text-hive-text-secondary mb-4\">{user.handle}</p>\n                  {user.bio && <p className=\"text-body-md text-hive-text-primary mb-6\">{user.bio}</p>}\n                  <div className=\"flex justify-center gap-3\">\n                    <button \n                      onClick={() => {\n                        closeExpandedView();\n                      }}\n                      className=\"px-6 py-3 bg-hive-brand-secondary text-hive-text-primary rounded-lg font-medium hover:bg-hive-brand-hover transition-colors\"\n                    >\n                      Edit Profile\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {expandedWidget === 'calendar' && (\n                <div>\n                  <div className=\"mb-6\">\n                    <h3 className=\"text-heading-md font-semibold text-hive-text-primary mb-4\">Upcoming Events</h3>\n                    <div className=\"space-y-4\">\n                      {todayEvents.length > 0 ? (\n                        todayEvents.map((event: CalendarEvent, index: number) => (\n                          <div key={event.id || index} className=\"flex items-start gap-4 p-4 bg-hive-background-elevated rounded-lg border border-hive-border-default\">\n                            <div className={`w-4 h-4 rounded-full flex-shrink-0 mt-2 ${\n                              event.type === 'class' ? 'bg-hive-status-info' :\n                              event.type === 'study' ? 'bg-hive-status-success' :\n                              'bg-hive-brand-secondary'\n                            }`} />\n                            <div className=\"flex-1\">\n                              <h4 className=\"text-heading-sm font-medium text-hive-text-primary mb-1\">{event.title}</h4>\n                              {event.description && (\n                                <p className=\"text-body-sm text-hive-text-secondary mb-2\">{event.description}</p>\n                              )}\n                              <div className=\"flex items-center gap-4 text-body-xs text-hive-text-tertiary\">\n                                <span>\n                                  {new Date(event.startDate).toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' })} - \n                                  {new Date(event.endDate).toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' })}\n                                </span>\n                                {event.location && (\n                                  <span className=\"flex items-center gap-1\">\n                                    <MapPin size={10} />\n                                    {event.location}\n                                  </span>\n                                )}\n                                <span className=\"capitalize text-hive-brand-secondary\">{event.type || 'personal'}</span>\n                              </div>\n                            </div>\n                          </div>\n                        ))\n                      ) : (\n                        <div className=\"text-center py-8\">\n                          <Calendar size={48} className=\"text-hive-text-tertiary mx-auto mb-4\" />\n                          <p className=\"text-body-md text-hive-text-tertiary mb-2\">No events scheduled for today</p>\n                          <p className=\"text-body-xs text-hive-text-tertiary\">Enjoy your free time!</p>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex justify-center gap-3\">\n                    <button \n                      onClick={() => {\n                        // Create new event functionality would go here\n                        closeExpandedView();\n                      }}\n                      className=\"px-4 py-2 border border-hive-border-default text-hive-text-secondary rounded-lg hover:text-hive-text-primary hover:border-hive-border-focus transition-colors\"\n                    >\n                      Add Event\n                    </button>\n                    <button \n                      onClick={() => {\n                        closeExpandedView();\n                      }}\n                      className=\"px-6 py-3 bg-hive-brand-secondary text-hive-text-primary rounded-lg font-medium hover:bg-hive-brand-hover transition-colors\"\n                    >\n                      Open Full Calendar\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {expandedWidget === 'ritual' && (\n                <div>\n                  {currentRitual ? (\n                    <div>\n                      {/* Ritual Header */}\n                      <div className=\"mb-6\">\n                        <div className=\"flex items-center gap-3 mb-4\">\n                          <div className=\"w-12 h-12 bg-hive-brand-secondary/20 rounded-lg flex items-center justify-center\">\n                            <TrendingUp size={20} className=\"text-hive-brand-secondary\" />\n                          </div>\n                          <div>\n                            <h3 className=\"text-heading-md font-semibold text-hive-text-primary\">{currentRitual.name}</h3>\n                            <p className=\"text-body-sm text-hive-text-secondary\">{currentRitual.tagline}</p>\n                          </div>\n                        </div>\n                        <p className=\"text-body-md text-hive-text-primary mb-4\">{currentRitual.description}</p>\n                      </div>\n\n                      {/* Progress Overview */}\n                      <div className=\"mb-6\">\n                        <h4 className=\"text-heading-sm font-semibold text-hive-text-primary mb-3\">Your Progress</h4>\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4\">\n                          <div className=\"text-center p-3 bg-hive-background-elevated rounded-lg\">\n                            <div className=\"text-heading-lg font-bold text-hive-brand-secondary\">\n                              {currentRitual.userParticipation?.sessionsCompleted || 0}\n                            </div>\n                            <p className=\"text-body-xs text-hive-text-tertiary\">Sessions</p>\n                          </div>\n                          <div className=\"text-center p-3 bg-hive-background-elevated rounded-lg\">\n                            <div className=\"text-heading-lg font-bold text-hive-status-success\">\n                              {currentRitual.userParticipation?.currentStreak || 0}\n                            </div>\n                            <p className=\"text-body-xs text-hive-text-tertiary\">Current Streak</p>\n                          </div>\n                          <div className=\"text-center p-3 bg-hive-background-elevated rounded-lg\">\n                            <div className=\"text-heading-lg font-bold text-hive-status-info\">\n                              {currentRitual.userParticipation?.longestStreak || 0}\n                            </div>\n                            <p className=\"text-body-xs text-hive-text-tertiary\">Best Streak</p>\n                          </div>\n                          <div className=\"text-center p-3 bg-hive-background-elevated rounded-lg\">\n                            <div className=\"text-heading-lg font-bold text-hive-text-primary\">\n                              {Math.round(currentRitual.userParticipation?.progressPercentage || 0)}%\n                            </div>\n                            <p className=\"text-body-xs text-hive-text-tertiary\">Progress</p>\n                          </div>\n                        </div>\n                        \n                        {/* Progress Bar */}\n                        <div className=\"w-full bg-hive-background-elevated rounded-full h-2 mb-2\">\n                          <div \n                            className=\"bg-hive-brand-secondary h-2 rounded-full transition-all duration-300\"\n                            style={{ width: `${currentRitual.userParticipation?.progressPercentage || 0}%` }}\n                          />\n                        </div>\n                        <p className=\"text-body-xs text-hive-text-tertiary text-center\">\n                          {currentRitual.userParticipation?.progressPercentage || 0}% complete\n                        </p>\n                      </div>\n\n                      {/* Milestones */}\n                      {currentRitual.milestones && currentRitual.milestones.length > 0 && (\n                        <div className=\"mb-6\">\n                          <h4 className=\"text-heading-sm font-semibold text-hive-text-primary mb-3\">Milestones</h4>\n                          <div className=\"space-y-3\">\n                            {currentRitual.milestones.map((milestone: NonNullable<RitualData['milestones']>[0]) => (\n                              <div key={milestone.id} className=\"flex items-center gap-3 p-3 bg-hive-background-elevated rounded-lg\">\n                                <div className={`w-8 h-8 rounded-full flex items-center justify-center ${\n                                  milestone.isReached \n                                    ? 'bg-hive-status-success text-white' \n                                    : 'bg-hive-background-secondary text-hive-text-tertiary'\n                                }`}>\n                                  {milestone.isReached ? (\n                                    <Check size={16} />\n                                  ) : (\n                                    <Clock size={16} />\n                                  )}\n                                </div>\n                                <div className=\"flex-1\">\n                                  <h5 className=\"text-body-md font-medium text-hive-text-primary\">{milestone.name}</h5>\n                                  <p className=\"text-body-xs text-hive-text-secondary\">{milestone.description}</p>\n                                  {!milestone.isReached && milestone.progress !== undefined && (\n                                    <div className=\"mt-2 flex items-center gap-2\">\n                                      <div className=\"flex-1 bg-hive-background-secondary rounded-full h-1\">\n                                        <div \n                                          className=\"bg-hive-brand-secondary h-1 rounded-full\"\n                                          style={{ \n                                            width: `${Math.min(100, (milestone.progress / milestone.progressThreshold) * 100)}%` \n                                          }}\n                                        />\n                                      </div>\n                                      <span className=\"text-body-xs text-hive-text-tertiary\">\n                                        {milestone.progress}/{milestone.progressThreshold}\n                                      </span>\n                                    </div>\n                                  )}\n                                </div>\n                                {milestone.isReached && milestone.reachedAt && (\n                                  <span className=\"text-body-xs text-hive-status-success\">\n                                    {new Date(milestone.reachedAt).toLocaleDateString()}\n                                  </span>\n                                )}\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n\n                      {/* Recent Activity */}\n                      <div className=\"mb-6\">\n                        <h4 className=\"text-heading-sm font-semibold text-hive-text-primary mb-3\">Recent Activity</h4>\n                        {currentRitual.userParticipation?.lastSessionAt ? (\n                          <div className=\"p-3 bg-hive-background-elevated rounded-lg\">\n                            <div className=\"flex items-center gap-2 mb-2\">\n                              <div className=\"w-2 h-2 bg-hive-status-success rounded-full\" />\n                              <span className=\"text-body-sm font-medium text-hive-text-primary\">Last Session Completed</span>\n                            </div>\n                            <p className=\"text-body-xs text-hive-text-secondary\">\n                              {new Date(currentRitual.userParticipation.lastSessionAt).toLocaleString()}\n                            </p>\n                          </div>\n                        ) : (\n                          <div className=\"text-center py-4\">\n                            <Clock size={32} className=\"text-hive-text-tertiary mx-auto mb-2\" />\n                            <p className=\"text-body-sm text-hive-text-tertiary\">No sessions completed yet</p>\n                          </div>\n                        )}\n                      </div>\n\n                      {/* Actions */}\n                      <div className=\"flex justify-center gap-3\">\n                        <button \n                          onClick={() => {\n                            // Start session functionality\n                            closeExpandedView();\n                          }}\n                          className=\"px-4 py-2 border border-hive-border-default text-hive-text-secondary rounded-lg hover:text-hive-text-primary hover:border-hive-border-focus transition-colors\"\n                        >\n                          Start Session\n                        </button>\n                        <button \n                          onClick={() => {\n                            closeExpandedView();\n                          }}\n                          className=\"px-6 py-3 bg-hive-brand-secondary text-hive-text-primary rounded-lg font-medium hover:bg-hive-brand-hover transition-colors\"\n                        >\n                          View All Rituals\n                        </button>\n                      </div>\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-8\">\n                      <div className=\"w-16 h-16 bg-hive-background-secondary/50 rounded-full flex items-center justify-center mx-auto mb-4\">\n                        <Sparkles size={32} className=\"text-hive-text-tertiary\" />\n                      </div>\n                      <h3 className=\"text-heading-md font-semibold text-hive-text-primary mb-2\">No Active Ritual</h3>\n                      <p className=\"text-body-sm text-hive-text-secondary mb-6\">\n                        Start your first ritual to build productive habits and connect with your campus community.\n                      </p>\n                      <div className=\"flex justify-center gap-3\">\n                        <button \n                          onClick={() => {\n                            closeExpandedView();\n                          }}\n                          className=\"px-4 py-2 border border-hive-border-default text-hive-text-secondary rounded-lg hover:text-hive-text-primary hover:border-hive-border-focus transition-colors\"\n                        >\n                          Browse Rituals\n                        </button>\n                        <button \n                          onClick={() => {\n                            closeExpandedView();\n                          }}\n                          className=\"px-6 py-3 bg-hive-brand-secondary text-hive-text-primary rounded-lg font-medium hover:bg-hive-brand-hover transition-colors\"\n                        >\n                          Get Started\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {expandedWidget === 'spaces' && (\n                <div>\n                  <div className=\"mb-6\">\n                    <h3 className=\"text-heading-md font-semibold text-hive-text-primary mb-4\">My Spaces</h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      {mySpaces.length > 0 ? (\n                        mySpaces.map((space: SpaceData, index: number) => (\n                          <div key={space.id || index} className=\"p-4 bg-hive-background-elevated rounded-lg border border-hive-border-default\">\n                            <div className=\"flex items-start gap-3 mb-3\">\n                              <div className={`w-10 h-10 rounded-lg flex items-center justify-center text-body-md font-bold text-white`}\n                                   style={{ backgroundColor: space.color || '#3B82F6' }}>\n                                {space.name?.charAt(0).toUpperCase() || 'S'}\n                              </div>\n                              <div className=\"flex-1 min-w-0\">\n                                <h4 className=\"text-heading-sm font-medium text-hive-text-primary mb-1 truncate\">\n                                  {space.name || 'Unnamed Space'}\n                                </h4>\n                                <p className=\"text-body-xs text-hive-text-tertiary mb-2 line-clamp-2\">\n                                  {space.description || 'No description available'}\n                                </p>\n                                <div className=\"flex items-center gap-2 text-body-xs text-hive-text-tertiary\">\n                                  <span>{space.memberCount || 0} members</span>\n                                  {space.unreadCount > 0 && (\n                                    <span className=\"px-2 py-1 bg-hive-brand-secondary text-white rounded-full text-xs\">\n                                      {space.unreadCount} new\n                                    </span>\n                                  )}\n                                  <span className=\"capitalize text-hive-brand-secondary\">{space.role || 'member'}</span>\n                                </div>\n                              </div>\n                            </div>\n                            <div className=\"flex gap-2\">\n                              <button\n                                onClick={() => {\n                                  closeExpandedView();\n                                }}\n                                className=\"flex-1 px-3 py-2 text-body-xs text-hive-text-secondary border border-hive-border-default rounded-lg hover:text-hive-text-primary hover:border-hive-border-focus transition-colors\"\n                              >\n                                Visit Space\n                              </button>\n                              {space.role === 'admin' && (\n                                <button\n                                  onClick={() => {\n                                    closeExpandedView();\n                                  }}\n                                  className=\"px-3 py-2 text-body-xs text-hive-brand-secondary border border-hive-brand-secondary rounded-lg hover:bg-hive-brand-secondary hover:text-white transition-colors\"\n                                >\n                                  Manage\n                                </button>\n                              )}\n                            </div>\n                          </div>\n                        ))\n                      ) : (\n                        <div className=\"col-span-2 text-center py-8\">\n                          <Users size={48} className=\"text-hive-text-tertiary mx-auto mb-4\" />\n                          <p className=\"text-body-md text-hive-text-tertiary mb-2\">No spaces joined yet</p>\n                          <p className=\"text-body-xs text-hive-text-tertiary\">Discover spaces that match your interests</p>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex justify-center gap-3\">\n                    <button \n                      onClick={() => {\n                        closeExpandedView();\n                      }}\n                      className=\"px-4 py-2 border border-hive-border-default text-hive-text-secondary rounded-lg hover:text-hive-text-primary hover:border-hive-border-focus transition-colors\"\n                    >\n                      Discover Spaces\n                    </button>\n                    <button \n                      onClick={() => {\n                        closeExpandedView();\n                      }}\n                      className=\"px-6 py-3 bg-hive-brand-secondary text-hive-text-primary rounded-lg font-medium hover:bg-hive-brand-hover transition-colors\"\n                    >\n                      View All Spaces\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {expandedWidget === 'connections' && (\n                <div>\n                  <div className=\"mb-6\">\n                    <h3 className=\"text-heading-md font-semibold text-hive-text-primary mb-4\">Campus Connections</h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      {connections.length > 0 ? (\n                        connections.map((connection: ConnectionData, index: number) => (\n                          <div key={connection.id || index} className=\"p-4 bg-hive-background-elevated rounded-lg border border-hive-border-default\">\n                            <div className=\"flex items-start gap-3 mb-3\">\n                              <div className=\"relative\">\n                                {connection.avatarUrl ? (\n                                  <Image\n                                    src={connection.avatarUrl}\n                                    alt={connection.fullName || connection.name}\n                                    width={48}\n                                    height={48}\n                                    className=\"rounded-full object-cover\"\n                                  />\n                                ) : (\n                                  <div className=\"w-12 h-12 bg-hive-brand-secondary rounded-full flex items-center justify-center\">\n                                    <span className=\"text-white text-body-md font-bold\">\n                                      {(connection.fullName || connection.name || 'U').charAt(0).toUpperCase()}\n                                    </span>\n                                  </div>\n                                )}\n                                {connection.isOnline && (\n                                  <div className=\"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full\"></div>\n                                )}\n                              </div>\n                              <div className=\"flex-1 min-w-0\">\n                                <h4 className=\"text-heading-sm font-medium text-hive-text-primary mb-1 truncate\">\n                                  {connection.fullName || connection.name}\n                                </h4>\n                                <p className=\"text-body-xs text-hive-text-secondary mb-1\">@{connection.handle}</p>\n                                {connection.bio && (\n                                  <p className=\"text-body-xs text-hive-text-tertiary mb-2 line-clamp-2\">{connection.bio}</p>\n                                )}\n                                <div className=\"flex items-center gap-2 text-body-xs text-hive-text-tertiary\">\n                                  <span>{connection.major}</span>\n                                  <span>â€¢</span>\n                                  <span>{connection.academicYear}</span>\n                                  {connection.mutualSpaces > 0 && (\n                                    <>\n                                      <span>â€¢</span>\n                                      <span className=\"text-hive-brand-secondary\">{connection.mutualSpaces} mutual spaces</span>\n                                    </>\n                                  )}\n                                </div>\n                                <div className=\"flex items-center gap-1 mt-1\">\n                                  <span className=\"text-body-xs text-hive-text-tertiary capitalize\">{connection.connectionType.replace('_', ' ')}</span>\n                                  {connection.commonInterests?.length > 0 && (\n                                    <span className=\"text-body-xs text-hive-brand-secondary\">\n                                      â€¢ {connection.commonInterests.length} shared interests\n                                    </span>\n                                  )}\n                                </div>\n                              </div>\n                            </div>\n                            <div className=\"flex gap-2\">\n                              <button\n                                onClick={() => {\n                                  closeExpandedView();\n                                }}\n                                className=\"flex-1 px-3 py-2 text-body-xs text-hive-text-secondary border border-hive-border-default rounded-lg hover:text-hive-text-primary hover:border-hive-border-focus transition-colors\"\n                              >\n                                View Profile\n                              </button>\n                              <button\n                                onClick={() => {\n                                  // Message functionality would go here\n                                  closeExpandedView();\n                                }}\n                                className=\"px-3 py-2 text-body-xs text-hive-brand-secondary border border-hive-brand-secondary rounded-lg hover:bg-hive-brand-secondary hover:text-white transition-colors\"\n                              >\n                                Message\n                              </button>\n                            </div>\n                          </div>\n                        ))\n                      ) : (\n                        <div className=\"col-span-2 text-center py-8\">\n                          <Heart size={48} className=\"text-hive-text-tertiary mx-auto mb-4\" />\n                          <p className=\"text-body-md text-hive-text-tertiary mb-2\">No connections yet</p>\n                          <p className=\"text-body-xs text-hive-text-tertiary\">Meet classmates and join spaces to build your network</p>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex justify-center gap-3\">\n                    <button \n                      onClick={() => {\n                        closeExpandedView();\n                      }}\n                      className=\"px-4 py-2 border border-hive-border-default text-hive-text-secondary rounded-lg hover:text-hive-text-primary hover:border-hive-border-focus transition-colors\"\n                    >\n                      Meet People\n                    </button>\n                    <button \n                      onClick={() => {\n                        closeExpandedView();\n                      }}\n                      className=\"px-6 py-3 bg-hive-brand-secondary text-hive-text-primary rounded-lg font-medium hover:bg-hive-brand-hover transition-colors\"\n                    >\n                      Manage Connections\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {expandedWidget === 'hivelab' && (\n                <div>\n                  <p className=\"text-body-md text-hive-text-secondary mb-4\">Detailed tools overview coming soon...</p>\n                  <button \n                    onClick={() => {\n                      closeExpandedView();\n                    }}\n                    className=\"px-6 py-3 bg-hive-brand-secondary text-hive-text-primary rounded-lg font-medium hover:bg-hive-brand-hover transition-colors\"\n                  >\n                    Open HiveLAB\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Universal Configuration Panel */}\n      {configPanelWidget && (\n        <div className=\"fixed inset-y-0 right-0 w-96 bg-hive-background-secondary border-l border-hive-border-default z-50 transform transition-transform\">\n          <div className=\"h-full flex flex-col\">\n            {/* Panel Header */}\n            <div className=\"flex items-center justify-between p-6 border-b border-hive-border-default\">\n              <h2 className=\"text-heading-md font-semibold text-hive-text-primary\">\n                Configure {configPanelWidget === 'avatar' && 'Profile'} \n                {configPanelWidget === 'calendar' && 'Calendar'}\n                {configPanelWidget === 'ritual' && 'Ritual'}\n                {configPanelWidget === 'spaces' && 'Spaces'}\n                {configPanelWidget === 'connections' && 'Connections'}\n                {configPanelWidget === 'hivelab' && 'HiveLAB'}\n              </h2>\n              <button\n                onClick={closeConfigPanel}\n                className=\"p-2 rounded-lg hover:bg-hive-interactive-hover transition-colors\"\n              >\n                <X size={20} className=\"text-hive-text-secondary\" />\n              </button>\n            </div>\n            \n            {/* Panel Content */}\n            <div className=\"flex-1 p-6 overflow-auto\">\n              <p className=\"text-body-md text-hive-text-secondary\">\n                Widget configuration options coming soon...\n              </p>\n            </div>\n            \n            {/* Panel Footer */}\n            <div className=\"p-6 border-t border-hive-border-default\">\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={closeConfigPanel}\n                  className=\"flex-1 px-4 py-2 border border-hive-border-default rounded-lg text-hive-text-secondary hover:text-hive-text-primary hover:border-hive-border-focus transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={closeConfigPanel}\n                  className=\"flex-1 px-4 py-2 bg-hive-brand-secondary text-hive-text-primary rounded-lg font-medium hover:bg-hive-brand-hover transition-colors\"\n                >\n                  Save\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/profile/profile-error-boundary.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Alert' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Alert"},"fix":{"range":[134,182],"text":""},"desc":"Remove unused variable 'Alert'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React from 'react';\nimport { AlertTriangle, RefreshCw } from 'lucide-react';\nimport { Button } from \"@hive/ui\";\nimport { Alert } from \"@/components/temp-stubs\";\nimport { Card, CardContent } from \"@hive/ui\";\n\ninterface Props {\n  children: React.ReactNode;\n  fallback?: React.ComponentType<ErrorFallbackProps>;\n}\n\ninterface ErrorFallbackProps {\n  error: Error;\n  resetErrorBoundary: () => void;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n}\n\nclass ProfileErrorBoundary extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.error('Profile Error Boundary caught an error:', error, errorInfo);\n  }\n\n  resetErrorBoundary = () => {\n    this.setState({ hasError: false, error: null });\n  };\n\n  render() {\n    if (this.state.hasError) {\n      const FallbackComponent = this.props.fallback || DefaultErrorFallback;\n      return (\n        <FallbackComponent \n          error={this.state.error!} \n          resetErrorBoundary={this.resetErrorBoundary}\n        />\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nfunction DefaultErrorFallback({ error, resetErrorBoundary }: ErrorFallbackProps) {\n  return (\n    <div className=\"min-h-screen bg-hive-background-primary flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-md bg-hive-surface-elevated border-hive-border-subtle\">\n        <CardContent className=\"p-6 text-center\">\n          <AlertTriangle className=\"h-12 w-12 text-red-400 mx-auto mb-4\" />\n          <h2 className=\"text-xl font-semibold text-hive-text-primary mb-2\">\n            Something went wrong\n          </h2>\n          <p className=\"text-hive-text-secondary mb-4\">\n            We encountered an error while loading your profile. This has been logged and we'll look into it.\n          </p>\n          <Button \n            onClick={resetErrorBoundary}\n            className=\"w-full bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n          >\n            <RefreshCw className=\"h-4 w-4 mr-2\" />\n            Try Again\n          </Button>\n          {process.env.NODE_ENV === 'development' && (\n            <details className=\"mt-4 text-left\">\n              <summary className=\"text-sm text-hive-text-secondary cursor-pointer\">\n                Error Details (Development)\n              </summary>\n              <pre className=\"mt-2 text-xs bg-hive-background-primary p-2 rounded overflow-auto text-red-400\">\n                {error.message}\n                {error.stack}\n              </pre>\n            </details>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\nexport { ProfileErrorBoundary, type ErrorFallbackProps };","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/profile/profile-identity-modal.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'useSession' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"useSession"},"fix":{"range":[238,291],"text":""},"desc":"Remove unused variable 'useSession'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'updateProfile' function makes the dependencies of useCallback Hook (at line 331) change on every render. Move it inside the useCallback callback. Alternatively, wrap the definition of 'updateProfile' in its own useCallback() Hook.","line":88,"column":9,"nodeType":"VariableDeclarator","endLine":91,"endColumn":4},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'uploadPhoto' function makes the dependencies of useCallback Hook (at line 144) change on every render. Move it inside the useCallback callback. Alternatively, wrap the definition of 'uploadPhoto' in its own useCallback() Hook.","line":92,"column":9,"nodeType":"VariableDeclarator","endLine":95,"endColumn":4}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { useState, useRef, useCallback } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport Image from 'next/image';\nimport { HiveInput, HiveButton, Textarea } from \"@hive/ui\";\nimport { useSession } from '../../hooks/use-session';\n\ninterface CampusProfile {\n  fullName: string;\n  preferredName?: string;\n  profilePhoto?: string;\n  avatarUrl?: string;\n  academicYear: 'freshman' | 'sophomore' | 'junior' | 'senior' | 'graduate' | 'other';\n  major: string;\n  housing: string;\n  pronouns?: string;\n  statusMessage?: string;\n  isBuilder?: boolean;\n  age?: number;\n}\n\ninterface ProfileIdentityModalProps {\n  profile: CampusProfile;\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst ACADEMIC_YEARS = [\n  { value: 'freshman', label: 'Freshman' },\n  { value: 'sophomore', label: 'Sophomore' },\n  { value: 'junior', label: 'Junior' },\n  { value: 'senior', label: 'Senior' },\n  { value: 'graduate', label: 'Graduate' },\n  { value: 'other', label: 'Other' },\n];\n\nconst COMMON_MAJORS = [\n  'Computer Science', 'Business Administration', 'Psychology', 'Biology', \n  'Engineering', 'English', 'Mathematics', 'History', 'Economics', 'Political Science',\n  'Chemistry', 'Physics', 'Art', 'Music', 'Philosophy', 'Sociology', 'Anthropology',\n  'Environmental Science', 'Nursing', 'Education', 'Communications', 'Marketing',\n  'Finance', 'Pre-Med', 'Pre-Law', 'International Relations', 'Other'\n];\n\nexport function ProfileIdentityModal({ profile, isOpen, onClose }: ProfileIdentityModalProps) {\n  const [formData, setFormData] = useState({\n    fullName: profile.fullName || '',\n    preferredName: profile.preferredName || '',\n    age: profile.age || '',\n    academicYear: profile.academicYear || 'freshman',\n    major: profile.major || '',\n    housing: profile.housing || '',\n    pronouns: profile.pronouns || '',\n    statusMessage: profile.statusMessage || '',\n  });\n\n  // Update form data when profile changes\n  React.useEffect(() => {\n    if (profile) {\n      setFormData({\n        fullName: profile.fullName || '',\n        preferredName: profile.preferredName || '',\n        age: profile.age || '',\n        academicYear: profile.academicYear || 'freshman',\n        major: profile.major || '',\n        housing: profile.housing || '',\n        pronouns: profile.pronouns || '',\n        statusMessage: profile.statusMessage || '',\n      });\n    }\n  }, [profile]);\n  \n  const [photoPreview, setPhotoPreview] = useState<string | null>(profile.profilePhoto || profile.avatarUrl || null);\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadError, setUploadError] = useState<string | null>(null);\n  \n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  \n  const [showCamera, setShowCamera] = useState(false);\n  const [stream, setStream] = useState<MediaStream | null>(null);\n  \n  const queryClient = useQueryClient();\n  \n  // Stub profile methods (useSession doesn't provide these)\n  const updateProfile = async (data: any): Promise<any> => {\n    // Return mock data for now - implement actual API call later\n    return { success: true, ...data };\n  };\n  const uploadPhoto = async (file: File): Promise<{ avatarUrl: string }> => {\n    // Return mock data for now - implement actual API call later\n    return { avatarUrl: URL.createObjectURL(file) };\n  };\n  const isUpdating = false;\n  const _profileError = null;\n  const _clearError = () => {};\n  \n  // PWA Camera Support Detection\n  const isCameraSupported = typeof navigator !== 'undefined' && \n    navigator.mediaDevices && \n    navigator.mediaDevices.getUserMedia;\n  \n  const _isMobile = typeof window !== 'undefined' && \n    /Mobi|Android/i.test(navigator.userAgent);\n\n  // Use HIVE photo upload hook\n  const handlePhotoUpload = useCallback(async (file: File) => {\n    try {\n      setIsUploading(true);\n      setUploadError(null);\n      const result = await uploadPhoto(file);\n      setPhotoPreview(result.avatarUrl);\n      \n      // Update localStorage session data for immediate sync\n      try {\n        const sessionJson = window.localStorage.getItem('hive_session');\n        if (sessionJson) {\n          const session = JSON.parse(sessionJson);\n          session.profileData = {\n            ...session.profileData,\n            avatarUrl: result.avatarUrl\n          };\n          window.localStorage.setItem('hive_session', JSON.stringify(session));\n          \n          // Trigger storage event to update useSession\n          window.dispatchEvent(new StorageEvent('storage', {\n            key: 'hive_session',\n            newValue: JSON.stringify(session)\n          }));\n        }\n      } catch (sessionError) {\n        console.warn('Could not update session data:', sessionError);\n      }\n      \n      // Force refresh profile data across dashboard\n      queryClient.invalidateQueries({ queryKey: [\"campus-profile\"] });\n    } catch (error) {\n      setUploadError(error instanceof Error ? error.message : 'Upload failed');\n    } finally {\n      setIsUploading(false);\n    }\n  }, [uploadPhoto, queryClient]);\n\n  // Generate avatar mutation\n  const generateAvatarMutation = useMutation({\n    mutationFn: async () => {\n      const headers: Record<string, string> = {};\n      try {\n        const sessionJson = window.localStorage.getItem('hive_session');\n        if (sessionJson) {\n          const session = JSON.parse(sessionJson);\n          headers.Authorization = `Bearer ${process.env.NODE_ENV === 'development' ? 'test-token' : session.token}`;\n        } else {\n          headers.Authorization = `Bearer test-token`;\n        }\n      } catch (error) {\n        headers.Authorization = `Bearer test-token`;\n      }\n      \n      const response = await fetch('/api/profile/generate-avatar', {\n        method: 'POST',\n        headers,\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to generate avatar');\n      }\n      \n      return response.json();\n    },\n    onSuccess: (data) => {\n      setPhotoPreview(data.avatarUrl);\n      setUploadError(null);\n      \n      // Update localStorage session data for immediate sync\n      try {\n        const sessionJson = window.localStorage.getItem('hive_session');\n        if (sessionJson) {\n          const session = JSON.parse(sessionJson);\n          session.profileData = {\n            ...session.profileData,\n            avatarUrl: data.avatarUrl\n          };\n          window.localStorage.setItem('hive_session', JSON.stringify(session));\n          \n          // Trigger storage event to update useSession\n          window.dispatchEvent(new StorageEvent('storage', {\n            key: 'hive_session',\n            newValue: JSON.stringify(session)\n          }));\n        }\n      } catch (sessionError) {\n        console.warn('Could not update session data:', sessionError);\n      }\n      \n      // Force refresh profile data across dashboard\n      queryClient.invalidateQueries({ queryKey: [\"campus-profile\"] });\n      queryClient.refetchQueries({ queryKey: [\"campus-profile\"] });\n    },\n    onError: (error) => {\n      setUploadError(error instanceof Error ? error.message : 'Generation failed');\n    }\n  });\n\n  // Handle file input change\n  const handleFileChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      // Validate file type\n      const allowedTypes = ['image/jpeg', 'image/png', 'image/webp'];\n      if (!allowedTypes.includes(file.type)) {\n        setUploadError('Invalid file type. Only JPEG, PNG, and WebP are allowed.');\n        return;\n      }\n      \n      // Validate file size (5MB limit)\n      const maxSize = 5 * 1024 * 1024; // 5MB\n      if (file.size > maxSize) {\n        setUploadError('File too large. Maximum size is 5MB.');\n        return;\n      }\n      \n      handlePhotoUpload(file);\n    }\n  }, [handlePhotoUpload]);\n\n  // PWA Camera Functions\n  const startCamera = useCallback(async () => {\n    if (!isCameraSupported) return;\n    \n    try {\n      const mediaStream = await navigator.mediaDevices.getUserMedia({\n        video: { facingMode: 'user' },\n        audio: false\n      });\n      \n      setStream(mediaStream);\n      setShowCamera(true);\n      \n      if (videoRef.current) {\n        videoRef.current.srcObject = mediaStream;\n      }\n    } catch (error) {\n      console.error('Camera access denied:', error);\n      setUploadError('Camera access denied. Please allow camera permissions.');\n    }\n  }, [isCameraSupported]);\n\n  const stopCamera = useCallback(() => {\n    if (stream) {\n      stream.getTracks().forEach(track => track.stop());\n      setStream(null);\n    }\n    setShowCamera(false);\n  }, [stream]);\n\n  const capturePhoto = useCallback(() => {\n    if (!videoRef.current || !canvasRef.current) return;\n    \n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    \n    if (!context) return;\n    \n    // Set canvas dimensions to match video\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    \n    // Draw video frame to canvas\n    context.drawImage(video, 0, 0);\n    \n    // Convert to blob and upload\n    canvas.toBlob((blob) => {\n      if (blob) {\n        const file = new File([blob], 'camera-photo.jpg', { type: 'image/jpeg' });\n        handlePhotoUpload(file);\n        stopCamera();\n      }\n    }, 'image/jpeg', 0.8);\n  }, [handlePhotoUpload, stopCamera]);\n\n\n  const handleUpdateProfile = useCallback(async () => {\n    try {\n      // Filter out empty strings and prepare update data\n      const updateData = Object.fromEntries(\n        Object.entries(formData).filter(([_, value]) => value !== '')\n      );\n      \n      // Convert age to number if present\n      if (updateData.age) {\n        updateData.age = parseInt(updateData.age as string);\n      }\n      \n      await updateProfile(updateData);\n      \n      // Update localStorage session data for immediate sync\n      try {\n        const sessionJson = window.localStorage.getItem('hive_session');\n        if (sessionJson) {\n          const session = JSON.parse(sessionJson);\n          session.profileData = {\n            ...session.profileData,\n            fullName: updateData.fullName || session.profileData?.fullName,\n            major: updateData.major || session.profileData?.major,\n            // Add other fields as needed\n          };\n          window.localStorage.setItem('hive_session', JSON.stringify(session));\n          \n          // Trigger storage event to update useSession\n          window.dispatchEvent(new StorageEvent('storage', {\n            key: 'hive_session',\n            newValue: JSON.stringify(session)\n          }));\n        }\n      } catch (sessionError) {\n        console.warn('Could not update session data:', sessionError);\n      }\n      \n      // Force refresh profile data across dashboard\n      queryClient.invalidateQueries({ queryKey: [\"campus-profile\"] });\n      queryClient.refetchQueries({ queryKey: [\"campus-profile\"] });\n      \n      onClose();\n    } catch (error) {\n      setUploadError(error instanceof Error ? error.message : 'Profile update failed');\n    }\n  }, [formData, updateProfile, onClose, queryClient]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-start justify-center z-50 p-4 animate-in fade-in duration-300 overflow-y-auto\">\n      <div className=\"bg-hive-background-tertiary rounded-2xl border border-hive-brand-primary/20 w-full max-w-4xl my-8 animate-in slide-in-from-bottom-4 zoom-in-95 duration-300 ease-out\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-4 sm:p-6 border-b border-hive-border-primary sticky top-0 bg-hive-background-tertiary z-10\">\n          <h2 className=\"text-xl font-bold text-hive-text-primary\">Your Profile</h2>\n          <button\n            onClick={onClose}\n            className=\"w-8 h-8 rounded-full bg-hive-background-secondary flex items-center justify-center text-hive-text-muted hover:bg-hive-background-interactive hover:scale-110 transition-all duration-200\"\n          >\n            âœ•\n          </button>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 p-4 sm:p-6\">\n            {/* Photo Section */}\n            <div className=\"space-y-4 sm:space-y-6\">\n              <h3 className=\"text-lg font-semibold text-hive-text-primary\">Profile Photo</h3>\n              \n              {/* Photo Display */}\n              <div className=\"relative\">\n                <div className=\"aspect-square rounded-2xl overflow-hidden bg-gradient-to-br from-hive-brand-primary/20 to-hive-brand-primary/10 border-2 border-dashed border-hive-brand-primary/30\">\n                  {photoPreview ? (\n                    <Image\n                      src={photoPreview}\n                      alt=\"Profile preview\"\n                      width={400}\n                      height={400}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  ) : (\n                    <div className=\"w-full h-full flex items-center justify-center\">\n                      <div className=\"text-center\">\n                        <div className=\"w-20 h-20 rounded-full bg-gradient-to-br from-hive-brand-primary/30 to-hive-brand-primary/20 border-2 border-hive-brand-primary/40 flex items-center justify-center text-2xl font-bold text-hive-text-primary mx-auto mb-4\">\n                          {formData.fullName?.split(' ').map(n => n[0]).join('').toUpperCase() || 'U'}\n                        </div>\n                        <p className=\"text-hive-text-secondary text-sm\">No photo yet</p>\n                      </div>\n                    </div>\n                  )}\n                </div>\n                \n                {/* Upload Error */}\n                {uploadError && (\n                  <div className=\"mt-2 text-sm text-hive-status-error bg-hive-status-error/10 border border-hive-status-error/20 rounded-lg p-3\">\n                    {uploadError}\n                  </div>\n                )}\n              </div>\n\n              {/* Photo Actions */}\n              <div className=\"space-y-3\">\n                {/* HIVE File Upload Component - temporarily disabled */}\n                {/* <HiveFileUpload\n                  accept=\"image/*\"\n                  maxSize={5 * 1024 * 1024} // 5MB\n                  onFilesSelected={(files: File[]) => {\n                    if (files[0]) {\n                      handlePhotoUpload(files[0]);\n                    }\n                  }}\n                  multiple={false}\n                  className=\"w-full\"\n                /> */}\n                \n                {/* Fallback Upload Button */}\n                <HiveButton\n                  onClick={() => fileInputRef.current?.click()}\n                  disabled={isUploading}\n                  className=\"w-full\"\n                  variant=\"primary\"\n                >\n                  {isUploading ? (\n                    <div className=\"flex items-center justify-center animate-pulse\">\n                      <div className=\"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2\" />\n                      <span className=\"animate-in slide-in-from-left-1\">Uploading...</span>\n                    </div>\n                  ) : (\n                    <span className=\"transition-all duration-200 hover:scale-105 inline-flex items-center\">\n                      ðŸ“ Upload Photo\n                    </span>\n                  )}\n                </HiveButton>\n\n                {/* Take Photo (PWA) */}\n                {isCameraSupported && (\n                  <HiveButton\n                    onClick={showCamera ? capturePhoto : startCamera}\n                    disabled={isUploading}\n                    variant=\"outline\"\n                    className=\"w-full transition-all duration-200 hover:scale-[1.02]\"\n                  >\n                    <span className=\"transition-all duration-200 hover:scale-105 inline-flex items-center\">\n                      ðŸ“± {showCamera ? 'Capture Photo' : 'Take Photo'}\n                    </span>\n                  </HiveButton>\n                )}\n\n                {/* Generate Avatar */}\n                <HiveButton\n                  onClick={() => generateAvatarMutation.mutate()}\n                  disabled={generateAvatarMutation.isPending}\n                  variant=\"outline\"\n                  className=\"w-full transition-all duration-200 hover:scale-[1.02]\"\n                >\n                  {generateAvatarMutation.isPending ? (\n                    <div className=\"flex items-center justify-center animate-pulse\">\n                      <div className=\"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2\" />\n                      <span className=\"animate-in slide-in-from-left-1\">Generating...</span>\n                    </div>\n                  ) : (\n                    <span className=\"transition-all duration-200 hover:scale-105 inline-flex items-center\">\n                      ðŸŽ¨ Generate Avatar\n                    </span>\n                  )}\n                </HiveButton>\n\n                {/* Remove Photo */}\n                {photoPreview && (\n                  <HiveButton\n                    onClick={() => setPhotoPreview(null)}\n                    variant=\"destructive\"\n                    className=\"w-full\"\n                  >\n                    ðŸ—‘ï¸ Remove Photo\n                  </HiveButton>\n                )}\n              </div>\n\n              {/* Camera View (Hidden Canvas for Capture) */}\n              {showCamera && (\n                <div className=\"space-y-4 animate-in slide-in-from-top-4 fade-in duration-300\">\n                  <video\n                    ref={videoRef}\n                    autoPlay\n                    playsInline\n                    muted\n                    className=\"w-full aspect-square object-cover rounded-xl transition-all duration-300 hover:scale-[1.02]\"\n                  />\n                  <button\n                    onClick={stopCamera}\n                    className=\"w-full py-2 px-4 bg-[#3A3A3D] text-[#E5E5E7] rounded-lg text-sm hover:bg-[#4A4A4D] hover:scale-[1.02] transition-all duration-200\"\n                  >\n                    Cancel Camera\n                  </button>\n                </div>\n              )}\n              <canvas ref={canvasRef} className=\"hidden\" />\n            </div>\n\n            {/* Identity Section */}\n            <div className=\"space-y-4 sm:space-y-6\">\n              <h3 className=\"text-lg font-semibold text-[#E5E5E7]\">Identity & Info</h3>\n              \n              <div className=\"space-y-4\">\n                {/* Display Name */}\n                <div>\n                  <label className=\"block text-sm font-medium text-hive-text-secondary mb-2\">\n                    Display Name\n                  </label>\n                  <HiveInput\n                    value={formData.fullName}\n                    onChange={(e) => setFormData(prev => ({ ...prev, fullName: e.target.value }))}\n                    placeholder=\"Your full name\"\n                    className=\"w-full\"\n                  />\n                </div>\n\n                {/* Preferred Name */}\n                <div>\n                  <label className=\"block text-sm font-medium text-hive-text-secondary mb-2\">\n                    Preferred Name (Optional)\n                  </label>\n                  <HiveInput\n                    value={formData.preferredName}\n                    onChange={(e) => setFormData(prev => ({ ...prev, preferredName: e.target.value }))}\n                    placeholder=\"What should we call you?\"\n                    className=\"w-full\"\n                  />\n                </div>\n\n                {/* Age & Academic Year */}\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-hive-text-secondary mb-2\">\n                      Age\n                    </label>\n                    <HiveInput\n                      type=\"number\"\n                      value={formData.age}\n                      onChange={(e) => setFormData(prev => ({ ...prev, age: e.target.value }))}\n                      placeholder=\"18\"\n                      className=\"w-full\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-hive-text-secondary mb-2\">\n                      Academic Year\n                    </label>\n                    <select\n                      value={formData.academicYear}\n                      onChange={(e) => setFormData(prev => ({ ...prev, academicYear: e.target.value as any }))}\n                      className=\"w-full px-4 py-3 bg-hive-background-secondary border border-hive-border-primary rounded-xl text-hive-text-primary focus:border-hive-brand-primary/40 focus:outline-none transition-colors\"\n                    >\n                      {ACADEMIC_YEARS.map(year => (\n                        <option key={year.value} value={year.value}>\n                          {year.label}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n\n                {/* Major */}\n                <div>\n                  <label className=\"block text-sm font-medium text-hive-text-secondary mb-2\">\n                    Major\n                  </label>\n                  <select\n                    value={formData.major}\n                    onChange={(e) => setFormData(prev => ({ ...prev, major: e.target.value }))}\n                    className=\"w-full px-4 py-3 bg-hive-background-secondary border border-hive-border-primary rounded-xl text-hive-text-primary focus:border-hive-brand-primary/40 focus:outline-none transition-colors\"\n                  >\n                    <option value=\"\">Select your major</option>\n                    {COMMON_MAJORS.map(major => (\n                      <option key={major} value={major}>\n                        {major}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                {/* Housing */}\n                <div>\n                  <label className=\"block text-sm font-medium text-hive-text-secondary mb-2\">\n                    Dorm/Housing\n                  </label>\n                  <HiveInput\n                    value={formData.housing}\n                    onChange={(e) => setFormData(prev => ({ ...prev, housing: e.target.value }))}\n                    placeholder=\"e.g., Smith Hall, Room 305\"\n                    className=\"w-full\"\n                  />\n                </div>\n\n                {/* Pronouns */}\n                <div>\n                  <label className=\"block text-sm font-medium text-hive-text-secondary mb-2\">\n                    Pronouns (Optional)\n                  </label>\n                  <HiveInput\n                    value={formData.pronouns}\n                    onChange={(e) => setFormData(prev => ({ ...prev, pronouns: e.target.value }))}\n                    placeholder=\"e.g., they/them, she/her, he/him\"\n                    className=\"w-full\"\n                  />\n                </div>\n\n                {/* Status Message */}\n                <div>\n                  <label className=\"block text-sm font-medium text-hive-text-secondary mb-2\">\n                    Bio/Status (Optional)\n                  </label>\n                  <Textarea\n                    value={formData.statusMessage}\n                    onChange={(e) => setFormData(prev => ({ ...prev, statusMessage: e.target.value }))}\n                    placeholder=\"Tell your campus story...\"\n                    rows={3}\n                    maxLength={200}\n                    className=\"w-full resize-none\"\n                  />\n                  <div className=\"text-xs text-hive-text-muted mt-1\">\n                    {formData.statusMessage.length}/200 characters\n                  </div>\n                </div>\n              </div>\n\n              {/* Builder Status Info */}\n              {profile.isBuilder && (\n                <div className=\"p-4 bg-gradient-to-r from-[#FFD700]/10 to-[#FFD700]/5 border border-[#FFD700]/20 rounded-xl\">\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <span className=\"text-xl\">ðŸ”¨</span>\n                    <h4 className=\"font-semibold text-[#E5E5E7]\">Builder Status</h4>\n                  </div>\n                  <p className=\"text-sm text-[#C1C1C4] mb-2\">\n                    You're a recognized student leader and builder in the HIVE community.\n                  </p>\n                  <div className=\"text-xs text-[#9B9B9F]\">\n                    Member since: March 2025 â€¢ Tools created: 2 â€¢ Impact: 101 students helped\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        \n\n        {/* Footer Actions */}\n        <div className=\"p-6 border-t border-hive-border-primary flex justify-end gap-3\">\n            <HiveButton\n              onClick={onClose}\n              variant=\"outline\"\n              className=\"px-6 py-3\"\n            >\n              Cancel\n            </HiveButton>\n            <HiveButton\n              onClick={handleUpdateProfile}\n              disabled={isUpdating}\n              variant=\"primary\"\n              className=\"px-6 py-3\"\n            >\n              {isUpdating ? (\n                <>\n                  <div className=\"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2\" />\n                  Saving...\n                </>\n              ) : (\n                'Save Changes'\n              )}\n            </HiveButton>\n          </div>\n      </div>\n\n      {/* Hidden file input */}\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={handleFileChange}\n        className=\"hidden\"\n      />\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/profile/profile-loading-skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/profile/tool-config-modal.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'IconComponent' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":98,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":98,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"IconComponent"},"fix":{"range":[1800,1832],"text":""},"desc":"Remove unused variable 'IconComponent'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState } from 'react';\nimport {\n  HiveModal,\n  Button,\n  Card,\n  Switch,\n  Badge,\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger\n} from '@hive/ui';\nimport { \n  Settings, \n  Shield, \n  Bell, \n  Share2, \n  Trash2,\n  Key,\n  Activity,\n  BarChart3,\n  Check\n} from 'lucide-react';\n\ninterface ToolPermission {\n  id: string;\n  name: string;\n  description: string;\n  required: boolean;\n  granted: boolean;\n}\n\ninterface ToolConfigModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (_config: ToolConfiguration) => Promise<void>;\n  onUninstall?: () => Promise<void>;\n  tool: {\n    id: string;\n    name: string;\n    description: string;\n    icon: any;\n    version: string;\n    isCustom?: boolean;\n    permissions: ToolPermission[];\n    settings: Record<string, any>;\n    usageStats?: {\n      timesUsed: number;\n      lastUsed: string;\n      avgSessionLength: number;\n    };\n  };\n}\n\ninterface ToolConfiguration {\n  permissions: Record<string, boolean>;\n  settings: Record<string, any>;\n  notifications: {\n    updates: boolean;\n    usage: boolean;\n    sharing: boolean;\n  };\n  sharing: {\n    allowSpaceSharing: boolean;\n    allowPublicSharing: boolean;\n    shareUsageStats: boolean;\n  };\n}\n\nexport function ToolConfigModal({\n  isOpen,\n  onClose,\n  onSave,\n  onUninstall,\n  tool\n}: ToolConfigModalProps) {\n  const [isSaving, setIsSaving] = useState(false);\n  const [config, setConfig] = useState<ToolConfiguration>({\n    permissions: tool.permissions.reduce((acc, perm) => ({\n      ...acc,\n      [perm.id]: perm.granted\n    }), {}),\n    settings: tool.settings,\n    notifications: {\n      updates: true,\n      usage: false,\n      sharing: true\n    },\n    sharing: {\n      allowSpaceSharing: true,\n      allowPublicSharing: false,\n      shareUsageStats: false\n    }\n  });\n\n  const IconComponent = tool.icon;\n\n  const handlePermissionChange = (permId: string, granted: boolean) => {\n    setConfig(prev => ({\n      ...prev,\n      permissions: {\n        ...prev.permissions,\n        [permId]: granted\n      }\n    }));\n  };\n\n  const handleNotificationChange = (key: keyof ToolConfiguration['notifications'], value: boolean) => {\n    setConfig(prev => ({\n      ...prev,\n      notifications: {\n        ...prev.notifications,\n        [key]: value\n      }\n    }));\n  };\n\n  const handleSharingChange = (key: keyof ToolConfiguration['sharing'], value: boolean) => {\n    setConfig(prev => ({\n      ...prev,\n      sharing: {\n        ...prev.sharing,\n        [key]: value\n      }\n    }));\n  };\n\n  const handleSave = async () => {\n    try {\n      setIsSaving(true);\n      await onSave(config);\n      onClose();\n    } catch (error) {\n      console.error('Failed to save tool configuration:', error);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const requiredPermissions = tool.permissions.filter(p => p.required);\n  const optionalPermissions = tool.permissions.filter(p => !p.required);\n\n  return (\n    <HiveModal \n      open={isOpen} \n      onOpenChange={onClose} \n      size=\"xl\"\n      title={`Configure ${tool.name}`}\n      description={`Version ${tool.version} â€¢ ${tool.isCustom ? 'Custom Tool' : 'Marketplace Tool'}`}\n    >\n\n        <div className=\"p-6\">\n          <Tabs defaultValue=\"permissions\" className=\"space-y-6\">\n            <TabsList className=\"grid w-full grid-cols-4\">\n              <TabsTrigger value=\"permissions\" className=\"flex items-center space-x-2\">\n                <Shield className=\"h-4 w-4\" />\n                <span>Permissions</span>\n              </TabsTrigger>\n              <TabsTrigger value=\"notifications\" className=\"flex items-center space-x-2\">\n                <Bell className=\"h-4 w-4\" />\n                <span>Notifications</span>\n              </TabsTrigger>\n              <TabsTrigger value=\"sharing\" className=\"flex items-center space-x-2\">\n                <Share2 className=\"h-4 w-4\" />\n                <span>Sharing</span>\n              </TabsTrigger>\n              <TabsTrigger value=\"usage\" className=\"flex items-center space-x-2\">\n                <BarChart3 className=\"h-4 w-4\" />\n                <span>Usage</span>\n              </TabsTrigger>\n            </TabsList>\n\n            {/* Permissions Tab */}\n            <TabsContent value=\"permissions\" className=\"space-y-4\">\n              {requiredPermissions.length > 0 && (\n                <Card className=\"p-4 bg-hive-background-overlay border-hive-border-default\">\n                  <h3 className=\"font-medium text-white mb-3 flex items-center space-x-2\">\n                    <Key className=\"h-4 w-4\" />\n                    <span>Required Permissions</span>\n                  </h3>\n                  <div className=\"space-y-3\">\n                    {requiredPermissions.map((permission) => (\n                      <div key={permission.id} className=\"flex items-center justify-between\">\n                        <div>\n                          <div className=\"font-medium text-white\">{permission.name}</div>\n                          <div className=\"text-sm text-hive-text-mutedLight\">{permission.description}</div>\n                        </div>\n                        <Badge variant=\"secondary\" className=\"text-xs\">\n                          Required\n                        </Badge>\n                      </div>\n                    ))}\n                  </div>\n                </Card>\n              )}\n\n              {optionalPermissions.length > 0 && (\n                <Card className=\"p-4 bg-hive-background-overlay border-hive-border-default\">\n                  <h3 className=\"font-medium text-white mb-3 flex items-center space-x-2\">\n                    <Settings className=\"h-4 w-4\" />\n                    <span>Optional Permissions</span>\n                  </h3>\n                  <div className=\"space-y-3\">\n                    {optionalPermissions.map((permission) => (\n                      <div key={permission.id} className=\"flex items-center justify-between\">\n                        <div>\n                          <div className=\"font-medium text-white\">{permission.name}</div>\n                          <div className=\"text-sm text-hive-text-mutedLight\">{permission.description}</div>\n                        </div>\n                        <Switch\n                          checked={config.permissions[permission.id] || false}\n                          onCheckedChange={(checked) => handlePermissionChange(permission.id, checked)}\n                        />\n                      </div>\n                    ))}\n                  </div>\n                </Card>\n              )}\n            </TabsContent>\n\n            {/* Notifications Tab */}\n            <TabsContent value=\"notifications\" className=\"space-y-4\">\n              <Card className=\"p-4 bg-hive-background-overlay border-hive-border-default\">\n                <h3 className=\"font-medium text-white mb-3 flex items-center space-x-2\">\n                  <Bell className=\"h-4 w-4\" />\n                  <span>Notification Preferences</span>\n                </h3>\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <div className=\"font-medium text-white\">Tool Updates</div>\n                      <div className=\"text-sm text-hive-text-mutedLight\">Get notified when the tool is updated</div>\n                    </div>\n                    <Switch\n                      checked={config.notifications.updates}\n                      onCheckedChange={(checked) => handleNotificationChange('updates', checked)}\n                    />\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <div className=\"font-medium text-white\">Usage Reminders</div>\n                      <div className=\"text-sm text-hive-text-mutedLight\">Remind you to use this tool regularly</div>\n                    </div>\n                    <Switch\n                      checked={config.notifications.usage}\n                      onCheckedChange={(checked) => handleNotificationChange('usage', checked)}\n                    />\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <div className=\"font-medium text-white\">Sharing Activity</div>\n                      <div className=\"text-sm text-hive-text-mutedLight\">Notify when others interact with your shared tools</div>\n                    </div>\n                    <Switch\n                      checked={config.notifications.sharing}\n                      onCheckedChange={(checked) => handleNotificationChange('sharing', checked)}\n                    />\n                  </div>\n                </div>\n              </Card>\n            </TabsContent>\n\n            {/* Sharing Tab */}\n            <TabsContent value=\"sharing\" className=\"space-y-4\">\n              <Card className=\"p-4 bg-hive-background-overlay border-hive-border-default\">\n                <h3 className=\"font-medium text-white mb-3 flex items-center space-x-2\">\n                  <Share2 className=\"h-4 w-4\" />\n                  <span>Sharing Settings</span>\n                </h3>\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <div className=\"font-medium text-white\">Allow Space Sharing</div>\n                      <div className=\"text-sm text-hive-text-mutedLight\">Let others in your spaces use this tool</div>\n                    </div>\n                    <Switch\n                      checked={config.sharing.allowSpaceSharing}\n                      onCheckedChange={(checked) => handleSharingChange('allowSpaceSharing', checked)}\n                    />\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <div className=\"font-medium text-white\">Public Sharing</div>\n                      <div className=\"text-sm text-hive-text-mutedLight\">Make this tool discoverable by all HIVE users</div>\n                    </div>\n                    <Switch\n                      checked={config.sharing.allowPublicSharing}\n                      onCheckedChange={(checked) => handleSharingChange('allowPublicSharing', checked)}\n                    />\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <div className=\"font-medium text-white\">Share Usage Stats</div>\n                      <div className=\"text-sm text-hive-text-mutedLight\">Allow others to see how often you use this tool</div>\n                    </div>\n                    <Switch\n                      checked={config.sharing.shareUsageStats}\n                      onCheckedChange={(checked) => handleSharingChange('shareUsageStats', checked)}\n                    />\n                  </div>\n                </div>\n              </Card>\n            </TabsContent>\n\n            {/* Usage Stats Tab */}\n            <TabsContent value=\"usage\" className=\"space-y-4\">\n              {tool.usageStats ? (\n                <Card className=\"p-4 bg-hive-background-overlay border-hive-border-default\">\n                  <h3 className=\"font-medium text-white mb-3 flex items-center space-x-2\">\n                    <Activity className=\"h-4 w-4\" />\n                    <span>Usage Statistics</span>\n                  </h3>\n                  <div className=\"grid grid-cols-3 gap-4\">\n                    <div className=\"text-center\">\n                      <div className=\"text-2xl font-bold text-hive-gold\">{tool.usageStats.timesUsed}</div>\n                      <div className=\"text-sm text-hive-text-mutedLight\">Times Used</div>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"text-2xl font-bold text-blue-400\">{tool.usageStats.avgSessionLength}m</div>\n                      <div className=\"text-sm text-hive-text-mutedLight\">Avg Session</div>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"text-2xl font-bold text-green-400\">\n                        {new Date(tool.usageStats.lastUsed).toLocaleDateString()}\n                      </div>\n                      <div className=\"text-sm text-hive-text-mutedLight\">Last Used</div>\n                    </div>\n                  </div>\n                </Card>\n              ) : (\n                <div className=\"text-center py-8 text-hive-text-mutedLight\">\n                  <BarChart3 className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n                  <p>No usage data available yet</p>\n                  <p className=\"text-sm\">Use this tool to see your statistics</p>\n                </div>\n              )}\n            </TabsContent>\n          </Tabs>\n        </div>\n\n        <div className=\"flex items-center justify-between w-full px-6 py-4 border-t border-white/10\">\n          <div>\n            {onUninstall && !tool.isCustom && (\n              <Button\n                variant=\"outline\"\n                onClick={onUninstall}\n                className=\"border-red-500 text-red-400 hover:bg-red-500/10\"\n                disabled={isSaving}\n              >\n                <Trash2 className=\"h-4 w-4 mr-2\" />\n                Uninstall\n              </Button>\n            )}\n          </div>\n          <div className=\"flex items-center space-x-3\">\n            <Button\n              variant=\"outline\"\n              onClick={onClose}\n              disabled={isSaving}\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={handleSave}\n              disabled={isSaving}\n              className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n            >\n              {isSaving ? (\n                <>\n                  <Settings className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Saving...\n                </>\n              ) : (\n                <>\n                  <Check className=\"h-4 w-4 mr-2\" />\n                  Save Changes\n                </>\n              )}\n            </Button>\n          </div>\n        </div>\n    </HiveModal>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/search/search-interface.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Loader2' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Loader2"},"fix":{"range":[246,257],"text":""},"desc":"Remove unused variable 'Loader2'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport {\n  Card,\n  Button,\n  Input,\n  Badge,\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n  Spinner,\n} from '@hive/ui';\nimport {\n  Search,\n  Loader2,\n  Clock,\n  Users,\n  Code,\n  Calendar,\n  FileText,\n  X,\n  Tag,\n  MessageCircle,\n  Heart,\n  CheckCircle,\n  Sparkles,\n  ArrowRight,\n  History\n} from 'lucide-react';\nimport { SearchEngine, SearchQuery, SearchResult, SearchItem } from '../../lib/search-engine';\n\ninterface SearchInterfaceProps {\n  onResultSelect?: (_item: SearchItem) => void;\n  onUserSelect?: (_userId: string) => void;\n  onSpaceSelect?: (_spaceId: string) => void;\n  onToolSelect?: (_toolId: string) => void;\n  placeholder?: string;\n  showFilters?: boolean;\n  compactMode?: boolean;\n  maxResults?: number;\n}\n\nexport function SearchInterface({\n  onResultSelect,\n  onUserSelect,\n  onSpaceSelect,\n  onToolSelect,\n  placeholder = \"Search everything on HIVE...\",\n  showFilters = true,\n  compactMode: _compactMode = false,\n  maxResults = 50\n}: SearchInterfaceProps) {\n  const [query, setQuery] = useState('');\n  const [searchType, setSearchType] = useState<'all' | 'posts' | 'users' | 'spaces' | 'tools' | 'events'>('all');\n  const [sortBy, setSortBy] = useState<'relevance' | 'recent' | 'popular' | 'trending'>('relevance');\n  const [timeRange, setTimeRange] = useState<'all' | 'hour' | 'day' | 'week' | 'month' | 'year'>('all');\n  const [isSearching, setIsSearching] = useState(false);\n  const [results, setResults] = useState<SearchResult | null>(null);\n  const [suggestions, setSuggestions] = useState<string[]>([]);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [recentSearches, setRecentSearches] = useState<string[]>([]);\n  const [selectedFilters, setSelectedFilters] = useState<{\n    tags: string[];\n    authors: string[];\n    spaces: string[];\n  }>({\n    tags: [],\n    authors: [],\n    spaces: []\n  });\n  \n  const searchInputRef = useRef<HTMLInputElement>(null);\n  const searchEngine = useRef(SearchEngine.getInstance());\n  const searchTimeout = useRef<NodeJS.Timeout>();\n\n  // Load recent searches from localStorage\n  useEffect(() => {\n    const saved = localStorage.getItem('hive_recent_searches');\n    if (saved) {\n      try {\n        setRecentSearches(JSON.parse(saved));\n      } catch (error) {\n        console.error('Failed to load recent searches:', error);\n      }\n    }\n  }, []);\n\n  // Auto-suggest as user types\n  useEffect(() => {\n    if (query.length > 1) {\n      if (searchTimeout.current) {\n        clearTimeout(searchTimeout.current);\n      }\n      \n      searchTimeout.current = setTimeout(() => {\n        const queryResult = searchEngine.current.getSuggestions(query, 5);\n        setSuggestions(queryResult.map(s => s.query));\n      }, 300);\n    } else {\n      setSuggestions([]);\n    }\n    \n    return () => {\n      if (searchTimeout.current) {\n        clearTimeout(searchTimeout.current);\n      }\n    };\n  }, [query]);\n\n  const performSearch = useCallback(async (searchQuery: string = query) => {\n    if (!searchQuery.trim()) {\n      setResults(null);\n      return;\n    }\n\n    setIsSearching(true);\n    setShowSuggestions(false);\n\n    try {\n      const searchParams: SearchQuery = {\n        query: searchQuery,\n        filters: {\n          timeRange: timeRange === 'all' ? undefined : timeRange,\n          tags: selectedFilters.tags.length > 0 ? selectedFilters.tags : undefined,\n          authors: selectedFilters.authors.length > 0 ? selectedFilters.authors : undefined,\n          spaces: selectedFilters.spaces.length > 0 ? selectedFilters.spaces : undefined\n        },\n        pagination: {\n          page: 1,\n          limit: maxResults\n        },\n        sortBy,\n        searchType\n      };\n\n      const searchResults = searchEngine.current.search(searchParams);\n      setResults(searchResults);\n\n      // Save to recent searches\n      const updatedRecent = [searchQuery, ...recentSearches.filter(r => r !== searchQuery)].slice(0, 10);\n      setRecentSearches(updatedRecent);\n      localStorage.setItem('hive_recent_searches', JSON.stringify(updatedRecent));\n\n    } catch (error) {\n      console.error('Search failed:', error);\n    } finally {\n      setIsSearching(false);\n    }\n  }, [query, searchType, sortBy, timeRange, selectedFilters, maxResults, recentSearches]);\n\n  const handleSearchSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    performSearch();\n  };\n\n  const handleSuggestionClick = (suggestion: string) => {\n    setQuery(suggestion);\n    setShowSuggestions(false);\n    performSearch(suggestion);\n  };\n\n  const handleRecentSearchClick = (recentQuery: string) => {\n    setQuery(recentQuery);\n    performSearch(recentQuery);\n  };\n\n  const clearSearch = () => {\n    setQuery('');\n    setResults(null);\n    setSuggestions([]);\n    setShowSuggestions(false);\n    searchInputRef.current?.focus();\n  };\n\n  const removeFilter = (type: 'tags' | 'authors' | 'spaces', value: string) => {\n    setSelectedFilters(prev => ({\n      ...prev,\n      [type]: prev[type].filter(item => item !== value)\n    }));\n  };\n\n  const getResultIcon = (item: SearchItem) => {\n    switch (item.type) {\n      case 'post': return <FileText className=\"h-4 w-4\" />;\n      case 'user': return <Users className=\"h-4 w-4\" />;\n      case 'space': return <Users className=\"h-4 w-4\" />;\n      case 'tool': return <Code className=\"h-4 w-4\" />;\n      case 'event': return <Calendar className=\"h-4 w-4\" />;\n      default: return <Search className=\"h-4 w-4\" />;\n    }\n  };\n\n  const getResultTypeColor = (type: string) => {\n    const colors = {\n      post: 'text-blue-400',\n      user: 'text-green-400',\n      space: 'text-purple-400',\n      tool: 'text-orange-400',\n      event: 'text-pink-400'\n    };\n    return colors[type as keyof typeof colors] || 'text-gray-400';\n  };\n\n  const handleResultClick = (item: SearchItem) => {\n    if (onResultSelect) {\n      onResultSelect(item);\n    }\n\n    // Type-specific handlers\n    switch (item.type) {\n      case 'user':\n        if (onUserSelect) onUserSelect(item.id);\n        break;\n      case 'space':\n        if (onSpaceSelect) onSpaceSelect(item.id);\n        break;\n      case 'tool':\n        if (onToolSelect) onToolSelect(item.id);\n        break;\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Search Input */}\n      <div className=\"relative\">\n        <form onSubmit={handleSearchSubmit} className=\"relative\">\n          <Search className=\"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-hive-text-mutedLight\" />\n          <Input\n            ref={searchInputRef}\n            value={query}\n            onChange={(e) => setQuery(e.target.value)}\n            onFocus={() => setShowSuggestions(true)}\n            placeholder={placeholder}\n            className=\"pl-12 pr-12 py-3 text-lg\"\n          />\n          {query && (\n            <Button\n              type=\"button\"\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={clearSearch}\n              className=\"absolute right-2 top-1/2 transform -translate-y-1/2\"\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n          )}\n          {isSearching && (\n            <div className=\"absolute right-4 top-1/2 transform -translate-y-1/2\">\n              <Spinner className=\"h-5 w-5\" />\n            </div>\n          )}\n        </form>\n\n        {/* Suggestions Dropdown */}\n        {showSuggestions && (suggestions.length > 0 || recentSearches.length > 0) && (\n          <Card className=\"absolute top-full left-0 right-0 mt-2 p-2 bg-hive-background-overlay border-hive-border-default z-50 max-h-96 overflow-y-auto\">\n            {suggestions.length > 0 && (\n              <div className=\"mb-4\">\n                <h4 className=\"text-sm font-medium text-hive-text-mutedLight mb-2 px-2\">\n                  <Sparkles className=\"h-4 w-4 inline mr-1\" />\n                  Suggestions\n                </h4>\n                {suggestions.map((suggestion, index) => (\n                  <button\n                    key={index}\n                    onClick={() => handleSuggestionClick(suggestion)}\n                    className=\"w-full text-left px-3 py-2 hover:bg-hive-background-tertiary rounded-lg transition-colors\"\n                  >\n                    <div className=\"flex items-center space-x-2\">\n                      <Search className=\"h-4 w-4 text-hive-text-mutedLight\" />\n                      <span className=\"text-white\">{suggestion}</span>\n                      <ArrowRight className=\"h-3 w-3 text-hive-text-mutedLight ml-auto\" />\n                    </div>\n                  </button>\n                ))}\n              </div>\n            )}\n            \n            {recentSearches.length > 0 && (\n              <div>\n                <h4 className=\"text-sm font-medium text-hive-text-mutedLight mb-2 px-2\">\n                  <History className=\"h-4 w-4 inline mr-1\" />\n                  Recent Searches\n                </h4>\n                {recentSearches.slice(0, 5).map((recentQuery, index) => (\n                  <button\n                    key={index}\n                    onClick={() => handleRecentSearchClick(recentQuery)}\n                    className=\"w-full text-left px-3 py-2 hover:bg-hive-background-tertiary rounded-lg transition-colors\"\n                  >\n                    <div className=\"flex items-center space-x-2\">\n                      <Clock className=\"h-4 w-4 text-hive-text-mutedLight\" />\n                      <span className=\"text-white\">{recentQuery}</span>\n                    </div>\n                  </button>\n                ))}\n              </div>\n            )}\n          </Card>\n        )}\n      </div>\n\n      {/* Search Controls */}\n      {showFilters && (\n        <div className=\"flex flex-wrap items-center gap-3\">\n          {/* Search Type */}\n          <Select value={searchType} onValueChange={(value: any) => setSearchType(value)}>\n            <SelectTrigger className=\"w-32\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">All</SelectItem>\n              <SelectItem value=\"posts\">Posts</SelectItem>\n              <SelectItem value=\"users\">Users</SelectItem>\n              <SelectItem value=\"spaces\">Spaces</SelectItem>\n              <SelectItem value=\"tools\">Tools</SelectItem>\n              <SelectItem value=\"events\">Events</SelectItem>\n            </SelectContent>\n          </Select>\n\n          {/* Sort By */}\n          <Select value={sortBy} onValueChange={(value: any) => setSortBy(value)}>\n            <SelectTrigger className=\"w-36\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"relevance\">Most Relevant</SelectItem>\n              <SelectItem value=\"recent\">Most Recent</SelectItem>\n              <SelectItem value=\"popular\">Most Popular</SelectItem>\n              <SelectItem value=\"trending\">Trending</SelectItem>\n            </SelectContent>\n          </Select>\n\n          {/* Time Range */}\n          <Select value={timeRange} onValueChange={(value: any) => setTimeRange(value)}>\n            <SelectTrigger className=\"w-32\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">All Time</SelectItem>\n              <SelectItem value=\"hour\">Last Hour</SelectItem>\n              <SelectItem value=\"day\">Today</SelectItem>\n              <SelectItem value=\"week\">This Week</SelectItem>\n              <SelectItem value=\"month\">This Month</SelectItem>\n              <SelectItem value=\"year\">This Year</SelectItem>\n            </SelectContent>\n          </Select>\n\n          {/* Active Filters */}\n          {(selectedFilters.tags.length > 0 || selectedFilters.authors.length > 0 || selectedFilters.spaces.length > 0) && (\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-sm text-hive-text-mutedLight\">Filters:</span>\n              {selectedFilters.tags.map(tag => (\n                <Badge key={tag} variant=\"secondary\" className=\"flex items-center space-x-1\">\n                  <Tag className=\"h-3 w-3\" />\n                  <span>{tag}</span>\n                  <button onClick={() => removeFilter('tags', tag)}>\n                    <X className=\"h-3 w-3\" />\n                  </button>\n                </Badge>\n              ))}\n              {selectedFilters.authors.map(author => (\n                <Badge key={author} variant=\"secondary\" className=\"flex items-center space-x-1\">\n                  <Users className=\"h-3 w-3\" />\n                  <span>{author}</span>\n                  <button onClick={() => removeFilter('authors', author)}>\n                    <X className=\"h-3 w-3\" />\n                  </button>\n                </Badge>\n              ))}\n              {selectedFilters.spaces.map(space => (\n                <Badge key={space} variant=\"secondary\" className=\"flex items-center space-x-1\">\n                  <Users className=\"h-3 w-3\" />\n                  <span>{space}</span>\n                  <button onClick={() => removeFilter('spaces', space)}>\n                    <X className=\"h-3 w-3\" />\n                  </button>\n                </Badge>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Search Results */}\n      {results && (\n        <div className=\"space-y-4\">\n          {/* Results Header */}\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold text-white\">\n                {results.total.toLocaleString()} results\n              </h3>\n              <p className=\"text-sm text-hive-text-mutedLight\">\n                Found in {results.searchTime}ms\n              </p>\n            </div>\n            \n            {results.suggestions.length > 0 && (\n              <div className=\"flex items-center space-x-2\">\n                <span className=\"text-sm text-hive-text-mutedLight\">Try:</span>\n                {results.suggestions.slice(0, 3).map((suggestion, index) => (\n                  <Button\n                    key={index}\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => handleSuggestionClick(suggestion)}\n                  >\n                    {suggestion}\n                  </Button>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Results List */}\n          <div className=\"space-y-3\">\n            {results.items.map((item) => (\n              <Card\n                key={item.id}\n                className=\"p-4 bg-hive-background-overlay border-hive-border-default hover:border-hive-border-hover cursor-pointer transition-colors\"\n                onClick={() => handleResultClick(item)}\n              >\n                <div className=\"space-y-2\">\n                  {/* Result Header */}\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-center space-x-2\">\n                      <div className={getResultTypeColor(item.type)}>\n                        {getResultIcon(item)}\n                      </div>\n                      <Badge variant=\"outline\" className=\"text-xs\">\n                        {item.type}\n                      </Badge>\n                      {item.metadata.isVerified && (\n                        <CheckCircle className=\"h-4 w-4 text-blue-400\" />\n                      )}\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-2 text-xs text-hive-text-mutedLight\">\n                      <span>Score: {(item.score * 100).toFixed(0)}%</span>\n                      {item.metadata.engagement && (\n                        <span>â€¢ {item.metadata.engagement} interactions</span>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Result Title */}\n                  <h4 className=\"font-medium text-white hover:text-hive-gold transition-colors\">\n                    {item.title}\n                  </h4>\n\n                  {/* Result Snippet */}\n                  <p className=\"text-sm text-hive-text-mutedLight line-clamp-2\">\n                    {item.snippet}\n                  </p>\n\n                  {/* Result Metadata */}\n                  <div className=\"flex items-center justify-between text-xs text-hive-text-mutedLight\">\n                    <div className=\"flex items-center space-x-4\">\n                      {item.metadata.authorName && (\n                        <div className=\"flex items-center space-x-1\">\n                          <Users className=\"h-3 w-3\" />\n                          <span>{item.metadata.authorName}</span>\n                        </div>\n                      )}\n                      \n                      {item.metadata.spaceName && (\n                        <div className=\"flex items-center space-x-1\">\n                          <Users className=\"h-3 w-3\" />\n                          <span>in {item.metadata.spaceName}</span>\n                        </div>\n                      )}\n                      \n                      {item.metadata.tags && item.metadata.tags.length > 0 && (\n                        <div className=\"flex items-center space-x-1\">\n                          <Tag className=\"h-3 w-3\" />\n                          <span>{item.metadata.tags.slice(0, 2).join(', ')}</span>\n                        </div>\n                      )}\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-3\">\n                      {item.type === 'post' && item.metadata.engagement && (\n                        <>\n                          <div className=\"flex items-center space-x-1\">\n                            <Heart className=\"h-3 w-3\" />\n                            <span>{item.metadata.likes || 0}</span>\n                          </div>\n                          <div className=\"flex items-center space-x-1\">\n                            <MessageCircle className=\"h-3 w-3\" />\n                            <span>{item.metadata.comments || 0}</span>\n                          </div>\n                        </>\n                      )}\n                      \n                      <time>{new Date(item.createdAt).toLocaleDateString()}</time>\n                    </div>\n                  </div>\n\n                  {/* Highlights */}\n                  {item.highlights.length > 0 && (\n                    <div className=\"mt-2 p-2 bg-hive-background-tertiary rounded text-xs\">\n                      <span className=\"text-hive-text-mutedLight\">Match: </span>\n                      <span className=\"text-white\">...{item.highlights[0].text}...</span>\n                    </div>\n                  )}\n                </div>\n              </Card>\n            ))}\n          </div>\n\n          {/* Load More */}\n          {results.hasMore && (\n            <div className=\"text-center\">\n              <Button\n                variant=\"outline\"\n                onClick={() => performSearch()}\n                disabled={isSearching}\n              >\n                {isSearching ? (\n                  <>\n                    <Spinner className=\"h-4 w-4 mr-2\" />\n                    Loading...\n                  </>\n                ) : (\n                  'Load More Results'\n                )}\n              </Button>\n            </div>\n          )}\n\n          {/* No Results */}\n          {results.items.length === 0 && (\n            <Card className=\"p-8 bg-hive-background-overlay border-hive-border-default text-center\">\n              <Search className=\"h-12 w-12 mx-auto mb-4 text-hive-text-mutedLight opacity-50\" />\n              <h3 className=\"text-lg font-medium text-white mb-2\">No results found</h3>\n              <p className=\"text-hive-text-mutedLight mb-4\">\n                Try adjusting your search terms or filters\n              </p>\n              {results.suggestions.length > 0 && (\n                <div className=\"space-y-2\">\n                  <p className=\"text-sm text-hive-text-mutedLight\">Try these suggestions:</p>\n                  <div className=\"flex flex-wrap justify-center gap-2\">\n                    {results.suggestions.map((suggestion, index) => (\n                      <Button\n                        key={index}\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => handleSuggestionClick(suggestion)}\n                      >\n                        {suggestion}\n                      </Button>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </Card>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/social/post-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/social/post-composer.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":297,"column":15,"nodeType":"JSXOpeningElement","endLine":297,"endColumn":111},{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":451,"column":52,"nodeType":"JSXOpeningElement","endLine":451,"endColumn":81},{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":452,"column":52,"nodeType":"JSXOpeningElement","endLine":452,"endColumn":81}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useRef, useCallback } from 'react';\nimport { Card, Button, Textarea } from \"@hive/ui\";\nimport { Alert, AlertDescription } from \"@/components/temp-stubs\";\nimport {\n  Send,\n  Image,\n  Link,\n  Code,\n  BarChart3 as Poll,\n  Calendar,\n  X,\n  Plus,\n  Paperclip,\n  Users,\n  Lock,\n  Globe,\n  AlertTriangle\n} from 'lucide-react';\n\ninterface PostComposerProps {\n  onPost: (_post: PostData) => Promise<void>;\n  onCancel?: () => void;\n  spaceId?: string;\n  placeholder?: string;\n  maxLength?: number;\n  allowedTypes?: PostType[];\n  user: {\n    id: string;\n    name: string;\n    handle: string;\n    avatarUrl?: string;\n  };\n}\n\ninterface PostData {\n  content: string;\n  type: PostType;\n  visibility: 'public' | 'space' | 'private';\n  attachments: Attachment[];\n  mentions: string[];\n  tags: string[];\n  poll?: Poll;\n  event?: Event;\n  location?: Location;\n  spaceId?: string;\n}\n\ninterface Attachment {\n  id: string;\n  type: 'image' | 'video' | 'file' | 'link' | 'tool';\n  url: string;\n  name: string;\n  size?: number;\n  metadata?: Record<string, any>;\n}\n\ninterface Poll {\n  question: string;\n  options: string[];\n  allowMultiple: boolean;\n  expiresAt?: string;\n}\n\ninterface Event {\n  title: string;\n  description: string;\n  startTime: string;\n  endTime?: string;\n  location?: string;\n}\n\ninterface Location {\n  name: string;\n  coordinates?: [number, number];\n}\n\ntype PostType = 'text' | 'image' | 'video' | 'link' | 'poll' | 'event' | 'tool' | 'announcement';\n\nexport function PostComposer({\n  onPost,\n  onCancel,\n  spaceId,\n  placeholder = \"What's happening?\",\n  maxLength = 500,\n  allowedTypes = ['text', 'image', 'link', 'poll', 'event'],\n  user\n}: PostComposerProps) {\n  const [content, setContent] = useState('');\n  const [postType, setPostType] = useState<PostType>('text');\n  const [visibility, setVisibility] = useState<'public' | 'space' | 'private'>(\n    spaceId ? 'space' : 'public'\n  );\n  const [attachments, setAttachments] = useState<Attachment[]>([]);\n  const [mentions, setMentions] = useState<string[]>([]);\n  const [tags, setTags] = useState<string[]>([]);\n  const [isPosting, setIsPosting] = useState(false);\n  const [showAdvanced, setShowAdvanced] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Poll state\n  const [poll, setPoll] = useState<Poll>({\n    question: '',\n    options: ['', ''],\n    allowMultiple: false\n  });\n\n  // Event state\n  const [event, setEvent] = useState<Event>({\n    title: '',\n    description: '',\n    startTime: '',\n  });\n\n  // Location state\n  const [location, setLocation] = useState<Location | null>(null);\n\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  // Auto-resize textarea\n  const adjustTextareaHeight = useCallback(() => {\n    const textarea = textareaRef.current;\n    if (textarea) {\n      textarea.style.height = 'auto';\n      textarea.style.height = `${textarea.scrollHeight}px`;\n    }\n  }, []);\n\n  const handleContentChange = (value: string) => {\n    setContent(value);\n    setError(null);\n    adjustTextareaHeight();\n    \n    // Extract mentions and hashtags\n    const mentionMatches = value.match(/@(\\w+)/g) || [];\n    const tagMatches = value.match(/#(\\w+)/g) || [];\n    \n    setMentions(mentionMatches.map(m => m.slice(1)));\n    setTags(tagMatches.map(t => t.slice(1)));\n  };\n\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(event.target.files || []);\n    \n    files.forEach(file => {\n      const attachment: Attachment = {\n        id: `attachment_${Date.now()}_${Math.random()}`,\n        type: file.type.startsWith('image/') ? 'image' : \n              file.type.startsWith('video/') ? 'video' : 'file',\n        url: URL.createObjectURL(file),\n        name: file.name,\n        size: file.size,\n        metadata: { originalFile: file }\n      };\n      \n      setAttachments(prev => [...prev, attachment]);\n    });\n  };\n\n  const removeAttachment = (id: string) => {\n    setAttachments(prev => {\n      const attachment = prev.find(a => a.id === id);\n      if (attachment && attachment.url.startsWith('blob:')) {\n        URL.revokeObjectURL(attachment.url);\n      }\n      return prev.filter(a => a.id !== id);\n    });\n  };\n\n  const addPollOption = () => {\n    setPoll(prev => ({\n      ...prev,\n      options: [...prev.options, '']\n    }));\n  };\n\n  const updatePollOption = (index: number, value: string) => {\n    setPoll(prev => ({\n      ...prev,\n      options: prev.options.map((opt, i) => i === index ? value : opt)\n    }));\n  };\n\n  const removePollOption = (index: number) => {\n    if (poll.options.length > 2) {\n      setPoll(prev => ({\n        ...prev,\n        options: prev.options.filter((_, i) => i !== index)\n      }));\n    }\n  };\n\n  const validatePost = (): string | null => {\n    if (!content.trim() && attachments.length === 0) {\n      return 'Post cannot be empty';\n    }\n    \n    if (content.length > maxLength) {\n      return `Post is too long (${content.length}/${maxLength} characters)`;\n    }\n    \n    if (postType === 'poll') {\n      if (!poll.question.trim()) {\n        return 'Poll question is required';\n      }\n      const validOptions = poll.options.filter(opt => opt.trim());\n      if (validOptions.length < 2) {\n        return 'Poll must have at least 2 options';\n      }\n    }\n    \n    if (postType === 'event') {\n      if (!event.title.trim()) {\n        return 'Event title is required';\n      }\n      if (!event.startTime) {\n        return 'Event start time is required';\n      }\n    }\n    \n    return null;\n  };\n\n  const handlePost = async () => {\n    const validationError = validatePost();\n    if (validationError) {\n      setError(validationError);\n      return;\n    }\n\n    setIsPosting(true);\n    setError(null);\n\n    try {\n      const postData: PostData = {\n        content: content.trim(),\n        type: postType,\n        visibility,\n        attachments,\n        mentions,\n        tags,\n        spaceId,\n        ...(postType === 'poll' && { poll }),\n        ...(postType === 'event' && { event }),\n        ...(location && { location })\n      };\n\n      await onPost(postData);\n      \n      // Reset form\n      setContent('');\n      setAttachments([]);\n      setMentions([]);\n      setTags([]);\n      setPoll({ question: '', options: ['', ''], allowMultiple: false });\n      setEvent({ title: '', description: '', startTime: '' });\n      setLocation(null);\n      setPostType('text');\n      setShowAdvanced(false);\n      \n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to create post');\n    } finally {\n      setIsPosting(false);\n    }\n  };\n\n  const getVisibilityIcon = () => {\n    switch (visibility) {\n      case 'public': return <Globe className=\"h-4 w-4\" />;\n      case 'space': return <Users className=\"h-4 w-4\" />;\n      case 'private': return <Lock className=\"h-4 w-4\" />;\n    }\n  };\n\n  const getVisibilityLabel = () => {\n    switch (visibility) {\n      case 'public': return 'Everyone on HIVE';\n      case 'space': return spaceId ? 'Space members only' : 'Space members';\n      case 'private': return 'Only you';\n    }\n  };\n\n  const characterCount = content.length;\n  const isOverLimit = characterCount > maxLength;\n  const isNearLimit = characterCount > maxLength * 0.8;\n\n  return (\n    <Card className=\"p-4 bg-hive-background-overlay border-hive-border-default\">\n      <div className=\"space-y-4\">\n        {/* Header */}\n        <div className=\"flex items-center space-x-3\">\n          <div className=\"w-10 h-10 bg-hive-gold text-hive-obsidian font-semibold rounded-full flex items-center justify-center\">\n            {user.avatarUrl ? (\n              <img src={user.avatarUrl} alt={user.name} className=\"w-full h-full rounded-full object-cover\" />\n            ) : (\n              user.name.charAt(0).toUpperCase()\n            )}\n          </div>\n          <div className=\"flex-1\">\n            <p className=\"font-medium text-white\">{user.name}</p>\n            <div className=\"flex items-center space-x-2 text-sm text-hive-text-mutedLight\">\n              {getVisibilityIcon()}\n              <span>{getVisibilityLabel()}</span>\n            </div>\n          </div>\n          {onCancel && (\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={onCancel}\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n          )}\n        </div>\n\n        {/* Content Area */}\n        <div className=\"space-y-3\">\n          <Textarea\n            ref={textareaRef}\n            value={content}\n            onChange={(e) => handleContentChange(e.target.value)}\n            placeholder={placeholder}\n            className={`min-h-[80px] resize-none border-none bg-transparent text-white placeholder:text-hive-text-mutedLight focus:outline-none ${\n              isOverLimit ? 'text-red-400' : ''\n            }`}\n            maxLength={maxLength + 50} // Allow slightly over for better UX\n          />\n\n          {/* Character Count */}\n          <div className=\"flex justify-end\">\n            <span className={`text-xs ${\n              isOverLimit ? 'text-red-400' : \n              isNearLimit ? 'text-yellow-400' : \n              'text-hive-text-mutedLight'\n            }`}>\n              {characterCount}/{maxLength}\n            </span>\n          </div>\n\n          {/* Post Type Specific Content */}\n          {postType === 'poll' && (\n            <div className=\"space-y-3 p-3 bg-hive-background-tertiary rounded-lg\">\n              <input\n                type=\"text\"\n                value={poll.question}\n                onChange={(e) => setPoll(prev => ({ ...prev, question: e.target.value }))}\n                placeholder=\"Ask a question...\"\n                className=\"w-full bg-transparent text-white placeholder:text-hive-text-mutedLight border-none outline-none\"\n              />\n              \n              <div className=\"space-y-2\">\n                {poll.options.map((option, index) => (\n                  <div key={index} className=\"flex items-center space-x-2\">\n                    <div className=\"w-4 h-4 rounded-full border-2 border-hive-text-mutedLight\" />\n                    <input\n                      type=\"text\"\n                      value={option}\n                      onChange={(e) => updatePollOption(index, e.target.value)}\n                      placeholder={`Option ${index + 1}`}\n                      className=\"flex-1 bg-transparent text-white placeholder:text-hive-text-mutedLight border-none outline-none\"\n                    />\n                    {poll.options.length > 2 && (\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => removePollOption(index)}\n                        className=\"text-red-400 border-red-400\"\n                      >\n                        <X className=\"h-3 w-3\" />\n                      </Button>\n                    )}\n                  </div>\n                ))}\n              </div>\n              \n              <div className=\"flex items-center justify-between\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={addPollOption}\n                  disabled={poll.options.length >= 4}\n                >\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Add Option\n                </Button>\n                \n                <label className=\"flex items-center space-x-2 text-sm text-hive-text-mutedLight\">\n                  <input\n                    type=\"checkbox\"\n                    checked={poll.allowMultiple}\n                    onChange={(e) => setPoll(prev => ({ ...prev, allowMultiple: e.target.checked }))}\n                    className=\"rounded\"\n                  />\n                  <span>Allow multiple choices</span>\n                </label>\n              </div>\n            </div>\n          )}\n\n          {postType === 'event' && (\n            <div className=\"space-y-3 p-3 bg-hive-background-tertiary rounded-lg\">\n              <input\n                type=\"text\"\n                value={event.title}\n                onChange={(e) => setEvent(prev => ({ ...prev, title: e.target.value }))}\n                placeholder=\"Event title\"\n                className=\"w-full bg-transparent text-white placeholder:text-hive-text-mutedLight border-none outline-none font-medium\"\n              />\n              \n              <textarea\n                value={event.description}\n                onChange={(e) => setEvent(prev => ({ ...prev, description: e.target.value }))}\n                placeholder=\"Event description\"\n                rows={2}\n                className=\"w-full bg-transparent text-white placeholder:text-hive-text-mutedLight border-none outline-none resize-none\"\n              />\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                <div>\n                  <label className=\"text-xs text-hive-text-mutedLight\">Start Time</label>\n                  <input\n                    type=\"datetime-local\"\n                    value={event.startTime}\n                    onChange={(e) => setEvent(prev => ({ ...prev, startTime: e.target.value }))}\n                    className=\"w-full mt-1 bg-transparent text-white border border-hive-border-default rounded px-2 py-1\"\n                  />\n                </div>\n                <div>\n                  <label className=\"text-xs text-hive-text-mutedLight\">End Time (Optional)</label>\n                  <input\n                    type=\"datetime-local\"\n                    value={event.endTime || ''}\n                    onChange={(e) => setEvent(prev => ({ ...prev, endTime: e.target.value }))}\n                    className=\"w-full mt-1 bg-transparent text-white border border-hive-border-default rounded px-2 py-1\"\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Attachments */}\n          {attachments.length > 0 && (\n            <div className=\"space-y-2\">\n              {attachments.map(attachment => (\n                <div key={attachment.id} className=\"flex items-center justify-between p-2 bg-hive-background-tertiary rounded\">\n                  <div className=\"flex items-center space-x-2\">\n                    {attachment.type === 'image' ? <Image className=\"h-4 w-4\" /> :\n                     attachment.type === 'video' ? <Image className=\"h-4 w-4\" /> :\n                     <Paperclip className=\"h-4 w-4\" />}\n                    <span className=\"text-sm text-white\">{attachment.name}</span>\n                    {attachment.size && (\n                      <span className=\"text-xs text-hive-text-mutedLight\">\n                        ({(attachment.size / 1024).toFixed(1)}KB)\n                      </span>\n                    )}\n                  </div>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => removeAttachment(attachment.id)}\n                    className=\"text-red-400 border-red-400\"\n                  >\n                    <X className=\"h-3 w-3\" />\n                  </Button>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* Error Display */}\n          {error && (\n            <Alert className=\"border-red-500/20 bg-red-500/10\">\n              <AlertTriangle className=\"h-4 w-4 text-red-400\" />\n              <AlertDescription className=\"text-red-200\">\n                {error}\n              </AlertDescription>\n            </Alert>\n          )}\n        </div>\n\n        {/* Actions */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-2\">\n            {/* Post Type Selector */}\n            <div className=\"flex items-center space-x-1\">\n              {allowedTypes.map(type => (\n                <Button\n                  key={type}\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setPostType(type)}\n                  className={postType === type ? 'bg-hive-gold/20 border-hive-gold' : ''}\n                  title={`Create ${type} post`}\n                >\n                  {type === 'text' && <FileText className=\"h-4 w-4\" />}\n                  {type === 'image' && <Image className=\"h-4 w-4\" alt=\"\" />}\n                  {type === 'link' && <Link className=\"h-4 w-4\" />}\n                  {type === 'poll' && <Poll className=\"h-4 w-4\" />}\n                  {type === 'event' && <Calendar className=\"h-4 w-4\" />}\n                  {type === 'tool' && <Code className=\"h-4 w-4\" />}\n                </Button>\n              ))}\n            </div>\n\n            {/* Media Upload */}\n            {allowedTypes.includes('image') && (\n              <>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => fileInputRef.current?.click()}\n                >\n                  <Paperclip className=\"h-4 w-4\" />\n                </Button>\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  multiple\n                  accept=\"image/*,video/*,.pdf,.doc,.docx\"\n                  onChange={handleFileUpload}\n                  className=\"hidden\"\n                />\n              </>\n            )}\n\n            {/* Additional Tools */}\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setShowAdvanced(!showAdvanced)}\n              className={showAdvanced ? 'bg-hive-gold/20 border-hive-gold' : ''}\n            >\n              <Plus className=\"h-4 w-4\" />\n            </Button>\n          </div>\n\n          {/* Post Button */}\n          <Button\n            onClick={handlePost}\n            disabled={isPosting || isOverLimit || (!content.trim() && attachments.length === 0)}\n            className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n          >\n            <Send className=\"h-4 w-4 mr-2\" />\n            {isPosting ? 'Posting...' : 'Post'}\n          </Button>\n        </div>\n\n        {/* Advanced Options */}\n        {showAdvanced && (\n          <div className=\"pt-3 border-t border-hive-border-default space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm text-white\">Visibility</span>\n              <div className=\"flex items-center space-x-2\">\n                {['public', 'space', 'private'].map(vis => (\n                  <Button\n                    key={vis}\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => setVisibility(vis as any)}\n                    className={visibility === vis ? 'bg-hive-gold/20 border-hive-gold' : ''}\n                    disabled={vis === 'space' && !spaceId}\n                  >\n                    {vis === 'public' && <Globe className=\"h-4 w-4\" />}\n                    {vis === 'space' && <Users className=\"h-4 w-4\" />}\n                    {vis === 'private' && <Lock className=\"h-4 w-4\" />}\n                  </Button>\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </Card>\n  );\n}\n\n// Helper component for file rendering\nfunction FileText({ className }: { className?: string }) {\n  return <span className={className}>ðŸ“„</span>;\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/social/social-feed.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/spaces/create-space-modal.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Alert' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Alert"},"fix":{"range":[119,167],"text":""},"desc":"Remove unused variable 'Alert'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState } from \"react\";\nimport { HiveModal, Button, Card, Badge, HiveInput } from \"@hive/ui\";\nimport { Alert } from \"@/components/temp-stubs\";\nimport { \n  ArrowRight, \n  ArrowLeft,\n  Check,\n  Users,\n  Lock,\n  Globe,\n  Shield,\n  Settings,\n  Mail,\n  Plus,\n  X,\n  AlertCircle,\n  BookOpen,\n  Home,\n  Briefcase,\n  Trophy,\n  Hammer\n} from \"lucide-react\";\n\ninterface CreateSpaceModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onCreateSpace: (_spaceData: CreateSpaceData) => void;\n  isLoading?: boolean;\n  error?: string | null;\n}\n\ninterface CreateSpaceData {\n  type: SpaceType;\n  name: string;\n  description: string;\n  avatar?: string;\n  banner?: string;\n  visibility: 'public' | 'private' | 'invite_only';\n  joinProcess: 'instant' | 'approval' | 'invite_only';\n  rules: string[];\n  tools: string[];\n  foundingMembers: string[];\n  customizations: {\n    primaryColor?: string;\n    category?: string;\n    tags?: string[];\n  };\n}\n\ntype SpaceType = 'academic' | 'residential' | 'professional' | 'recreational' | 'project';\n\ntype CreateStep = 'type' | 'details' | 'privacy' | 'rules' | 'tools' | 'members' | 'review';\n\nconst SPACE_TYPES = {\n  academic: {\n    name: 'Academic',\n    icon: BookOpen,\n    emoji: 'ðŸ“š',\n    description: 'Study groups, research teams, course collaboration',\n    examples: ['CS Study Group', 'Physics Research Lab', 'Writing Circle'],\n    suggestedTools: ['study-timer', 'file-share', 'whiteboard', 'poll-maker'],\n    color: 'bg-blue-500',\n    features: ['Study scheduling', 'Resource sharing', 'Progress tracking', 'Academic calendar integration']\n  },\n  residential: {\n    name: 'Residential',\n    icon: Home,\n    emoji: 'ðŸ ',\n    description: 'Residence halls, floors, building communities',\n    examples: ['Floor 3 Community', 'Building A Residents', 'Roommate Group'],\n    suggestedTools: ['group-chat', 'poll-maker', 'file-share', 'attendance'],\n    color: 'bg-green-500',\n    features: ['Room coordination', 'Floor events', 'Maintenance requests', 'Quiet hours scheduling']\n  },\n  professional: {\n    name: 'Professional',\n    icon: Briefcase,\n    emoji: 'ðŸ’¼',\n    description: 'Career clubs, networking, professional development',\n    examples: ['Engineering Career Club', 'Pre-Med Society', 'Startup Network'],\n    suggestedTools: ['group-chat', 'file-share', 'poll-maker', 'whiteboard'],\n    color: 'bg-purple-500',\n    features: ['Job sharing', 'Networking events', 'Mentorship matching', 'Professional development']\n  },\n  recreational: {\n    name: 'Recreational',\n    icon: Trophy,\n    emoji: 'ðŸŽ®',\n    description: 'Sports teams, hobby groups, gaming communities',\n    examples: ['Intramural Soccer', 'Board Game Club', 'Photography Group'],\n    suggestedTools: ['group-chat', 'poll-maker', 'attendance', 'file-share'],\n    color: 'bg-orange-500',\n    features: ['Event coordination', 'Resource booking', 'Tournament brackets', 'Activity planning']\n  },\n  project: {\n    name: 'Project',\n    icon: Hammer,\n    emoji: 'ðŸ› ï¸',\n    description: 'Hackathon teams, student orgs, volunteer groups',\n    examples: ['Hackathon Team Alpha', 'Community Service Club', 'App Development Group'],\n    suggestedTools: ['whiteboard', 'file-share', 'group-chat', 'poll-maker'],\n    color: 'bg-red-500',\n    features: ['Project management', 'Deadline tracking', 'Resource allocation', 'Outcome sharing']\n  }\n};\n\nconst SUGGESTED_TOOLS = {\n  'study-timer': { name: 'Study Timer', icon: 'â±ï¸', description: 'Synchronized focus sessions' },\n  'poll-maker': { name: 'Live Polls', icon: 'ðŸ“Š', description: 'Real-time polling and voting' },\n  'whiteboard': { name: 'Whiteboard', icon: 'ðŸ“', description: 'Collaborative drawing space' },\n  'file-share': { name: 'File Share', icon: 'ðŸ“', description: 'Document sharing hub' },\n  'group-chat': { name: 'Group Chat', icon: 'ðŸ’¬', description: 'Dedicated chat channel' },\n  'attendance': { name: 'Attendance', icon: 'âœ…', description: 'Event attendance tracking' }\n};\n\nexport function CreateSpaceModal({ isOpen, onClose, onCreateSpace, isLoading = false, error = null }: CreateSpaceModalProps) {\n  const [currentStep, setCurrentStep] = useState<CreateStep>('type');\n  const [spaceData, setSpaceData] = useState<CreateSpaceData>({\n    type: 'academic',\n    name: '',\n    description: '',\n    visibility: 'public',\n    joinProcess: 'instant',\n    rules: [],\n    tools: [],\n    foundingMembers: [],\n    customizations: {}\n  });\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [newRule, setNewRule] = useState('');\n\n  const steps: CreateStep[] = ['type', 'details', 'privacy', 'rules', 'tools', 'members', 'review'];\n  const currentStepIndex = steps.indexOf(currentStep);\n\n  const validateStep = (step: CreateStep): boolean => {\n    const newErrors: Record<string, string> = {};\n\n    switch (step) {\n      case 'type':\n        if (!spaceData.type) newErrors.type = 'Please select a space type';\n        break;\n      case 'details':\n        if (!spaceData.name.trim()) newErrors.name = 'Space name is required';\n        if (spaceData.name.length > 50) newErrors.name = 'Space name must be 50 characters or less';\n        if (!spaceData.description.trim()) newErrors.description = 'Description is required';\n        if (spaceData.description.length > 200) newErrors.description = 'Description must be 200 characters or less';\n        break;\n      case 'privacy':\n        if (!spaceData.visibility) newErrors.visibility = 'Please select visibility';\n        if (!spaceData.joinProcess) newErrors.joinProcess = 'Please select join process';\n        break;\n      case 'rules':\n        if (spaceData.rules.length === 0) newErrors.rules = 'Please add at least one community guideline';\n        break;\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const nextStep = () => {\n    if (validateStep(currentStep)) {\n      const nextIndex = currentStepIndex + 1;\n      if (nextIndex < steps.length) {\n        setCurrentStep(steps[nextIndex]);\n      }\n    }\n  };\n\n  const prevStep = () => {\n    const prevIndex = currentStepIndex - 1;\n    if (prevIndex >= 0) {\n      setCurrentStep(steps[prevIndex]);\n    }\n  };\n\n  const handleCreateSpace = () => {\n    if (validateStep('review') && !isLoading) {\n      onCreateSpace(spaceData);\n      // Don't close modal or reset form here - parent will handle it\n    }\n  };\n\n  // Reset form when modal closes\n  const handleClose = () => {\n    if (!isLoading) {\n      onClose();\n      setCurrentStep('type');\n      setSpaceData({\n        type: 'academic',\n        name: '',\n        description: '',\n        visibility: 'public',\n        joinProcess: 'instant',\n        rules: [],\n        tools: [],\n        foundingMembers: [],\n        customizations: {}\n      });\n      setErrors({});\n    }\n  };\n\n  const updateSpaceData = (updates: Partial<CreateSpaceData>) => {\n    setSpaceData(prev => ({ ...prev, ...updates }));\n    setErrors({});\n  };\n\n  const addRule = (rule: string) => {\n    if (rule.trim() && !spaceData.rules.includes(rule.trim())) {\n      updateSpaceData({ rules: [...spaceData.rules, rule.trim()] });\n    }\n  };\n\n  const removeRule = (index: number) => {\n    updateSpaceData({ rules: spaceData.rules.filter((_, i) => i !== index) });\n  };\n\n  const toggleTool = (toolId: string) => {\n    const tools = spaceData.tools.includes(toolId)\n      ? spaceData.tools.filter(t => t !== toolId)\n      : [...spaceData.tools, toolId];\n    updateSpaceData({ tools });\n  };\n\n  const getStepTitle = (step: CreateStep) => {\n    switch (step) {\n      case 'type': return 'Choose Space Type';\n      case 'details': return 'Space Details';\n      case 'privacy': return 'Privacy & Access';\n      case 'rules': return 'Community Guidelines';\n      case 'tools': return 'Tools & Features';\n      case 'members': return 'Founding Members';\n      case 'review': return 'Review & Launch';\n      default: return '';\n    }\n  };\n\n  const renderStepContent = () => {\n    switch (currentStep) {\n      case 'type':\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center\">\n              <h3 className=\"text-xl font-semibold text-white mb-2\">What type of space are you creating?</h3>\n              <p className=\"text-zinc-400\">Choose the category that best fits your community's purpose</p>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {Object.entries(SPACE_TYPES).map(([type, config]) => {\n                const _Icon = config.icon;\n                const isSelected = spaceData.type === type;\n                \n                return (\n                  <Card\n                    key={type}\n                    className={`p-4 cursor-pointer transition-all duration-200 ${\n                      isSelected \n                        ? 'bg-hive-gold/10 border-hive-gold' \n                        : 'bg-zinc-800/50 border-zinc-700 hover:bg-zinc-800'\n                    }`}\n                    onClick={() => updateSpaceData({ type: type as SpaceType })}\n                  >\n                    <div className=\"flex items-start space-x-3\">\n                      <div className={`w-12 h-12 ${config.color} rounded-lg flex items-center justify-center text-xl flex-shrink-0`}>\n                        {config.emoji}\n                      </div>\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <h4 className=\"font-semibold text-white\">{config.name}</h4>\n                          {isSelected && <Check className=\"h-5 w-5 text-hive-gold\" />}\n                        </div>\n                        <p className=\"text-sm text-zinc-400 mb-3 leading-tight\">{config.description}</p>\n                        <div className=\"space-y-2\">\n                          <div className=\"text-xs text-zinc-500 font-medium\">Examples:</div>\n                          <div className=\"flex flex-wrap gap-1\">\n                            {config.examples.slice(0, 2).map((example) => (\n                              <Badge key={example} variant=\"skill-tag\" className=\"text-xs\">\n                                {example}\n                              </Badge>\n                            ))}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </Card>\n                );\n              })}\n            </div>\n\n            {errors.type && (\n              <div className=\"flex items-center space-x-2 text-red-400 text-sm\">\n                <AlertCircle className=\"h-4 w-4\" />\n                <span>{errors.type}</span>\n              </div>\n            )}\n          </div>\n        );\n\n      case 'details':\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center\">\n              <div className={`w-16 h-16 ${SPACE_TYPES[spaceData.type].color} rounded-xl flex items-center justify-center text-2xl mx-auto mb-3`}>\n                {SPACE_TYPES[spaceData.type].emoji}\n              </div>\n              <h3 className=\"text-xl font-semibold text-white mb-2\">Space Identity</h3>\n              <p className=\"text-zinc-400\">Give your {SPACE_TYPES[spaceData.type].name.toLowerCase()} space a name and description</p>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-2\">Space Name *</label>\n                <HiveInput\n                  value={spaceData.name}\n                  onChange={(e) => updateSpaceData({ name: e.target.value })}\n                  placeholder=\"Enter a clear, descriptive name...\"\n                  maxLength={50}\n                  error={errors.name}\n                />\n                <div className=\"text-xs text-zinc-500 mt-1\">{spaceData.name.length}/50 characters</div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-2\">Description *</label>\n                <textarea\n                  value={spaceData.description}\n                  onChange={(e) => updateSpaceData({ description: e.target.value })}\n                  placeholder=\"Describe the purpose and goals of your space...\"\n                  maxLength={200}\n                  rows={4}\n                  className={`w-full p-3 bg-zinc-800 border rounded-lg text-white placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-hive-gold/50 resize-none ${\n                    errors.description ? 'border-red-500' : 'border-zinc-700 focus:border-hive-gold'\n                  }`}\n                />\n                <div className=\"flex items-center justify-between mt-1\">\n                  <div className=\"text-xs text-zinc-500\">{spaceData.description.length}/200 characters</div>\n                  {errors.description && (\n                    <div className=\"text-red-400 text-xs\">{errors.description}</div>\n                  )}\n                </div>\n              </div>\n\n              {/* Category Tags */}\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-2\">Category Tags (Optional)</label>\n                <div className=\"flex flex-wrap gap-2\">\n                  {['study-group', 'social', 'academic', 'project', 'community', 'networking'].map((tag) => (\n                    <Badge\n                      key={tag}\n                      variant=\"skill-tag\"\n                      className={`cursor-pointer transition-colors ${\n                        spaceData.customizations.tags?.includes(tag) ? 'bg-hive-gold text-hive-obsidian' : ''\n                      }`}\n                      onClick={() => {\n                        const currentTags = spaceData.customizations.tags || [];\n                        const newTags = currentTags.includes(tag)\n                          ? currentTags.filter(t => t !== tag)\n                          : [...currentTags, tag];\n                        updateSpaceData({\n                          customizations: { ...spaceData.customizations, tags: newTags }\n                        });\n                      }}\n                    >\n                      #{tag}\n                    </Badge>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'privacy':\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center\">\n              <h3 className=\"text-xl font-semibold text-white mb-2\">Privacy & Access Settings</h3>\n              <p className=\"text-zinc-400\">Configure who can see and join your space</p>\n            </div>\n\n            {/* Visibility Settings */}\n            <div>\n              <h4 className=\"font-medium text-white mb-3\">Space Visibility</h4>\n              <div className=\"space-y-3\">\n                {[\n                  {\n                    value: 'public',\n                    icon: Globe,\n                    title: 'Public',\n                    description: 'Anyone on campus can discover and view this space'\n                  },\n                  {\n                    value: 'private',\n                    icon: Lock,\n                    title: 'Private',\n                    description: 'Only members can see the space and its content'\n                  },\n                  {\n                    value: 'invite_only',\n                    icon: Shield,\n                    title: 'Invite Only',\n                    description: 'Only invited users can see and access the space'\n                  }\n                ].map((option) => {\n                  const Icon = option.icon;\n                  const isSelected = spaceData.visibility === option.value;\n                  \n                  return (\n                    <Card\n                      key={option.value}\n                      className={`p-4 cursor-pointer transition-all duration-200 ${\n                        isSelected \n                          ? 'bg-hive-gold/10 border-hive-gold' \n                          : 'bg-zinc-800/50 border-zinc-700 hover:bg-zinc-800'\n                      }`}\n                      onClick={() => updateSpaceData({ visibility: option.value as any })}\n                    >\n                      <div className=\"flex items-center space-x-3\">\n                        <Icon className={`h-5 w-5 ${isSelected ? 'text-hive-gold' : 'text-zinc-400'}`} />\n                        <div className=\"flex-1\">\n                          <div className=\"font-medium text-white\">{option.title}</div>\n                          <div className=\"text-sm text-zinc-400\">{option.description}</div>\n                        </div>\n                        {isSelected && <Check className=\"h-5 w-5 text-hive-gold\" />}\n                      </div>\n                    </Card>\n                  );\n                })}\n              </div>\n            </div>\n\n            {/* Join Process */}\n            <div>\n              <h4 className=\"font-medium text-white mb-3\">Join Process</h4>\n              <div className=\"space-y-3\">\n                {[\n                  {\n                    value: 'instant',\n                    icon: Users,\n                    title: 'Instant Join',\n                    description: 'Anyone can join immediately without approval'\n                  },\n                  {\n                    value: 'approval',\n                    icon: Settings,\n                    title: 'Requires Approval',\n                    description: 'Admins must approve new member requests'\n                  },\n                  {\n                    value: 'invite_only',\n                    icon: Mail,\n                    title: 'Invite Only',\n                    description: 'New members can only join via invitation'\n                  }\n                ].map((option) => {\n                  const Icon = option.icon;\n                  const isSelected = spaceData.joinProcess === option.value;\n                  \n                  return (\n                    <Card\n                      key={option.value}\n                      className={`p-4 cursor-pointer transition-all duration-200 ${\n                        isSelected \n                          ? 'bg-hive-gold/10 border-hive-gold' \n                          : 'bg-zinc-800/50 border-zinc-700 hover:bg-zinc-800'\n                      }`}\n                      onClick={() => updateSpaceData({ joinProcess: option.value as any })}\n                    >\n                      <div className=\"flex items-center space-x-3\">\n                        <Icon className={`h-5 w-5 ${isSelected ? 'text-hive-gold' : 'text-zinc-400'}`} />\n                        <div className=\"flex-1\">\n                          <div className=\"font-medium text-white\">{option.title}</div>\n                          <div className=\"text-sm text-zinc-400\">{option.description}</div>\n                        </div>\n                        {isSelected && <Check className=\"h-5 w-5 text-hive-gold\" />}\n                      </div>\n                    </Card>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'rules': {\n        const defaultRules = [\n          'Be respectful and constructive in all interactions',\n          'Stay on topic and contribute meaningfully',\n          'No spam, harassment, or inappropriate content',\n          'Help maintain a positive learning environment'\n        ];\n\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center\">\n              <h3 className=\"text-xl font-semibold text-white mb-2\">Community Guidelines</h3>\n              <p className=\"text-zinc-400\">Set clear expectations for your space members</p>\n            </div>\n\n            {/* Add Rule Input */}\n            <div>\n              <label className=\"block text-sm font-medium text-white mb-2\">Add Custom Rule</label>\n              <div className=\"flex space-x-2\">\n                <input\n                  type=\"text\"\n                  value={newRule}\n                  onChange={(e) => setNewRule(e.target.value)}\n                  placeholder=\"Enter a community guideline...\"\n                  className=\"flex-1 p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-zinc-400 focus:border-hive-gold focus:outline-none\"\n                  onKeyPress={(e) => {\n                    if (e.key === 'Enter') {\n                      addRule(newRule);\n                      setNewRule('');\n                    }\n                  }}\n                />\n                <Button\n                  onClick={() => {\n                    addRule(newRule);\n                    setNewRule('');\n                  }}\n                  disabled={!newRule.trim()}\n                  className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n                >\n                  <Plus className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </div>\n\n            {/* Suggested Rules */}\n            <div>\n              <h4 className=\"font-medium text-white mb-3\">Suggested Guidelines</h4>\n              <div className=\"space-y-2\">\n                {defaultRules.map((rule, index) => (\n                  <div\n                    key={index}\n                    className={`p-3 rounded-lg border cursor-pointer transition-colors ${\n                      spaceData.rules.includes(rule)\n                        ? 'bg-hive-gold/10 border-hive-gold text-white'\n                        : 'bg-zinc-800/50 border-zinc-700 text-zinc-300 hover:bg-zinc-800'\n                    }`}\n                    onClick={() => {\n                      if (spaceData.rules.includes(rule)) {\n                        removeRule(spaceData.rules.indexOf(rule));\n                      } else {\n                        addRule(rule);\n                      }\n                    }}\n                  >\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm\">{rule}</span>\n                      {spaceData.rules.includes(rule) ? (\n                        <Check className=\"h-4 w-4 text-hive-gold\" />\n                      ) : (\n                        <Plus className=\"h-4 w-4 text-zinc-400\" />\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* Current Rules */}\n            {spaceData.rules.length > 0 && (\n              <div>\n                <h4 className=\"font-medium text-white mb-3\">Your Community Guidelines ({spaceData.rules.length})</h4>\n                <div className=\"space-y-2\">\n                  {spaceData.rules.map((rule, index) => (\n                    <div key={index} className=\"flex items-center justify-between p-3 bg-hive-gold/10 border border-hive-gold rounded-lg\">\n                      <span className=\"text-sm text-white\">{rule}</span>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => removeRule(index)}\n                        className=\"text-red-400 hover:text-red-300\"\n                      >\n                        <X className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {errors.rules && (\n              <div className=\"flex items-center space-x-2 text-red-400 text-sm\">\n                <AlertCircle className=\"h-4 w-4\" />\n                <span>{errors.rules}</span>\n              </div>\n            )}\n          </div>\n        );\n      }\n\n      case 'tools': {\n        const suggestedTools = SPACE_TYPES[spaceData.type].suggestedTools;\n        \n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center\">\n              <h3 className=\"text-xl font-semibold text-white mb-2\">Tools & Features</h3>\n              <p className=\"text-zinc-400\">Choose tools that will help your {SPACE_TYPES[spaceData.type].name.toLowerCase()} space coordinate effectively</p>\n            </div>\n\n            {/* Recommended Tools */}\n            <div>\n              <h4 className=\"font-medium text-white mb-3\">Recommended for {SPACE_TYPES[spaceData.type].name} Spaces</h4>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                {suggestedTools.map((toolId) => {\n                  const tool = SUGGESTED_TOOLS[toolId as keyof typeof SUGGESTED_TOOLS];\n                  const isSelected = spaceData.tools.includes(toolId);\n                  \n                  return (\n                    <Card\n                      key={toolId}\n                      className={`p-4 cursor-pointer transition-all duration-200 ${\n                        isSelected \n                          ? 'bg-hive-gold/10 border-hive-gold' \n                          : 'bg-zinc-800/50 border-zinc-700 hover:bg-zinc-800'\n                      }`}\n                      onClick={() => toggleTool(toolId)}\n                    >\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"text-2xl\">{tool.icon}</div>\n                        <div className=\"flex-1\">\n                          <div className=\"font-medium text-white\">{tool.name}</div>\n                          <div className=\"text-sm text-zinc-400\">{tool.description}</div>\n                        </div>\n                        {isSelected && <Check className=\"h-5 w-5 text-hive-gold\" />}\n                      </div>\n                    </Card>\n                  );\n                })}\n              </div>\n            </div>\n\n            {/* Other Available Tools */}\n            <div>\n              <h4 className=\"font-medium text-white mb-3\">Other Available Tools</h4>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                {Object.entries(SUGGESTED_TOOLS)\n                  .filter(([toolId]) => !suggestedTools.includes(toolId))\n                  .map(([toolId, tool]) => {\n                    const isSelected = spaceData.tools.includes(toolId);\n                    \n                    return (\n                      <Card\n                        key={toolId}\n                        className={`p-4 cursor-pointer transition-all duration-200 ${\n                          isSelected \n                            ? 'bg-hive-gold/10 border-hive-gold' \n                            : 'bg-zinc-800/50 border-zinc-700 hover:bg-zinc-800'\n                        }`}\n                        onClick={() => toggleTool(toolId)}\n                      >\n                        <div className=\"flex items-center space-x-3\">\n                          <div className=\"text-2xl\">{tool.icon}</div>\n                          <div className=\"flex-1\">\n                            <div className=\"font-medium text-white\">{tool.name}</div>\n                            <div className=\"text-sm text-zinc-400\">{tool.description}</div>\n                          </div>\n                          {isSelected && <Check className=\"h-5 w-5 text-hive-gold\" />}\n                        </div>\n                      </Card>\n                    );\n                  })}\n              </div>\n            </div>\n\n            {spaceData.tools.length > 0 && (\n              <div className=\"p-4 bg-zinc-800/30 rounded-lg\">\n                <div className=\"text-sm text-zinc-400 mb-2\">Selected Tools:</div>\n                <div className=\"flex flex-wrap gap-2\">\n                  {spaceData.tools.map((toolId) => (\n                    <Badge key={toolId} variant=\"building-tools\" className=\"flex items-center space-x-1\">\n                      <span>{SUGGESTED_TOOLS[toolId as keyof typeof SUGGESTED_TOOLS]?.icon}</span>\n                      <span>{SUGGESTED_TOOLS[toolId as keyof typeof SUGGESTED_TOOLS]?.name}</span>\n                    </Badge>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        );\n      }\n\n      case 'members':\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center\">\n              <h3 className=\"text-xl font-semibold text-white mb-2\">Founding Members</h3>\n              <p className=\"text-zinc-400\">Invite initial members to help establish your space (optional)</p>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-white mb-2\">Invite by Handle or Email</label>\n              <div className=\"flex space-x-2\">\n                <input\n                  type=\"text\"\n                  placeholder=\"@handle or email@university.edu\"\n                  className=\"flex-1 p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-zinc-400 focus:border-hive-gold focus:outline-none\"\n                />\n                <Button className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Invite\n                </Button>\n              </div>\n              <div className=\"text-xs text-zinc-500 mt-1\">\n                You can invite more members after creating the space\n              </div>\n            </div>\n\n            <div className=\"p-4 bg-zinc-800/30 rounded-lg\">\n              <div className=\"flex items-center space-x-2 text-sm text-zinc-400\">\n                <Users className=\"h-4 w-4\" />\n                <span>You'll be automatically added as the space admin</span>\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'review':\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center\">\n              <div className={`w-16 h-16 ${SPACE_TYPES[spaceData.type].color} rounded-xl flex items-center justify-center text-2xl mx-auto mb-3`}>\n                {SPACE_TYPES[spaceData.type].emoji}\n              </div>\n              <h3 className=\"text-xl font-semibold text-white mb-2\">Ready to Launch!</h3>\n              <p className=\"text-zinc-400\">Review your space details before creating</p>\n            </div>\n\n            <div className=\"space-y-4\">\n              {/* Basic Info */}\n              <Card className=\"p-4 bg-zinc-800/50 border-zinc-700\">\n                <h4 className=\"font-medium text-white mb-3\">Basic Information</h4>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-zinc-400\">Type:</span>\n                    <Badge variant=\"skill-tag\">{SPACE_TYPES[spaceData.type].name}</Badge>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-zinc-400\">Name:</span>\n                    <span className=\"text-white font-medium\">{spaceData.name}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-zinc-400\">Visibility:</span>\n                    <span className=\"text-white capitalize\">{spaceData.visibility.replace('_', ' ')}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-zinc-400\">Join Process:</span>\n                    <span className=\"text-white capitalize\">{spaceData.joinProcess.replace('_', ' ')}</span>\n                  </div>\n                </div>\n              </Card>\n\n              {/* Description */}\n              <Card className=\"p-4 bg-zinc-800/50 border-zinc-700\">\n                <h4 className=\"font-medium text-white mb-2\">Description</h4>\n                <p className=\"text-zinc-300 text-sm leading-relaxed\">{spaceData.description}</p>\n              </Card>\n\n              {/* Guidelines */}\n              <Card className=\"p-4 bg-zinc-800/50 border-zinc-700\">\n                <h4 className=\"font-medium text-white mb-3\">Community Guidelines ({spaceData.rules.length})</h4>\n                <div className=\"space-y-2\">\n                  {spaceData.rules.map((rule, index) => (\n                    <div key={index} className=\"flex items-start space-x-2 text-sm\">\n                      <Check className=\"h-4 w-4 text-green-400 mt-0.5 flex-shrink-0\" />\n                      <span className=\"text-zinc-300\">{rule}</span>\n                    </div>\n                  ))}\n                </div>\n              </Card>\n\n              {/* Tools */}\n              {spaceData.tools.length > 0 && (\n                <Card className=\"p-4 bg-zinc-800/50 border-zinc-700\">\n                  <h4 className=\"font-medium text-white mb-3\">Enabled Tools ({spaceData.tools.length})</h4>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {spaceData.tools.map((toolId) => (\n                      <Badge key={toolId} variant=\"building-tools\" className=\"flex items-center space-x-1\">\n                        <span>{SUGGESTED_TOOLS[toolId as keyof typeof SUGGESTED_TOOLS]?.icon}</span>\n                        <span>{SUGGESTED_TOOLS[toolId as keyof typeof SUGGESTED_TOOLS]?.name}</span>\n                      </Badge>\n                    ))}\n                  </div>\n                </Card>\n              )}\n            </div>\n          </div>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <HiveModal\n      isOpen={isOpen}\n      onClose={handleClose}\n      title=\"\"\n      size=\"lg\"\n      className=\"max-h-[90vh] overflow-hidden\"\n    >\n      <div className=\"flex flex-col h-full\">\n        {/* Header with Progress */}\n        <div className=\"p-6 border-b border-zinc-800\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-2xl font-bold text-white\">Create New Space</h2>\n            <div className=\"text-sm text-zinc-400\">\n              Step {currentStepIndex + 1} of {steps.length}\n            </div>\n          </div>\n          \n          {/* Progress Bar */}\n          <div className=\"flex items-center space-x-2\">\n            {steps.map((step, index) => (\n              <div key={step} className=\"flex-1\">\n                <div className={`h-2 rounded-full transition-colors ${\n                  index <= currentStepIndex ? 'bg-hive-gold' : 'bg-zinc-700'\n                }`} />\n              </div>\n            ))}\n          </div>\n          \n          <div className=\"mt-3\">\n            <h3 className=\"text-lg font-semibold text-white\">{getStepTitle(currentStep)}</h3>\n          </div>\n        </div>\n\n        {/* Step Content */}\n        <div className=\"flex-1 overflow-y-auto p-6\">\n          {renderStepContent()}\n        </div>\n\n        {/* Footer Actions */}\n        <div className=\"p-6 border-t border-zinc-800\">\n          {/* Error Display */}\n          {error && (\n            <div className=\"mb-4 p-3 rounded-lg bg-red-500/10 border border-red-500/20 flex items-center gap-2\">\n              <AlertCircle className=\"h-4 w-4 text-red-400 flex-shrink-0\" />\n              <span className=\"text-sm text-red-400\">{error}</span>\n            </div>\n          )}\n          <div className=\"flex items-center justify-between\">\n            <Button\n              variant=\"outline\"\n              onClick={currentStepIndex === 0 ? handleClose : prevStep}\n              className=\"flex items-center space-x-2\"\n              disabled={isLoading}\n            >\n              <ArrowLeft className=\"h-4 w-4\" />\n              <span>{currentStepIndex === 0 ? 'Cancel' : 'Back'}</span>\n            </Button>\n\n            <Button\n              onClick={currentStep === 'review' ? handleCreateSpace : nextStep}\n              className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne flex items-center space-x-2\"\n              disabled={isLoading}\n            >\n              {isLoading ? (\n                <>\n                  <div className=\"w-4 h-4 border-2 border-hive-obsidian/20 border-t-hive-obsidian rounded-full animate-spin\" />\n                  <span>Creating...</span>\n                </>\n              ) : (\n                <>\n                  <span>{currentStep === 'review' ? 'Create Space' : 'Continue'}</span>\n                  {currentStep !== 'review' && <ArrowRight className=\"h-4 w-4\" />}\n                </>\n              )}\n            </Button>\n          </div>\n        </div>\n      </div>\n    </HiveModal>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/spaces/cross-space-collaboration.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'HiveInput' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"HiveInput"},"fix":{"range":[99,110],"text":""},"desc":"Remove unused variable 'HiveInput'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Zap' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":6,"suggestions":[{"messageId":"removeVar","data":{"varName":"Zap"},"fix":{"range":[169,177],"text":""},"desc":"Remove unused variable 'Zap'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Link2' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Link2"},"fix":{"range":[177,187],"text":""},"desc":"Remove unused variable 'Link2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Filter' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Filter"},"fix":{"range":[198,209],"text":""},"desc":"Remove unused variable 'Filter'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Star' is defined but never used. Allowed unused vars must match /^_/u.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Star"},"fix":{"range":[238,246],"text":""},"desc":"Remove unused variable 'Star'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":4,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[279,284],"text":""},"desc":"Remove unused variable 'X'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[284,299],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertCircle"},"fix":{"range":[299,314],"text":""},"desc":"Remove unused variable 'AlertCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'GitBranch' is defined but never used. Allowed unused vars must match /^_/u.","line":24,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"GitBranch"},"fix":{"range":[337,350],"text":""},"desc":"Remove unused variable 'GitBranch'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'showCreateProjectModal' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":94,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"showCreateProjectModal"},"fix":{"range":[2176,2198],"text":""},"desc":"Remove unused variable 'showCreateProjectModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'handleInviteSpace' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":248,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":248,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleInviteSpace"},"fix":{"range":[7577,7870],"text":""},"desc":"Remove unused variable 'handleInviteSpace'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'spaceId' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":248,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":248,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"spaceId"},"fix":{"range":[7604,7619],"text":""},"desc":"Remove unused variable 'spaceId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'handleCreateProject' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":258,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":258,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleCreateProject"},"fix":{"range":[7874,8230],"text":""},"desc":"Remove unused variable 'handleCreateProject'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'projectData' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":258,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":258,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"projectData"},"fix":{"range":[7903,7919],"text":""},"desc":"Remove unused variable 'projectData'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Button, Card, Badge, HiveModal, HiveInput } from \"@hive/ui\";\nimport { \n  Users, \n  Plus, \n  Calendar, \n  Zap, \n  Link2, \n  Search, \n  Filter,\n  MessageSquare,\n  Settings,\n  Star,\n  Clock,\n  MapPin,\n  ArrowRight,\n  X,\n  CheckCircle,\n  AlertCircle,\n  Handshake,\n  Target,\n  GitBranch,\n  Lightbulb\n} from \"lucide-react\";\n\ninterface CollaborativeSpace {\n  id: string;\n  name: string;\n  type: string;\n  memberCount: number;\n  avatar?: string;\n  collaborationStatus: 'active' | 'pending' | 'invited';\n  sharedProjects: number;\n  sharedEvents: number;\n  sharedTools: number;\n  lastActivity: string;\n}\n\ninterface CollaborationProject {\n  id: string;\n  title: string;\n  description: string;\n  participatingSpaces: Array<{\n    id: string;\n    name: string;\n    role: 'lead' | 'partner' | 'contributor';\n  }>;\n  status: 'planning' | 'active' | 'completed' | 'paused';\n  startDate: string;\n  endDate?: string;\n  tools: string[];\n  tags: string[];\n  progress: number;\n  memberCount: number;\n  nextMilestone?: string;\n}\n\ninterface JointEvent {\n  id: string;\n  title: string;\n  description: string;\n  organizingSpaces: Array<{\n    id: string;\n    name: string;\n  }>;\n  datetime: {\n    start: string;\n    end: string;\n  };\n  location: {\n    type: 'physical' | 'virtual' | 'hybrid';\n    name: string;\n  };\n  capacity: number;\n  registered: number;\n  type: 'academic' | 'social' | 'professional';\n  isJointEvent: boolean;\n}\n\ninterface CrossSpaceCollaborationProps {\n  currentSpaceId: string;\n  currentSpaceName: string;\n  userRole: 'admin' | 'moderator' | 'member';\n}\n\nexport function CrossSpaceCollaboration({ currentSpaceId, currentSpaceName, userRole }: CrossSpaceCollaborationProps) {\n  const [activeTab, setActiveTab] = useState<'spaces' | 'projects' | 'events' | 'workspace'>('spaces');\n  const [collaborativeSpaces, setCollaborativeSpaces] = useState<CollaborativeSpace[]>([]);\n  const [collaborationProjects, setCollaborationProjects] = useState<CollaborationProject[]>([]);\n  const [jointEvents, setJointEvents] = useState<JointEvent[]>([]);\n  const [showInviteModal, setShowInviteModal] = useState(false);\n  const [showCreateProjectModal, setShowCreateProjectModal] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'pending'>('all');\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchCollaborationData = async () => {\n      await new Promise(resolve => setTimeout(resolve, 500));\n      \n      const mockSpaces: CollaborativeSpace[] = [\n        {\n          id: 'space-2',\n          name: 'Data Science Club',\n          type: 'Student Organization',\n          memberCount: 89,\n          collaborationStatus: 'active',\n          sharedProjects: 2,\n          sharedEvents: 1,\n          sharedTools: 3,\n          lastActivity: '2024-02-01T14:30:00Z'\n        },\n        {\n          id: 'space-3',\n          name: 'Web Dev Society',\n          type: 'Academic',\n          memberCount: 156,\n          collaborationStatus: 'active',\n          sharedProjects: 1,\n          sharedEvents: 2,\n          sharedTools: 1,\n          lastActivity: '2024-02-01T12:15:00Z'\n        },\n        {\n          id: 'space-4',\n          name: 'AI Research Group',\n          type: 'Research',\n          memberCount: 43,\n          collaborationStatus: 'pending',\n          sharedProjects: 0,\n          sharedEvents: 0,\n          sharedTools: 0,\n          lastActivity: '2024-01-30T16:45:00Z'\n        }\n      ];\n\n      const mockProjects: CollaborationProject[] = [\n        {\n          id: 'proj-1',\n          title: 'Cross-Campus Hackathon Platform',\n          description: 'Building a comprehensive platform for organizing and managing hackathons across multiple student organizations.',\n          participatingSpaces: [\n            { id: currentSpaceId, name: currentSpaceName, role: 'lead' },\n            { id: 'space-2', name: 'Data Science Club', role: 'partner' },\n            { id: 'space-3', name: 'Web Dev Society', role: 'partner' }\n          ],\n          status: 'active',\n          startDate: '2024-01-15T10:00:00Z',\n          endDate: '2024-03-15T18:00:00Z',\n          tools: ['project-board', 'shared-docs', 'chat-room'],\n          tags: ['hackathon', 'platform', 'collaboration'],\n          progress: 65,\n          memberCount: 18,\n          nextMilestone: 'Beta Testing Phase'\n        },\n        {\n          id: 'proj-2',\n          title: 'Algorithmic Trading Workshop Series',\n          description: 'Joint workshop series combining CS algorithms with data science applications in financial markets.',\n          participatingSpaces: [\n            { id: currentSpaceId, name: currentSpaceName, role: 'partner' },\n            { id: 'space-2', name: 'Data Science Club', role: 'lead' }\n          ],\n          status: 'planning',\n          startDate: '2024-02-20T10:00:00Z',\n          tools: ['shared-calendar', 'resource-library'],\n          tags: ['algorithms', 'finance', 'workshop'],\n          progress: 25,\n          memberCount: 8,\n          nextMilestone: 'Workshop Content Creation'\n        }\n      ];\n\n      const mockEvents: JointEvent[] = [\n        {\n          id: 'event-1',\n          title: 'Inter-Space Tech Showcase',\n          description: 'Annual showcase of collaborative projects and innovations from partnered spaces.',\n          organizingSpaces: [\n            { id: currentSpaceId, name: currentSpaceName },\n            { id: 'space-2', name: 'Data Science Club' },\n            { id: 'space-3', name: 'Web Dev Society' }\n          ],\n          datetime: {\n            start: '2024-03-01T18:00:00Z',\n            end: '2024-03-01T21:00:00Z'\n          },\n          location: {\n            type: 'hybrid',\n            name: 'Student Union Auditorium + Virtual Stream'\n          },\n          capacity: 200,\n          registered: 127,\n          type: 'academic',\n          isJointEvent: true\n        }\n      ];\n\n      setCollaborativeSpaces(mockSpaces);\n      setCollaborationProjects(mockProjects);\n      setJointEvents(mockEvents);\n      setIsLoading(false);\n    };\n\n    fetchCollaborationData();\n  }, [currentSpaceId, currentSpaceName]);\n\n  const filteredSpaces = collaborativeSpaces.filter(space => {\n    const matchesSearch = space.name.toLowerCase().includes(searchQuery.toLowerCase());\n    const matchesStatus = statusFilter === 'all' || space.collaborationStatus === statusFilter;\n    return matchesSearch && matchesStatus;\n  });\n\n  const formatTimeAgo = (dateString: string) => {\n    const now = new Date();\n    const date = new Date(dateString);\n    const diffMs = now.getTime() - date.getTime();\n    const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\n    const diffDays = Math.floor(diffHours / 24);\n    \n    if (diffHours < 1) return 'Just now';\n    if (diffHours < 24) return `${diffHours}h ago`;\n    if (diffDays < 7) return `${diffDays}d ago`;\n    return `${Math.floor(diffDays / 7)}w ago`;\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'active': return 'text-green-400';\n      case 'pending': return 'text-hive-gold';\n      case 'invited': return 'text-blue-400';\n      default: return 'text-zinc-400';\n    }\n  };\n\n  const getProjectStatusColor = (status: string) => {\n    switch (status) {\n      case 'active': return 'bg-green-500';\n      case 'planning': return 'bg-blue-500';\n      case 'completed': return 'bg-purple-500';\n      case 'paused': return 'bg-orange-500';\n      default: return 'bg-zinc-500';\n    }\n  };\n\n  const handleInviteSpace = (spaceId: string) => {\n    // TODO: Implement space invitation logic\n    try {\n      // API call to invite space\n      // await inviteSpaceToCollaboration(currentSpaceId, spaceId);\n    } catch (error) {\n      // TODO: Handle error with proper user feedback\n    }\n  };\n\n  const handleCreateProject = (projectData: any) => {\n    // TODO: Implement project creation logic\n    try {\n      // API call to create collaboration project\n      // await createCollaborationProject(currentSpaceId, projectData);\n      setShowCreateProjectModal(false);\n    } catch (error) {\n      // TODO: Handle error with proper user feedback\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"w-8 h-8 bg-hive-gold rounded-lg animate-pulse mx-auto mb-4\" />\n          <p className=\"text-white\">Loading collaboration data...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-white mb-2\">Cross-Space Collaboration</h2>\n          <p className=\"text-zinc-400\">Connect and collaborate with other spaces on campus</p>\n        </div>\n        \n        {(userRole === 'admin' || userRole === 'moderator') && (\n          <div className=\"flex items-center space-x-3\">\n            <Button\n              onClick={() => setShowInviteModal(true)}\n              className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n            >\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Invite Space\n            </Button>\n            <Button\n              variant=\"outline\"\n              onClick={() => setShowCreateProjectModal(true)}\n            >\n              <Target className=\"h-4 w-4 mr-2\" />\n              New Project\n            </Button>\n          </div>\n        )}\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"flex items-center space-x-1 bg-zinc-800/50 rounded-lg p-1\">\n        {[\n          { id: 'spaces', label: 'Partner Spaces', icon: Handshake },\n          { id: 'projects', label: 'Joint Projects', icon: Target },\n          { id: 'events', label: 'Shared Events', icon: Calendar },\n          { id: 'workspace', label: 'Planning Workspace', icon: Lightbulb }\n        ].map((tab) => {\n          const Icon = tab.icon;\n          return (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id as any)}\n              className={`flex items-center space-x-2 px-4 py-2 rounded-md transition-colors ${\n                activeTab === tab.id\n                  ? 'bg-hive-gold text-hive-obsidian font-medium'\n                  : 'text-zinc-400 hover:text-white'\n              }`}\n            >\n              <Icon className=\"h-4 w-4\" />\n              <span className=\"text-sm\">{tab.label}</span>\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Search and Filters */}\n      <div className=\"flex items-center space-x-4\">\n        <div className=\"relative flex-1\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-zinc-400\" />\n          <input\n            type=\"text\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            placeholder=\"Search collaborations...\"\n            className=\"pl-10 pr-4 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-zinc-400 focus:border-hive-gold focus:outline-none w-full\"\n          />\n        </div>\n        \n        <select\n          value={statusFilter}\n          onChange={(e) => setStatusFilter(e.target.value as any)}\n          className=\"bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-2 text-white text-sm focus:border-hive-gold focus:outline-none\"\n        >\n          <option value=\"all\">All Status</option>\n          <option value=\"active\">Active</option>\n          <option value=\"pending\">Pending</option>\n        </select>\n      </div>\n\n      {/* Tab Content */}\n      {activeTab === 'spaces' && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {filteredSpaces.map((space) => (\n            <Card key={space.id} className=\"p-6 bg-zinc-800/50 border-zinc-700 hover:bg-zinc-800/70 transition-colors\">\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex items-start space-x-3\">\n                  <div className=\"w-12 h-12 bg-zinc-600 rounded-xl flex items-center justify-center\">\n                    <span className=\"text-white font-semibold\">\n                      {space.name.split(' ').map(word => word[0]).join('')}\n                    </span>\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold text-white mb-1\">{space.name}</h3>\n                    <p className=\"text-sm text-zinc-400\">{space.type}</p>\n                    <div className=\"flex items-center space-x-1 mt-1\">\n                      <Users className=\"h-3 w-3 text-zinc-500\" />\n                      <span className=\"text-xs text-zinc-500\">{space.memberCount} members</span>\n                    </div>\n                  </div>\n                </div>\n                \n                <Badge \n                  className={`text-xs ${getStatusColor(space.collaborationStatus)}`}\n                  variant=\"skill-tag\"\n                >\n                  {space.collaborationStatus}\n                </Badge>\n              </div>\n              \n              <div className=\"grid grid-cols-3 gap-3 mb-4 text-center\">\n                <div>\n                  <div className=\"text-lg font-bold text-white\">{space.sharedProjects}</div>\n                  <div className=\"text-xs text-zinc-400\">Projects</div>\n                </div>\n                <div>\n                  <div className=\"text-lg font-bold text-white\">{space.sharedEvents}</div>\n                  <div className=\"text-xs text-zinc-400\">Events</div>\n                </div>\n                <div>\n                  <div className=\"text-lg font-bold text-white\">{space.sharedTools}</div>\n                  <div className=\"text-xs text-zinc-400\">Tools</div>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center justify-between pt-3 border-t border-zinc-700\">\n                <span className=\"text-xs text-zinc-500\">\n                  Active {formatTimeAgo(space.lastActivity)}\n                </span>\n                <Button variant=\"ghost\" size=\"sm\" className=\"text-zinc-400 hover:text-white\">\n                  <ArrowRight className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      {activeTab === 'projects' && (\n        <div className=\"space-y-4\">\n          {collaborationProjects.map((project) => (\n            <Card key={project.id} className=\"p-6 bg-zinc-800/50 border-zinc-700\">\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center space-x-3 mb-2\">\n                    <h3 className=\"text-lg font-semibold text-white\">{project.title}</h3>\n                    <Badge \n                      className={`text-xs ${getProjectStatusColor(project.status)}`}\n                      variant=\"skill-tag\"\n                    >\n                      {project.status}\n                    </Badge>\n                  </div>\n                  <p className=\"text-zinc-400 text-sm mb-3\">{project.description}</p>\n                  \n                  <div className=\"flex items-center space-x-4 text-sm text-zinc-500\">\n                    <div className=\"flex items-center space-x-1\">\n                      <Users className=\"h-4 w-4\" />\n                      <span>{project.memberCount} members</span>\n                    </div>\n                    <div className=\"flex items-center space-x-1\">\n                      <Clock className=\"h-4 w-4\" />\n                      <span>Started {new Date(project.startDate).toLocaleDateString()}</span>\n                    </div>\n                    <div className=\"flex items-center space-x-1\">\n                      <Target className=\"h-4 w-4\" />\n                      <span>{project.progress}% complete</span>\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center space-x-2\">\n                  {project.participatingSpaces.map((space) => (\n                    <div key={space.id} className=\"flex items-center space-x-1\">\n                      <div className=\"w-6 h-6 bg-zinc-600 rounded-full flex items-center justify-center\">\n                        <span className=\"text-xs text-white font-medium\">\n                          {space.name.split(' ').map(n => n[0]).join('')}\n                        </span>\n                      </div>\n                      <span className=\"text-xs text-zinc-400\">{space.role}</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n              \n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-4\">\n                  <div className=\"flex items-center space-x-2\">\n                    <span className=\"text-sm text-zinc-400\">Next:</span>\n                    <span className=\"text-sm text-white\">{project.nextMilestone}</span>\n                  </div>\n                  <div className=\"flex flex-wrap gap-1\">\n                    {project.tags.slice(0, 3).map((tag) => (\n                      <Badge key={tag} variant=\"skill-tag\" className=\"text-xs\">\n                        #{tag}\n                      </Badge>\n                    ))}\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center space-x-2\">\n                  <Button variant=\"outline\" size=\"sm\">\n                    <MessageSquare className=\"h-4 w-4 mr-1\" />\n                    Chat\n                  </Button>\n                  <Button variant=\"ghost\" size=\"sm\" className=\"text-zinc-400 hover:text-white\">\n                    <Settings className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n              \n              {/* Progress Bar */}\n              <div className=\"mt-4\">\n                <div className=\"flex items-center justify-between mb-1\">\n                  <span className=\"text-xs text-zinc-400\">Progress</span>\n                  <span className=\"text-xs text-zinc-400\">{project.progress}%</span>\n                </div>\n                <div className=\"w-full bg-zinc-700 rounded-full h-2\">\n                  <div \n                    className=\"bg-hive-gold h-2 rounded-full transition-all\"\n                    style={{ width: `${project.progress}%` }}\n                  />\n                </div>\n              </div>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      {activeTab === 'events' && (\n        <div className=\"space-y-4\">\n          {jointEvents.map((event) => (\n            <Card key={event.id} className=\"p-6 bg-zinc-800/50 border-zinc-700\">\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center space-x-3 mb-2\">\n                    <h3 className=\"text-lg font-semibold text-white\">{event.title}</h3>\n                    <Badge variant=\"building-tools\" className=\"text-xs\">\n                      Joint Event\n                    </Badge>\n                    <Badge variant=\"skill-tag\" className=\"text-xs capitalize\">\n                      {event.type}\n                    </Badge>\n                  </div>\n                  <p className=\"text-zinc-400 text-sm mb-3\">{event.description}</p>\n                </div>\n              </div>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n                <div className=\"flex items-center space-x-2\">\n                  <Calendar className=\"h-4 w-4 text-zinc-400\" />\n                  <div>\n                    <div className=\"text-white text-sm\">\n                      {new Date(event.datetime.start).toLocaleDateString()}\n                    </div>\n                    <div className=\"text-zinc-400 text-xs\">\n                      {new Date(event.datetime.start).toLocaleTimeString()} - {new Date(event.datetime.end).toLocaleTimeString()}\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center space-x-2\">\n                  <MapPin className=\"h-4 w-4 text-zinc-400\" />\n                  <div>\n                    <div className=\"text-white text-sm\">{event.location.type}</div>\n                    <div className=\"text-zinc-400 text-xs\">{event.location.name}</div>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center space-x-2\">\n                  <Users className=\"h-4 w-4 text-zinc-400\" />\n                  <div>\n                    <div className=\"text-white text-sm\">{event.registered}/{event.capacity}</div>\n                    <div className=\"text-zinc-400 text-xs\">registered</div>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center justify-between pt-3 border-t border-zinc-700\">\n                <div className=\"flex items-center space-x-3\">\n                  <span className=\"text-sm text-zinc-400\">Organized by:</span>\n                  {event.organizingSpaces.map((space, index) => (\n                    <span key={space.id} className=\"text-sm text-white\">\n                      {space.name}{index < event.organizingSpaces.length - 1 && ', '}\n                    </span>\n                  ))}\n                </div>\n                \n                <Button variant=\"outline\" size=\"sm\">\n                  View Details\n                </Button>\n              </div>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      {activeTab === 'workspace' && (\n        <Card className=\"p-8 bg-zinc-800/50 border-zinc-700 text-center\">\n          <Lightbulb className=\"h-16 w-16 text-hive-gold mx-auto mb-4\" />\n          <h3 className=\"text-xl font-semibold text-white mb-2\">Joint Planning Workspace</h3>\n          <p className=\"text-zinc-400 mb-6 max-w-2xl mx-auto\">\n            Collaborative workspace for planning cross-space initiatives, sharing resources, and coordinating joint activities. This feature is coming soon.\n          </p>\n          <Button variant=\"outline\">\n            <Plus className=\"h-4 w-4 mr-2\" />\n            Request Early Access\n          </Button>\n        </Card>\n      )}\n\n      {/* Invite Space Modal */}\n      <HiveModal\n        isOpen={showInviteModal}\n        onClose={() => setShowInviteModal(false)}\n        title=\"Invite Space to Collaborate\"\n        size=\"lg\"\n      >\n        <div className=\"space-y-4\">\n          <p className=\"text-zinc-400\">\n            Search for spaces on campus and send collaboration invitations\n          </p>\n          \n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-zinc-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search spaces by name or type...\"\n              className=\"pl-10 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-zinc-400 focus:border-hive-gold focus:outline-none w-full\"\n            />\n          </div>\n          \n          <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n            {['AI Research Group', 'Design Studio', 'Business Club'].map((spaceName) => (\n              <div key={spaceName} className=\"flex items-center justify-between p-3 bg-zinc-800/30 rounded-lg\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-8 h-8 bg-zinc-600 rounded-lg flex items-center justify-center\">\n                    <span className=\"text-white text-xs font-semibold\">\n                      {spaceName.split(' ').map(word => word[0]).join('')}\n                    </span>\n                  </div>\n                  <span className=\"text-white text-sm\">{spaceName}</span>\n                </div>\n                <Button size=\"sm\" variant=\"outline\">\n                  Invite\n                </Button>\n              </div>\n            ))}\n          </div>\n          \n          <div className=\"flex justify-end space-x-3 pt-4 border-t border-zinc-800\">\n            <Button variant=\"outline\" onClick={() => setShowInviteModal(false)}>\n              Cancel\n            </Button>\n            <Button className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\">\n              Send Invitations\n            </Button>\n          </div>\n        </div>\n      </HiveModal>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/spaces/event-creation-modal.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Alert' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Alert"},"fix":{"range":[219,267],"text":""},"desc":"Remove unused variable 'Alert'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Clock' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Clock"},"fix":{"range":[305,314],"text":""},"desc":"Remove unused variable 'Clock'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Lock' is defined but never used. Allowed unused vars must match /^_/u.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Lock"},"fix":{"range":[332,340],"text":""},"desc":"Remove unused variable 'Lock'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Repeat' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Repeat"},"fix":{"range":[354,364],"text":""},"desc":"Remove unused variable 'Repeat'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { useState } from 'react';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { authenticatedFetch } from '../../lib/auth-utils';\nimport { Button } from \"@hive/ui\";\nimport { Alert } from \"@/components/temp-stubs\";\nimport { \n  X, \n  Calendar, \n  MapPin,\n  Clock,\n  Users,\n  Globe,\n  Lock,\n  DollarSign,\n  Repeat,\n  AlertCircle,\n  Loader2\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface EventCreationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  spaceId: string;\n  spaceName: string;\n}\n\nconst eventTypes = [\n  { value: 'academic', label: 'Academic', color: 'text-blue-400' },\n  { value: 'social', label: 'Social', color: 'text-green-400' },\n  { value: 'recreational', label: 'Recreational', color: 'text-purple-400' },\n  { value: 'cultural', label: 'Cultural', color: 'text-orange-400' },\n  { value: 'meeting', label: 'Meeting', color: 'text-gray-400' },\n  { value: 'virtual', label: 'Virtual', color: 'text-indigo-400' }\n];\n\nexport function EventCreationModal({\n  isOpen,\n  onClose,\n  spaceId,\n  spaceName\n}: EventCreationModalProps) {\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    type: 'social',\n    startDate: '',\n    startTime: '',\n    endDate: '',\n    endTime: '',\n    location: '',\n    virtualLink: '',\n    maxAttendees: '',\n    cost: '',\n    currency: 'USD',\n    isPrivate: false,\n    requiredRSVP: true,\n    isRecurring: false\n  });\n  \n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  \n  const queryClient = useQueryClient();\n\n  const createEventMutation = useMutation({\n    mutationFn: async (eventData: any) => {\n      const response = await authenticatedFetch(`/api/spaces/${spaceId}/events`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(eventData)\n      });\n      \n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || 'Failed to create event');\n      }\n      \n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['space-events', spaceId] });\n      handleClose();\n    },\n    onError: (error: Error) => {\n      setErrors({ general: error.message });\n      setIsSubmitting(false);\n    }\n  });\n\n  const handleClose = () => {\n    setFormData({\n      title: '',\n      description: '',\n      type: 'social',\n      startDate: '',\n      startTime: '',\n      endDate: '',\n      endTime: '',\n      location: '',\n      virtualLink: '',\n      maxAttendees: '',\n      cost: '',\n      currency: 'USD',\n      isPrivate: false,\n      requiredRSVP: true,\n      isRecurring: false\n    });\n    setErrors({});\n    setIsSubmitting(false);\n    onClose();\n  };\n\n  const validateForm = () => {\n    const newErrors: Record<string, string> = {};\n\n    if (!formData.title.trim()) {\n      newErrors.title = 'Title is required';\n    }\n\n    if (!formData.description.trim()) {\n      newErrors.description = 'Description is required';\n    }\n\n    if (!formData.startDate) {\n      newErrors.startDate = 'Start date is required';\n    }\n\n    if (!formData.startTime) {\n      newErrors.startTime = 'Start time is required';\n    }\n\n    if (!formData.endDate) {\n      newErrors.endDate = 'End date is required';\n    }\n\n    if (!formData.endTime) {\n      newErrors.endTime = 'End time is required';\n    }\n\n    // Validate date/time logic\n    if (formData.startDate && formData.startTime && formData.endDate && formData.endTime) {\n      const startDateTime = new Date(`${formData.startDate}T${formData.startTime}`);\n      const endDateTime = new Date(`${formData.endDate}T${formData.endTime}`);\n      \n      if (endDateTime <= startDateTime) {\n        newErrors.endDate = 'End date/time must be after start date/time';\n      }\n    }\n\n    if (formData.type === 'virtual' && !formData.virtualLink.trim()) {\n      newErrors.virtualLink = 'Virtual link is required for virtual events';\n    }\n\n    if (formData.maxAttendees && parseInt(formData.maxAttendees) < 1) {\n      newErrors.maxAttendees = 'Max attendees must be at least 1';\n    }\n\n    if (formData.cost && parseFloat(formData.cost) < 0) {\n      newErrors.cost = 'Cost cannot be negative';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    const startDateTime = new Date(`${formData.startDate}T${formData.startTime}`).toISOString();\n    const endDateTime = new Date(`${formData.endDate}T${formData.endTime}`).toISOString();\n\n    const eventData = {\n      title: formData.title.trim(),\n      description: formData.description.trim(),\n      type: formData.type,\n      startDate: startDateTime,\n      endDate: endDateTime,\n      location: formData.location.trim() || undefined,\n      virtualLink: formData.virtualLink.trim() || undefined,\n      maxAttendees: formData.maxAttendees ? parseInt(formData.maxAttendees) : undefined,\n      cost: formData.cost ? parseFloat(formData.cost) : undefined,\n      currency: formData.cost ? formData.currency : undefined,\n      isPrivate: formData.isPrivate,\n      requiredRSVP: formData.requiredRSVP,\n      isRecurring: formData.isRecurring\n    };\n\n    createEventMutation.mutate(eventData);\n  };\n\n  const handleInputChange = (field: string, value: any) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    // Clear error when user starts typing\n    if (errors[field]) {\n      setErrors(prev => ({ ...prev, [field]: '' }));\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        onClick={handleClose}\n      >\n        <motion.div\n          className=\"bg-[#0A0A0A] border border-white/[0.1] rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden\"\n          initial={{ scale: 0.9, opacity: 0 }}\n          animate={{ scale: 1, opacity: 1 }}\n          exit={{ scale: 0.9, opacity: 0 }}\n          onClick={(e) => e.stopPropagation()}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-white/[0.06]\">\n            <div className=\"flex items-center gap-3\">\n              <Calendar className=\"h-6 w-6 text-[#FFD700]\" />\n              <div>\n                <h2 className=\"text-xl font-semibold text-white\">Create Event</h2>\n                <p className=\"text-sm text-neutral-400\">in {spaceName}</p>\n              </div>\n            </div>\n            \n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={handleClose}\n              className=\"border-white/[0.2] text-white hover:bg-white/[0.1]\"\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n\n          {/* Content */}\n          <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-140px)]\">\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              {/* Title */}\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-2\">\n                  Event Title *\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.title}\n                  onChange={(e) => handleInputChange('title', e.target.value)}\n                  placeholder=\"What's happening?\"\n                  className=\"w-full px-4 py-3 rounded-lg bg-white/[0.02] border border-white/[0.06] text-white placeholder-neutral-400 focus:outline-none focus:border-[#FFD700]/30\"\n                  maxLength={200}\n                />\n                {errors.title && <p className=\"text-red-400 text-xs mt-1\">{errors.title}</p>}\n              </div>\n\n              {/* Event Type */}\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-2\">\n                  Event Type *\n                </label>\n                <div className=\"grid grid-cols-3 gap-2\">\n                  {eventTypes.map((type) => (\n                    <button\n                      key={type.value}\n                      type=\"button\"\n                      className={`p-3 rounded-lg border transition-all ${\n                        formData.type === type.value\n                          ? 'bg-[#FFD700]/10 border-[#FFD700]/30 text-[#FFD700]'\n                          : 'bg-white/[0.02] border-white/[0.06] text-neutral-400 hover:border-white/[0.1] hover:text-white'\n                      }`}\n                      onClick={() => handleInputChange('type', type.value)}\n                    >\n                      <div className=\"text-xs font-medium\">{type.label}</div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Description */}\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-2\">\n                  Description *\n                </label>\n                <textarea\n                  value={formData.description}\n                  onChange={(e) => handleInputChange('description', e.target.value)}\n                  placeholder=\"Tell people more about this event...\"\n                  className=\"w-full px-4 py-3 rounded-lg bg-white/[0.02] border border-white/[0.06] text-white placeholder-neutral-400 resize-none focus:outline-none focus:border-[#FFD700]/30 h-24\"\n                  maxLength={2000}\n                />\n                {errors.description && <p className=\"text-red-400 text-xs mt-1\">{errors.description}</p>}\n              </div>\n\n              {/* Date and Time */}\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-white mb-2\">\n                    Start Date *\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={formData.startDate}\n                    onChange={(e) => handleInputChange('startDate', e.target.value)}\n                    className=\"w-full px-4 py-3 rounded-lg bg-white/[0.02] border border-white/[0.06] text-white focus:outline-none focus:border-[#FFD700]/30\"\n                  />\n                  {errors.startDate && <p className=\"text-red-400 text-xs mt-1\">{errors.startDate}</p>}\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-white mb-2\">\n                    Start Time *\n                  </label>\n                  <input\n                    type=\"time\"\n                    value={formData.startTime}\n                    onChange={(e) => handleInputChange('startTime', e.target.value)}\n                    className=\"w-full px-4 py-3 rounded-lg bg-white/[0.02] border border-white/[0.06] text-white focus:outline-none focus:border-[#FFD700]/30\"\n                  />\n                  {errors.startTime && <p className=\"text-red-400 text-xs mt-1\">{errors.startTime}</p>}\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-white mb-2\">\n                    End Date *\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={formData.endDate}\n                    onChange={(e) => handleInputChange('endDate', e.target.value)}\n                    className=\"w-full px-4 py-3 rounded-lg bg-white/[0.02] border border-white/[0.06] text-white focus:outline-none focus:border-[#FFD700]/30\"\n                  />\n                  {errors.endDate && <p className=\"text-red-400 text-xs mt-1\">{errors.endDate}</p>}\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-white mb-2\">\n                    End Time *\n                  </label>\n                  <input\n                    type=\"time\"\n                    value={formData.endTime}\n                    onChange={(e) => handleInputChange('endTime', e.target.value)}\n                    className=\"w-full px-4 py-3 rounded-lg bg-white/[0.02] border border-white/[0.06] text-white focus:outline-none focus:border-[#FFD700]/30\"\n                  />\n                  {errors.endTime && <p className=\"text-red-400 text-xs mt-1\">{errors.endTime}</p>}\n                </div>\n              </div>\n\n              {/* Location */}\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-2\">\n                  <MapPin className=\"inline h-4 w-4 mr-1\" />\n                  Location {formData.type !== 'virtual' ? '(optional)' : ''}\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.location}\n                  onChange={(e) => handleInputChange('location', e.target.value)}\n                  placeholder=\"Where is this happening?\"\n                  className=\"w-full px-4 py-3 rounded-lg bg-white/[0.02] border border-white/[0.06] text-white placeholder-neutral-400 focus:outline-none focus:border-[#FFD700]/30\"\n                />\n              </div>\n\n              {/* Virtual Link */}\n              {formData.type === 'virtual' && (\n                <div>\n                  <label className=\"block text-sm font-medium text-white mb-2\">\n                    <Globe className=\"inline h-4 w-4 mr-1\" />\n                    Virtual Link *\n                  </label>\n                  <input\n                    type=\"url\"\n                    value={formData.virtualLink}\n                    onChange={(e) => handleInputChange('virtualLink', e.target.value)}\n                    placeholder=\"https://zoom.us/j/...\"\n                    className=\"w-full px-4 py-3 rounded-lg bg-white/[0.02] border border-white/[0.06] text-white placeholder-neutral-400 focus:outline-none focus:border-[#FFD700]/30\"\n                  />\n                  {errors.virtualLink && <p className=\"text-red-400 text-xs mt-1\">{errors.virtualLink}</p>}\n                </div>\n              )}\n\n              {/* Max Attendees and Cost */}\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-white mb-2\">\n                    <Users className=\"inline h-4 w-4 mr-1\" />\n                    Max Attendees (optional)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={formData.maxAttendees}\n                    onChange={(e) => handleInputChange('maxAttendees', e.target.value)}\n                    placeholder=\"Unlimited\"\n                    min=\"1\"\n                    className=\"w-full px-4 py-3 rounded-lg bg-white/[0.02] border border-white/[0.06] text-white placeholder-neutral-400 focus:outline-none focus:border-[#FFD700]/30\"\n                  />\n                  {errors.maxAttendees && <p className=\"text-red-400 text-xs mt-1\">{errors.maxAttendees}</p>}\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-white mb-2\">\n                    <DollarSign className=\"inline h-4 w-4 mr-1\" />\n                    Cost (optional)\n                  </label>\n                  <div className=\"flex\">\n                    <select\n                      value={formData.currency}\n                      onChange={(e) => handleInputChange('currency', e.target.value)}\n                      className=\"px-3 py-3 rounded-l-lg bg-white/[0.02] border border-r-0 border-white/[0.06] text-white focus:outline-none focus:border-[#FFD700]/30\"\n                    >\n                      <option value=\"USD\">$</option>\n                      <option value=\"EUR\">â‚¬</option>\n                      <option value=\"GBP\">Â£</option>\n                    </select>\n                    <input\n                      type=\"number\"\n                      value={formData.cost}\n                      onChange={(e) => handleInputChange('cost', e.target.value)}\n                      placeholder=\"0.00\"\n                      min=\"0\"\n                      step=\"0.01\"\n                      className=\"flex-1 px-4 py-3 rounded-r-lg bg-white/[0.02] border border-white/[0.06] text-white placeholder-neutral-400 focus:outline-none focus:border-[#FFD700]/30\"\n                    />\n                  </div>\n                  {errors.cost && <p className=\"text-red-400 text-xs mt-1\">{errors.cost}</p>}\n                </div>\n              </div>\n\n              {/* Options */}\n              <div className=\"space-y-3\">\n                <label className=\"flex items-center gap-3\">\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.requiredRSVP}\n                    onChange={(e) => handleInputChange('requiredRSVP', e.target.checked)}\n                    className=\"w-4 h-4 rounded border-white/[0.06] bg-white/[0.02] text-[#FFD700] focus:ring-[#FFD700]/50\"\n                  />\n                  <span className=\"text-sm text-white\">Require RSVP</span>\n                </label>\n                \n                <label className=\"flex items-center gap-3\">\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.isPrivate}\n                    onChange={(e) => handleInputChange('isPrivate', e.target.checked)}\n                    className=\"w-4 h-4 rounded border-white/[0.06] bg-white/[0.02] text-[#FFD700] focus:ring-[#FFD700]/50\"\n                  />\n                  <span className=\"text-sm text-white\">Private event</span>\n                </label>\n              </div>\n\n              {/* Error Display */}\n              {errors.general && (\n                <motion.div\n                  className=\"p-4 rounded-lg bg-red-500/10 border border-red-500/20\"\n                  initial={{ opacity: 0, y: -10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                >\n                  <div className=\"flex items-center gap-2\">\n                    <AlertCircle className=\"h-4 w-4 text-red-400\" />\n                    <span className=\"text-sm text-red-300\">{errors.general}</span>\n                  </div>\n                </motion.div>\n              )}\n\n              {/* Actions */}\n              <div className=\"flex gap-3 pt-4 border-t border-white/[0.06]\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={handleClose}\n                  disabled={isSubmitting}\n                  className=\"flex-1\"\n                >\n                  Cancel\n                </Button>\n                \n                <Button\n                  type=\"submit\"\n                  variant=\"primary\"\n                  disabled={isSubmitting}\n                  className=\"flex-1 bg-[#FFD700] text-[#0A0A0A] hover:bg-[#FFE255]\"\n                >\n                  {isSubmitting ? (\n                    <div className=\"flex items-center gap-2\">\n                      <Loader2 className=\"h-4 w-4 animate-spin\" />\n                      <span>Creating...</span>\n                    </div>\n                  ) : (\n                    'Create Event'\n                  )}\n                </Button>\n              </div>\n            </form>\n          </div>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/spaces/leader-toolbar.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'ChevronDown' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"ChevronDown"},"fix":{"range":[191,206],"text":""},"desc":"Remove unused variable 'ChevronDown'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Trash2"},"fix":{"range":[213,223],"text":""},"desc":"Remove unused variable 'Trash2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'EyeOff' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"EyeOff"},"fix":{"range":[249,259],"text":""},"desc":"Remove unused variable 'EyeOff'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'mode' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":28,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"mode"},"fix":{"range":[544,560],"text":""},"desc":"Remove unused variable 'mode'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  Shield, \n  Users, \n  Settings, \n  BarChart3, \n  Crown,\n  ChevronUp,\n  ChevronDown,\n  Pin,\n  Trash2,\n  Lock,\n  UserCog,\n  Eye,\n  EyeOff\n} from 'lucide-react';\nimport { Button, Badge } from \"@hive/ui\";\nimport { cn } from '../../lib/utils';\n\nexport type LeaderMode = 'moderate' | 'manage' | 'configure' | 'insights' | null;\n\ninterface LeaderToolbarProps {\n  isVisible: boolean;\n  currentMode: LeaderMode;\n  onModeChange: (mode: LeaderMode) => void;\n  spaceRole: 'owner' | 'admin' | 'moderator';\n  className?: string;\n}\n\nconst LEADER_MODES = {\n  moderate: {\n    icon: Shield,\n    label: 'Moderate',\n    description: 'Pin, delete, and manage content',\n    color: 'text-red-400',\n    bgColor: 'bg-red-500/20',\n    borderColor: 'border-red-500/30'\n  },\n  manage: {\n    icon: Users,\n    label: 'Manage',\n    description: 'Member roles and permissions',\n    color: 'text-blue-400',\n    bgColor: 'bg-blue-500/20',\n    borderColor: 'border-blue-500/30'\n  },\n  configure: {\n    icon: Settings,\n    label: 'Configure',\n    description: 'Space settings and rules',\n    color: 'text-green-400',\n    bgColor: 'bg-green-500/20',\n    borderColor: 'border-green-500/30'\n  },\n  insights: {\n    icon: BarChart3,\n    label: 'Insights',\n    description: 'Analytics and engagement data',\n    color: 'text-purple-400',\n    bgColor: 'bg-purple-500/20',\n    borderColor: 'border-purple-500/30'\n  }\n} as const;\n\nexport function LeaderToolbar({ \n  isVisible, \n  currentMode, \n  onModeChange, \n  spaceRole,\n  className \n}: LeaderToolbarProps) {\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  const availableModes = Object.entries(LEADER_MODES).filter(([mode]) => {\n    // All roles can moderate and manage\n    if (mode === 'moderate' || mode === 'manage') return true;\n    // Only admin+ can configure and view insights\n    if (mode === 'configure' || mode === 'insights') return spaceRole === 'owner' || spaceRole === 'admin';\n    return true;\n  });\n\n  if (!isVisible) return null;\n\n  return (\n    <motion.div\n      className={cn(\n        \"fixed bottom-6 right-6 z-50\",\n        className\n      )}\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: 20 }}\n    >\n      {/* Main Toolbar */}\n      <div className=\"relative\">\n        {/* Expanded Mode Buttons */}\n        <AnimatePresence>\n          {isExpanded && (\n            <motion.div\n              className=\"absolute bottom-16 right-0 space-y-2 w-48\"\n              initial={{ opacity: 0, y: 10, scale: 0.9 }}\n              animate={{ opacity: 1, y: 0, scale: 1 }}\n              exit={{ opacity: 0, y: 10, scale: 0.9 }}\n              transition={{ duration: 0.2 }}\n            >\n              {availableModes.map(([modeKey, modeConfig]) => {\n                const mode = modeKey as LeaderMode;\n                const ModeIcon = modeConfig.icon;\n                const isActive = currentMode === mode;\n                \n                return (\n                  <motion.button\n                    key={mode}\n                    className={cn(\n                      \"w-full flex items-center gap-3 p-3 rounded-xl bg-[#0A0A0A] border transition-all text-left\",\n                      isActive \n                        ? `${modeConfig.borderColor} ${modeConfig.bgColor}` \n                        : \"border-white/10 hover:border-white/20 hover:bg-white/5\"\n                    )}\n                    onClick={() => {\n                      onModeChange(isActive ? null : mode);\n                      setIsExpanded(false);\n                    }}\n                    whileHover={{ scale: 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                  >\n                    <ModeIcon className={cn(\n                      \"w-5 h-5\",\n                      isActive ? modeConfig.color : \"text-neutral-400\"\n                    )} />\n                    <div className=\"flex-1 min-w-0\">\n                      <div className={cn(\n                        \"font-medium text-sm\",\n                        isActive ? \"text-white\" : \"text-neutral-300\"\n                      )}>\n                        {modeConfig.label}\n                      </div>\n                      <div className=\"text-xs text-neutral-400 truncate\">\n                        {modeConfig.description}\n                      </div>\n                    </div>\n                    {isActive && (\n                      <motion.div\n                        className={cn(\"w-2 h-2 rounded-full\", modeConfig.color.replace('text-', 'bg-'))}\n                        initial={{ scale: 0 }}\n                        animate={{ scale: 1 }}\n                      />\n                    )}\n                  </motion.button>\n                );\n              })}\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Main Toggle Button */}\n        <motion.button\n          className={cn(\n            \"flex items-center gap-3 p-4 rounded-xl backdrop-blur-sm border transition-all shadow-lg\",\n            currentMode \n              ? `${LEADER_MODES[currentMode].borderColor} ${LEADER_MODES[currentMode].bgColor}` \n              : \"bg-[#0A0A0A]/90 border-white/10 hover:border-white/20\"\n          )}\n          onClick={() => {\n            if (currentMode) {\n              onModeChange(null);\n            } else {\n              setIsExpanded(!isExpanded);\n            }\n          }}\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n        >\n          {currentMode ? (\n            // Active Mode Display\n            <>\n              {React.createElement(LEADER_MODES[currentMode].icon, {\n                className: cn(\"w-5 h-5\", LEADER_MODES[currentMode].color)\n              })}\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-white font-medium text-sm\">\n                  {LEADER_MODES[currentMode].label} Mode\n                </span>\n                <Badge variant=\"leadership\" className=\"text-xs px-2 py-0.5 bg-[#FFD700]/20 text-[#FFD700] border-[#FFD700]/30\">\n                  Active\n                </Badge>\n              </div>\n              <motion.div\n                className=\"w-2 h-2 rounded-full bg-[#FFD700]\"\n                animate={{ scale: [1, 1.2, 1] }}\n                transition={{ duration: 2, repeat: Infinity }}\n              />\n            </>\n          ) : (\n            // Default Leadership Button\n            <>\n              <Crown className=\"w-5 h-5 text-[#FFD700]\" />\n              <span className=\"text-white font-medium text-sm\">Leadership</span>\n              <motion.div\n                animate={{ rotate: isExpanded ? 180 : 0 }}\n                transition={{ duration: 0.2 }}\n              >\n                <ChevronUp className=\"w-4 h-4 text-neutral-400\" />\n              </motion.div>\n            </>\n          )}\n        </motion.button>\n\n        {/* Mode Indicator Help */}\n        {currentMode && (\n          <motion.div\n            className=\"absolute -top-12 right-0 bg-[#0A0A0A] border border-white/10 rounded-lg px-3 py-2 text-xs text-neutral-300 whitespace-nowrap\"\n            initial={{ opacity: 0, y: 5 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: 5 }}\n          >\n            {LEADER_MODES[currentMode].description}\n            <div className=\"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-white/10\" />\n          </motion.div>\n        )}\n      </div>\n\n      {/* Quick Actions (when in active mode) */}\n      {currentMode && (\n        <motion.div\n          className=\"absolute -top-16 right-0 flex items-center gap-2\"\n          initial={{ opacity: 0, x: 20 }}\n          animate={{ opacity: 1, x: 0 }}\n          exit={{ opacity: 0, x: 20 }}\n        >\n          {currentMode === 'moderate' && (\n            <>\n              <Button size=\"sm\" variant=\"outline\" className=\"border-red-400/30 text-red-400 hover:bg-red-400/10\">\n                <Pin className=\"w-3 h-3 mr-1\" />\n                Pin\n              </Button>\n              <Button size=\"sm\" variant=\"outline\" className=\"border-red-400/30 text-red-400 hover:bg-red-400/10\">\n                <Lock className=\"w-3 h-3 mr-1\" />\n                Lock\n              </Button>\n            </>\n          )}\n          \n          {currentMode === 'manage' && (\n            <>\n              <Button size=\"sm\" variant=\"outline\" className=\"border-blue-400/30 text-blue-400 hover:bg-blue-400/10\">\n                <UserCog className=\"w-3 h-3 mr-1\" />\n                Roles\n              </Button>\n              <Button size=\"sm\" variant=\"outline\" className=\"border-blue-400/30 text-blue-400 hover:bg-blue-400/10\">\n                <Users className=\"w-3 h-3 mr-1\" />\n                Members\n              </Button>\n            </>\n          )}\n          \n          {currentMode === 'insights' && (\n            <Button size=\"sm\" variant=\"outline\" className=\"border-purple-400/30 text-purple-400 hover:bg-purple-400/10\">\n              <Eye className=\"w-3 h-3 mr-1\" />\n              Analytics\n            </Button>\n          )}\n        </motion.div>\n      )}\n    </motion.div>\n  );\n}\n\n// Helper hook for leader mode context\nexport function useLeaderMode() {\n  const [currentMode, setCurrentMode] = useState<LeaderMode>(null);\n  \n  const toggleMode = (mode: LeaderMode) => {\n    setCurrentMode(currentMode === mode ? null : mode);\n  };\n  \n  const exitMode = () => {\n    setCurrentMode(null);\n  };\n  \n  return {\n    currentMode,\n    toggleMode,\n    exitMode,\n    isInMode: (mode: LeaderMode) => currentMode === mode,\n    isInAnyMode: currentMode !== null\n  };\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/spaces/leave-space-button.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'getWarningMessage' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":91,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":91,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"getWarningMessage"},"fix":{"range":[2449,2903],"text":""},"desc":"Remove unused variable 'getWarningMessage'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState } from 'react';\nimport { Button } from \"@hive/ui\";\nimport { LogOut } from \"lucide-react\";\nimport { useModalHelpers } from '../ui/modal-system';\nimport { useUnifiedAuth } from '@hive/ui';\n\ninterface LeaveSpaceButtonProps {\n  spaceId: string;\n  spaceName: string;\n  spaceType: string;\n  userRole?: string;\n  onLeave?: () => void;\n  className?: string;\n}\n\nexport function LeaveSpaceButton({\n  spaceId,\n  spaceName,\n  spaceType,\n  userRole = 'member',\n  onLeave,\n  className\n}: LeaveSpaceButtonProps) {\n  const [isLeaving, setIsLeaving] = useState(false);\n  const { confirm } = useModalHelpers();\n  const { user } = useUnifiedAuth();\n\n  const isGreekLife = spaceType === 'greek_life';\n  const isImportantRole = userRole === 'owner' || userRole === 'admin';\n\n  const handleLeaveClick = () => {\n    const variant = isGreekLife || isImportantRole ? 'warning' : 'default';\n    \n    let message = `Are you sure you want to leave \"${spaceName}\"?`;\n    \n    if (isGreekLife) {\n      message += '\\n\\nAs this is a Greek Life organization, you may need special permission to rejoin.';\n    }\n    \n    if (isImportantRole) {\n      message += `\\n\\nYou are currently ${userRole === 'owner' ? 'the owner' : 'an admin'} of this space. Consider transferring your role before leaving.`;\n    }\n\n    confirm({\n      title: 'Leave Space',\n      message,\n      confirmText: 'Leave Space',\n      cancelText: 'Stay',\n      variant,\n      onConfirm: handleConfirmLeave\n    });\n  };\n\n  const handleConfirmLeave = async () => {\n    if (!user) return;\n    \n    setIsLeaving(true);\n    \n    try {\n      const headers: Record<string, string> = {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${user.id === 'dev_user_123' ? 'test-token' : 'user-token'}`\n      };\n\n      const response = await fetch('/api/spaces/leave', {\n        method: 'POST',\n        headers,\n        body: JSON.stringify({ spaceId })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to leave space');\n      }\n\n      // Call onLeave callback if provided\n      onLeave?.();\n      \n      // Redirect to spaces page\n      window.location.href = '/spaces';\n    } catch (error: any) {\n      // Use alert for now, could use toast notification system later\n      alert(error.message || 'Failed to leave space');\n    } finally {\n      setIsLeaving(false);\n    }\n  };\n\n  const getWarningMessage = () => {\n    if (isGreekLife) {\n      return \"Leaving this Greek life organization will allow you to join a different one. This action cannot be undone.\";\n    }\n    \n    if (isImportantRole) {\n      return `As a ${userRole}, leaving this space may affect its management. Consider transferring your role first.`;\n    }\n    \n    return \"Are you sure you want to leave this space? You can rejoin later if the space allows it.\";\n  };\n\n  return (\n    <>\n      <Button\n        variant=\"outline\"\n        size=\"sm\"\n        onClick={handleLeaveClick}\n        className={`border-red-500/30 text-red-400 hover:bg-red-500/10 hover:border-red-500/50 ${className}`}\n        disabled={isLeaving}\n      >\n        <LogOut className=\"h-4 w-4 mr-2\" />\n        Leave Space\n      </Button>\n\n    </>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/spaces/post-creation-modal.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Badge' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"Badge"},"fix":{"range":[207,214],"text":""},"desc":"Remove unused variable 'Badge'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Alert' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Alert"},"fix":{"range":[234,282],"text":""},"desc":"Remove unused variable 'Alert'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ImageIcon' is defined but never used. Allowed unused vars must match /^_/u.","line":15,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"ImageIcon"},"fix":{"range":[383,406],"text":""},"desc":"Remove unused variable 'ImageIcon'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { useState, useRef } from 'react';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { authenticatedFetch } from '../../lib/auth-utils';\nimport { Button, Badge } from \"@hive/ui\";\nimport { Alert } from \"@/components/temp-stubs\";\nimport { \n  X, \n  MessageSquare, \n  MessageCircle, \n  BarChart3 as Poll, \n  Pin, \n  Link as LinkIcon, \n  Image as ImageIcon,\n  Loader2,\n  AlertCircle,\n  Plus,\n  Minus\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface PostCreationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  spaceId: string;\n  spaceName: string;\n  initialPostType?: 'discussion' | 'question' | 'poll' | 'announcement' | 'link';\n  canCreateAnnouncements?: boolean;\n}\n\nconst postTypes = {\n  discussion: {\n    icon: MessageSquare,\n    label: 'Discussion',\n    color: 'text-blue-400',\n    description: 'Start a conversation',\n    placeholder: 'What would you like to discuss?'\n  },\n  question: {\n    icon: MessageCircle,\n    label: 'Question',\n    color: 'text-green-400',\n    description: 'Ask the community',\n    placeholder: 'What would you like to know?'\n  },\n  poll: {\n    icon: Poll,\n    label: 'Poll',\n    color: 'text-purple-400',\n    description: 'Gather opinions',\n    placeholder: 'What question would you like to ask?'\n  },\n  announcement: {\n    icon: Pin,\n    label: 'Announcement',\n    color: 'text-yellow-400',\n    description: 'Important updates',\n    placeholder: 'What announcement would you like to make?'\n  },\n  link: {\n    icon: LinkIcon,\n    label: 'Link Share',\n    color: 'text-indigo-400',\n    description: 'Share a resource',\n    placeholder: 'Share something interesting...'\n  }\n} as const;\n\nexport function PostCreationModal({\n  isOpen,\n  onClose,\n  spaceId,\n  spaceName,\n  initialPostType = 'discussion',\n  canCreateAnnouncements = false\n}: PostCreationModalProps) {\n  const [selectedType, setSelectedType] = useState<keyof typeof postTypes>(initialPostType);\n  const [content, setContent] = useState('');\n  const [title, setTitle] = useState('');\n  const [linkUrl, setLinkUrl] = useState('');\n  const [pollOptions, setPollOptions] = useState(['', '']);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  const queryClient = useQueryClient();\n\n  // Create post mutation\n  const createPostMutation = useMutation({\n    mutationFn: async (postData: {\n      type: string;\n      content: string;\n      title?: string;\n      linkUrl?: string;\n      pollOptions?: string[];\n    }) => {\n      const response = await authenticatedFetch(`/api/spaces/${spaceId}/posts`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(postData)\n      });\n      \n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || 'Failed to create post');\n      }\n      \n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['space-posts', spaceId] });\n      handleClose();\n    },\n    onError: (error: Error) => {\n      setError(error.message);\n      setIsSubmitting(false);\n    }\n  });\n\n  const handleClose = () => {\n    setContent('');\n    setTitle('');\n    setLinkUrl('');\n    setPollOptions(['', '']);\n    setError(null);\n    setIsSubmitting(false);\n    onClose();\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setIsSubmitting(true);\n\n    // Validation\n    if (!content.trim()) {\n      setError('Content is required');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (selectedType === 'link' && !linkUrl.trim()) {\n      setError('Link URL is required for link posts');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (selectedType === 'poll') {\n      const validOptions = pollOptions.filter(option => option.trim());\n      if (validOptions.length < 2) {\n        setError('Polls need at least 2 options');\n        setIsSubmitting(false);\n        return;\n      }\n    }\n\n    const postData: any = {\n      type: selectedType,\n      content: content.trim(),\n      title: title.trim() || undefined\n    };\n\n    if (selectedType === 'link') {\n      postData.linkUrl = linkUrl.trim();\n    }\n\n    if (selectedType === 'poll') {\n      postData.pollOptions = pollOptions.filter(option => option.trim());\n    }\n\n    createPostMutation.mutate(postData);\n  };\n\n  const addPollOption = () => {\n    if (pollOptions.length < 6) {\n      setPollOptions([...pollOptions, '']);\n    }\n  };\n\n  const removePollOption = (index: number) => {\n    if (pollOptions.length > 2) {\n      setPollOptions(pollOptions.filter((_, i) => i !== index));\n    }\n  };\n\n  const updatePollOption = (index: number, value: string) => {\n    const newOptions = [...pollOptions];\n    newOptions[index] = value;\n    setPollOptions(newOptions);\n  };\n\n  // Auto-resize textarea\n  const handleContentChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setContent(e.target.value);\n    const textarea = e.target;\n    textarea.style.height = 'auto';\n    textarea.style.height = textarea.scrollHeight + 'px';\n  };\n\n  const currentTypeConfig = postTypes[selectedType];\n  const Icon = currentTypeConfig.icon;\n\n  // Filter available post types based on permissions\n  const availableTypes = Object.entries(postTypes).filter(([type]) => {\n    if (type === 'announcement' && !canCreateAnnouncements) {\n      return false;\n    }\n    return true;\n  });\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        onClick={handleClose}\n      >\n        <motion.div\n          className=\"bg-[#0A0A0A] border border-white/[0.1] rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden\"\n          initial={{ scale: 0.9, opacity: 0 }}\n          animate={{ scale: 1, opacity: 1 }}\n          exit={{ scale: 0.9, opacity: 0 }}\n          onClick={(e) => e.stopPropagation()}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-white/[0.06]\">\n            <div className=\"flex items-center gap-3\">\n              <Icon className={`h-6 w-6 ${currentTypeConfig.color}`} />\n              <div>\n                <h2 className=\"text-xl font-semibold text-white\">\n                  Create {currentTypeConfig.label}\n                </h2>\n                <p className=\"text-sm text-neutral-400\">\n                  in {spaceName}\n                </p>\n              </div>\n            </div>\n            \n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={handleClose}\n              className=\"border-white/[0.2] text-white hover:bg-white/[0.1]\"\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n\n          {/* Content */}\n          <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-140px)]\">\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              {/* Post Type Selector */}\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-3\">\n                  Post Type\n                </label>\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n                  {availableTypes.map(([type, config]) => {\n                    const TypeIcon = config.icon;\n                    const isSelected = selectedType === type;\n                    \n                    return (\n                      <motion.button\n                        key={type}\n                        type=\"button\"\n                        className={`p-3 rounded-lg border transition-all ${\n                          isSelected\n                            ? 'bg-[#FFD700]/10 border-[#FFD700]/30 text-[#FFD700]'\n                            : 'bg-white/[0.02] border-white/[0.06] text-neutral-400 hover:border-white/[0.1] hover:text-white'\n                        }`}\n                        onClick={() => setSelectedType(type as keyof typeof postTypes)}\n                        whileHover={{ scale: 1.02 }}\n                        whileTap={{ scale: 0.98 }}\n                      >\n                        <TypeIcon className=\"h-5 w-5 mx-auto mb-2\" />\n                        <div className=\"text-xs font-medium\">{config.label}</div>\n                      </motion.button>\n                    );\n                  })}\n                </div>\n              </div>\n\n              {/* Title (optional) */}\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-2\">\n                  Title (optional)\n                </label>\n                <input\n                  type=\"text\"\n                  value={title}\n                  onChange={(e) => setTitle(e.target.value)}\n                  placeholder=\"Give your post a title...\"\n                  className=\"w-full px-4 py-3 rounded-lg bg-white/[0.02] border border-white/[0.06] text-white placeholder-neutral-400 focus:outline-none focus:border-[#FFD700]/30\"\n                  maxLength={200}\n                />\n              </div>\n\n              {/* Content */}\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-2\">\n                  Content\n                </label>\n                <textarea\n                  ref={textareaRef}\n                  value={content}\n                  onChange={handleContentChange}\n                  placeholder={currentTypeConfig.placeholder}\n                  className=\"w-full px-4 py-3 rounded-lg bg-white/[0.02] border border-white/[0.06] text-white placeholder-neutral-400 resize-none focus:outline-none focus:border-[#FFD700]/30 min-h-[120px]\"\n                  maxLength={2000}\n                  required\n                />\n                <div className=\"flex justify-between items-center mt-2\">\n                  <p className=\"text-xs text-neutral-400\">\n                    {content.length}/2000 characters\n                  </p>\n                  <p className=\"text-xs text-neutral-400\">\n                    {currentTypeConfig.description}\n                  </p>\n                </div>\n              </div>\n\n              {/* Link URL (for link posts) */}\n              {selectedType === 'link' && (\n                <div>\n                  <label className=\"block text-sm font-medium text-white mb-2\">\n                    Link URL\n                  </label>\n                  <input\n                    type=\"url\"\n                    value={linkUrl}\n                    onChange={(e) => setLinkUrl(e.target.value)}\n                    placeholder=\"https://example.com\"\n                    className=\"w-full px-4 py-3 rounded-lg bg-white/[0.02] border border-white/[0.06] text-white placeholder-neutral-400 focus:outline-none focus:border-[#FFD700]/30\"\n                    required={selectedType === 'link'}\n                  />\n                </div>\n              )}\n\n              {/* Poll Options (for polls) */}\n              {selectedType === 'poll' && (\n                <div>\n                  <label className=\"block text-sm font-medium text-white mb-2\">\n                    Poll Options\n                  </label>\n                  <div className=\"space-y-3\">\n                    {pollOptions.map((option, index) => (\n                      <div key={index} className=\"flex items-center gap-2\">\n                        <input\n                          type=\"text\"\n                          value={option}\n                          onChange={(e) => updatePollOption(index, e.target.value)}\n                          placeholder={`Option ${index + 1}`}\n                          className=\"flex-1 px-4 py-2 rounded-lg bg-white/[0.02] border border-white/[0.06] text-white placeholder-neutral-400 focus:outline-none focus:border-[#FFD700]/30\"\n                          maxLength={100}\n                        />\n                        {pollOptions.length > 2 && (\n                          <Button\n                            type=\"button\"\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => removePollOption(index)}\n                            className=\"border-red-500/30 text-red-400 hover:bg-red-500/10\"\n                          >\n                            <Minus className=\"h-4 w-4\" />\n                          </Button>\n                        )}\n                      </div>\n                    ))}\n                    \n                    {pollOptions.length < 6 && (\n                      <Button\n                        type=\"button\"\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={addPollOption}\n                        className=\"border-white/[0.2] text-white hover:bg-white/[0.1]\"\n                      >\n                        <Plus className=\"h-4 w-4 mr-2\" />\n                        Add Option\n                      </Button>\n                    )}\n                  </div>\n                </div>\n              )}\n\n              {/* Error Display */}\n              {error && (\n                <motion.div\n                  className=\"p-4 rounded-lg bg-red-500/10 border border-red-500/20\"\n                  initial={{ opacity: 0, y: -10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                >\n                  <div className=\"flex items-center gap-2\">\n                    <AlertCircle className=\"h-4 w-4 text-red-400\" />\n                    <span className=\"text-sm text-red-300\">{error}</span>\n                  </div>\n                </motion.div>\n              )}\n\n              {/* Actions */}\n              <div className=\"flex gap-3 pt-4 border-t border-white/[0.06]\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={handleClose}\n                  disabled={isSubmitting}\n                  className=\"flex-1\"\n                >\n                  Cancel\n                </Button>\n                \n                <Button\n                  type=\"submit\"\n                  variant=\"primary\"\n                  disabled={isSubmitting || !content.trim()}\n                  className=\"flex-1 bg-[#FFD700] text-[#0A0A0A] hover:bg-[#FFE255]\"\n                >\n                  {isSubmitting ? (\n                    <div className=\"flex items-center gap-2\">\n                      <Loader2 className=\"h-4 w-4 animate-spin\" />\n                      <span>Creating...</span>\n                    </div>\n                  ) : (\n                    `Create ${currentTypeConfig.label}`\n                  )}\n                </Button>\n              </div>\n            </form>\n          </div>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/spaces/smart-space-discovery.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'HiveInput' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"HiveInput"},"fix":{"range":[99,110],"text":""},"desc":"Remove unused variable 'HiveInput'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'MapPin' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"MapPin"},"fix":{"range":[206,217],"text":""},"desc":"Remove unused variable 'MapPin'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Heart' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Heart"},"fix":{"range":[253,262],"text":""},"desc":"Remove unused variable 'Heart'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'MessageSquare' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"MessageSquare"},"fix":{"range":[262,279],"text":""},"desc":"Remove unused variable 'MessageSquare'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"ArrowRight"},"fix":{"range":[279,293],"text":""},"desc":"Remove unused variable 'ArrowRight'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Music' is defined but never used. Allowed unused vars must match /^_/u.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Music"},"fix":{"range":[402,411],"text":""},"desc":"Remove unused variable 'Music'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":34,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":4,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[446,451],"text":""},"desc":"Remove unused variable 'X'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":36,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertCircle"},"fix":{"range":[466,481],"text":""},"desc":"Remove unused variable 'AlertCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'spaceId' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":88,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":88,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"spaceId"},"fix":{"range":[1560,1575],"text":""},"desc":"Remove unused variable 'spaceId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'spaceId' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":89,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":89,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"spaceId"},"fix":{"range":[1603,1618],"text":""},"desc":"Remove unused variable 'spaceId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'currentUserId' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":96,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":96,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentUserId"},"fix":{"range":[1853,1867],"text":""},"desc":"Remove unused variable 'currentUserId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'userYear' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":99,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"userYear"},"fix":{"range":[1898,1911],"text":""},"desc":"Remove unused variable 'userYear'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Button, Card, Badge, HiveModal, HiveInput } from \"@hive/ui\";\nimport { \n  Search, \n  Filter, \n  Sparkles, \n  TrendingUp, \n  Users, \n  Star, \n  MapPin, \n  Calendar, \n  Zap,\n  Plus,\n  Eye,\n  Heart,\n  MessageSquare,\n  ArrowRight,\n  Shuffle,\n  Target,\n  Brain,\n  Compass,\n  Activity,\n  Clock,\n  BookOpen,\n  Coffee,\n  Gamepad2,\n  Briefcase,\n  Music,\n  Palette,\n  Code,\n  FlaskConical,\n  X,\n  CheckCircle,\n  AlertCircle,\n  Lightbulb,\n  List\n} from \"lucide-react\";\n\ninterface DiscoverableSpace {\n  id: string;\n  name: string;\n  description: string;\n  type: 'university' | 'residential' | 'greek' | 'student';\n  category: string;\n  memberCount: number;\n  avatar?: string;\n  coverImage?: string;\n  privacy: 'public' | 'private' | 'invite_only';\n  tags: Array<{\n    id: string;\n    name: string;\n    category: string;\n  }>;\n  stats: {\n    weeklyActivity: number;\n    activeTools: number;\n    upcomingEvents: number;\n    recentPosts: number;\n    engagementScore: number;\n  };\n  leadership: Array<{\n    id: string;\n    name: string;\n    handle: string;\n    role: string;\n    verified?: boolean;\n  }>;\n  joinRequirements?: string[];\n  isJoined: boolean;\n  isPending: boolean;\n  matchScore?: number;\n  recommendationReason?: string;\n  recentActivity: Array<{\n    type: string;\n    description: string;\n    timestamp: string;\n  }>;\n  established: string;\n}\n\ninterface SmartSpaceDiscoveryProps {\n  currentUserId: string;\n  userInterests: string[];\n  userMajor?: string;\n  userYear?: string;\n  onJoinSpace?: (spaceId: string) => void;\n  onViewSpace?: (spaceId: string) => void;\n}\n\ntype DiscoveryMode = 'ai-recommended' | 'trending' | 'for-you' | 'similar' | 'new' | 'all';\ntype FilterCategory = 'all' | 'academic' | 'social' | 'professional' | 'recreational';\n\nexport function SmartSpaceDiscovery({ \n  currentUserId, \n  userInterests, \n  userMajor, \n  userYear,\n  onJoinSpace,\n  onViewSpace\n}: SmartSpaceDiscoveryProps) {\n  const [discoveryMode, setDiscoveryMode] = useState<DiscoveryMode>('ai-recommended');\n  const [spaces, setSpaces] = useState<DiscoverableSpace[]>([]);\n  const [filteredSpaces, setFilteredSpaces] = useState<DiscoverableSpace[]>([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [categoryFilter, setCategoryFilter] = useState<FilterCategory>('all');\n  const [showFilters, setShowFilters] = useState(false);\n  const [selectedSpace, setSelectedSpace] = useState<DiscoverableSpace | null>(null);\n  const [showSpacePreview, setShowSpacePreview] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n\n  useEffect(() => {\n    const fetchDiscoverableSpaces = async () => {\n      await new Promise(resolve => setTimeout(resolve, 800));\n      \n      const mockSpaces: DiscoverableSpace[] = [\n        {\n          id: 'space-ai-1',\n          name: 'AI & Machine Learning Hub',\n          description: 'Explore the frontiers of artificial intelligence with hands-on projects, research discussions, and industry connections.',\n          type: 'student',\n          category: 'Academic',\n          memberCount: 234,\n          privacy: 'public',\n          tags: [\n            { id: '1', name: 'artificial-intelligence', category: 'technology' },\n            { id: '2', name: 'machine-learning', category: 'technology' },\n            { id: '3', name: 'deep-learning', category: 'technology' },\n            { id: '4', name: 'research', category: 'academic' }\n          ],\n          stats: {\n            weeklyActivity: 92,\n            activeTools: 8,\n            upcomingEvents: 4,\n            recentPosts: 15,\n            engagementScore: 88\n          },\n          leadership: [\n            { id: '1', name: 'Dr. Sarah Kim', handle: 'sarahkim', role: 'Faculty Advisor', verified: true },\n            { id: '2', name: 'Alex Chen', handle: 'alexc', role: 'President' }\n          ],\n          isJoined: false,\n          isPending: false,\n          matchScore: 94,\n          recommendationReason: 'Based on your interest in computer science and AI-related activities',\n          recentActivity: [\n            { type: 'event', description: 'Neural Networks Workshop scheduled', timestamp: '2024-02-01T10:00:00Z' },\n            { type: 'project', description: 'New research project on NLP started', timestamp: '2024-01-31T15:30:00Z' }\n          ],\n          established: '2023-09-15T10:00:00Z'\n        },\n        {\n          id: 'space-data-2',\n          name: 'Data Science Collective',\n          description: 'Transform data into insights through collaborative projects, competitions, and real-world applications.',\n          type: 'student',\n          category: 'Academic',\n          memberCount: 189,\n          privacy: 'public',\n          tags: [\n            { id: '5', name: 'data-science', category: 'technology' },\n            { id: '6', name: 'analytics', category: 'technology' },\n            { id: '7', name: 'visualization', category: 'skill' },\n            { id: '8', name: 'statistics', category: 'academic' }\n          ],\n          stats: {\n            weeklyActivity: 85,\n            activeTools: 6,\n            upcomingEvents: 2,\n            recentPosts: 12,\n            engagementScore: 82\n          },\n          leadership: [\n            { id: '3', name: 'Maria Rodriguez', handle: 'mariar', role: 'Co-President' },\n            { id: '4', name: 'James Liu', handle: 'jamesliu', role: 'Co-President' }\n          ],\n          isJoined: false,\n          isPending: false,\n          matchScore: 89,\n          recommendationReason: 'Popular among CS students and matches your analytical interests',\n          recentActivity: [\n            { type: 'competition', description: 'Kaggle competition team formed', timestamp: '2024-02-01T14:20:00Z' },\n            { type: 'workshop', description: 'Python for Data Analysis workshop', timestamp: '2024-01-30T16:45:00Z' }\n          ],\n          established: '2023-08-20T10:00:00Z'\n        },\n        {\n          id: 'space-web-3',\n          name: 'Full Stack Developers United',\n          description: 'Building the web of tomorrow through collaborative projects, hackathons, and skill sharing.',\n          type: 'student',\n          category: 'Technical',\n          memberCount: 167,\n          privacy: 'public',\n          tags: [\n            { id: '9', name: 'web-development', category: 'technology' },\n            { id: '10', name: 'javascript', category: 'programming' },\n            { id: '11', name: 'react', category: 'framework' },\n            { id: '12', name: 'nodejs', category: 'backend' }\n          ],\n          stats: {\n            weeklyActivity: 78,\n            activeTools: 5,\n            upcomingEvents: 3,\n            recentPosts: 18,\n            engagementScore: 79\n          },\n          leadership: [\n            { id: '5', name: 'Emma Johnson', handle: 'emmaj', role: 'Lead Developer' },\n            { id: '6', name: 'Ryan Park', handle: 'ryanp', role: 'Project Manager' }\n          ],\n          isJoined: false,\n          isPending: false,\n          matchScore: 76,\n          recommendationReason: 'Strong community for building practical development skills',\n          recentActivity: [\n            { type: 'project', description: 'New e-commerce project launched', timestamp: '2024-02-01T09:15:00Z' },\n            { type: 'event', description: 'React 18 features workshop', timestamp: '2024-01-29T19:30:00Z' }\n          ],\n          established: '2023-10-05T10:00:00Z'\n        },\n        {\n          id: 'space-startup-4',\n          name: 'Campus Entrepreneurs',\n          description: 'Where innovative ideas meet execution. Build your startup with fellow student entrepreneurs.',\n          type: 'student',\n          category: 'Professional',\n          memberCount: 143,\n          privacy: 'public',\n          tags: [\n            { id: '13', name: 'entrepreneurship', category: 'business' },\n            { id: '14', name: 'startups', category: 'business' },\n            { id: '15', name: 'innovation', category: 'mindset' },\n            { id: '16', name: 'networking', category: 'professional' }\n          ],\n          stats: {\n            weeklyActivity: 71,\n            activeTools: 4,\n            upcomingEvents: 2,\n            recentPosts: 9,\n            engagementScore: 74\n          },\n          leadership: [\n            { id: '7', name: 'Sofia Martinez', handle: 'sofiam', role: 'Founder', verified: true },\n            { id: '8', name: 'David Wong', handle: 'davidw', role: 'VP Operations' }\n          ],\n          isJoined: false,\n          isPending: false,\n          matchScore: 68,\n          recommendationReason: 'Great for developing business and leadership skills',\n          recentActivity: [\n            { type: 'pitch', description: 'Monthly pitch competition announced', timestamp: '2024-01-31T12:00:00Z' },\n            { type: 'mentorship', description: 'Industry mentor session scheduled', timestamp: '2024-01-30T10:30:00Z' }\n          ],\n          established: '2023-09-01T10:00:00Z'\n        },\n        {\n          id: 'space-gaming-5',\n          name: 'Campus Gaming Collective',\n          description: 'Unite through gaming! Esports tournaments, game development, and community events.',\n          type: 'student',\n          category: 'Social',\n          memberCount: 298,\n          privacy: 'public',\n          tags: [\n            { id: '17', name: 'gaming', category: 'entertainment' },\n            { id: '18', name: 'esports', category: 'competition' },\n            { id: '19', name: 'game-development', category: 'technology' },\n            { id: '20', name: 'community', category: 'social' }\n          ],\n          stats: {\n            weeklyActivity: 95,\n            activeTools: 7,\n            upcomingEvents: 5,\n            recentPosts: 23,\n            engagementScore: 91\n          },\n          leadership: [\n            { id: '9', name: 'Tyler Brooks', handle: 'tylerb', role: 'Guild Master' },\n            { id: '10', name: 'Luna Chang', handle: 'lunac', role: 'Event Coordinator' }\n          ],\n          isJoined: false,\n          isPending: false,\n          matchScore: 45,\n          recommendationReason: 'High engagement and active community',\n          recentActivity: [\n            { type: 'tournament', description: 'Fall semester championship starting', timestamp: '2024-02-01T18:00:00Z' },\n            { type: 'workshop', description: 'Unity game dev workshop', timestamp: '2024-01-31T20:15:00Z' }\n          ],\n          established: '2023-08-15T10:00:00Z'\n        }\n      ];\n      \n      setSpaces(mockSpaces);\n      setFilteredSpaces(mockSpaces);\n      setIsLoading(false);\n    };\n\n    fetchDiscoverableSpaces();\n  }, []);\n\n  useEffect(() => {\n    let filtered = spaces.filter(space => {\n      const matchesSearch = space.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                           space.description.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                           space.tags.some(tag => tag.name.toLowerCase().includes(searchQuery.toLowerCase()));\n      \n      const matchesCategory = categoryFilter === 'all' || \n                              space.category.toLowerCase() === categoryFilter ||\n                              space.tags.some(tag => tag.category === categoryFilter);\n      \n      return matchesSearch && matchesCategory;\n    });\n    \n    // Apply discovery mode sorting\n    switch (discoveryMode) {\n      case 'ai-recommended':\n        filtered = filtered.sort((a, b) => (b.matchScore || 0) - (a.matchScore || 0));\n        break;\n      case 'trending':\n        filtered = filtered.sort((a, b) => b.stats.weeklyActivity - a.stats.weeklyActivity);\n        break;\n      case 'for-you':\n        filtered = filtered.sort((a, b) => b.stats.engagementScore - a.stats.engagementScore);\n        break;\n      case 'new':\n        filtered = filtered.sort((a, b) => new Date(b.established).getTime() - new Date(a.established).getTime());\n        break;\n      default:\n        break;\n    }\n    \n    setFilteredSpaces(filtered);\n  }, [spaces, searchQuery, categoryFilter, discoveryMode]);\n\n  const getDiscoveryModeIcon = (mode: DiscoveryMode) => {\n    switch (mode) {\n      case 'ai-recommended': return Sparkles;\n      case 'trending': return TrendingUp;\n      case 'for-you': return Target;\n      case 'similar': return Compass;\n      case 'new': return Clock;\n      default: return Search;\n    }\n  };\n\n  const getCategoryIcon = (category: string) => {\n    switch (category.toLowerCase()) {\n      case 'academic': return BookOpen;\n      case 'social': return Coffee;\n      case 'professional': return Briefcase;\n      case 'recreational': return Gamepad2;\n      case 'technical': return Code;\n      case 'creative': return Palette;\n      case 'research': return FlaskConical;\n      default: return Users;\n    }\n  };\n\n  const formatTimeAgo = (dateString: string) => {\n    const now = new Date();\n    const date = new Date(dateString);\n    const diffMs = now.getTime() - date.getTime();\n    const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n    \n    if (diffDays === 0) return 'Today';\n    if (diffDays === 1) return 'Yesterday';\n    if (diffDays < 7) return `${diffDays} days ago`;\n    if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;\n    return `${Math.floor(diffDays / 30)} months ago`;\n  };\n\n  const handleJoinSpace = async (spaceId: string) => {\n    // Update local state optimistically\n    setSpaces(prev => prev.map(space => \n      space.id === spaceId \n        ? { ...space, isJoined: true, memberCount: space.memberCount + 1 }\n        : space\n    ));\n    \n    if (onJoinSpace) {\n      onJoinSpace(spaceId);\n    }\n  };\n\n  const handleViewSpace = (space: DiscoverableSpace) => {\n    setSelectedSpace(space);\n    setShowSpacePreview(true);\n    \n    if (onViewSpace) {\n      onViewSpace(space.id);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"w-8 h-8 bg-hive-gold rounded-lg animate-pulse mx-auto mb-4\" />\n          <p className=\"text-white\">Discovering spaces for you...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-white mb-2 flex items-center\">\n            <Brain className=\"h-8 w-8 text-hive-gold mr-3\" />\n            Smart Space Discovery\n          </h2>\n          <p className=\"text-zinc-400\">AI-powered recommendations based on your interests and activity</p>\n        </div>\n        \n        <div className=\"flex items-center space-x-2\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => setViewMode(viewMode === 'grid' ? 'list' : 'grid')}\n          >\n            {viewMode === 'grid' ? <List className=\"h-4 w-4\" /> : <Activity className=\"h-4 w-4\" />}\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => setShowFilters(!showFilters)}\n          >\n            <Filter className=\"h-4 w-4 mr-2\" />\n            Filters\n          </Button>\n        </div>\n      </div>\n\n      {/* Discovery Mode Tabs */}\n      <div className=\"flex items-center space-x-1 bg-zinc-800/50 rounded-lg p-1 overflow-x-auto\">\n        {[\n          { id: 'ai-recommended', label: 'AI Recommended', description: 'Personalized for you' },\n          { id: 'trending', label: 'Trending', description: 'Most active spaces' },\n          { id: 'for-you', label: 'For You', description: 'High engagement' },\n          { id: 'similar', label: 'Similar', description: 'Like your spaces' },\n          { id: 'new', label: 'New', description: 'Recently created' },\n          { id: 'all', label: 'All', description: 'Browse everything' }\n        ].map((mode) => {\n          const Icon = getDiscoveryModeIcon(mode.id as DiscoveryMode);\n          return (\n            <button\n              key={mode.id}\n              onClick={() => setDiscoveryMode(mode.id as DiscoveryMode)}\n              className={`flex items-center space-x-2 px-4 py-2 rounded-md transition-colors whitespace-nowrap ${\n                discoveryMode === mode.id\n                  ? 'bg-hive-gold text-hive-obsidian font-medium'\n                  : 'text-zinc-400 hover:text-white'\n              }`}\n            >\n              <Icon className=\"h-4 w-4\" />\n              <div className=\"text-left\">\n                <div className=\"text-sm font-medium\">{mode.label}</div>\n                {discoveryMode === mode.id && (\n                  <div className=\"text-xs opacity-75\">{mode.description}</div>\n                )}\n              </div>\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Search and Filters */}\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center space-x-4\">\n          <div className=\"relative flex-1\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-zinc-400\" />\n            <input\n              type=\"text\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              placeholder=\"Search spaces by name, description, or tags...\"\n              className=\"pl-10 pr-4 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-zinc-400 focus:border-hive-gold focus:outline-none w-full\"\n            />\n          </div>\n          \n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => {\n              // Randomize the order for discovery\n              setFilteredSpaces(prev => [...prev].sort(() => Math.random() - 0.5));\n            }}\n            className=\"text-zinc-400 hover:text-white\"\n          >\n            <Shuffle className=\"h-4 w-4 mr-2\" />\n            Shuffle\n          </Button>\n        </div>\n        \n        {showFilters && (\n          <Card className=\"p-4 bg-zinc-800/30 border-zinc-700\">\n            <div className=\"flex items-center space-x-4\">\n              <div>\n                <label className=\"text-sm font-medium text-white mb-2 block\">Category</label>\n                <select\n                  value={categoryFilter}\n                  onChange={(e) => setCategoryFilter(e.target.value as FilterCategory)}\n                  className=\"bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-2 text-white text-sm focus:border-hive-gold focus:outline-none\"\n                >\n                  <option value=\"all\">All Categories</option>\n                  <option value=\"academic\">Academic</option>\n                  <option value=\"social\">Social</option>\n                  <option value=\"professional\">Professional</option>\n                  <option value=\"recreational\">Recreational</option>\n                </select>\n              </div>\n            </div>\n          </Card>\n        )}\n      </div>\n\n      {/* AI Insights Banner */}\n      {discoveryMode === 'ai-recommended' && filteredSpaces.length > 0 && (\n        <Card className=\"p-4 bg-gradient-to-r from-hive-gold/10 to-purple-500/10 border-hive-gold/30\">\n          <div className=\"flex items-center space-x-3\">\n            <Lightbulb className=\"h-8 w-8 text-hive-gold\" />\n            <div>\n              <h3 className=\"font-semibold text-white\">AI Recommendations</h3>\n              <p className=\"text-sm text-zinc-300\">\n                Based on your {userMajor} major{userInterests.length > 0 && `, interests: ${userInterests.slice(0, 3).join(', ')}`}, \n                and activity patterns, we found {filteredSpaces.length} spaces that match your profile.\n              </p>\n            </div>\n          </div>\n        </Card>\n      )}\n\n      {/* Spaces Grid/List */}\n      <div className={viewMode === 'grid' \n        ? 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6' \n        : 'space-y-4'\n      }>\n        {filteredSpaces.map((space) => {\n          const CategoryIcon = getCategoryIcon(space.category);\n          \n          return viewMode === 'grid' ? (\n            <Card \n              key={space.id} \n              className=\"p-6 bg-zinc-800/50 border-zinc-700 hover:bg-zinc-800/70 transition-all cursor-pointer group\"\n              onClick={() => handleViewSpace(space)}\n            >\n              {/* Header */}\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex items-start space-x-3 flex-1\">\n                  <div className=\"w-12 h-12 bg-zinc-600 rounded-xl flex items-center justify-center flex-shrink-0\">\n                    <CategoryIcon className=\"h-6 w-6 text-hive-gold\" />\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className=\"font-semibold text-white mb-1 line-clamp-1\">{space.name}</h3>\n                    <p className=\"text-sm text-zinc-400 line-clamp-2 mb-2\">{space.description}</p>\n                    <div className=\"flex items-center space-x-2\">\n                      <Badge variant=\"skill-tag\" className=\"text-xs capitalize\">\n                        {space.category}\n                      </Badge>\n                      {space.privacy === 'private' && (\n                        <Badge variant=\"destructive\" className=\"text-xs\">Private</Badge>\n                      )}\n                    </div>\n                  </div>\n                </div>\n                \n                {discoveryMode === 'ai-recommended' && space.matchScore && (\n                  <div className=\"flex items-center space-x-1 flex-shrink-0\">\n                    <Sparkles className=\"h-4 w-4 text-hive-gold\" />\n                    <span className=\"text-sm font-medium text-hive-gold\">{space.matchScore}%</span>\n                  </div>\n                )}\n              </div>\n              \n              {/* Stats */}\n              <div className=\"grid grid-cols-2 gap-3 mb-4 text-sm\">\n                <div className=\"flex items-center space-x-2\">\n                  <Users className=\"h-4 w-4 text-zinc-400\" />\n                  <span className=\"text-white\">{space.memberCount}</span>\n                  <span className=\"text-zinc-400\">members</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <Activity className=\"h-4 w-4 text-zinc-400\" />\n                  <span className=\"text-white\">{space.stats.weeklyActivity}%</span>\n                  <span className=\"text-zinc-400\">active</span>\n                </div>\n              </div>\n              \n              {/* AI Recommendation Reason */}\n              {space.recommendationReason && discoveryMode === 'ai-recommended' && (\n                <div className=\"bg-zinc-800/50 rounded-lg p-3 mb-4\">\n                  <div className=\"flex items-start space-x-2\">\n                    <Brain className=\"h-4 w-4 text-hive-gold mt-0.5 flex-shrink-0\" />\n                    <p className=\"text-xs text-zinc-300\">{space.recommendationReason}</p>\n                  </div>\n                </div>\n              )}\n              \n              {/* Tags */}\n              <div className=\"flex flex-wrap gap-1 mb-4\">\n                {space.tags.slice(0, 3).map((tag) => (\n                  <Badge key={tag.id} variant=\"skill-tag\" className=\"text-xs\">\n                    #{tag.name}\n                  </Badge>\n                ))}\n                {space.tags.length > 3 && (\n                  <span className=\"text-xs text-zinc-500\">+{space.tags.length - 3} more</span>\n                )}\n              </div>\n              \n              {/* Actions */}\n              <div className=\"flex items-center justify-between pt-3 border-t border-zinc-700\">\n                <div className=\"flex items-center space-x-4 text-xs text-zinc-400\">\n                  <div className=\"flex items-center space-x-1\">\n                    <Calendar className=\"h-3 w-3\" />\n                    <span>{space.stats.upcomingEvents} events</span>\n                  </div>\n                  <div className=\"flex items-center space-x-1\">\n                    <Zap className=\"h-3 w-3\" />\n                    <span>{space.stats.activeTools} tools</span>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center space-x-2\">\n                  {space.isJoined ? (\n                    <Badge variant=\"building-tools\" className=\"text-xs\">\n                      <CheckCircle className=\"h-3 w-3 mr-1\" />\n                      Joined\n                    </Badge>\n                  ) : (\n                    <Button\n                      size=\"sm\"\n                      className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleJoinSpace(space.id);\n                      }}\n                    >\n                      <Plus className=\"h-3 w-3 mr-1\" />\n                      Join\n                    </Button>\n                  )}\n                </div>\n              </div>\n            </Card>\n          ) : (\n            // List View\n            <Card \n              key={space.id} \n              className=\"p-6 bg-zinc-800/50 border-zinc-700 hover:bg-zinc-800/70 transition-all cursor-pointer\"\n              onClick={() => handleViewSpace(space)}\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex items-start space-x-4 flex-1\">\n                  <div className=\"w-16 h-16 bg-zinc-600 rounded-xl flex items-center justify-center flex-shrink-0\">\n                    <CategoryIcon className=\"h-8 w-8 text-hive-gold\" />\n                  </div>\n                  \n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center space-x-3 mb-2\">\n                      <h3 className=\"text-lg font-semibold text-white\">{space.name}</h3>\n                      {discoveryMode === 'ai-recommended' && space.matchScore && (\n                        <div className=\"flex items-center space-x-1\">\n                          <Sparkles className=\"h-4 w-4 text-hive-gold\" />\n                          <span className=\"text-sm font-medium text-hive-gold\">{space.matchScore}% match</span>\n                        </div>\n                      )}\n                      <Badge variant=\"skill-tag\" className=\"text-xs capitalize\">\n                        {space.category}\n                      </Badge>\n                    </div>\n                    \n                    <p className=\"text-zinc-400 text-sm mb-3 line-clamp-2\">{space.description}</p>\n                    \n                    {space.recommendationReason && discoveryMode === 'ai-recommended' && (\n                      <div className=\"bg-zinc-800/50 rounded-lg p-3 mb-3\">\n                        <div className=\"flex items-start space-x-2\">\n                          <Brain className=\"h-4 w-4 text-hive-gold mt-0.5 flex-shrink-0\" />\n                          <p className=\"text-xs text-zinc-300\">{space.recommendationReason}</p>\n                        </div>\n                      </div>\n                    )}\n                    \n                    <div className=\"flex items-center space-x-6 text-sm text-zinc-400\">\n                      <div className=\"flex items-center space-x-1\">\n                        <Users className=\"h-4 w-4\" />\n                        <span>{space.memberCount} members</span>\n                      </div>\n                      <div className=\"flex items-center space-x-1\">\n                        <Activity className=\"h-4 w-4\" />\n                        <span>{space.stats.weeklyActivity}% active</span>\n                      </div>\n                      <div className=\"flex items-center space-x-1\">\n                        <Calendar className=\"h-4 w-4\" />\n                        <span>{space.stats.upcomingEvents} events</span>\n                      </div>\n                      <div className=\"flex items-center space-x-1\">\n                        <Zap className=\"h-4 w-4\" />\n                        <span>{space.stats.activeTools} tools</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center space-x-2 flex-shrink-0\">\n                  <Button variant=\"outline\" size=\"sm\">\n                    <Eye className=\"h-4 w-4 mr-1\" />\n                    Preview\n                  </Button>\n                  {space.isJoined ? (\n                    <Badge variant=\"building-tools\" className=\"text-xs\">\n                      <CheckCircle className=\"h-3 w-3 mr-1\" />\n                      Joined\n                    </Badge>\n                  ) : (\n                    <Button\n                      size=\"sm\"\n                      className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleJoinSpace(space.id);\n                      }}\n                    >\n                      <Plus className=\"h-4 w-4 mr-1\" />\n                      Join Space\n                    </Button>\n                  )}\n                </div>\n              </div>\n            </Card>\n          );\n        })}\n      </div>\n\n      {/* Empty State */}\n      {filteredSpaces.length === 0 && (\n        <Card className=\"p-12 bg-zinc-800/50 border-zinc-700 text-center\">\n          <Search className=\"h-16 w-16 text-zinc-600 mx-auto mb-4\" />\n          <h3 className=\"text-xl font-semibold text-white mb-2\">No spaces found</h3>\n          <p className=\"text-zinc-400 mb-6\">\n            Try adjusting your search terms or filters to discover more spaces.\n          </p>\n          <Button\n            variant=\"outline\"\n            onClick={() => {\n              setSearchQuery('');\n              setCategoryFilter('all');\n              setDiscoveryMode('all');\n            }}\n          >\n            Clear Filters\n          </Button>\n        </Card>\n      )}\n\n      {/* Space Preview Modal */}\n      <HiveModal\n        isOpen={showSpacePreview}\n        onClose={() => setShowSpacePreview(false)}\n        title={selectedSpace?.name || ''}\n        size=\"xl\"\n      >\n        {selectedSpace && (\n          <div className=\"space-y-6\">\n            {/* Space Header */}\n            <div className=\"flex items-start justify-between\">\n              <div className=\"flex items-start space-x-4 flex-1\">\n                <div className=\"w-16 h-16 bg-zinc-600 rounded-xl flex items-center justify-center\">\n                  {(() => {\n                    const Icon = getCategoryIcon(selectedSpace.category);\n                    return <Icon className=\"h-8 w-8 text-hive-gold\" />;\n                  })()}\n                </div>\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center space-x-3 mb-2\">\n                    <h2 className=\"text-xl font-bold text-white\">{selectedSpace.name}</h2>\n                    {selectedSpace.matchScore && (\n                      <div className=\"flex items-center space-x-1\">\n                        <Sparkles className=\"h-4 w-4 text-hive-gold\" />\n                        <span className=\"text-sm font-medium text-hive-gold\">{selectedSpace.matchScore}% match</span>\n                      </div>\n                    )}\n                  </div>\n                  <p className=\"text-zinc-300 mb-3\">{selectedSpace.description}</p>\n                  <div className=\"flex items-center space-x-2\">\n                    <Badge variant=\"skill-tag\" className=\"text-xs capitalize\">\n                      {selectedSpace.category}\n                    </Badge>\n                    <Badge variant=\"skill-tag\" className=\"text-xs capitalize\">\n                      {selectedSpace.type}\n                    </Badge>\n                    {selectedSpace.privacy === 'private' && (\n                      <Badge variant=\"destructive\" className=\"text-xs\">Private</Badge>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            {/* AI Recommendation */}\n            {selectedSpace.recommendationReason && (\n              <Card className=\"p-4 bg-gradient-to-r from-hive-gold/10 to-purple-500/10 border-hive-gold/30\">\n                <div className=\"flex items-start space-x-3\">\n                  <Brain className=\"h-5 w-5 text-hive-gold mt-0.5\" />\n                  <div>\n                    <h4 className=\"font-medium text-white mb-1\">Why we recommend this space</h4>\n                    <p className=\"text-sm text-zinc-300\">{selectedSpace.recommendationReason}</p>\n                  </div>\n                </div>\n              </Card>\n            )}\n            \n            {/* Stats Grid */}\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n              <div className=\"text-center p-3 bg-zinc-800/30 rounded-lg\">\n                <div className=\"text-2xl font-bold text-white\">{selectedSpace.memberCount}</div>\n                <div className=\"text-sm text-zinc-400\">Members</div>\n              </div>\n              <div className=\"text-center p-3 bg-zinc-800/30 rounded-lg\">\n                <div className=\"text-2xl font-bold text-white\">{selectedSpace.stats.weeklyActivity}%</div>\n                <div className=\"text-sm text-zinc-400\">Active</div>\n              </div>\n              <div className=\"text-center p-3 bg-zinc-800/30 rounded-lg\">\n                <div className=\"text-2xl font-bold text-white\">{selectedSpace.stats.upcomingEvents}</div>\n                <div className=\"text-sm text-zinc-400\">Events</div>\n              </div>\n              <div className=\"text-center p-3 bg-zinc-800/30 rounded-lg\">\n                <div className=\"text-2xl font-bold text-white\">{selectedSpace.stats.activeTools}</div>\n                <div className=\"text-sm text-zinc-400\">Tools</div>\n              </div>\n            </div>\n            \n            {/* Leadership */}\n            <div>\n              <h4 className=\"font-medium text-white mb-3\">Leadership</h4>\n              <div className=\"space-y-2\">\n                {selectedSpace.leadership.map((leader) => (\n                  <div key={leader.id} className=\"flex items-center space-x-3 p-2 bg-zinc-800/30 rounded-lg\">\n                    <div className=\"w-8 h-8 bg-zinc-600 rounded-full flex items-center justify-center\">\n                      <span className=\"text-white text-xs font-medium\">\n                        {leader.name.split(' ').map(n => n[0]).join('')}\n                      </span>\n                    </div>\n                    <div className=\"flex-1\">\n                      <div className=\"text-white text-sm font-medium\">{leader.name}</div>\n                      <div className=\"text-zinc-400 text-xs\">@{leader.handle} â€¢ {leader.role}</div>\n                    </div>\n                    {leader.verified && <Star className=\"h-4 w-4 text-hive-gold fill-current\" />}\n                  </div>\n                ))}\n              </div>\n            </div>\n            \n            {/* Tags */}\n            <div>\n              <h4 className=\"font-medium text-white mb-3\">Topics & Interests</h4>\n              <div className=\"flex flex-wrap gap-2\">\n                {selectedSpace.tags.map((tag) => (\n                  <Badge key={tag.id} variant=\"skill-tag\" className=\"text-xs\">\n                    #{tag.name}\n                  </Badge>\n                ))}\n              </div>\n            </div>\n            \n            {/* Recent Activity */}\n            <div>\n              <h4 className=\"font-medium text-white mb-3\">Recent Activity</h4>\n              <div className=\"space-y-2\">\n                {selectedSpace.recentActivity.slice(0, 3).map((activity, index) => (\n                  <div key={index} className=\"flex items-center space-x-3 p-2 bg-zinc-800/30 rounded-lg\">\n                    <Activity className=\"h-4 w-4 text-hive-gold\" />\n                    <div className=\"flex-1\">\n                      <div className=\"text-white text-sm\">{activity.description}</div>\n                      <div className=\"text-zinc-400 text-xs\">{formatTimeAgo(activity.timestamp)}</div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n            \n            {/* Actions */}\n            <div className=\"flex items-center justify-between pt-4 border-t border-zinc-800\">\n              <div className=\"text-sm text-zinc-400\">\n                Established {formatTimeAgo(selectedSpace.established)}\n              </div>\n              \n              <div className=\"flex items-center space-x-3\">\n                <Button variant=\"outline\">\n                  <Eye className=\"h-4 w-4 mr-2\" />\n                  View Full Space\n                </Button>\n                {selectedSpace.isJoined ? (\n                  <Badge variant=\"building-tools\">\n                    <CheckCircle className=\"h-4 w-4 mr-1\" />\n                    Already Joined\n                  </Badge>\n                ) : (\n                  <Button\n                    className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n                    onClick={() => {\n                      handleJoinSpace(selectedSpace.id);\n                      setShowSpacePreview(false);\n                    }}\n                  >\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Join Space\n                  </Button>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </HiveModal>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/spaces/space-admin-dashboard.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Alert' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Alert"},"fix":{"range":[119,167],"text":""},"desc":"Remove unused variable 'Alert'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Flag' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Flag"},"fix":{"range":[223,232],"text":""},"desc":"Remove unused variable 'Flag'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Trash2"},"fix":{"range":[232,243],"text":""},"desc":"Remove unused variable 'Trash2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'UserMinus' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"UserMinus"},"fix":{"range":[256,270],"text":""},"desc":"Remove unused variable 'UserMinus'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[355,371],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Clock' is defined but never used. Allowed unused vars must match /^_/u.","line":22,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Clock"},"fix":{"range":[371,381],"text":""},"desc":"Remove unused variable 'Clock'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'EyeOff' is defined but never used. Allowed unused vars must match /^_/u.","line":25,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"EyeOff"},"fix":{"range":[397,407],"text":""},"desc":"Remove unused variable 'EyeOff'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Bell' is defined but never used. Allowed unused vars must match /^_/u.","line":28,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Bell"},"fix":{"range":[427,435],"text":""},"desc":"Remove unused variable 'Bell'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Card, Button, Badge, HiveModal } from \"@hive/ui\";\nimport { Alert } from \"@/components/temp-stubs\";\nimport { \n  Users, \n  Settings, \n  BarChart3, \n  Shield, \n  Flag, \n  Trash2, \n  UserPlus, \n  UserMinus, \n  MessageSquare, \n  Calendar, \n  Zap, \n  TrendingUp, \n  Activity, \n  AlertTriangle, \n  CheckCircle, \n  Clock, \n  Star,\n  Eye,\n  EyeOff,\n  Edit,\n  Download,\n  Bell,\n  Archive\n} from \"lucide-react\";\n\ninterface SpaceAdminDashboardProps {\n  spaceId: string;\n  spaceName: string;\n  userRole: 'admin' | 'moderator' | 'member';\n}\n\ninterface SpaceMember {\n  id: string;\n  name: string;\n  handle: string;\n  avatar?: string;\n  role: 'admin' | 'moderator' | 'member';\n  joinedAt: string;\n  lastActive: string;\n  contributionScore: number;\n  verified?: boolean;\n}\n\ninterface SpaceAnalytics {\n  totalMembers: number;\n  activeMembers: number;\n  weeklyGrowth: number;\n  engagementRate: number;\n  totalEvents: number;\n  totalPosts: number;\n  totalTools: number;\n  reportedContent: number;\n}\n\nexport function SpaceAdminDashboard({ spaceId, spaceName, userRole }: SpaceAdminDashboardProps) {\n  const [analytics, setAnalytics] = useState<SpaceAnalytics | null>(null);\n  const [recentMembers, setRecentMembers] = useState<SpaceMember[]>([]);\n  const [activeTab, setActiveTab] = useState<'overview' | 'members' | 'content' | 'settings'>('overview');\n  const [showMemberModal, setShowMemberModal] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchAdminData = async () => {\n      await new Promise(resolve => setTimeout(resolve, 500));\n      \n      const mockAnalytics: SpaceAnalytics = {\n        totalMembers: 127,\n        activeMembers: 89,\n        weeklyGrowth: 12,\n        engagementRate: 76,\n        totalEvents: 23,\n        totalPosts: 156,\n        totalTools: 8,\n        reportedContent: 2\n      };\n\n      const mockMembers: SpaceMember[] = [\n        {\n          id: '1',\n          name: 'Sarah Chen',\n          handle: 'sarahc',\n          role: 'admin',\n          joinedAt: '2024-01-15T10:00:00Z',\n          lastActive: '2024-02-01T14:30:00Z',\n          contributionScore: 95,\n          verified: true\n        },\n        {\n          id: '2',\n          name: 'Marcus Johnson',\n          handle: 'marcusj',\n          role: 'moderator',\n          joinedAt: '2024-01-20T09:00:00Z',\n          lastActive: '2024-02-01T12:15:00Z',\n          contributionScore: 87\n        },\n        {\n          id: '3',\n          name: 'Emma Davis',\n          handle: 'emmad',\n          role: 'member',\n          joinedAt: '2024-01-25T11:30:00Z',\n          lastActive: '2024-01-31T16:45:00Z',\n          contributionScore: 62\n        }\n      ];\n\n      setAnalytics(mockAnalytics);\n      setRecentMembers(mockMembers);\n      setIsLoading(false);\n    };\n\n    fetchAdminData();\n  }, [spaceId]);\n\n  if (userRole === 'member') {\n    return (\n      <div className=\"text-center py-12\">\n        <Shield className=\"h-16 w-16 text-zinc-600 mx-auto mb-4\" />\n        <h3 className=\"text-xl font-semibold text-white mb-2\">Access Restricted</h3>\n        <p className=\"text-zinc-400\">You don't have permission to view the admin dashboard.</p>\n      </div>\n    );\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"w-8 h-8 bg-hive-gold rounded-lg animate-pulse mx-auto mb-4\" />\n          <p className=\"text-white\">Loading admin dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-white mb-2\">Space Administration</h2>\n          <p className=\"text-zinc-400\">Manage {spaceName} â€¢ {analytics?.totalMembers} members</p>\n        </div>\n        <div className=\"flex items-center space-x-3\">\n          <Badge variant=\"building-tools\" className=\"capitalize\">\n            {userRole}\n          </Badge>\n          <Button variant=\"outline\" size=\"sm\">\n            <Eye className=\"h-4 w-4 mr-2\" />\n            View Space\n          </Button>\n        </div>\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"flex items-center space-x-1 bg-zinc-800/50 rounded-lg p-1\">\n        {[\n          { id: 'overview', label: 'Overview', icon: BarChart3 },\n          { id: 'members', label: 'Members', icon: Users },\n          { id: 'content', label: 'Content', icon: MessageSquare },\n          { id: 'settings', label: 'Settings', icon: Settings }\n        ].map((tab) => {\n          const Icon = tab.icon;\n          return (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id as any)}\n              className={`flex items-center space-x-2 px-4 py-2 rounded-md transition-colors ${\n                activeTab === tab.id\n                  ? 'bg-hive-gold text-hive-obsidian font-medium'\n                  : 'text-zinc-400 hover:text-white'\n              }`}\n            >\n              <Icon className=\"h-4 w-4\" />\n              <span className=\"text-sm\">{tab.label}</span>\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Tab Content */}\n      {activeTab === 'overview' && analytics && (\n        <div className=\"space-y-6\">\n          {/* Key Metrics */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\n            <Card className=\"p-4 bg-zinc-800/50 border-zinc-700\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <div className=\"text-2xl font-bold text-white\">{analytics.totalMembers}</div>\n                  <div className=\"text-sm text-zinc-400\">Total Members</div>\n                </div>\n                <Users className=\"h-8 w-8 text-blue-400\" />\n              </div>\n              <div className=\"mt-2 flex items-center text-sm\">\n                <TrendingUp className=\"h-4 w-4 text-green-400 mr-1\" />\n                <span className=\"text-green-400\">+{analytics.weeklyGrowth} this week</span>\n              </div>\n            </Card>\n\n            <Card className=\"p-4 bg-zinc-800/50 border-zinc-700\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <div className=\"text-2xl font-bold text-white\">{analytics.activeMembers}</div>\n                  <div className=\"text-sm text-zinc-400\">Active Members</div>\n                </div>\n                <Activity className=\"h-8 w-8 text-green-400\" />\n              </div>\n              <div className=\"mt-2 text-sm text-zinc-400\">\n                {Math.round((analytics.activeMembers / analytics.totalMembers) * 100)}% of total\n              </div>\n            </Card>\n\n            <Card className=\"p-4 bg-zinc-800/50 border-zinc-700\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <div className=\"text-2xl font-bold text-white\">{analytics.engagementRate}%</div>\n                  <div className=\"text-sm text-zinc-400\">Engagement Rate</div>\n                </div>\n                <BarChart3 className=\"h-8 w-8 text-purple-400\" />\n              </div>\n              <div className=\"mt-2 text-sm text-green-400\">\n                Above average\n              </div>\n            </Card>\n\n            <Card className=\"p-4 bg-zinc-800/50 border-zinc-700\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <div className=\"text-2xl font-bold text-white\">{analytics.totalEvents}</div>\n                  <div className=\"text-sm text-zinc-400\">Total Events</div>\n                </div>\n                <Calendar className=\"h-8 w-8 text-orange-400\" />\n              </div>\n              <div className=\"mt-2 text-sm text-zinc-400\">\n                {analytics.totalPosts} posts, {analytics.totalTools} tools\n              </div>\n            </Card>\n\n            <Card className=\"p-4 bg-zinc-800/50 border-zinc-700\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <div className=\"text-2xl font-bold text-white\">8.2</div>\n                  <div className=\"text-sm text-zinc-400\">Health Score</div>\n                </div>\n                <Zap className=\"h-8 w-8 text-green-400\" />\n              </div>\n              <div className=\"mt-2 text-sm text-green-400\">\n                Excellent condition\n              </div>\n            </Card>\n          </div>\n\n          {/* Quick Actions */}\n          <Card className=\"p-6 bg-zinc-800/50 border-zinc-700\">\n            <h3 className=\"text-lg font-semibold text-white mb-4\">Quick Actions</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4\">\n              <Button\n                onClick={() => setShowMemberModal(true)}\n                className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne justify-start\"\n              >\n                <UserPlus className=\"h-4 w-4 mr-2\" />\n                Invite Members\n              </Button>\n              <Button variant=\"outline\" className=\"justify-start\">\n                <Calendar className=\"h-4 w-4 mr-2\" />\n                Create Event\n              </Button>\n              <Button \n                variant=\"outline\" \n                className=\"justify-start\"\n                onClick={() => window.location.href = `/spaces/${spaceId}/resources`}\n              >\n                <Archive className=\"h-4 w-4 mr-2\" />\n                Manage Resources\n              </Button>\n              <Button \n                variant=\"outline\" \n                className=\"justify-start\"\n                onClick={() => window.location.href = `/spaces/${spaceId}/analytics`}\n              >\n                <BarChart3 className=\"h-4 w-4 mr-2\" />\n                View Analytics\n              </Button>\n              <Button variant=\"outline\" className=\"justify-start\">\n                <Download className=\"h-4 w-4 mr-2\" />\n                Export Data\n              </Button>\n            </div>\n          </Card>\n\n          {/* Recent Activity */}\n          <Card className=\"p-6 bg-zinc-800/50 border-zinc-700\">\n            <h3 className=\"text-lg font-semibold text-white mb-4\">Recent Members</h3>\n            <div className=\"space-y-3\">\n              {recentMembers.map((member) => (\n                <div key={member.id} className=\"flex items-center justify-between p-3 bg-zinc-800/30 rounded-lg\">\n                  <div className=\"flex items-center space-x-3\">\n                    <div className=\"w-10 h-10 bg-zinc-600 rounded-full flex items-center justify-center\">\n                      <span className=\"text-white font-semibold text-sm\">\n                        {member.name.split(' ').map(n => n[0]).join('')}\n                      </span>\n                    </div>\n                    <div>\n                      <div className=\"flex items-center space-x-2\">\n                        <span className=\"font-medium text-white\">{member.name}</span>\n                        {member.verified && <Star className=\"h-4 w-4 text-hive-gold fill-current\" />}\n                        <Badge \n                          variant={member.role === 'admin' ? 'destructive' : member.role === 'moderator' ? 'building-tools' : 'skill-tag'} \n                          className=\"text-xs\"\n                        >\n                          {member.role}\n                        </Badge>\n                      </div>\n                      <div className=\"text-sm text-zinc-400\">@{member.handle} â€¢ Score: {member.contributionScore}</div>\n                    </div>\n                  </div>\n                  <Button variant=\"ghost\" size=\"sm\" className=\"text-zinc-400 hover:text-white\">\n                    <Settings className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              ))}\n            </div>\n          </Card>\n        </div>\n      )}\n\n      {activeTab === 'members' && (\n        <Card className=\"p-8 bg-zinc-800/50 border-zinc-700 text-center\">\n          <Users className=\"h-16 w-16 text-zinc-600 mx-auto mb-4\" />\n          <h3 className=\"text-xl font-semibold text-white mb-2\">Member Management</h3>\n          <p className=\"text-zinc-400 mb-6\">\n            Advanced member management features are coming soon.\n          </p>\n          <Button variant=\"outline\">\n            View All Members\n          </Button>\n        </Card>\n      )}\n\n      {activeTab === 'content' && (\n        <Card className=\"p-8 bg-zinc-800/50 border-zinc-700 text-center\">\n          <MessageSquare className=\"h-16 w-16 text-zinc-600 mx-auto mb-4\" />\n          <h3 className=\"text-xl font-semibold text-white mb-2\">Content Moderation</h3>\n          <p className=\"text-zinc-400 mb-6\">\n            Content moderation and reporting tools are coming soon.\n          </p>\n          {analytics && analytics.reportedContent > 0 && (\n            <div className=\"flex items-center justify-center space-x-2 text-orange-400 mb-4\">\n              <AlertTriangle className=\"h-4 w-4\" />\n              <span>{analytics.reportedContent} items need review</span>\n            </div>\n          )}\n        </Card>\n      )}\n\n      {activeTab === 'settings' && (\n        <Card className=\"p-8 bg-zinc-800/50 border-zinc-700 text-center\">\n          <Settings className=\"h-16 w-16 text-zinc-600 mx-auto mb-4\" />\n          <h3 className=\"text-xl font-semibold text-white mb-2\">Space Settings</h3>\n          <p className=\"text-zinc-400 mb-6\">\n            Advanced space configuration options are coming soon.\n          </p>\n          <Button variant=\"outline\">\n            <Edit className=\"h-4 w-4 mr-2\" />\n            Edit Space Details\n          </Button>\n        </Card>\n      )}\n\n      {/* Member Invite Modal */}\n      <HiveModal\n        isOpen={showMemberModal}\n        onClose={() => setShowMemberModal(false)}\n        title=\"Invite Members\"\n        size=\"md\"\n      >\n        <div className=\"space-y-4\">\n          <p className=\"text-zinc-400\">Send invitations to new members to join {spaceName}.</p>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-white mb-2\">Email Addresses</label>\n            <textarea\n              placeholder=\"Enter email addresses, one per line...\"\n              className=\"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-zinc-400 focus:border-hive-gold focus:outline-none resize-none\"\n              rows={4}\n            />\n          </div>\n          \n          <div className=\"flex justify-end space-x-3\">\n            <Button variant=\"outline\" onClick={() => setShowMemberModal(false)}>\n              Cancel\n            </Button>\n            <Button className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\">\n              Send Invitations\n            </Button>\n          </div>\n        </div>\n      </HiveModal>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/spaces/space-analytics-dashboard.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Alert' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Alert"},"fix":{"range":[128,176],"text":""},"desc":"Remove unused variable 'Alert'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TrendingDown' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"TrendingDown"},"fix":{"range":[213,230],"text":""},"desc":"Remove unused variable 'TrendingDown'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Heart' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Heart"},"fix":{"range":[271,281],"text":""},"desc":"Remove unused variable 'Heart'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Eye' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":6,"suggestions":[{"messageId":"removeVar","data":{"varName":"Eye"},"fix":{"range":[281,289],"text":""},"desc":"Remove unused variable 'Eye'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Share2' is defined but never used. Allowed unused vars must match /^_/u.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Share2"},"fix":{"range":[289,300],"text":""},"desc":"Remove unused variable 'Share2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Clock' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Clock"},"fix":{"range":[313,323],"text":""},"desc":"Remove unused variable 'Clock'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Filter' is defined but never used. Allowed unused vars must match /^_/u.","line":27,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Filter"},"fix":{"range":[438,449],"text":""},"desc":"Remove unused variable 'Filter'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'PieChart' is defined but never used. Allowed unused vars must match /^_/u.","line":29,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"PieChart"},"fix":{"range":[463,475],"text":""},"desc":"Remove unused variable 'PieChart'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'LineChart' is defined but never used. Allowed unused vars must match /^_/u.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"LineChart"},"fix":{"range":[475,488],"text":""},"desc":"Remove unused variable 'LineChart'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Gauge' is defined but never used. Allowed unused vars must match /^_/u.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Gauge"},"fix":{"range":[488,497],"text":""},"desc":"Remove unused variable 'Gauge'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect, useMemo } from \"react\";\nimport { Card, Button, Badge, HiveModal } from \"@hive/ui\";\nimport { Alert } from \"@/components/temp-stubs\";\nimport { \n  BarChart3, \n  TrendingUp, \n  TrendingDown, \n  Users, \n  MessageSquare, \n  Calendar, \n  Heart, \n  Eye, \n  Share2, \n  Activity, \n  Clock, \n  Star, \n  AlertTriangle, \n  CheckCircle, \n  Zap, \n  Target, \n  Lightbulb, \n  ArrowUp, \n  ArrowDown, \n  Download, \n  Filter, \n  RefreshCw,\n  PieChart,\n  LineChart,\n  Gauge\n} from \"lucide-react\";\n\ninterface SpaceAnalyticsProps {\n  spaceId: string;\n  spaceName: string;\n  userRole: 'admin' | 'moderator' | 'member';\n  timeRange?: '7d' | '30d' | '90d' | '1y';\n}\n\ninterface AnalyticsMetrics {\n  overview: {\n    totalMembers: number;\n    activeMembers: number;\n    memberGrowth: number;\n    engagementRate: number;\n    healthScore: number;\n  };\n  engagement: {\n    postsCreated: number;\n    commentsCount: number;\n    likesReceived: number;\n    sharesCount: number;\n    toolUsage: number;\n    eventAttendance: number;\n  };\n  content: {\n    postsByCategory: { category: string; count: number; }[];\n    topContributors: { name: string; handle: string; contributions: number; avatar?: string; }[];\n    contentQuality: number;\n    moderationActions: number;\n  };\n  events: {\n    totalEvents: number;\n    upcomingEvents: number;\n    avgAttendance: number;\n    eventSatisfaction: number;\n  };\n  health: {\n    activityTrend: 'increasing' | 'stable' | 'decreasing';\n    memberRetention: number;\n    newMemberOnboarding: number;\n    diversityIndex: number;\n    collaborationScore: number;\n  };\n  insights: {\n    peakActivityHours: string[];\n    topTags: string[];\n    growthOpportunities: string[];\n    recommendations: string[];\n  };\n}\n\ninterface TimeSeriesData {\n  date: string;\n  members: number;\n  posts: number;\n  engagement: number;\n}\n\nexport function SpaceAnalyticsDashboard({ spaceId, spaceName, userRole, timeRange = '30d' }: SpaceAnalyticsProps) {\n  const [metrics, setMetrics] = useState<AnalyticsMetrics | null>(null);\n  const [timeSeriesData, setTimeSeriesData] = useState<TimeSeriesData[]>([]);\n  const [selectedMetric, setSelectedMetric] = useState<'members' | 'posts' | 'engagement'>('members');\n  const [showExportModal, setShowExportModal] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [lastUpdated, setLastUpdated] = useState<Date>(new Date());\n\n  useEffect(() => {\n    fetchAnalytics();\n  }, [spaceId, timeRange]);\n\n  const fetchAnalytics = async () => {\n    setIsLoading(true);\n    try {\n      // TODO: Replace with actual API call\n      // const response = await fetch(`/api/spaces/${spaceId}/analytics?timeRange=${timeRange}`);\n      // const data = await response.json();\n      \n      // Simulate API call with mock data for development\n      await new Promise(resolve => setTimeout(resolve, 1000));\n    \n    const mockMetrics: AnalyticsMetrics = {\n      overview: {\n        totalMembers: 127,\n        activeMembers: 89,\n        memberGrowth: 12.5,\n        engagementRate: 76.3,\n        healthScore: 8.2\n      },\n      engagement: {\n        postsCreated: 245,\n        commentsCount: 892,\n        likesReceived: 1456,\n        sharesCount: 234,\n        toolUsage: 67,\n        eventAttendance: 89\n      },\n      content: {\n        postsByCategory: [\n          { category: 'Study Help', count: 89 },\n          { category: 'Events', count: 67 },\n          { category: 'Resources', count: 45 },\n          { category: 'Discussion', count: 44 }\n        ],\n        topContributors: [\n          { name: 'Sarah Chen', handle: 'sarahc', contributions: 34, avatar: undefined },\n          { name: 'Marcus Johnson', handle: 'marcusj', contributions: 28 },\n          { name: 'Emma Davis', handle: 'emmad', contributions: 22 }\n        ],\n        contentQuality: 87.5,\n        moderationActions: 3\n      },\n      events: {\n        totalEvents: 23,\n        upcomingEvents: 8,\n        avgAttendance: 78.2,\n        eventSatisfaction: 4.6\n      },\n      health: {\n        activityTrend: 'increasing',\n        memberRetention: 92.4,\n        newMemberOnboarding: 85.7,\n        diversityIndex: 76.8,\n        collaborationScore: 82.3\n      },\n      insights: {\n        peakActivityHours: ['10:00-11:00', '14:00-15:00', '19:00-20:00'],\n        topTags: ['algorithms', 'study-group', 'career-prep', 'projects'],\n        growthOpportunities: [\n          'Increase weekend activity with social events',\n          'Create more beginner-friendly content',\n          'Add mentorship programs'\n        ],\n        recommendations: [\n          'Host weekly algorithm study sessions',\n          'Create project collaboration channel',\n          'Implement peer tutoring system'\n        ]\n      }\n    };\n\n    // Generate time series data\n    const mockTimeSeries: TimeSeriesData[] = Array.from({ length: 30 }, (_, i) => ({\n      date: new Date(Date.now() - (29 - i) * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\n      members: 100 + Math.floor(Math.random() * 27),\n      posts: 5 + Math.floor(Math.random() * 15),\n      engagement: 60 + Math.floor(Math.random() * 30)\n    }));\n\n      setMetrics(mockMetrics);\n      setTimeSeriesData(mockTimeSeries);\n      setLastUpdated(new Date());\n    } catch (error) {\n      // TODO: Implement proper error tracking\n      setMetrics(null);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const healthScoreColor = useMemo(() => {\n    if (!metrics) return 'text-zinc-400';\n    const score = metrics.overview.healthScore;\n    if (score >= 8) return 'text-green-400';\n    if (score >= 6) return 'text-hive-gold';\n    return 'text-red-400';\n  }, [metrics]);\n\n  const healthScoreStatus = useMemo(() => {\n    if (!metrics) return 'Unknown';\n    const score = metrics.overview.healthScore;\n    if (score >= 8) return 'Excellent';\n    if (score >= 6) return 'Good';\n    if (score >= 4) return 'Fair';\n    return 'Needs Attention';\n  }, [metrics]);\n\n  if (userRole === 'member') {\n    return (\n      <div className=\"text-center py-12\">\n        <BarChart3 className=\"h-16 w-16 text-zinc-600 mx-auto mb-4\" />\n        <h3 className=\"text-xl font-semibold text-white mb-2\">Analytics Access Restricted</h3>\n        <p className=\"text-zinc-400\">Space analytics are only available to administrators and moderators.</p>\n      </div>\n    );\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-6\">\n        {Array.from({ length: 6 }).map((_, i) => (\n          <Card key={i} className=\"p-6 bg-zinc-800/50 border-zinc-700\">\n            <div className=\"animate-pulse\">\n              <div className=\"h-4 bg-zinc-700 rounded w-1/4 mb-4\"></div>\n              <div className=\"space-y-2\">\n                <div className=\"h-8 bg-zinc-700 rounded\"></div>\n                <div className=\"h-4 bg-zinc-700 rounded w-3/4\"></div>\n              </div>\n            </div>\n          </Card>\n        ))}\n      </div>\n    );\n  }\n\n  if (!metrics) {\n    return (\n      <div className=\"text-center py-12\">\n        <AlertTriangle className=\"h-16 w-16 text-red-400 mx-auto mb-4\" />\n        <h3 className=\"text-xl font-semibold text-white mb-2\">Failed to Load Analytics</h3>\n        <p className=\"text-zinc-400 mb-6\">We couldn't load the analytics data. Please try again.</p>\n        <Button onClick={fetchAnalytics} className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\">\n          <RefreshCw className=\"h-4 w-4 mr-2\" />\n          Retry\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-white mb-2\">Space Analytics</h2>\n          <p className=\"text-zinc-400\">\n            {spaceName} â€¢ Last updated {lastUpdated.toLocaleTimeString()}\n          </p>\n        </div>\n        <div className=\"flex items-center space-x-3\">\n          <Button variant=\"outline\" size=\"sm\" onClick={() => setShowExportModal(true)}>\n            <Download className=\"h-4 w-4 mr-2\" />\n            Export\n          </Button>\n          <Button variant=\"outline\" size=\"sm\" onClick={fetchAnalytics}>\n            <RefreshCw className=\"h-4 w-4 mr-2\" />\n            Refresh\n          </Button>\n        </div>\n      </div>\n\n      {/* Health Score Overview */}\n      <Card className=\"p-6 bg-gradient-to-br from-zinc-800/50 to-zinc-900/50 border-zinc-700\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold text-white\">Space Health Score</h3>\n          <Badge variant=\"building-tools\" className={healthScoreColor}>\n            {healthScoreStatus}\n          </Badge>\n        </div>\n        <div className=\"flex items-center space-x-8\">\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"relative w-24 h-24\">\n              <div className=\"absolute inset-0 rounded-full border-4 border-zinc-700\"></div>\n              <div \n                className={`absolute inset-0 rounded-full border-4 border-transparent ${\n                  metrics.overview.healthScore >= 8 ? 'border-green-400' :\n                  metrics.overview.healthScore >= 6 ? 'border-hive-gold' : 'border-red-400'\n                }`}\n                style={{ \n                  background: `conic-gradient(currentColor ${metrics.overview.healthScore * 10}%, transparent 0%)`,\n                  mask: 'conic-gradient(#000 0deg, #000 0deg)',\n                  WebkitMask: 'conic-gradient(#000 0deg, #000 0deg)'\n                }}\n              ></div>\n              <div className=\"absolute inset-0 flex items-center justify-center\">\n                <span className={`text-2xl font-bold ${healthScoreColor}`}>\n                  {metrics.overview.healthScore.toFixed(1)}\n                </span>\n              </div>\n            </div>\n            <div>\n              <div className={`text-3xl font-bold ${healthScoreColor}`}>\n                {metrics.overview.healthScore.toFixed(1)}/10\n              </div>\n              <div className=\"text-sm text-zinc-400\">Overall Health</div>\n            </div>\n          </div>\n          \n          <div className=\"grid grid-cols-2 gap-6 flex-1\">\n            <div>\n              <div className=\"flex items-center space-x-2 mb-1\">\n                <Users className=\"h-4 w-4 text-blue-400\" />\n                <span className=\"text-sm text-zinc-400\">Member Retention</span>\n              </div>\n              <div className=\"text-xl font-semibold text-white\">{metrics.health.memberRetention.toFixed(1)}%</div>\n            </div>\n            <div>\n              <div className=\"flex items-center space-x-2 mb-1\">\n                <Activity className=\"h-4 w-4 text-green-400\" />\n                <span className=\"text-sm text-zinc-400\">Engagement Rate</span>\n              </div>\n              <div className=\"text-xl font-semibold text-white\">{metrics.overview.engagementRate.toFixed(1)}%</div>\n            </div>\n            <div>\n              <div className=\"flex items-center space-x-2 mb-1\">\n                <Target className=\"h-4 w-4 text-purple-400\" />\n                <span className=\"text-sm text-zinc-400\">Collaboration Score</span>\n              </div>\n              <div className=\"text-xl font-semibold text-white\">{metrics.health.collaborationScore.toFixed(1)}%</div>\n            </div>\n            <div>\n              <div className=\"flex items-center space-x-2 mb-1\">\n                <Star className=\"h-4 w-4 text-hive-gold\" />\n                <span className=\"text-sm text-zinc-400\">Content Quality</span>\n              </div>\n              <div className=\"text-xl font-semibold text-white\">{metrics.content.contentQuality.toFixed(1)}%</div>\n            </div>\n          </div>\n        </div>\n      </Card>\n\n      {/* Key Metrics Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card className=\"p-4 bg-zinc-800/50 border-zinc-700\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"text-2xl font-bold text-white\">{metrics.overview.totalMembers}</div>\n              <div className=\"text-sm text-zinc-400\">Total Members</div>\n            </div>\n            <Users className=\"h-8 w-8 text-blue-400\" />\n          </div>\n          <div className=\"mt-2 flex items-center text-sm\">\n            {metrics.overview.memberGrowth > 0 ? (\n              <ArrowUp className=\"h-4 w-4 text-green-400 mr-1\" />\n            ) : (\n              <ArrowDown className=\"h-4 w-4 text-red-400 mr-1\" />\n            )}\n            <span className={metrics.overview.memberGrowth > 0 ? 'text-green-400' : 'text-red-400'}>\n              {Math.abs(metrics.overview.memberGrowth).toFixed(1)}% this month\n            </span>\n          </div>\n        </Card>\n\n        <Card className=\"p-4 bg-zinc-800/50 border-zinc-700\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"text-2xl font-bold text-white\">{metrics.engagement.postsCreated}</div>\n              <div className=\"text-sm text-zinc-400\">Posts Created</div>\n            </div>\n            <MessageSquare className=\"h-8 w-8 text-green-400\" />\n          </div>\n          <div className=\"mt-2 text-sm text-zinc-400\">\n            {metrics.engagement.commentsCount} comments\n          </div>\n        </Card>\n\n        <Card className=\"p-4 bg-zinc-800/50 border-zinc-700\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"text-2xl font-bold text-white\">{metrics.events.totalEvents}</div>\n              <div className=\"text-sm text-zinc-400\">Events Hosted</div>\n            </div>\n            <Calendar className=\"h-8 w-8 text-purple-400\" />\n          </div>\n          <div className=\"mt-2 text-sm text-zinc-400\">\n            {metrics.events.avgAttendance.toFixed(1)}% avg attendance\n          </div>\n        </Card>\n\n        <Card className=\"p-4 bg-zinc-800/50 border-zinc-700\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"text-2xl font-bold text-white\">{metrics.engagement.toolUsage}</div>\n              <div className=\"text-sm text-zinc-400\">Tool Interactions</div>\n            </div>\n            <Zap className=\"h-8 w-8 text-hive-gold\" />\n          </div>\n          <div className=\"mt-2 text-sm text-zinc-400\">\n            Across {metrics.content.postsByCategory.length} categories\n          </div>\n        </Card>\n      </div>\n\n      {/* Activity Trends */}\n      <Card className=\"p-6 bg-zinc-800/50 border-zinc-700\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold text-white\">Activity Trends</h3>\n          <div className=\"flex items-center space-x-2\">\n            {['members', 'posts', 'engagement'].map((metric) => (\n              <Button\n                key={metric}\n                variant={selectedMetric === metric ? \"primary\" : \"outline\"}\n                size=\"sm\"\n                onClick={() => setSelectedMetric(metric as any)}\n                className={selectedMetric === metric ? \n                  \"bg-hive-gold text-hive-obsidian\" : \n                  \"border-zinc-600 text-zinc-400 hover:text-white\"\n                }\n              >\n                {metric.charAt(0).toUpperCase() + metric.slice(1)}\n              </Button>\n            ))}\n          </div>\n        </div>\n        <div className=\"h-64 flex items-end space-x-1\">\n          {timeSeriesData.slice(-14).map((data, index) => (\n            <div key={index} className=\"flex-1 flex flex-col items-center\">\n              <div \n                className=\"w-full bg-hive-gold/20 hover:bg-hive-gold/30 transition-colors rounded-t\"\n                style={{ \n                  height: `${(data[selectedMetric] / Math.max(...timeSeriesData.map(d => d[selectedMetric]))) * 200}px` \n                }}\n              />\n              <div className=\"text-xs text-zinc-400 mt-2 rotate-45 origin-left\">\n                {data.date.split('-')[2]}\n              </div>\n            </div>\n          ))}\n        </div>\n      </Card>\n\n      {/* Content Analysis & Top Contributors */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <Card className=\"p-6 bg-zinc-800/50 border-zinc-700\">\n          <h3 className=\"text-lg font-semibold text-white mb-4\">Content Breakdown</h3>\n          <div className=\"space-y-3\">\n            {metrics.content.postsByCategory.map((category, index) => (\n              <div key={category.category} className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <div \n                    className=\"w-3 h-3 rounded-full\"\n                    style={{ backgroundColor: `hsl(${index * 60}, 60%, 60%)` }}\n                  />\n                  <span className=\"text-white\">{category.category}</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <span className=\"text-zinc-400\">{category.count}</span>\n                  <div \n                    className=\"h-2 rounded-full bg-zinc-700\"\n                    style={{ \n                      width: '60px',\n                      background: `linear-gradient(to right, hsl(${index * 60}, 60%, 60%) ${(category.count / Math.max(...metrics.content.postsByCategory.map(c => c.count))) * 100}%, #3f3f46 0%)`\n                    }}\n                  />\n                </div>\n              </div>\n            ))}\n          </div>\n        </Card>\n\n        <Card className=\"p-6 bg-zinc-800/50 border-zinc-700\">\n          <h3 className=\"text-lg font-semibold text-white mb-4\">Top Contributors</h3>\n          <div className=\"space-y-3\">\n            {metrics.content.topContributors.map((contributor, index) => (\n              <div key={contributor.handle} className=\"flex items-center justify-between p-3 bg-zinc-800/30 rounded-lg\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"relative\">\n                    <div className=\"w-10 h-10 bg-zinc-600 rounded-full flex items-center justify-center\">\n                      <span className=\"text-white font-semibold text-sm\">\n                        {contributor.name.split(' ').map(n => n[0]).join('')}\n                      </span>\n                    </div>\n                    {index === 0 && (\n                      <div className=\"absolute -top-1 -right-1 w-5 h-5 bg-hive-gold rounded-full flex items-center justify-center\">\n                        <Star className=\"h-3 w-3 text-hive-obsidian\" />\n                      </div>\n                    )}\n                  </div>\n                  <div>\n                    <div className=\"font-medium text-white\">{contributor.name}</div>\n                    <div className=\"text-sm text-zinc-400\">@{contributor.handle}</div>\n                  </div>\n                </div>\n                <div className=\"text-right\">\n                  <div className=\"font-medium text-white\">{contributor.contributions}</div>\n                  <div className=\"text-xs text-zinc-400\">contributions</div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </Card>\n      </div>\n\n      {/* Insights & Recommendations */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <Card className=\"p-6 bg-zinc-800/50 border-zinc-700\">\n          <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center\">\n            <Lightbulb className=\"h-5 w-5 text-hive-gold mr-2\" />\n            Growth Opportunities\n          </h3>\n          <div className=\"space-y-3\">\n            {metrics.insights.growthOpportunities.map((opportunity, index) => (\n              <div key={index} className=\"flex items-start space-x-3 p-3 bg-hive-gold/5 border border-hive-gold/20 rounded-lg\">\n                <TrendingUp className=\"h-4 w-4 text-hive-gold mt-0.5 flex-shrink-0\" />\n                <span className=\"text-sm text-white\">{opportunity}</span>\n              </div>\n            ))}\n          </div>\n        </Card>\n\n        <Card className=\"p-6 bg-zinc-800/50 border-zinc-700\">\n          <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center\">\n            <Target className=\"h-5 w-5 text-blue-400 mr-2\" />\n            Recommendations\n          </h3>\n          <div className=\"space-y-3\">\n            {metrics.insights.recommendations.map((recommendation, index) => (\n              <div key={index} className=\"flex items-start space-x-3 p-3 bg-blue-400/5 border border-blue-400/20 rounded-lg\">\n                <CheckCircle className=\"h-4 w-4 text-blue-400 mt-0.5 flex-shrink-0\" />\n                <span className=\"text-sm text-white\">{recommendation}</span>\n              </div>\n            ))}\n          </div>\n        </Card>\n      </div>\n\n      {/* Export Modal */}\n      <HiveModal\n        isOpen={showExportModal}\n        onClose={() => setShowExportModal(false)}\n        title=\"Export Analytics\"\n        size=\"md\"\n      >\n        <div className=\"space-y-4\">\n          <p className=\"text-zinc-400\">Export detailed analytics data for {spaceName}.</p>\n          \n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between p-3 border border-zinc-700 rounded-lg\">\n              <div>\n                <div className=\"font-medium text-white\">CSV Report</div>\n                <div className=\"text-sm text-zinc-400\">Comprehensive data export</div>\n              </div>\n              <Button variant=\"outline\" size=\"sm\">\n                Download\n              </Button>\n            </div>\n            \n            <div className=\"flex items-center justify-between p-3 border border-zinc-700 rounded-lg\">\n              <div>\n                <div className=\"font-medium text-white\">PDF Summary</div>\n                <div className=\"text-sm text-zinc-400\">Executive summary report</div>\n              </div>\n              <Button variant=\"outline\" size=\"sm\">\n                Download\n              </Button>\n            </div>\n          </div>\n          \n          <div className=\"flex justify-end space-x-3 pt-4\">\n            <Button variant=\"outline\" onClick={() => setShowExportModal(false)}>\n              Cancel\n            </Button>\n            <Button className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\">\n              Export All\n            </Button>\n          </div>\n        </div>\n      </HiveModal>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/spaces/space-event-calendar.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Filter' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Filter"},"fix":{"range":[211,221],"text":""},"desc":"Remove unused variable 'Filter'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Grid' is defined but never used. Allowed unused vars must match /^_/u.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Grid"},"fix":{"range":[231,239],"text":""},"desc":"Remove unused variable 'Grid'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'List' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"List"},"fix":{"range":[239,247],"text":""},"desc":"Remove unused variable 'List'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Settings' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Settings"},"fix":{"range":[279,291],"text":""},"desc":"Remove unused variable 'Settings'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Eye' is defined but never used. Allowed unused vars must match /^_/u.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":6,"suggestions":[{"messageId":"removeVar","data":{"varName":"Eye"},"fix":{"range":[291,298],"text":""},"desc":"Remove unused variable 'Eye'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Edit' is defined but never used. Allowed unused vars must match /^_/u.","line":22,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Edit"},"fix":{"range":[298,306],"text":""},"desc":"Remove unused variable 'Edit'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Trash2"},"fix":{"range":[306,316],"text":""},"desc":"Remove unused variable 'Trash2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Copy' is defined but never used. Allowed unused vars must match /^_/u.","line":24,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Copy"},"fix":{"range":[316,324],"text":""},"desc":"Remove unused variable 'Copy'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Button, Card, Badge, HiveModal } from \"@hive/ui\";\nimport { \n  Calendar, \n  Clock, \n  MapPin, \n  Users, \n  Plus,\n  ChevronLeft, \n  ChevronRight,\n  Filter,\n  Search,\n  Grid,\n  List,\n  Star,\n  Bell,\n  ExternalLink,\n  Settings,\n  Eye,\n  Edit,\n  Trash2,\n  Copy,\n  Share2,\n  Download,\n  CheckCircle\n} from \"lucide-react\";\n\ninterface SpaceEvent {\n  id: string;\n  title: string;\n  description: string;\n  type: 'academic' | 'social' | 'professional' | 'recreational' | 'official';\n  organizer: {\n    id: string;\n    name: string;\n    handle: string;\n    verified?: boolean;\n  };\n  datetime: {\n    start: string;\n    end: string;\n    timezone: string;\n  };\n  location: {\n    type: 'physical' | 'virtual' | 'hybrid';\n    name: string;\n    address?: string;\n    virtualLink?: string;\n  };\n  capacity: {\n    max: number;\n    current: number;\n    waitlist: number;\n  };\n  tools: string[];\n  tags: string[];\n  visibility: 'public' | 'space_only' | 'invited_only';\n  rsvpStatus?: 'going' | 'interested' | 'not_going' | null;\n  isBookmarked: boolean;\n  engagement: {\n    going: number;\n    interested: number;\n    comments: number;\n  };\n  status: 'upcoming' | 'ongoing' | 'completed' | 'cancelled';\n  isRecurring: boolean;\n  recurringPattern?: string;\n  spaceIntegration: {\n    spaceId: string;\n    spaceName: string;\n    isJointEvent: boolean;\n    partnerSpaces?: string[];\n    spaceTools: string[];\n    autoToolLaunch: boolean;\n  };\n}\n\ninterface SpaceEventCalendarProps {\n  spaceId: string;\n  spaceName: string;\n  userRole: 'admin' | 'moderator' | 'member';\n  onCreateEvent?: () => void;\n  onEventClick?: (event: SpaceEvent) => void;\n}\n\nexport function SpaceEventCalendar({ \n  spaceId, \n  spaceName, \n  userRole, \n  onCreateEvent, \n  onEventClick \n}: SpaceEventCalendarProps) {\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [viewMode, setViewMode] = useState<'month' | 'week' | 'day' | 'list'>('month');\n  const [events, setEvents] = useState<SpaceEvent[]>([]);\n  const [filteredEvents, setFilteredEvents] = useState<SpaceEvent[]>([]);\n  const [selectedEvent, setSelectedEvent] = useState<SpaceEvent | null>(null);\n  const [showEventDetails, setShowEventDetails] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [typeFilter, setTypeFilter] = useState<'all' | string>('all');\n  const [statusFilter, setStatusFilter] = useState<'all' | string>('all');\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchSpaceEvents = async () => {\n      await new Promise(resolve => setTimeout(resolve, 500));\n      \n      const mockEvents: SpaceEvent[] = [\n        {\n          id: '1',\n          title: 'Weekly Algorithm Study Session',\n          description: 'Deep dive into dynamic programming with collaborative problem solving using our space tools.',\n          type: 'academic',\n          organizer: {\n            id: '1',\n            name: 'Sarah Chen',\n            handle: 'sarahc',\n            verified: true\n          },\n          datetime: {\n            start: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000).toISOString(),\n            end: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000 + 3 * 60 * 60 * 1000).toISOString(),\n            timezone: 'America/New_York'\n          },\n          location: {\n            type: 'physical',\n            name: 'Lockwood Library Room 301',\n            address: '433 Capen Hall, Buffalo, NY 14260'\n          },\n          capacity: {\n            max: 25,\n            current: 18,\n            waitlist: 3\n          },\n          tools: ['whiteboard', 'study-timer', 'file-share'],\n          tags: ['algorithms', 'data-structures', 'study-group'],\n          visibility: 'space_only',\n          rsvpStatus: 'going',\n          isBookmarked: true,\n          engagement: {\n            going: 18,\n            interested: 7,\n            comments: 5\n          },\n          status: 'upcoming',\n          isRecurring: true,\n          recurringPattern: 'Weekly on Wednesdays',\n          spaceIntegration: {\n            spaceId: spaceId,\n            spaceName: spaceName,\n            isJointEvent: false,\n            spaceTools: ['study-timer', 'whiteboard', 'chat'],\n            autoToolLaunch: true\n          }\n        },\n        {\n          id: '2',\n          title: 'Cross-Space Hackathon Planning',\n          description: 'Joint planning session with Data Science Club and Web Dev Society for upcoming hackathon.',\n          type: 'professional',\n          organizer: {\n            id: '2',\n            name: 'Marcus Johnson',\n            handle: 'marcusj'\n          },\n          datetime: {\n            start: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000).toISOString(),\n            end: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000 + 2 * 60 * 60 * 1000).toISOString(),\n            timezone: 'America/New_York'\n          },\n          location: {\n            type: 'hybrid',\n            name: 'Davis Hall 101 + Virtual',\n            address: '340 Bell Hall, Buffalo, NY 14260',\n            virtualLink: 'https://zoom.us/j/123456789'\n          },\n          capacity: {\n            max: 50,\n            current: 32,\n            waitlist: 0\n          },\n          tools: ['project-board', 'group-chat', 'file-share'],\n          tags: ['hackathon', 'collaboration', 'planning'],\n          visibility: 'public',\n          rsvpStatus: 'interested',\n          isBookmarked: false,\n          engagement: {\n            going: 32,\n            interested: 15,\n            comments: 8\n          },\n          status: 'upcoming',\n          isRecurring: false,\n          spaceIntegration: {\n            spaceId: spaceId,\n            spaceName: spaceName,\n            isJointEvent: true,\n            partnerSpaces: ['Data Science Club', 'Web Dev Society'],\n            spaceTools: ['project-board', 'shared-docs'],\n            autoToolLaunch: false\n          }\n        },\n        {\n          id: '3',\n          title: 'Technical Interview Prep Workshop',\n          description: 'Mock interviews and coding challenges with real-time feedback using our interview prep tools.',\n          type: 'professional',\n          organizer: {\n            id: '3',\n            name: 'Emma Davis',\n            handle: 'emmad'\n          },\n          datetime: {\n            start: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n            end: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000 + 3 * 60 * 60 * 1000).toISOString(),\n            timezone: 'America/New_York'\n          },\n          location: {\n            type: 'virtual',\n            name: 'Zoom Meeting Room',\n            virtualLink: 'https://zoom.us/j/987654321'\n          },\n          capacity: {\n            max: 30,\n            current: 24,\n            waitlist: 5\n          },\n          tools: ['code-editor', 'timer', 'feedback-forms'],\n          tags: ['interview', 'coding', 'career'],\n          visibility: 'space_only',\n          rsvpStatus: null,\n          isBookmarked: false,\n          engagement: {\n            going: 24,\n            interested: 12,\n            comments: 3\n          },\n          status: 'upcoming',\n          isRecurring: false,\n          spaceIntegration: {\n            spaceId: spaceId,\n            spaceName: spaceName,\n            isJointEvent: false,\n            spaceTools: ['code-editor', 'timer', 'feedback'],\n            autoToolLaunch: true\n          }\n        }\n      ];\n      \n      setEvents(mockEvents);\n      setFilteredEvents(mockEvents);\n      setIsLoading(false);\n    };\n\n    fetchSpaceEvents();\n  }, [spaceId, spaceName]);\n\n  useEffect(() => {\n    const filtered = events.filter(event => {\n      const matchesSearch = event.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                           event.description.toLowerCase().includes(searchQuery.toLowerCase());\n      const matchesType = typeFilter === 'all' || event.type === typeFilter;\n      const matchesStatus = statusFilter === 'all' || event.status === statusFilter;\n      \n      return matchesSearch && matchesType && matchesStatus;\n    });\n    \n    setFilteredEvents(filtered);\n  }, [events, searchQuery, typeFilter, statusFilter]);\n\n  const getDaysInMonth = (date: Date) => {\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const firstDay = new Date(year, month, 1);\n    const lastDay = new Date(year, month + 1, 0);\n    const daysInMonth = lastDay.getDate();\n    const startingDayOfWeek = firstDay.getDay();\n    \n    const days = [];\n    \n    // Add empty cells for days before the first day of the month\n    for (let i = 0; i < startingDayOfWeek; i++) {\n      days.push(null);\n    }\n    \n    // Add days of the month\n    for (let day = 1; day <= daysInMonth; day++) {\n      days.push(new Date(year, month, day));\n    }\n    \n    return days;\n  };\n\n  const getEventsForDate = (date: Date) => {\n    return filteredEvents.filter(event => {\n      const eventDate = new Date(event.datetime.start);\n      return eventDate.toDateString() === date.toDateString();\n    });\n  };\n\n  const navigateMonth = (direction: 'prev' | 'next') => {\n    setCurrentDate(prev => {\n      const newDate = new Date(prev);\n      newDate.setMonth(prev.getMonth() + (direction === 'next' ? 1 : -1));\n      return newDate;\n    });\n  };\n\n  const formatEventTime = (startTime: string, endTime: string) => {\n    const start = new Date(startTime);\n    const end = new Date(endTime);\n    \n    return `${start.toLocaleTimeString('en-US', { \n      hour: 'numeric', \n      minute: '2-digit',\n      hour12: true \n    })} - ${end.toLocaleTimeString('en-US', { \n      hour: 'numeric', \n      minute: '2-digit',\n      hour12: true \n    })}`;\n  };\n\n  const getEventTypeColor = (type: string) => {\n    switch (type) {\n      case 'academic': return 'bg-blue-500';\n      case 'social': return 'bg-pink-500';\n      case 'professional': return 'bg-green-500';\n      case 'recreational': return 'bg-orange-500';\n      case 'official': return 'bg-purple-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  const handleEventClick = (event: SpaceEvent) => {\n    setSelectedEvent(event);\n    setShowEventDetails(true);\n    if (onEventClick) {\n      onEventClick(event);\n    }\n  };\n\n  const handleRSVP = (eventId: string, status: 'going' | 'interested' | 'not_going') => {\n    setEvents(prev => prev.map(event => \n      event.id === eventId \n        ? { ...event, rsvpStatus: status }\n        : event\n    ));\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"w-8 h-8 bg-hive-gold rounded-lg animate-pulse mx-auto mb-4\" />\n          <p className=\"text-white\">Loading space calendar...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-white mb-2\">Space Calendar</h2>\n          <p className=\"text-zinc-400\">Events and activities for {spaceName}</p>\n        </div>\n        \n        <div className=\"flex items-center space-x-3\">\n          <div className=\"flex items-center bg-zinc-800 rounded-lg p-1\">\n            {['month', 'week', 'day', 'list'].map((mode) => (\n              <button\n                key={mode}\n                onClick={() => setViewMode(mode as any)}\n                className={`px-3 py-1 text-sm rounded-md transition-colors capitalize ${\n                  viewMode === mode\n                    ? 'bg-hive-gold text-hive-obsidian font-medium'\n                    : 'text-zinc-400 hover:text-white'\n                }`}\n              >\n                {mode}\n              </button>\n            ))}\n          </div>\n          \n          {(userRole === 'admin' || userRole === 'moderator') && (\n            <Button \n              onClick={onCreateEvent}\n              className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n            >\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Create Event\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"flex flex-col md:flex-row md:items-center space-y-3 md:space-y-0 md:space-x-4\">\n        <div className=\"relative flex-1 max-w-md\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-zinc-400\" />\n          <input\n            type=\"text\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            placeholder=\"Search events...\"\n            className=\"pl-10 pr-4 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-zinc-400 focus:border-hive-gold focus:outline-none w-full\"\n          />\n        </div>\n        \n        <select\n          value={typeFilter}\n          onChange={(e) => setTypeFilter(e.target.value)}\n          className=\"bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-2 text-white text-sm focus:border-hive-gold focus:outline-none\"\n        >\n          <option value=\"all\">All Types</option>\n          <option value=\"academic\">Academic</option>\n          <option value=\"social\">Social</option>\n          <option value=\"professional\">Professional</option>\n          <option value=\"recreational\">Recreational</option>\n          <option value=\"official\">Official</option>\n        </select>\n        \n        <select\n          value={statusFilter}\n          onChange={(e) => setStatusFilter(e.target.value)}\n          className=\"bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-2 text-white text-sm focus:border-hive-gold focus:outline-none\"\n        >\n          <option value=\"all\">All Status</option>\n          <option value=\"upcoming\">Upcoming</option>\n          <option value=\"ongoing\">Ongoing</option>\n          <option value=\"completed\">Completed</option>\n        </select>\n        \n        <Button variant=\"outline\" size=\"sm\">\n          <Download className=\"h-4 w-4 mr-2\" />\n          Export\n        </Button>\n      </div>\n\n      {/* Calendar Views */}\n      {viewMode === 'month' && (\n        <Card className=\"p-6 bg-zinc-800/50 border-zinc-700\">\n          {/* Month Navigation */}\n          <div className=\"flex items-center justify-between mb-6\">\n            <h3 className=\"text-xl font-semibold text-white\">\n              {currentDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}\n            </h3>\n            <div className=\"flex items-center space-x-2\">\n              <Button \n                variant=\"outline\" \n                size=\"sm\"\n                onClick={() => navigateMonth('prev')}\n              >\n                <ChevronLeft className=\"h-4 w-4\" />\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setCurrentDate(new Date())}\n              >\n                Today\n              </Button>\n              <Button \n                variant=\"outline\" \n                size=\"sm\"\n                onClick={() => navigateMonth('next')}\n              >\n                <ChevronRight className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n          \n          {/* Calendar Grid */}\n          <div className=\"grid grid-cols-7 gap-1\">\n            {/* Day Headers */}\n            {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map((day) => (\n              <div key={day} className=\"p-2 text-center text-sm font-medium text-zinc-400\">\n                {day}\n              </div>\n            ))}\n            \n            {/* Calendar Days */}\n            {getDaysInMonth(currentDate).map((date, index) => {\n              if (!date) {\n                return <div key={index} className=\"p-2 min-h-[80px]\" />;\n              }\n              \n              const dayEvents = getEventsForDate(date);\n              const isToday = date.toDateString() === new Date().toDateString();\n              \n              return (\n                <div \n                  key={index} \n                  className={`p-2 min-h-[80px] border border-zinc-700 hover:bg-zinc-800/50 transition-colors ${\n                    isToday ? 'bg-hive-gold/10 border-hive-gold/30' : ''\n                  }`}\n                >\n                  <div className={`text-sm font-medium mb-1 ${\n                    isToday ? 'text-hive-gold' : 'text-white'\n                  }`}>\n                    {date.getDate()}\n                  </div>\n                  \n                  <div className=\"space-y-1\">\n                    {dayEvents.slice(0, 3).map((event) => (\n                      <div\n                        key={event.id}\n                        onClick={() => handleEventClick(event)}\n                        className={`text-xs p-1 rounded cursor-pointer hover:opacity-80 transition-opacity ${getEventTypeColor(event.type)} text-white`}\n                      >\n                        <div className=\"truncate font-medium\">{event.title}</div>\n                        <div className=\"truncate opacity-75\">\n                          {formatEventTime(event.datetime.start, event.datetime.end)}\n                        </div>\n                      </div>\n                    ))}\n                    {dayEvents.length > 3 && (\n                      <div className=\"text-xs text-zinc-400 text-center\">\n                        +{dayEvents.length - 3} more\n                      </div>\n                    )}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </Card>\n      )}\n\n      {viewMode === 'list' && (\n        <div className=\"space-y-4\">\n          {filteredEvents.map((event) => (\n            <Card \n              key={event.id} \n              className=\"p-6 bg-zinc-800/50 border-zinc-700 hover:bg-zinc-800/70 transition-colors cursor-pointer\"\n              onClick={() => handleEventClick(event)}\n            >\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex items-start space-x-4 flex-1\">\n                  <div className={`w-12 h-12 ${getEventTypeColor(event.type)} rounded-xl flex items-center justify-center flex-shrink-0`}>\n                    <Calendar className=\"h-6 w-6 text-white\" />\n                  </div>\n                  \n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center space-x-2 mb-1\">\n                      <h3 className=\"text-lg font-semibold text-white\">{event.title}</h3>\n                      {event.isRecurring && (\n                        <Badge variant=\"skill-tag\" className=\"text-xs\">\n                          Recurring\n                        </Badge>\n                      )}\n                      {event.spaceIntegration.isJointEvent && (\n                        <Badge variant=\"building-tools\" className=\"text-xs\">\n                          Joint Event\n                        </Badge>\n                      )}\n                      {event.isBookmarked && <Star className=\"h-4 w-4 text-hive-gold fill-current\" />}\n                    </div>\n                    \n                    <p className=\"text-zinc-400 text-sm mb-3 line-clamp-2\">{event.description}</p>\n                    \n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\n                      <div className=\"flex items-center space-x-2\">\n                        <Clock className=\"h-4 w-4 text-zinc-400\" />\n                        <div>\n                          <div className=\"text-white font-medium\">\n                            {new Date(event.datetime.start).toLocaleDateString()}\n                          </div>\n                          <div className=\"text-zinc-400\">\n                            {formatEventTime(event.datetime.start, event.datetime.end)}\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex items-center space-x-2\">\n                        <MapPin className=\"h-4 w-4 text-zinc-400\" />\n                        <div>\n                          <div className=\"text-white font-medium capitalize\">\n                            {event.location.type}\n                          </div>\n                          <div className=\"text-zinc-400 truncate\">{event.location.name}</div>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex items-center space-x-2\">\n                        <Users className=\"h-4 w-4 text-zinc-400\" />\n                        <div>\n                          <div className=\"text-white font-medium\">\n                            {event.engagement.going}/{event.capacity.max}\n                          </div>\n                          <div className=\"text-zinc-400\">attending</div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center space-x-2 flex-shrink-0\">\n                  {event.spaceIntegration.spaceTools.length > 0 && (\n                    <Badge variant=\"skill-tag\" className=\"text-xs\">\n                      {event.spaceIntegration.spaceTools.length} tools\n                    </Badge>\n                  )}\n                  <Button variant=\"ghost\" size=\"sm\" className=\"text-zinc-400 hover:text-white\">\n                    <ExternalLink className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center justify-between pt-3 border-t border-zinc-700\">\n                <div className=\"flex items-center space-x-2 text-sm text-zinc-400\">\n                  <span>by @{event.organizer.handle}</span>\n                  {event.organizer.verified && <Star className=\"h-3 w-3 text-hive-gold fill-current\" />}\n                  <Badge variant=\"skill-tag\" className=\"text-xs capitalize\">\n                    {event.type}\n                  </Badge>\n                </div>\n                \n                <div className=\"flex items-center space-x-4 text-sm text-zinc-400\">\n                  <div className=\"flex items-center space-x-1\">\n                    <Users className=\"h-3 w-3\" />\n                    <span>{event.engagement.going}</span>\n                  </div>\n                  <div className=\"flex items-center space-x-1\">\n                    <Star className=\"h-3 w-3\" />\n                    <span>{event.engagement.interested}</span>\n                  </div>\n                  {event.spaceIntegration.autoToolLaunch && (\n                    <Badge variant=\"building-tools\" className=\"text-xs\">\n                      Auto-Launch Tools\n                    </Badge>\n                  )}\n                </div>\n              </div>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      {/* Event Details Modal */}\n      <HiveModal\n        isOpen={showEventDetails}\n        onClose={() => setShowEventDetails(false)}\n        title={selectedEvent?.title || ''}\n        size=\"lg\"\n      >\n        {selectedEvent && (\n          <div className=\"space-y-6\">\n            {/* Event Header */}\n            <div className=\"flex items-start justify-between\">\n              <div className=\"flex-1\">\n                <div className=\"flex items-center space-x-2 mb-2\">\n                  <Badge variant=\"skill-tag\" className=\"capitalize\">\n                    {selectedEvent.type}\n                  </Badge>\n                  {selectedEvent.spaceIntegration.isJointEvent && (\n                    <Badge variant=\"building-tools\">Joint Event</Badge>\n                  )}\n                  {selectedEvent.isRecurring && (\n                    <Badge variant=\"skill-tag\">Recurring</Badge>\n                  )}\n                </div>\n                <p className=\"text-zinc-300 mb-4\">{selectedEvent.description}</p>\n              </div>\n              \n              <div className=\"flex items-center space-x-2\">\n                {selectedEvent.isBookmarked && <Star className=\"h-5 w-5 text-hive-gold fill-current\" />}\n                <Button variant=\"ghost\" size=\"sm\">\n                  <Share2 className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </div>\n            \n            {/* Event Details Grid */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"space-y-4\">\n                <div>\n                  <h4 className=\"font-medium text-white mb-2\">Date & Time</h4>\n                  <div className=\"flex items-center space-x-2 text-sm text-zinc-300\">\n                    <Clock className=\"h-4 w-4 text-zinc-400\" />\n                    <div>\n                      <div>{new Date(selectedEvent.datetime.start).toLocaleDateString()}</div>\n                      <div className=\"text-zinc-400\">\n                        {formatEventTime(selectedEvent.datetime.start, selectedEvent.datetime.end)}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                \n                <div>\n                  <h4 className=\"font-medium text-white mb-2\">Location</h4>\n                  <div className=\"flex items-center space-x-2 text-sm text-zinc-300\">\n                    <MapPin className=\"h-4 w-4 text-zinc-400\" />\n                    <div>\n                      <div className=\"capitalize\">{selectedEvent.location.type}</div>\n                      <div className=\"text-zinc-400\">{selectedEvent.location.name}</div>\n                    </div>\n                  </div>\n                </div>\n                \n                <div>\n                  <h4 className=\"font-medium text-white mb-2\">Capacity</h4>\n                  <div className=\"flex items-center space-x-2 text-sm text-zinc-300\">\n                    <Users className=\"h-4 w-4 text-zinc-400\" />\n                    <div>\n                      <div>{selectedEvent.engagement.going}/{selectedEvent.capacity.max} attending</div>\n                      {selectedEvent.capacity.waitlist > 0 && (\n                        <div className=\"text-zinc-400\">{selectedEvent.capacity.waitlist} on waitlist</div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"space-y-4\">\n                <div>\n                  <h4 className=\"font-medium text-white mb-2\">Space Integration</h4>\n                  <div className=\"space-y-2\">\n                    {selectedEvent.spaceIntegration.spaceTools.length > 0 && (\n                      <div>\n                        <span className=\"text-sm text-zinc-400\">Available Tools:</span>\n                        <div className=\"flex flex-wrap gap-1 mt-1\">\n                          {selectedEvent.spaceIntegration.spaceTools.map((tool) => (\n                            <Badge key={tool} variant=\"skill-tag\" className=\"text-xs\">\n                              {tool}\n                            </Badge>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                    \n                    {selectedEvent.spaceIntegration.autoToolLaunch && (\n                      <div className=\"flex items-center space-x-2 text-sm text-green-400\">\n                        <CheckCircle className=\"h-4 w-4\" />\n                        <span>Tools will auto-launch when event starts</span>\n                      </div>\n                    )}\n                    \n                    {selectedEvent.spaceIntegration.partnerSpaces && (\n                      <div>\n                        <span className=\"text-sm text-zinc-400\">Partner Spaces:</span>\n                        <div className=\"flex flex-wrap gap-1 mt-1\">\n                          {selectedEvent.spaceIntegration.partnerSpaces.map((space) => (\n                            <Badge key={space} variant=\"building-tools\" className=\"text-xs\">\n                              {space}\n                            </Badge>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n                \n                <div>\n                  <h4 className=\"font-medium text-white mb-2\">Organizer</h4>\n                  <div className=\"flex items-center space-x-2\">\n                    <div className=\"w-8 h-8 bg-zinc-600 rounded-full flex items-center justify-center\">\n                      <span className=\"text-white text-xs font-medium\">\n                        {selectedEvent.organizer.name.split(' ').map(n => n[0]).join('')}\n                      </span>\n                    </div>\n                    <div>\n                      <div className=\"text-white text-sm\">{selectedEvent.organizer.name}</div>\n                      <div className=\"text-zinc-400 text-xs\">@{selectedEvent.organizer.handle}</div>\n                    </div>\n                    {selectedEvent.organizer.verified && (\n                      <Star className=\"h-4 w-4 text-hive-gold fill-current\" />\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            {/* RSVP Actions */}\n            <div className=\"flex items-center justify-between pt-4 border-t border-zinc-800\">\n              <div className=\"flex items-center space-x-2\">\n                <Button\n                  variant={selectedEvent.rsvpStatus === 'going' ? 'primary' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => handleRSVP(selectedEvent.id, 'going')}\n                  className={selectedEvent.rsvpStatus === 'going' ? 'bg-green-500 hover:bg-green-600' : ''}\n                >\n                  Going\n                </Button>\n                <Button\n                  variant={selectedEvent.rsvpStatus === 'interested' ? 'primary' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => handleRSVP(selectedEvent.id, 'interested')}\n                  className={selectedEvent.rsvpStatus === 'interested' ? 'bg-blue-500 hover:bg-blue-600' : ''}\n                >\n                  Interested\n                </Button>\n              </div>\n              \n              <div className=\"flex items-center space-x-2\">\n                <Button variant=\"outline\" size=\"sm\">\n                  <Bell className=\"h-4 w-4 mr-1\" />\n                  Remind Me\n                </Button>\n                <Button variant=\"outline\" size=\"sm\">\n                  <Calendar className=\"h-4 w-4 mr-1\" />\n                  Add to Calendar\n                </Button>\n              </div>\n            </div>\n          </div>\n        )}\n      </HiveModal>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/spaces/space-member-management.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'MoreHorizontal' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"MoreHorizontal"},"fix":{"range":[198,217],"text":""},"desc":"Remove unused variable 'MoreHorizontal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Filter' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Filter"},"fix":{"range":[228,238],"text":""},"desc":"Remove unused variable 'Filter'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'XCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"XCircle"},"fix":{"range":[282,293],"text":""},"desc":"Remove unused variable 'XCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Mail' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Mail"},"fix":{"range":[293,301],"text":""},"desc":"Remove unused variable 'Mail'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'MessageSquare' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"MessageSquare"},"fix":{"range":[301,318],"text":""},"desc":"Remove unused variable 'MessageSquare'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'EyeOff' is defined but never used. Allowed unused vars must match /^_/u.","line":22,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"EyeOff"},"fix":{"range":[325,335],"text":""},"desc":"Remove unused variable 'EyeOff'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Star' is defined but never used. Allowed unused vars must match /^_/u.","line":25,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Star"},"fix":{"range":[355,363],"text":""},"desc":"Remove unused variable 'Star'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Calendar' is defined but never used. Allowed unused vars must match /^_/u.","line":26,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Calendar"},"fix":{"range":[363,375],"text":""},"desc":"Remove unused variable 'Calendar'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Activity' is defined but never used. Allowed unused vars must match /^_/u.","line":27,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Activity"},"fix":{"range":[375,387],"text":""},"desc":"Remove unused variable 'Activity'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used. Allowed unused vars must match /^_/u.","line":28,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"TrendingUp"},"fix":{"range":[387,401],"text":""},"desc":"Remove unused variable 'TrendingUp'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Clock' is defined but never used. Allowed unused vars must match /^_/u.","line":29,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Clock"},"fix":{"range":[401,410],"text":""},"desc":"Remove unused variable 'Clock'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'MapPin' is defined but never used. Allowed unused vars must match /^_/u.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"MapPin"},"fix":{"range":[410,420],"text":""},"desc":"Remove unused variable 'MapPin'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ExternalLink' is defined but never used. Allowed unused vars must match /^_/u.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"ExternalLink"},"fix":{"range":[420,436],"text":""},"desc":"Remove unused variable 'ExternalLink'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Download' is defined but never used. Allowed unused vars must match /^_/u.","line":32,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Download"},"fix":{"range":[436,448],"text":""},"desc":"Remove unused variable 'Download'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Upload' is defined but never used. Allowed unused vars must match /^_/u.","line":33,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Upload"},"fix":{"range":[448,458],"text":""},"desc":"Remove unused variable 'Upload'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":34,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Trash2"},"fix":{"range":[458,468],"text":""},"desc":"Remove unused variable 'Trash2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Edit3' is defined but never used. Allowed unused vars must match /^_/u.","line":35,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Edit3"},"fix":{"range":[468,477],"text":""},"desc":"Remove unused variable 'Edit3'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Save' is defined but never used. Allowed unused vars must match /^_/u.","line":36,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Save"},"fix":{"range":[477,485],"text":""},"desc":"Remove unused variable 'Save'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Plus' is defined but never used. Allowed unused vars must match /^_/u.","line":38,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Plus"},"fix":{"range":[490,498],"text":""},"desc":"Remove unused variable 'Plus'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Alert' is defined but never used. Allowed unused vars must match /^_/u.","line":42,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Alert"},"fix":{"range":[565,613],"text":""},"desc":"Remove unused variable 'Alert'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'showMemberDetails' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":124,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":124,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"showMemberDetails"},"fix":{"range":[2645,2662],"text":""},"desc":"Remove unused variable 'showMemberDetails'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'showInviteModal' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":126,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":126,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"showInviteModal"},"fix":{"range":[2787,2802],"text":""},"desc":"Remove unused variable 'showInviteModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":128,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":128,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[2904,2909],"text":""},"desc":"Remove unused variable 'error'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'canSuspendMembers' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":133,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":133,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"canSuspendMembers"},"fix":{"range":[3152,3207],"text":""},"desc":"Remove unused variable 'canSuspendMembers'."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":472,"column":23,"nodeType":"JSXOpeningElement","endLine":476,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":25,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  Users, \n  Crown, \n  Shield, \n  User, \n  UserPlus, \n  UserMinus, \n  MoreHorizontal, \n  Search,\n  Filter,\n  Settings,\n  AlertTriangle,\n  CheckCircle,\n  XCircle,\n  Mail,\n  MessageSquare,\n  Eye,\n  EyeOff,\n  Ban,\n  UserCheck,\n  Star,\n  Calendar,\n  Activity,\n  TrendingUp,\n  Clock,\n  MapPin,\n  ExternalLink,\n  Download,\n  Upload,\n  Trash2,\n  Edit3,\n  Save,\n  X,\n  Plus\n} from 'lucide-react';\nimport { Button, Badge } from \"@hive/ui\";\n\nimport { Alert } from \"@/components/temp-stubs\";\n// Space Member Management Interface for Claimed Leaders\nexport interface MemberManagementProps {\n  spaceId: string;\n  spaceName: string;\n  currentUserRole: 'admin' | 'owner' | 'moderator';\n  onClose?: () => void;\n}\n\ninterface MemberData {\n  id: string;\n  name: string;\n  username: string;\n  email?: string;\n  avatar?: string;\n  role: 'owner' | 'admin' | 'moderator' | 'member';\n  status: 'active' | 'inactive' | 'suspended';\n  joinedAt: Date;\n  lastActive: Date;\n  stats: {\n    postsCount: number;\n    eventsAttended: number;\n    contributionScore: number;\n  };\n  permissions: {\n    canPost: boolean;\n    canCreateEvents: boolean;\n    canInviteMembers: boolean;\n    canModerate: boolean;\n  };\n  flags?: {\n    isReported: boolean;\n    warningCount: number;\n    isSuspended: boolean;\n  };\n}\n\nconst roleHierarchy = {\n  owner: 4,\n  admin: 3,\n  moderator: 2,\n  member: 1\n};\n\nconst roleConfig = {\n  owner: {\n    label: 'Owner',\n    color: 'text-yellow-400',\n    bg: 'bg-yellow-500/20',\n    icon: Crown,\n    description: 'Full space control'\n  },\n  admin: {\n    label: 'Admin',\n    color: 'text-purple-400',\n    bg: 'bg-purple-500/20',\n    icon: Shield,\n    description: 'Management permissions'\n  },\n  moderator: {\n    label: 'Moderator',\n    color: 'text-blue-400',\n    bg: 'bg-blue-500/20',\n    icon: UserCheck,\n    description: 'Content moderation'\n  },\n  member: {\n    label: 'Member',\n    color: 'text-green-400',\n    bg: 'bg-green-500/20',\n    icon: User,\n    description: 'Standard access'\n  }\n};\n\nexport function SpaceMemberManagement({ spaceId, spaceName, currentUserRole, onClose }: MemberManagementProps) {\n  const [members, setMembers] = useState<MemberData[]>([]);\n  const [filteredMembers, setFilteredMembers] = useState<MemberData[]>([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedRole, setSelectedRole] = useState<string>('all');\n  const [selectedStatus, setSelectedStatus] = useState<string>('all');\n  const [selectedMember, setSelectedMember] = useState<MemberData | null>(null);\n  const [showMemberDetails, setShowMemberDetails] = useState(false);\n  const [showRoleChangeModal, setShowRoleChangeModal] = useState(false);\n  const [showInviteModal, setShowInviteModal] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Permission checks\n  const canChangeRoles = currentUserRole === 'owner' || currentUserRole === 'admin';\n  const canRemoveMembers = currentUserRole === 'owner' || currentUserRole === 'admin';\n  const canSuspendMembers = currentUserRole !== 'member';\n  const canInviteMembers = currentUserRole !== 'member';\n\n  // Fetch members from API\n  useEffect(() => {\n    const fetchMembers = async () => {\n      try {\n        setIsLoading(true);\n        const token = localStorage.getItem('hive_session');\n        const session = token ? JSON.parse(token) : null;\n        \n        const response = await fetch(`/api/spaces/${spaceId}/members?management=true`, {\n          headers: {\n            'Authorization': `Bearer ${process.env.NODE_ENV === 'development' ? 'test-token' : session?.token}`,\n            'Content-Type': 'application/json',\n          },\n        });\n        \n        if (!response.ok) {\n          throw new Error('Failed to fetch members');\n        }\n        \n        const data = await response.json();\n        const membersWithStats = data.members.map((member: any) => ({\n          ...member,\n          joinedAt: new Date(member.joinedAt),\n          lastActive: new Date(member.lastActive || member.joinedAt),\n          stats: member.stats || {\n            postsCount: 0,\n            eventsAttended: 0,\n            contributionScore: 0,\n          },\n          permissions: member.permissions || {\n            canPost: true,\n            canCreateEvents: member.role !== 'member',\n            canInviteMembers: member.role !== 'member',\n            canModerate: ['owner', 'admin', 'moderator'].includes(member.role),\n          },\n          flags: member.flags || {\n            isReported: false,\n            warningCount: 0,\n            isSuspended: false,\n          }\n        }));\n        \n        setMembers(membersWithStats);\n      } catch (error) {\n        console.error('Failed to fetch members:', error);\n        setError(error instanceof Error ? error.message : 'Failed to fetch members');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchMembers();\n  }, [spaceId]);\n\n  // Filter members based on search and filters\n  useEffect(() => {\n    let filtered = members;\n\n    // Search filter\n    if (searchQuery) {\n      filtered = filtered.filter(member =>\n        member.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        member.username.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        member.email?.toLowerCase().includes(searchQuery.toLowerCase())\n      );\n    }\n\n    // Role filter\n    if (selectedRole !== 'all') {\n      filtered = filtered.filter(member => member.role === selectedRole);\n    }\n\n    // Status filter\n    if (selectedStatus !== 'all') {\n      filtered = filtered.filter(member => member.status === selectedStatus);\n    }\n\n    // Sort by role hierarchy, then by join date\n    filtered.sort((a, b) => {\n      const roleA = roleHierarchy[a.role as keyof typeof roleHierarchy];\n      const roleB = roleHierarchy[b.role as keyof typeof roleHierarchy];\n      \n      if (roleA !== roleB) {\n        return roleB - roleA; // Higher roles first\n      }\n      \n      return a.joinedAt.getTime() - b.joinedAt.getTime(); // Earlier joiners first\n    });\n\n    setFilteredMembers(filtered);\n  }, [members, searchQuery, selectedRole, selectedStatus]);\n\n  const handleRoleChange = async (memberId: string, newRole: string) => {\n    try {\n      const token = localStorage.getItem('hive_session');\n      const session = token ? JSON.parse(token) : null;\n      \n      const response = await fetch(`/api/spaces/${spaceId}/members/${memberId}/role`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${process.env.NODE_ENV === 'development' ? 'test-token' : session?.token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ role: newRole }),\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to change role');\n      }\n      \n      // Update local state\n      setMembers(prev => prev.map(member =>\n        member.id === memberId \n          ? { ...member, role: newRole as any }\n          : member\n      ));\n      \n      setShowRoleChangeModal(false);\n      setSelectedMember(null);\n    } catch (error) {\n      console.error('Failed to change role:', error);\n      alert('Failed to change member role');\n    }\n  };\n\n  const handleRemoveMember = async (memberId: string) => {\n    if (!confirm('Are you sure you want to remove this member from the space?')) {\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('hive_session');\n      const session = token ? JSON.parse(token) : null;\n      \n      const response = await fetch(`/api/spaces/${spaceId}/members/${memberId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${process.env.NODE_ENV === 'development' ? 'test-token' : session?.token}`,\n          'Content-Type': 'application/json',\n        },\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to remove member');\n      }\n      \n      // Update local state\n      setMembers(prev => prev.filter(member => member.id !== memberId));\n    } catch (error) {\n      console.error('Failed to remove member:', error);\n      alert('Failed to remove member');\n    }\n  };\n\n  const handleSuspendMember = async (memberId: string, suspend: boolean) => {\n    try {\n      const token = localStorage.getItem('hive_session');\n      const session = token ? JSON.parse(token) : null;\n      \n      const response = await fetch(`/api/spaces/${spaceId}/members/${memberId}/suspend`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${process.env.NODE_ENV === 'development' ? 'test-token' : session?.token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ suspended: suspend }),\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to update suspension status');\n      }\n      \n      // Update local state\n      setMembers(prev => prev.map(member =>\n        member.id === memberId \n          ? { \n              ...member, \n              status: suspend ? 'suspended' : 'active',\n              flags: { ...member.flags, isSuspended: suspend }\n            }\n          : member\n      ));\n    } catch (error) {\n      console.error('Failed to update suspension:', error);\n      alert('Failed to update member status');\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n        <div className=\"bg-[#0A0A0A] border border-white/[0.1] rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden\">\n          <div className=\"p-6\">\n            <div className=\"animate-pulse\">\n              <div className=\"h-6 bg-gray-600 rounded w-48 mb-4\"></div>\n              <div className=\"space-y-4\">\n                {Array.from({ length: 5 }).map((_, i) => (\n                  <div key={i} className=\"flex items-center gap-4\">\n                    <div className=\"w-12 h-12 bg-gray-600 rounded-full\"></div>\n                    <div className=\"flex-1\">\n                      <div className=\"h-4 bg-gray-600 rounded w-32 mb-2\"></div>\n                      <div className=\"h-3 bg-gray-700 rounded w-24\"></div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n      <motion.div\n        className=\"bg-[#0A0A0A] border border-white/[0.1] rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden\"\n        initial={{ scale: 0.9, opacity: 0 }}\n        animate={{ scale: 1, opacity: 1 }}\n        exit={{ scale: 0.9, opacity: 0 }}\n      >\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-white/[0.06]\">\n          <div className=\"flex items-center gap-3\">\n            <Users className=\"h-6 w-6 text-[#FFD700]\" />\n            <div>\n              <h2 className=\"text-xl font-semibold text-white\">Member Management</h2>\n              <p className=\"text-sm text-gray-400\">{spaceName} â€¢ {members.length} members</p>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center gap-2\">\n            {canInviteMembers && (\n              <Button\n                size=\"sm\"\n                className=\"bg-[#FFD700]/20 text-[#FFD700] border-[#FFD700]/30 hover:bg-[#FFD700]/30\"\n                onClick={() => setShowInviteModal(true)}\n              >\n                <UserPlus className=\"h-4 w-4 mr-2\" />\n                Invite Members\n              </Button>\n            )}\n            \n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"border-white/[0.2] text-white hover:bg-white/[0.1]\"\n              onClick={onClose}\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n\n        {/* Filters */}\n        <div className=\"p-6 border-b border-white/[0.06]\">\n          <div className=\"flex items-center gap-4 mb-4\">\n            {/* Search */}\n            <div className=\"relative flex-1\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n              <input\n                type=\"text\"\n                placeholder=\"Search members...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"w-full pl-10 pr-4 py-2 bg-white/[0.02] border border-white/[0.06] rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#FFD700]/50 focus:border-[#FFD700]/30\"\n              />\n            </div>\n\n            {/* Role Filter */}\n            <select\n              value={selectedRole}\n              onChange={(e) => setSelectedRole(e.target.value)}\n              className=\"px-3 py-2 bg-white/[0.02] border border-white/[0.06] rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-[#FFD700]/50\"\n            >\n              <option value=\"all\">All Roles</option>\n              <option value=\"owner\">Owners</option>\n              <option value=\"admin\">Admins</option>\n              <option value=\"moderator\">Moderators</option>\n              <option value=\"member\">Members</option>\n            </select>\n\n            {/* Status Filter */}\n            <select\n              value={selectedStatus}\n              onChange={(e) => setSelectedStatus(e.target.value)}\n              className=\"px-3 py-2 bg-white/[0.02] border border-white/[0.06] rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-[#FFD700]/50\"\n            >\n              <option value=\"all\">All Status</option>\n              <option value=\"active\">Active</option>\n              <option value=\"inactive\">Inactive</option>\n              <option value=\"suspended\">Suspended</option>\n            </select>\n          </div>\n\n          {/* Stats */}\n          <div className=\"flex items-center gap-6 text-sm text-gray-400\">\n            <div className=\"flex items-center gap-2\">\n              <Users className=\"w-4 h-4\" />\n              <span>{filteredMembers.length} showing</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Crown className=\"w-4 h-4 text-yellow-400\" />\n              <span>{members.filter(m => m.role === 'owner').length} owners</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Shield className=\"w-4 h-4 text-purple-400\" />\n              <span>{members.filter(m => m.role === 'admin').length} admins</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <AlertTriangle className=\"w-4 h-4 text-red-400\" />\n              <span>{members.filter(m => m.flags?.isSuspended).length} suspended</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Members List */}\n        <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-300px)]\">\n          <div className=\"space-y-3\">\n            {filteredMembers.map((member) => {\n              const config = roleConfig[member.role];\n              const RoleIcon = config.icon;\n              const canManageMember = canChangeRoles && \n                roleHierarchy[currentUserRole as keyof typeof roleHierarchy] > roleHierarchy[member.role as keyof typeof roleHierarchy];\n\n              return (\n                <motion.div\n                  key={member.id}\n                  className=\"flex items-center gap-4 p-4 bg-white/[0.02] border border-white/[0.06] rounded-xl hover:border-white/[0.1] transition-all\"\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  layout\n                >\n                  {/* Avatar */}\n                  <div className=\"flex-shrink-0\">\n                    {member.avatar ? (\n                      <img\n                        src={member.avatar}\n                        alt=\"\"\n                        className=\"w-12 h-12 rounded-full object-cover\"\n                      />\n                    ) : (\n                      <div className=\"w-12 h-12 bg-gradient-to-br from-gray-500/20 to-gray-700/20 rounded-full flex items-center justify-center\">\n                        <span className=\"text-sm font-medium text-white\">\n                          {member.name.charAt(0).toUpperCase()}\n                        </span>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Member Info */}\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <h4 className=\"font-medium text-white truncate\">{member.name}</h4>\n                      <span className=\"text-sm text-gray-400\">@{member.username}</span>\n                      \n                      {/* Role Badge */}\n                      <div className={`flex items-center gap-1 px-2 py-1 rounded-full text-xs ${config.bg} ${config.color}`}>\n                        <RoleIcon className=\"w-3 h-3\" />\n                        <span>{config.label}</span>\n                      </div>\n\n                      {/* Status Indicators */}\n                      {member.flags?.isSuspended && (\n                        <Badge variant=\"outline\" className=\"border-red-500/30 text-red-400\">\n                          Suspended\n                        </Badge>\n                      )}\n                      \n                      {member.flags?.isReported && (\n                        <Badge variant=\"outline\" className=\"border-orange-500/30 text-orange-400\">\n                          Reported\n                        </Badge>\n                      )}\n                    </div>\n                    \n                    <div className=\"flex items-center gap-4 text-xs text-gray-400\">\n                      <span>Joined {member.joinedAt.toLocaleDateString()}</span>\n                      <span>â€¢</span>\n                      <span>{member.stats.postsCount} posts</span>\n                      <span>â€¢</span>\n                      <span>{member.stats.eventsAttended} events</span>\n                      <span>â€¢</span>\n                      <span>Score: {member.stats.contributionScore}</span>\n                    </div>\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"flex items-center gap-2\">\n                    {/* View Details */}\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      className=\"border-white/[0.2] text-white hover:bg-white/[0.1]\"\n                      onClick={() => {\n                        setSelectedMember(member);\n                        setShowMemberDetails(true);\n                      }}\n                    >\n                      <Eye className=\"h-4 w-4\" />\n                    </Button>\n\n                    {canManageMember && (\n                      <>\n                        {/* Change Role */}\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          className=\"border-blue-500/30 text-blue-400 hover:bg-blue-500/10\"\n                          onClick={() => {\n                            setSelectedMember(member);\n                            setShowRoleChangeModal(true);\n                          }}\n                        >\n                          <Settings className=\"h-4 w-4\" />\n                        </Button>\n\n                        {/* Suspend/Unsuspend */}\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          className={member.flags?.isSuspended \n                            ? \"border-green-500/30 text-green-400 hover:bg-green-500/10\"\n                            : \"border-orange-500/30 text-orange-400 hover:bg-orange-500/10\"\n                          }\n                          onClick={() => handleSuspendMember(member.id, !member.flags?.isSuspended)}\n                        >\n                          {member.flags?.isSuspended ? <CheckCircle className=\"h-4 w-4\" /> : <Ban className=\"h-4 w-4\" />}\n                        </Button>\n\n                        {/* Remove Member */}\n                        {canRemoveMembers && member.role !== 'owner' && (\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            className=\"border-red-500/30 text-red-400 hover:bg-red-500/10\"\n                            onClick={() => handleRemoveMember(member.id)}\n                          >\n                            <UserMinus className=\"h-4 w-4\" />\n                          </Button>\n                        )}\n                      </>\n                    )}\n                  </div>\n                </motion.div>\n              );\n            })}\n          </div>\n        </div>\n      </motion.div>\n\n      {/* Role Change Modal */}\n      <AnimatePresence>\n        {showRoleChangeModal && selectedMember && (\n          <motion.div\n            className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-60 flex items-center justify-center p-4\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n          >\n            <motion.div\n              className=\"bg-[#0A0A0A] border border-white/[0.1] rounded-2xl p-6 w-full max-w-md\"\n              initial={{ scale: 0.9 }}\n              animate={{ scale: 1 }}\n              exit={{ scale: 0.9 }}\n            >\n              <h3 className=\"text-lg font-semibold text-white mb-4\">Change Member Role</h3>\n              <p className=\"text-sm text-gray-400 mb-6\">\n                Change role for <strong>{selectedMember.name}</strong>\n              </p>\n\n              <div className=\"space-y-3 mb-6\">\n                {Object.entries(roleConfig).map(([role, config]) => {\n                  const Icon = config.icon;\n                  const canAssign = roleHierarchy[currentUserRole as keyof typeof roleHierarchy] > roleHierarchy[role as keyof typeof roleHierarchy];\n                  \n                  return (\n                    <button\n                      key={role}\n                      className={`w-full flex items-center gap-3 p-3 rounded-lg border transition-all ${\n                        selectedMember.role === role\n                          ? 'bg-blue-500/20 border-blue-500/30 text-blue-400'\n                          : canAssign\n                          ? 'bg-white/[0.02] border-white/[0.06] text-white hover:border-white/[0.1]'\n                          : 'bg-gray-500/10 border-gray-500/20 text-gray-500 cursor-not-allowed'\n                      }`}\n                      onClick={() => canAssign && handleRoleChange(selectedMember.id, role)}\n                      disabled={!canAssign}\n                    >\n                      <Icon className=\"w-5 h-5\" />\n                      <div className=\"text-left\">\n                        <div className=\"font-medium\">{config.label}</div>\n                        <div className=\"text-xs opacity-70\">{config.description}</div>\n                      </div>\n                    </button>\n                  );\n                })}\n              </div>\n\n              <div className=\"flex gap-3\">\n                <Button\n                  variant=\"outline\"\n                  className=\"flex-1 border-white/[0.2] text-white hover:bg-white/[0.1]\"\n                  onClick={() => {\n                    setShowRoleChangeModal(false);\n                    setSelectedMember(null);\n                  }}\n                >\n                  Cancel\n                </Button>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/spaces/space-resource-manager.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Calendar' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Calendar"},"fix":{"range":[131,140],"text":""},"desc":"Remove unused variable 'Calendar'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Projector' is defined but never used. Allowed unused vars must match /^_/u.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"Projector"},"fix":{"range":[230,244],"text":""},"desc":"Remove unused variable 'Projector'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Coffee' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Coffee"},"fix":{"range":[244,255],"text":""},"desc":"Remove unused variable 'Coffee'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Wifi' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Wifi"},"fix":{"range":[255,264],"text":""},"desc":"Remove unused variable 'Wifi'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Edit' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Edit"},"fix":{"range":[273,282],"text":""},"desc":"Remove unused variable 'Edit'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Trash2"},"fix":{"range":[282,293],"text":""},"desc":"Remove unused variable 'Trash2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertCircle"},"fix":{"range":[317,333],"text":""},"desc":"Remove unused variable 'AlertCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Download' is defined but never used. Allowed unused vars must match /^_/u.","line":26,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Download"},"fix":{"range":[354,366],"text":""},"desc":"Remove unused variable 'Download'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Share2' is defined but never used. Allowed unused vars must match /^_/u.","line":27,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Share2"},"fix":{"range":[366,376],"text":""},"desc":"Remove unused variable 'Share2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'BookmarkPlus' is defined but never used. Allowed unused vars must match /^_/u.","line":28,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"BookmarkPlus"},"fix":{"range":[376,392],"text":""},"desc":"Remove unused variable 'BookmarkPlus'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'resourceId' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":65,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"resourceId"},"fix":{"range":[1177,1195],"text":""},"desc":"Remove unused variable 'resourceId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'resourceId' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":66,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":66,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"resourceId"},"fix":{"range":[1226,1244],"text":""},"desc":"Remove unused variable 'resourceId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'showBookingModal' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":79,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":79,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"showBookingModal"},"fix":{"range":[1624,1640],"text":""},"desc":"Remove unused variable 'showBookingModal'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Card, Button, Badge, HiveModal } from \"@hive/ui\";\nimport { \n  Calendar, \n  Clock, \n  MapPin, \n  Users, \n  Wrench, \n  FileText, \n  BookOpen, \n  Laptop, \n  Monitor, \n  Projector, \n  Coffee, \n  Wifi, \n  Plus, \n  Edit, \n  Trash2, \n  Eye, \n  CheckCircle, \n  AlertCircle, \n  Search,\n  Filter,\n  Download,\n  Share2,\n  BookmarkPlus\n} from \"lucide-react\";\n\ninterface Resource {\n  id: string;\n  name: string;\n  type: 'room' | 'equipment' | 'document' | 'tool' | 'digital';\n  description: string;\n  location?: string;\n  capacity?: number;\n  availability: 'available' | 'busy' | 'maintenance' | 'reserved';\n  owner: {\n    id: string;\n    name: string;\n    handle: string;\n  };\n  bookings: {\n    id: string;\n    eventId?: string;\n    toolId?: string;\n    userId: string;\n    userName: string;\n    startTime: string;\n    endTime: string;\n    purpose: string;\n  }[];\n  tags: string[];\n  requirements?: string[];\n  features?: string[];\n  createdAt: string;\n  updatedAt: string;\n}\n\ninterface SpaceResourceManagerProps {\n  spaceId: string;\n  spaceName: string;\n  userRole: 'admin' | 'moderator' | 'member';\n  onCreateEvent?: (resourceId: string) => void;\n  onBookResource?: (resourceId: string) => void;\n}\n\nexport function SpaceResourceManager({ \n  spaceId, \n  spaceName, \n  userRole, \n  onCreateEvent, \n  onBookResource \n}: SpaceResourceManagerProps) {\n  const [resources, setResources] = useState<Resource[]>([]);\n  const [selectedResource, setSelectedResource] = useState<Resource | null>(null);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [showBookingModal, setShowBookingModal] = useState(false);\n  const [selectedType, setSelectedType] = useState<'all' | Resource['type']>('all');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    fetchResources();\n  }, [spaceId]);\n\n  const fetchResources = async () => {\n    setIsLoading(true);\n    // Simulate API call\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    \n    const mockResources: Resource[] = [\n      {\n        id: '1',\n        name: 'Study Room A',\n        type: 'room',\n        description: 'Quiet study room with whiteboard and projector',\n        location: 'Library 2nd Floor',\n        capacity: 8,\n        availability: 'available',\n        owner: { id: '1', name: 'CS Department', handle: 'cs_dept' },\n        bookings: [\n          {\n            id: '1',\n            eventId: 'evt_1',\n            userId: '2',\n            userName: 'Sarah Chen',\n            startTime: '2024-02-15T14:00:00Z',\n            endTime: '2024-02-15T16:00:00Z',\n            purpose: 'Algorithm Study Session'\n          }\n        ],\n        tags: ['quiet', 'whiteboard', 'projector'],\n        features: ['Whiteboard', 'Projector', 'WiFi', '8 seats'],\n        createdAt: '2024-01-15T10:00:00Z',\n        updatedAt: '2024-02-01T14:30:00Z'\n      },\n      {\n        id: '2',\n        name: 'MacBook Pro (Development)',\n        type: 'equipment',\n        description: 'MacBook Pro for development work and presentations',\n        availability: 'available',\n        owner: { id: '1', name: 'Tech Club', handle: 'tech_club' },\n        bookings: [],\n        tags: ['development', 'presentations', 'portable'],\n        features: ['M2 Chip', '16GB RAM', '512GB SSD', 'Development Tools'],\n        createdAt: '2024-01-20T09:00:00Z',\n        updatedAt: '2024-01-25T11:30:00Z'\n      },\n      {\n        id: '3',\n        name: 'Data Structures Cheat Sheet',\n        type: 'document',\n        description: 'Comprehensive cheat sheet for common data structures',\n        availability: 'available',\n        owner: { id: '3', name: 'Marcus Johnson', handle: 'marcusj' },\n        bookings: [],\n        tags: ['study-materials', 'data-structures', 'reference'],\n        features: ['PDF Format', 'Printable', 'Examples Included'],\n        createdAt: '2024-01-10T15:00:00Z',\n        updatedAt: '2024-01-12T09:00:00Z'\n      },\n      {\n        id: '4',\n        name: 'Code Review Tool',\n        type: 'digital',\n        description: 'Collaborative code review and feedback platform',\n        availability: 'available',\n        owner: { id: '4', name: 'Emma Davis', handle: 'emmad' },\n        bookings: [\n          {\n            id: '2',\n            toolId: 'tool_1',\n            userId: '5',\n            userName: 'Alex Kim',\n            startTime: '2024-02-16T10:00:00Z',\n            endTime: '2024-02-16T12:00:00Z',\n            purpose: 'Project Code Review Session'\n          }\n        ],\n        tags: ['collaboration', 'code-review', 'development'],\n        features: ['Real-time Collaboration', 'Comment System', 'Version Control'],\n        createdAt: '2024-01-25T14:00:00Z',\n        updatedAt: '2024-02-01T10:00:00Z'\n      }\n    ];\n\n    setResources(mockResources);\n    setIsLoading(false);\n  };\n\n  const filteredResources = resources.filter(resource => {\n    const matchesType = selectedType === 'all' || resource.type === selectedType;\n    const matchesSearch = searchTerm === '' || \n      resource.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      resource.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      resource.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase()));\n    \n    return matchesType && matchesSearch;\n  });\n\n  const getResourceIcon = (type: Resource['type']) => {\n    switch (type) {\n      case 'room': return MapPin;\n      case 'equipment': return Wrench;\n      case 'document': return FileText;\n      case 'tool': return Monitor;\n      case 'digital': return Laptop;\n      default: return BookOpen;\n    }\n  };\n\n  const getAvailabilityColor = (availability: Resource['availability']) => {\n    switch (availability) {\n      case 'available': return 'text-green-400';\n      case 'busy': return 'text-red-400';\n      case 'maintenance': return 'text-hive-gold';\n      case 'reserved': return 'text-blue-400';\n      default: return 'text-zinc-400';\n    }\n  };\n\n  const handleBookResource = (resource: Resource) => {\n    if (resource.type === 'room' || resource.type === 'equipment') {\n      // For physical resources, create an event\n      onCreateEvent?.(resource.id);\n    } else {\n      // For digital resources, handle booking\n      onBookResource?.(resource.id);\n    }\n    setShowBookingModal(true);\n    setSelectedResource(resource);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-6\">\n        {Array.from({ length: 4 }).map((_, i) => (\n          <Card key={i} className=\"p-6 bg-zinc-800/50 border-zinc-700\">\n            <div className=\"animate-pulse\">\n              <div className=\"h-4 bg-zinc-700 rounded w-1/3 mb-4\"></div>\n              <div className=\"space-y-2\">\n                <div className=\"h-6 bg-zinc-700 rounded\"></div>\n                <div className=\"h-4 bg-zinc-700 rounded w-2/3\"></div>\n              </div>\n            </div>\n          </Card>\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-white mb-2\">Resource Management</h2>\n          <p className=\"text-zinc-400\">Manage shared resources, equipment, and tools for {spaceName}</p>\n        </div>\n        {(userRole === 'admin' || userRole === 'moderator') && (\n          <Button \n            onClick={() => setShowCreateModal(true)}\n            className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n          >\n            <Plus className=\"h-4 w-4 mr-2\" />\n            Add Resource\n          </Button>\n        )}\n      </div>\n\n      {/* Search and Filters */}\n      <div className=\"flex flex-col sm:flex-row gap-4\">\n        <div className=\"flex-1 relative\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-zinc-400\" />\n          <input\n            type=\"text\"\n            placeholder=\"Search resources, tags, or descriptions...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"w-full pl-10 pr-4 py-2 bg-zinc-800/50 border border-zinc-700 rounded-lg text-white placeholder-zinc-400 focus:border-hive-gold focus:outline-none\"\n          />\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          <Filter className=\"h-4 w-4 text-zinc-400\" />\n          <select\n            value={selectedType}\n            onChange={(e) => setSelectedType(e.target.value as any)}\n            className=\"bg-zinc-800/50 border border-zinc-700 rounded-lg px-3 py-2 text-white focus:border-hive-gold focus:outline-none\"\n          >\n            <option value=\"all\">All Types</option>\n            <option value=\"room\">Rooms</option>\n            <option value=\"equipment\">Equipment</option>\n            <option value=\"document\">Documents</option>\n            <option value=\"tool\">Tools</option>\n            <option value=\"digital\">Digital</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Resource Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {filteredResources.map((resource) => {\n          const Icon = getResourceIcon(resource.type);\n          return (\n            <Card key={resource.id} className=\"p-6 bg-zinc-800/50 border-zinc-700 hover:border-zinc-600 transition-colors\">\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-10 h-10 bg-hive-gold/20 rounded-lg flex items-center justify-center\">\n                    <Icon className=\"h-5 w-5 text-hive-gold\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold text-white\">{resource.name}</h3>\n                    <p className=\"text-sm text-zinc-400 capitalize\">{resource.type}</p>\n                  </div>\n                </div>\n                <Badge \n                  variant=\"skill-tag\" \n                  className={`capitalize ${getAvailabilityColor(resource.availability)}`}\n                >\n                  {resource.availability}\n                </Badge>\n              </div>\n\n              <p className=\"text-sm text-zinc-300 mb-4 line-clamp-2\">{resource.description}</p>\n\n              {/* Resource Details */}\n              <div className=\"space-y-2 mb-4\">\n                {resource.location && (\n                  <div className=\"flex items-center text-sm text-zinc-400\">\n                    <MapPin className=\"h-4 w-4 mr-2\" />\n                    {resource.location}\n                  </div>\n                )}\n                {resource.capacity && (\n                  <div className=\"flex items-center text-sm text-zinc-400\">\n                    <Users className=\"h-4 w-4 mr-2\" />\n                    Capacity: {resource.capacity} people\n                  </div>\n                )}\n                <div className=\"flex items-center text-sm text-zinc-400\">\n                  <Clock className=\"h-4 w-4 mr-2\" />\n                  {resource.bookings.length} booking{resource.bookings.length !== 1 ? 's' : ''}\n                </div>\n              </div>\n\n              {/* Tags */}\n              {resource.tags.length > 0 && (\n                <div className=\"flex flex-wrap gap-1 mb-4\">\n                  {resource.tags.slice(0, 3).map((tag) => (\n                    <Badge key={tag} variant=\"skill-tag\" className=\"text-xs\">\n                      {tag}\n                    </Badge>\n                  ))}\n                  {resource.tags.length > 3 && (\n                    <Badge variant=\"skill-tag\" className=\"text-xs\">\n                      +{resource.tags.length - 3}\n                    </Badge>\n                  )}\n                </div>\n              )}\n\n              {/* Actions */}\n              <div className=\"flex items-center justify-between\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setSelectedResource(resource)}\n                  className=\"border-zinc-600 text-zinc-400 hover:text-white\"\n                >\n                  <Eye className=\"h-4 w-4 mr-2\" />\n                  View Details\n                </Button>\n                {resource.availability === 'available' && (\n                  <Button\n                    size=\"sm\"\n                    onClick={() => handleBookResource(resource)}\n                    className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n                  >\n                    {resource.type === 'room' || resource.type === 'equipment' ? 'Book' : 'Use'}\n                  </Button>\n                )}\n              </div>\n            </Card>\n          );\n        })}\n      </div>\n\n      {/* Empty State */}\n      {filteredResources.length === 0 && (\n        <Card className=\"p-12 text-center bg-zinc-800/50 border-zinc-700\">\n          <BookOpen className=\"h-16 w-16 text-zinc-600 mx-auto mb-4\" />\n          <h3 className=\"text-xl font-semibold text-white mb-2\">No Resources Found</h3>\n          <p className=\"text-zinc-400 mb-6\">\n            {searchTerm ? \n              `No resources match \"${searchTerm}\". Try different keywords.` :\n              \"No resources available for this filter. Try selecting a different type.\"\n            }\n          </p>\n          {(userRole === 'admin' || userRole === 'moderator') && (\n            <Button \n              onClick={() => setShowCreateModal(true)}\n              className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n            >\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Add First Resource\n            </Button>\n          )}\n        </Card>\n      )}\n\n      {/* Resource Details Modal */}\n      <HiveModal\n        isOpen={!!selectedResource}\n        onClose={() => setSelectedResource(null)}\n        title={selectedResource?.name || ''}\n        size=\"lg\"\n      >\n        {selectedResource && (\n          <div className=\"space-y-6\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-12 h-12 bg-hive-gold/20 rounded-lg flex items-center justify-center\">\n                  {(() => {\n                    const Icon = getResourceIcon(selectedResource.type);\n                    return <Icon className=\"h-6 w-6 text-hive-gold\" />;\n                  })()}\n                </div>\n                <div>\n                  <h3 className=\"text-xl font-semibold text-white\">{selectedResource.name}</h3>\n                  <p className=\"text-zinc-400 capitalize\">{selectedResource.type}</p>\n                </div>\n              </div>\n              <Badge \n                variant=\"skill-tag\" \n                className={`capitalize ${getAvailabilityColor(selectedResource.availability)}`}\n              >\n                {selectedResource.availability}\n              </Badge>\n            </div>\n\n            <div>\n              <h4 className=\"font-medium text-white mb-2\">Description</h4>\n              <p className=\"text-zinc-300\">{selectedResource.description}</p>\n            </div>\n\n            {selectedResource.features && selectedResource.features.length > 0 && (\n              <div>\n                <h4 className=\"font-medium text-white mb-2\">Features</h4>\n                <div className=\"grid grid-cols-2 gap-2\">\n                  {selectedResource.features.map((feature) => (\n                    <div key={feature} className=\"flex items-center text-sm text-zinc-300\">\n                      <CheckCircle className=\"h-4 w-4 text-green-400 mr-2\" />\n                      {feature}\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {selectedResource.bookings.length > 0 && (\n              <div>\n                <h4 className=\"font-medium text-white mb-2\">Current Bookings</h4>\n                <div className=\"space-y-2\">\n                  {selectedResource.bookings.map((booking) => (\n                    <div key={booking.id} className=\"p-3 bg-zinc-800/30 rounded-lg\">\n                      <div className=\"flex items-center justify-between\">\n                        <div>\n                          <div className=\"font-medium text-white\">{booking.userName}</div>\n                          <div className=\"text-sm text-zinc-400\">{booking.purpose}</div>\n                        </div>\n                        <div className=\"text-right text-sm text-zinc-400\">\n                          <div>{new Date(booking.startTime).toLocaleDateString()}</div>\n                          <div>\n                            {new Date(booking.startTime).toLocaleTimeString()} - {new Date(booking.endTime).toLocaleTimeString()}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            <div className=\"flex justify-end space-x-3\">\n              <Button variant=\"outline\" onClick={() => setSelectedResource(null)}>\n                Close\n              </Button>\n              {selectedResource.availability === 'available' && (\n                <Button\n                  onClick={() => handleBookResource(selectedResource)}\n                  className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n                >\n                  {selectedResource.type === 'room' || selectedResource.type === 'equipment' ? 'Book Resource' : 'Use Resource'}\n                </Button>\n              )}\n            </div>\n          </div>\n        )}\n      </HiveModal>\n\n      {/* Create Resource Modal */}\n      <HiveModal\n        isOpen={showCreateModal}\n        onClose={() => setShowCreateModal(false)}\n        title=\"Add New Resource\"\n        size=\"lg\"\n      >\n        <div className=\"space-y-4\">\n          <p className=\"text-zinc-400\">Add a new resource to help your space members collaborate better.</p>\n          \n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-white mb-2\">Resource Name</label>\n              <input\n                type=\"text\"\n                placeholder=\"Study Room A, MacBook Pro, etc.\"\n                className=\"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-zinc-400 focus:border-hive-gold focus:outline-none\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-white mb-2\">Type</label>\n              <select className=\"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:border-hive-gold focus:outline-none\">\n                <option value=\"room\">Room</option>\n                <option value=\"equipment\">Equipment</option>\n                <option value=\"document\">Document</option>\n                <option value=\"tool\">Tool</option>\n                <option value=\"digital\">Digital</option>\n              </select>\n            </div>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-white mb-2\">Description</label>\n            <textarea\n              placeholder=\"Describe what this resource is and how it can be used...\"\n              className=\"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-zinc-400 focus:border-hive-gold focus:outline-none resize-none\"\n              rows={3}\n            />\n          </div>\n          \n          <div className=\"flex justify-end space-x-3\">\n            <Button variant=\"outline\" onClick={() => setShowCreateModal(false)}>\n              Cancel\n            </Button>\n            <Button className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\">\n              Create Resource\n            </Button>\n          </div>\n        </div>\n      </HiveModal>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/spaces/space-transfer-interface.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"useEffect"},"fix":{"range":[39,50],"text":""},"desc":"Remove unused variable 'useEffect'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Alert' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Alert"},"fix":{"range":[247,295],"text":""},"desc":"Remove unused variable 'Alert'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'MovementRestriction' is defined but never used. Allowed unused vars must match /^_/u.","line":30,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"MovementRestriction"},"fix":{"range":[642,661],"text":""},"desc":"Remove unused variable 'MovementRestriction'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { authenticatedFetch } from '../../lib/auth-utils';\nimport { Button, Badge } from \"@hive/ui\";\nimport { Alert } from \"@/components/temp-stubs\";\nimport { \n  ArrowRight, \n  Clock, \n  Shield, \n  AlertTriangle, \n  CheckCircle, \n  Calendar,\n  Users,\n  Home,\n  GraduationCap,\n  Building\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface SpaceInfo {\n  id: string;\n  name: string;\n  type: string;\n  memberCount: number;\n  description?: string;\n}\n\ninterface MovementRestriction {\n  canMove: boolean;\n  reason?: string;\n  nextAvailableDate?: string;\n  currentCooldownDays?: number;\n  movementsThisPeriod?: number;\n}\n\ninterface MovementRecord {\n  fromSpaceId: string;\n  toSpaceId: string;\n  spaceType: string;\n  movementType: string;\n  timestamp: string;\n  reason?: string;\n  adminOverride?: boolean;\n}\n\ninterface SpaceTransferInterfaceProps {\n  currentSpace: SpaceInfo;\n  availableSpaces: SpaceInfo[];\n  spaceType: 'campus_living' | 'cohort' | 'fraternity_and_sorority';\n  onTransferComplete?: () => void;\n}\n\nexport function SpaceTransferInterface({ \n  currentSpace, \n  availableSpaces, \n  spaceType,\n  onTransferComplete \n}: SpaceTransferInterfaceProps) {\n  const [selectedTargetSpace, setSelectedTargetSpace] = useState<SpaceInfo | null>(null);\n  const [transferReason, setTransferReason] = useState('');\n  const [showConfirmation, setShowConfirmation] = useState(false);\n  const queryClient = useQueryClient();\n\n  // Get movement restrictions and history\n  const { data: movementInfo } = useQuery({\n    queryKey: ['space-movement-info'],\n    queryFn: async () => {\n      const response = await authenticatedFetch('/api/spaces/transfer');\n      if (!response.ok) throw new Error('Failed to fetch movement info');\n      return response.json();\n    }\n  });\n\n  // Check specific transfer restrictions\n  const { data: transferValidation, isLoading: validationLoading } = useQuery({\n    queryKey: ['transfer-validation', currentSpace.id, selectedTargetSpace?.id],\n    queryFn: async () => {\n      if (!selectedTargetSpace) return null;\n      \n      const params = new URLSearchParams({\n        spaceType,\n        fromSpaceId: currentSpace.id,\n        toSpaceId: selectedTargetSpace.id\n      });\n      \n      const response = await authenticatedFetch(`/api/spaces/transfer?${params}`);\n      if (!response.ok) throw new Error('Failed to validate transfer');\n      return response.json();\n    },\n    enabled: !!selectedTargetSpace\n  });\n\n  // Transfer mutation\n  const transferMutation = useMutation({\n    mutationFn: async ({ toSpaceId, reason }: { toSpaceId: string; reason: string }) => {\n      const response = await authenticatedFetch('/api/spaces/transfer', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          fromSpaceId: currentSpace.id,\n          toSpaceId,\n          reason\n        })\n      });\n      \n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || 'Transfer failed');\n      }\n      \n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['space-movement-info'] });\n      queryClient.invalidateQueries({ queryKey: ['user-spaces'] });\n      setShowConfirmation(false);\n      setSelectedTargetSpace(null);\n      setTransferReason('');\n      onTransferComplete?.();\n    }\n  });\n\n  const getSpaceTypeIcon = (type: string) => {\n    switch (type) {\n      case 'campus_living': return <Home className=\"h-4 w-4\" />;\n      case 'cohort': return <GraduationCap className=\"h-4 w-4\" />;\n      case 'fraternity_and_sorority': return <Building className=\"h-4 w-4\" />;\n      default: return <Users className=\"h-4 w-4\" />;\n    }\n  };\n\n  const getSpaceTypeName = (type: string) => {\n    switch (type) {\n      case 'campus_living': return 'Housing';\n      case 'cohort': return 'Academic';\n      case 'fraternity_and_sorority': return 'Greek Life';\n      default: return 'Community';\n    }\n  };\n\n  const getRestrictionInfo = () => {\n    const restrictions = {\n      campus_living: {\n        cooldown: '1 month',\n        limit: '1 transfer per month',\n        description: 'You can change your housing space once per month'\n      },\n      cohort: {\n        cooldown: '1 month for major, 1 year for graduation year',\n        limit: '1 transfer per month',\n        description: 'Major changes: once per month. Graduation year changes: locked for 1 year'\n      },\n      fraternity_and_sorority: {\n        cooldown: 'No cooldown',\n        limit: '1 organization at a time',\n        description: 'You can only be a member of one Greek organization at a time'\n      }\n    };\n\n    return restrictions[spaceType] || restrictions.campus_living;\n  };\n\n  const handleTransfer = () => {\n    if (!selectedTargetSpace) return;\n    \n    transferMutation.mutate({\n      toSpaceId: selectedTargetSpace.id,\n      reason: transferReason\n    });\n  };\n\n  const restrictionInfo = getRestrictionInfo();\n  const currentRestriction = movementInfo?.currentRestrictions?.[spaceType];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Current Space */}\n      <div className=\"rounded-xl bg-white/[0.02] border border-white/[0.06] p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold text-white\">Current Space</h3>\n          <Badge variant=\"outline\" className=\"border-[#FFD700]/30 text-[#FFD700]\">\n            {getSpaceTypeName(spaceType)}\n          </Badge>\n        </div>\n        \n        <div className=\"flex items-center gap-4 p-4 rounded-lg bg-white/[0.02] border border-white/[0.06]\">\n          {getSpaceTypeIcon(spaceType)}\n          <div className=\"flex-1\">\n            <h4 className=\"font-medium text-white\">{currentSpace.name}</h4>\n            <p className=\"text-sm text-neutral-400\">\n              {currentSpace.memberCount.toLocaleString()} members\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Movement Restrictions */}\n      <div className=\"rounded-xl bg-white/[0.02] border border-white/[0.06] p-6\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <Shield className=\"h-5 w-5 text-[#FFD700]\" />\n          <h3 className=\"text-lg font-semibold text-white\">Movement Restrictions</h3>\n        </div>\n        \n        <div className=\"space-y-3\">\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-neutral-400\">Cooldown Period:</span>\n            <span className=\"text-white\">{restrictionInfo.cooldown}</span>\n          </div>\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-neutral-400\">Transfer Limit:</span>\n            <span className=\"text-white\">{restrictionInfo.limit}</span>\n          </div>\n          <p className=\"text-xs text-neutral-400 leading-relaxed\">\n            {restrictionInfo.description}\n          </p>\n          \n          {currentRestriction && !currentRestriction.canMove && (\n            <div className=\"mt-4 p-4 rounded-lg bg-red-500/10 border border-red-500/20\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <AlertTriangle className=\"h-4 w-4 text-red-400\" />\n                <span className=\"text-sm font-medium text-red-400\">Transfer Restricted</span>\n              </div>\n              <p className=\"text-xs text-red-300\">\n                {currentRestriction.reason}\n              </p>\n              {currentRestriction.nextAvailableDate && (\n                <div className=\"flex items-center gap-2 mt-2 text-xs text-red-300\">\n                  <Calendar className=\"h-3 w-3\" />\n                  <span>\n                    Available: {new Date(currentRestriction.nextAvailableDate).toLocaleDateString()}\n                  </span>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Available Spaces */}\n      {(!currentRestriction || currentRestriction.canMove) && (\n        <div className=\"rounded-xl bg-white/[0.02] border border-white/[0.06] p-6\">\n          <h3 className=\"text-lg font-semibold text-white mb-4\">Transfer to</h3>\n          \n          <div className=\"grid gap-3\">\n            {availableSpaces.filter(space => space.id !== currentSpace.id).map((space) => (\n              <motion.div\n                key={space.id}\n                className={`p-4 rounded-lg border transition-all cursor-pointer ${\n                  selectedTargetSpace?.id === space.id\n                    ? 'bg-[#FFD700]/10 border-[#FFD700]/30'\n                    : 'bg-white/[0.02] border-white/[0.06] hover:border-white/[0.1]'\n                }`}\n                onClick={() => setSelectedTargetSpace(space)}\n                whileHover={{ scale: 1.01 }}\n                whileTap={{ scale: 0.99 }}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-3\">\n                    {getSpaceTypeIcon(space.type)}\n                    <div>\n                      <h4 className=\"font-medium text-white\">{space.name}</h4>\n                      <p className=\"text-sm text-neutral-400\">\n                        {space.memberCount.toLocaleString()} members\n                      </p>\n                    </div>\n                  </div>\n                  \n                  {selectedTargetSpace?.id === space.id && (\n                    <CheckCircle className=\"h-5 w-5 text-[#FFD700]\" />\n                  )}\n                </div>\n              </motion.div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Transfer Reason */}\n      {selectedTargetSpace && (\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"rounded-xl bg-white/[0.02] border border-white/[0.06] p-6\"\n        >\n          <h3 className=\"text-lg font-semibold text-white mb-4\">Transfer Reason</h3>\n          <textarea\n            value={transferReason}\n            onChange={(e) => setTransferReason(e.target.value)}\n            placeholder=\"Why are you transferring? (optional)\"\n            className=\"w-full h-24 px-4 py-3 rounded-lg bg-white/[0.02] border border-white/[0.06] text-white placeholder-neutral-400 resize-none focus:outline-none focus:border-[#FFD700]/30\"\n            maxLength={200}\n          />\n          <p className=\"text-xs text-neutral-400 mt-2\">\n            {transferReason.length}/200 characters\n          </p>\n        </motion.div>\n      )}\n\n      {/* Transfer Validation */}\n      {selectedTargetSpace && transferValidation && (\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"rounded-xl bg-white/[0.02] border border-white/[0.06] p-6\"\n        >\n          <h3 className=\"text-lg font-semibold text-white mb-4\">Transfer Preview</h3>\n          \n          <div className=\"flex items-center justify-between p-4 rounded-lg bg-white/[0.02] border border-white/[0.06]\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"text-center\">\n                <div className=\"font-medium text-white\">{currentSpace.name}</div>\n                <div className=\"text-xs text-neutral-400\">Current</div>\n              </div>\n              \n              <ArrowRight className=\"h-5 w-5 text-[#FFD700]\" />\n              \n              <div className=\"text-center\">\n                <div className=\"font-medium text-white\">{selectedTargetSpace.name}</div>\n                <div className=\"text-xs text-neutral-400\">New</div>\n              </div>\n            </div>\n            \n            {transferValidation.canMove ? (\n              <div className=\"flex items-center gap-2 text-green-400\">\n                <CheckCircle className=\"h-4 w-4\" />\n                <span className=\"text-sm\">Allowed</span>\n              </div>\n            ) : (\n              <div className=\"flex items-center gap-2 text-red-400\">\n                <AlertTriangle className=\"h-4 w-4\" />\n                <span className=\"text-sm\">Restricted</span>\n              </div>\n            )}\n          </div>\n\n          {!transferValidation.canMove && (\n            <div className=\"mt-4 p-4 rounded-lg bg-red-500/10 border border-red-500/20\">\n              <p className=\"text-sm text-red-300\">\n                {transferValidation.restrictions?.reason}\n              </p>\n            </div>\n          )}\n          \n          <div className=\"flex gap-4 mt-6\">\n            <Button\n              variant=\"outline\"\n              onClick={() => {\n                setSelectedTargetSpace(null);\n                setTransferReason('');\n              }}\n              className=\"flex-1\"\n            >\n              Cancel\n            </Button>\n            \n            <Button\n              variant=\"primary\"\n              onClick={() => setShowConfirmation(true)}\n              disabled={!transferValidation.canMove || validationLoading}\n              className=\"flex-1 bg-[#FFD700] text-[#0A0A0A] hover:bg-[#FFE255]\"\n            >\n              {validationLoading ? 'Validating...' : 'Transfer Space'}\n            </Button>\n          </div>\n        </motion.div>\n      )}\n\n      {/* Confirmation Modal */}\n      <AnimatePresence>\n        {showConfirmation && selectedTargetSpace && (\n          <motion.div\n            className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n          >\n            <motion.div\n              className=\"bg-[#0A0A0A] border border-white/[0.1] rounded-2xl p-6 w-full max-w-md\"\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n            >\n              <h3 className=\"text-xl font-semibold text-white mb-4\">Confirm Transfer</h3>\n              \n              <div className=\"space-y-4 mb-6\">\n                <div className=\"p-4 rounded-lg bg-white/[0.02] border border-white/[0.06]\">\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"text-neutral-400\">From:</span>\n                    <span className=\"text-white\">{currentSpace.name}</span>\n                  </div>\n                  <div className=\"flex items-center justify-between text-sm mt-2\">\n                    <span className=\"text-neutral-400\">To:</span>\n                    <span className=\"text-white\">{selectedTargetSpace.name}</span>\n                  </div>\n                </div>\n                \n                <p className=\"text-sm text-neutral-400\">\n                  This action cannot be undone. You will lose access to {currentSpace.name} \n                  and gain access to {selectedTargetSpace.name}.\n                </p>\n                \n                {spaceType === 'campus_living' && (\n                  <div className=\"p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/20\">\n                    <p className=\"text-xs text-yellow-300\">\n                      Housing transfers may affect your physical room assignment. \n                      Contact housing services separately for room changes.\n                    </p>\n                  </div>\n                )}\n              </div>\n              \n              <div className=\"flex gap-3\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setShowConfirmation(false)}\n                  className=\"flex-1\"\n                  disabled={transferMutation.isPending}\n                >\n                  Cancel\n                </Button>\n                \n                <Button\n                  variant=\"primary\"\n                  onClick={handleTransfer}\n                  className=\"flex-1 bg-[#FFD700] text-[#0A0A0A] hover:bg-[#FFE255]\"\n                  disabled={transferMutation.isPending}\n                >\n                  {transferMutation.isPending ? (\n                    <div className=\"flex items-center gap-2\">\n                      <Clock className=\"h-4 w-4 animate-spin\" />\n                      <span>Transferring...</span>\n                    </div>\n                  ) : (\n                    'Confirm Transfer'\n                  )}\n                </Button>\n              </div>\n              \n              {transferMutation.isError && (\n                <div className=\"mt-4 p-3 rounded-lg bg-red-500/10 border border-red-500/20\">\n                  <p className=\"text-sm text-red-300\">\n                    {transferMutation.error?.message || 'Transfer failed'}\n                  </p>\n                </div>\n              )}\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Recent Movement History */}\n      {movementInfo?.movementHistory && movementInfo.movementHistory.length > 0 && (\n        <div className=\"rounded-xl bg-white/[0.02] border border-white/[0.06] p-6\">\n          <h3 className=\"text-lg font-semibold text-white mb-4\">Recent Transfers</h3>\n          \n          <div className=\"space-y-3\">\n            {movementInfo.movementHistory.slice(0, 5).map((record: MovementRecord, index: number) => (\n              <div key={index} className=\"flex items-center justify-between p-3 rounded-lg bg-white/[0.02] border border-white/[0.06]\">\n                <div className=\"flex items-center gap-3\">\n                  {getSpaceTypeIcon(record.spaceType)}\n                  <div>\n                    <div className=\"text-sm text-white\">\n                      {record.movementType === 'transfer' ? 'Transferred' : 'Left'} space\n                    </div>\n                    <div className=\"text-xs text-neutral-400\">\n                      {new Date(record.timestamp).toLocaleDateString()}\n                    </div>\n                  </div>\n                </div>\n                \n                <Badge variant=\"outline\" className=\"text-xs capitalize\">\n                  {record.spaceType.replace('_', ' ')}\n                </Badge>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/temp-stubs.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'size' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":86,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":86,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"size"},"fix":{"range":[2203,2212],"text":""},"desc":"Remove unused variable 'size'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Temporary stub components to unblock production build\n// TODO: Fix @hive/ui export resolution and remove these stubs\n\nimport React from 'react';\nimport Image from 'next/image';\n\nexport function PageContainer({ \n  children, \n  title, \n  subtitle, \n  className = \"\",\n  ...props \n}: {\n  children: React.ReactNode;\n  title?: string;\n  subtitle?: string;\n  className?: string;\n  [key: string]: any;\n}) {\n  return (\n    <div className={`w-full max-w-6xl mx-auto px-4 sm:px-6 py-6 ${className}`} {...props}>\n      {title && (\n        <div className=\"mb-6\">\n          <h1 className=\"text-2xl font-bold text-white mb-2\">{title}</h1>\n          {subtitle && <p className=\"text-gray-400\">{subtitle}</p>}\n        </div>\n      )}\n      {children}\n    </div>\n  );\n}\n\nexport function Alert({ children, className = \"\" }: { children: React.ReactNode; className?: string }) {\n  return (\n    <div className={`p-4 border rounded-lg bg-yellow-50 border-yellow-200 text-yellow-800 ${className}`}>\n      {children}\n    </div>\n  );\n}\n\nexport function AlertDescription({ children, className = \"\" }: { children: React.ReactNode; className?: string }) {\n  return <div className={`text-sm ${className}`}>{children}</div>;\n}\n\n// Header components stubs\nexport function LandingPageHeader() {\n  return (\n    <div className=\"bg-black border-b border-white/10 p-4\">\n      <div className=\"max-w-6xl mx-auto flex items-center justify-between\">\n        <div className=\"flex items-center space-x-2\">\n          <div className=\"w-8 h-8 flex items-center justify-center\">\n            <Image\n              src=\"/assets/hive-logo-white.svg\"\n              alt=\"HIVE Logo\"\n              width={32}\n              height={32}\n              className=\"w-8 h-8\"\n            />\n          </div>\n          <div className=\"text-xl font-bold text-white\">HIVE</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function SchoolsPageHeader(props: any) {\n  return <LandingPageHeader />;\n}\n\nexport function AuthPageHeader() {\n  return <LandingPageHeader />;\n}\n\nexport function DashboardPageHeader() {\n  return <LandingPageHeader />;\n}\n\n// Modal component stubs\nexport function HiveModal({ \n  children, \n  open, \n  isOpen, \n  onOpenChange, \n  onClose, \n  size,\n  title,\n  showCloseButton \n}: { \n  children: React.ReactNode; \n  open?: boolean; \n  isOpen?: boolean;\n  onOpenChange?: () => void; \n  onClose?: () => void;\n  size?: string;\n  title?: string;\n  showCloseButton?: boolean;\n}) {\n  const modalIsOpen = open ?? isOpen ?? false;\n  const handleClose = onOpenChange || onClose || (() => {});\n  \n  if (!modalIsOpen) return null;\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\" onClick={handleClose}>\n      <div className=\"bg-white rounded-lg shadow-lg max-w-md w-full mx-4\" onClick={(e) => e.stopPropagation()}>\n        {title && (\n          <div className=\"p-4 border-b border-gray-200 flex items-center justify-between\">\n            <h2 className=\"text-lg font-semibold\">{title}</h2>\n            {showCloseButton && (\n              <button onClick={handleClose} className=\"text-gray-500 hover:text-gray-700\">\n                Ã—\n              </button>\n            )}\n          </div>\n        )}\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport function HiveModalContent({ children, className = \"\" }: { children: React.ReactNode; className?: string }) {\n  return <div className={`p-6 ${className}`}>{children}</div>;\n}\n\nexport function HiveModalHeader({ children, className = \"\" }: { children: React.ReactNode; className?: string }) {\n  return <div className={`mb-4 ${className}`}>{children}</div>;\n}\n\nexport function HiveModalTitle({ children, className = \"\" }: { children: React.ReactNode; className?: string }) {\n  return <h2 className={`text-lg font-semibold ${className}`}>{children}</h2>;\n}\n\nexport function HiveModalFooter({ children, className = \"\" }: { children: React.ReactNode; className?: string }) {\n  return <div className={`mt-6 flex gap-3 ${className}`}>{children}</div>;\n}\n\n// Hook stubs\nexport function useOnboardingBridge() {\n  return {\n    currentStep: 0,\n    totalSteps: 8,\n    nextStep: () => {},\n    prevStep: () => {},\n    completeOnboarding: () => {},\n    isLoading: false,\n    error: null\n  };\n}\n\n// Type stubs for missing @hive/ui types\nexport interface User {\n  id: string;\n  handle: string;\n  name: string;\n  email: string;\n  avatar?: string;\n  school: string;\n  preferences: {\n    privacy: 'public' | 'private' | 'friends-only';\n    notifications: boolean;\n  };\n  isPrivate: boolean;\n}\n\nexport interface Space {\n  id: string;\n  name: string;\n  description: string;\n  type: string;\n  memberCount: number;\n}\n\nexport interface Event {\n  id: string;\n  title: string;\n  description: string;\n  date: string;\n  location?: string;\n}\n\nexport interface Connection {\n  id: string;\n  userId: string;\n  connectedUserId: string;\n  type: 'friend' | 'follow';\n}\n\nexport interface HiveLabSection {\n  id: string;\n  title: string;\n  description: string;\n  tools: any[];\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/tools/tool-builder.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Badge' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":111,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":116,"suggestions":[{"messageId":"removeVar","data":{"varName":"Badge"},"fix":{"range":[176,183],"text":""},"desc":"Remove unused variable 'Badge'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Play' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Play"},"fix":{"range":[343,351],"text":""},"desc":"Remove unused variable 'Play'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Zap' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":6,"suggestions":[{"messageId":"removeVar","data":{"varName":"Zap"},"fix":{"range":[392,399],"text":""},"desc":"Remove unused variable 'Zap'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Copy' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Copy"},"fix":{"range":[417,425],"text":""},"desc":"Remove unused variable 'Copy'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[447,462],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used. Allowed unused vars must match /^_/u.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertTriangle"},"fix":{"range":[462,479],"text":""},"desc":"Remove unused variable 'AlertTriangle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'tool' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":29,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"tool"},"fix":{"range":[791,811],"text":""},"desc":"Remove unused variable 'tool'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useRef, useEffect } from 'react';\nimport { Card, Button, Input, Label, Textarea, Select, SelectContent, SelectItem, SelectTrigger, SelectValue, Badge, Switch, Tabs, TabsContent, TabsList, TabsTrigger } from \"@hive/ui\";\nimport { Alert, AlertDescription } from \"@/components/temp-stubs\";\nimport {\n  Code,\n  Save,\n  Play,\n  Settings,\n  Eye,\n  FileText,\n  Shield,\n  Zap,\n  Plus,\n  Trash2,\n  Copy,\n  Download,\n  Upload,\n  CheckCircle,\n  AlertTriangle\n} from 'lucide-react';\nimport { ToolExecutionPanel } from './tool-execution-panel';\nimport { toolTemplates, ToolDefinition } from '../../lib/tool-execution-runtime';\nimport { useFormValidation, toolValidation } from '../../lib/form-validation';\n\ninterface ToolBuilderProps {\n  tool?: ToolDefinition;\n  onSave: (tool: ToolDefinition) => Promise<void>;\n  onCancel: () => void;\n  userId: string;\n  spaceId?: string;\n  isEditing?: boolean;\n}\n\nexport function ToolBuilder({ \n  tool, \n  onSave, \n  onCancel, \n  userId, \n  spaceId,\n  isEditing = false \n}: ToolBuilderProps) {\n  const [activeTab, setActiveTab] = useState('editor');\n  const [isSaving, setIsSaving] = useState(false);\n  const [showPreview, setShowPreview] = useState(false);\n  const [inputFields, setInputFields] = useState<Array<{\n    key: string;\n    type: string;\n    required: boolean;\n    description: string;\n  }>>([]);\n  const [outputFields, setOutputFields] = useState<Array<{\n    key: string;\n    type: string;\n    description: string;\n  }>>([]);\n  const [permissions, setPermissions] = useState<string[]>([]);\n\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Form validation\n  const {\n    data: formData,\n    errors: validationErrors,\n    touched,\n    isValid: formIsValid,\n    setValue,\n    setTouched: setFieldTouched,\n    validateAll\n  } = useFormValidation({\n    name: tool?.name || '',\n    description: tool?.description || '',\n    code: tool?.code || '',\n    language: tool?.language || 'javascript',\n    category: tool?.category || 'utility',\n    version: tool?.version || '1.0.0',\n    isPublic: tool?.isPublic || false\n  }, toolValidation);\n\n  // Initialize form data\n  useEffect(() => {\n    if (tool) {\n      setValue('name', tool.name);\n      setValue('description', tool.description);\n      setValue('code', tool.code);\n      setValue('language', tool.language);\n      setValue('category', tool.category);\n      setValue('version', tool.version);\n      setValue('isPublic', tool.isPublic);\n      \n      // Initialize schema fields\n      if (tool.schema.inputs) {\n        const inputs = Object.entries(tool.schema.inputs).map(([key, def]) => ({\n          key,\n          type: (def as any).type || 'string',\n          required: (def as any).required || false,\n          description: (def as any).description || ''\n        }));\n        setInputFields(inputs);\n      }\n      \n      if (tool.schema.outputs) {\n        const outputs = Object.entries(tool.schema.outputs).map(([key, def]) => ({\n          key,\n          type: (def as any).type || 'string',\n          description: (def as any).description || ''\n        }));\n        setOutputFields(outputs);\n      }\n      \n      setPermissions(tool.permissions || []);\n    }\n  }, [tool, setValue]);\n\n  const handleInputChange = (field: string, value: any) => {\n    setValue(field, value);\n  };\n\n  const handleFieldBlur = (field: string) => {\n    setFieldTouched(field);\n  };\n\n  const loadTemplate = (templateName: string) => {\n    const template = toolTemplates[templateName as keyof typeof toolTemplates];\n    if (template) {\n      setValue('name', template.name);\n      setValue('code', template.code);\n      \n      // Load schema\n      const inputs = Object.entries(template.schema.inputs).map(([key, def]) => ({\n        key,\n        type: (def as any).type || 'string',\n        required: (def as any).required || false,\n        description: (def as any).description || ''\n      }));\n      setInputFields(inputs);\n      \n      const outputs = Object.entries(template.schema.outputs).map(([key, def]) => ({\n        key,\n        type: (def as any).type || 'string',\n        description: (def as any).description || ''\n      }));\n      setOutputFields(outputs);\n    }\n  };\n\n  const addInputField = () => {\n    setInputFields(prev => [...prev, {\n      key: `input${prev.length + 1}`,\n      type: 'string',\n      required: false,\n      description: ''\n    }]);\n  };\n\n  const removeInputField = (index: number) => {\n    setInputFields(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const updateInputField = (index: number, field: string, value: any) => {\n    setInputFields(prev => prev.map((item, i) => \n      i === index ? { ...item, [field]: value } : item\n    ));\n  };\n\n  const addOutputField = () => {\n    setOutputFields(prev => [...prev, {\n      key: `output${prev.length + 1}`,\n      type: 'string',\n      description: ''\n    }]);\n  };\n\n  const removeOutputField = (index: number) => {\n    setOutputFields(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const updateOutputField = (index: number, field: string, value: any) => {\n    setOutputFields(prev => prev.map((item, i) => \n      i === index ? { ...item, [field]: value } : item\n    ));\n  };\n\n  const togglePermission = (permission: string) => {\n    setPermissions(prev => \n      prev.includes(permission) \n        ? prev.filter(p => p !== permission)\n        : [...prev, permission]\n    );\n  };\n\n  const exportTool = () => {\n    const toolData = buildToolDefinition();\n    const dataStr = JSON.stringify(toolData, null, 2);\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `${formData.name.replace(/\\s+/g, '_')}.json`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const importTool = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        try {\n          const toolData = JSON.parse(e.target?.result as string);\n          // Load imported tool data\n          setValue('name', toolData.name);\n          setValue('description', toolData.description);\n          setValue('code', toolData.code);\n          setValue('language', toolData.language || 'javascript');\n          setValue('category', toolData.category || 'utility');\n          setValue('version', toolData.version || '1.0.0');\n          setValue('isPublic', toolData.isPublic || false);\n          \n          // Load schema and permissions\n          if (toolData.schema?.inputs) {\n            const inputs = Object.entries(toolData.schema.inputs).map(([key, def]) => ({\n              key,\n              type: (def as any).type || 'string',\n              required: (def as any).required || false,\n              description: (def as any).description || ''\n            }));\n            setInputFields(inputs);\n          }\n          \n          if (toolData.schema?.outputs) {\n            const outputs = Object.entries(toolData.schema.outputs).map(([key, def]) => ({\n              key,\n              type: (def as any).type || 'string',\n              description: (def as any).description || ''\n            }));\n            setOutputFields(outputs);\n          }\n          \n          setPermissions(toolData.permissions || []);\n        } catch (error) {\n          console.error('Failed to import tool:', error);\n        }\n      };\n      reader.readAsText(file);\n    }\n  };\n\n  const buildToolDefinition = (): ToolDefinition => {\n    const inputs: Record<string, any> = {};\n    inputFields.forEach(field => {\n      inputs[field.key] = {\n        type: field.type,\n        required: field.required,\n        description: field.description\n      };\n    });\n\n    const outputs: Record<string, any> = {};\n    outputFields.forEach(field => {\n      outputs[field.key] = {\n        type: field.type,\n        description: field.description\n      };\n    });\n\n    return {\n      id: tool?.id || `tool_${Date.now()}`,\n      name: formData.name,\n      code: formData.code,\n      language: formData.language as 'javascript' | 'typescript' | 'python',\n      version: formData.version,\n      dependencies: [], // TODO: Parse from code\n      permissions,\n      schema: { inputs, outputs },\n      category: formData.category,\n      isPublic: formData.isPublic,\n      createdBy: tool?.createdBy || userId,\n      createdAt: tool?.createdAt || new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n      description: formData.description\n    };\n  };\n\n  const handleSave = async () => {\n    const validation = validateAll();\n    if (!validation.isValid) {\n      Object.keys(formData).forEach(field => {\n        setFieldTouched(field);\n      });\n      return;\n    }\n\n    setIsSaving(true);\n    try {\n      const toolDef = buildToolDefinition();\n      await onSave(toolDef);\n    } catch (error) {\n      console.error('Failed to save tool:', error);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const availablePermissions = [\n    { id: 'user:read', name: 'Read User Data', description: 'Access user profile information' },\n    { id: 'user:write', name: 'Write User Data', description: 'Modify user profile information' },\n    { id: 'space:read', name: 'Read Space Data', description: 'Access space information and members' },\n    { id: 'space:write', name: 'Write Space Data', description: 'Modify space information' },\n    { id: 'storage:read', name: 'Read Storage', description: 'Access tool storage data' },\n    { id: 'storage:write', name: 'Write Storage', description: 'Store data persistently' },\n    { id: 'network:read', name: 'Network Read', description: 'Make HTTP GET requests' },\n    { id: 'network:write', name: 'Network Write', description: 'Make HTTP POST/PUT requests' }\n  ];\n\n  const fieldTypes = [\n    'string', 'number', 'boolean', 'array', 'object', 'date', 'file', 'url', 'email'\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-white\">\n            {isEditing ? 'Edit Tool' : 'Create New Tool'}\n          </h2>\n          <p className=\"text-hive-text-mutedLight\">\n            Build custom tools for your HIVE community\n          </p>\n        </div>\n        <div className=\"flex items-center space-x-3\">\n          <Button\n            variant=\"outline\"\n            onClick={() => fileInputRef.current?.click()}\n          >\n            <Upload className=\"h-4 w-4 mr-2\" />\n            Import\n          </Button>\n          <Button\n            variant=\"outline\"\n            onClick={exportTool}\n            disabled={!formData.name}\n          >\n            <Download className=\"h-4 w-4 mr-2\" />\n            Export\n          </Button>\n          <Button\n            variant=\"outline\"\n            onClick={() => setShowPreview(!showPreview)}\n          >\n            <Eye className=\"h-4 w-4 mr-2\" />\n            {showPreview ? 'Hide' : 'Show'} Preview\n          </Button>\n        </div>\n      </div>\n\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\".json\"\n        onChange={importTool}\n        className=\"hidden\"\n      />\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Builder */}\n        <div className=\"space-y-6\">\n          {/* Templates */}\n          <Card className=\"p-4 bg-hive-background-overlay border-hive-border-default\">\n            <h3 className=\"font-medium text-white mb-3\">Quick Start Templates</h3>\n            <div className=\"flex flex-wrap gap-2\">\n              {Object.keys(toolTemplates).map(template => (\n                <Button\n                  key={template}\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => loadTemplate(template)}\n                >\n                  {toolTemplates[template as keyof typeof toolTemplates].name}\n                </Button>\n              ))}\n            </div>\n          </Card>\n\n          <Tabs value={activeTab} onValueChange={setActiveTab}>\n            <TabsList className=\"grid w-full grid-cols-4\">\n              <TabsTrigger value=\"editor\">\n                <Code className=\"h-4 w-4 mr-2\" />\n                Editor\n              </TabsTrigger>\n              <TabsTrigger value=\"schema\">\n                <FileText className=\"h-4 w-4 mr-2\" />\n                Schema\n              </TabsTrigger>\n              <TabsTrigger value=\"permissions\">\n                <Shield className=\"h-4 w-4 mr-2\" />\n                Permissions\n              </TabsTrigger>\n              <TabsTrigger value=\"settings\">\n                <Settings className=\"h-4 w-4 mr-2\" />\n                Settings\n              </TabsTrigger>\n            </TabsList>\n\n            {/* Editor Tab */}\n            <TabsContent value=\"editor\" className=\"space-y-4 mt-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <Label className=\"text-white\">Tool Name</Label>\n                  <Input\n                    value={formData.name}\n                    onChange={(e) => handleInputChange('name', e.target.value)}\n                    onBlur={() => handleFieldBlur('name')}\n                    placeholder=\"Enter tool name\"\n                    className={`mt-1 ${touched.name && validationErrors.name?.length ? 'border-red-500' : ''}`}\n                  />\n                  {touched.name && validationErrors.name?.length > 0 && (\n                    <p className=\"text-red-400 text-sm mt-1\">{validationErrors.name[0]}</p>\n                  )}\n                </div>\n                \n                <div>\n                  <Label className=\"text-white\">Language</Label>\n                  <Select\n                    value={formData.language}\n                    onValueChange={(value) => handleInputChange('language', value)}\n                  >\n                    <SelectTrigger className=\"mt-1\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"javascript\">JavaScript</SelectItem>\n                      <SelectItem value=\"typescript\">TypeScript</SelectItem>\n                      <SelectItem value=\"python\">Python</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n\n              <div>\n                <Label className=\"text-white\">Description</Label>\n                <Textarea\n                  value={formData.description}\n                  onChange={(e) => handleInputChange('description', e.target.value)}\n                  onBlur={() => handleFieldBlur('description')}\n                  placeholder=\"Describe what your tool does...\"\n                  rows={3}\n                  className={`mt-1 ${touched.description && validationErrors.description?.length ? 'border-red-500' : ''}`}\n                />\n                {touched.description && validationErrors.description?.length > 0 && (\n                  <p className=\"text-red-400 text-sm mt-1\">{validationErrors.description[0]}</p>\n                )}\n              </div>\n\n              <div>\n                <Label className=\"text-white\">Code</Label>\n                <Textarea\n                  value={formData.code}\n                  onChange={(e) => handleInputChange('code', e.target.value)}\n                  onBlur={() => handleFieldBlur('code')}\n                  placeholder=\"// Write your tool code here...\"\n                  rows={12}\n                  className={`mt-1 font-mono text-sm ${touched.code && validationErrors.code?.length ? 'border-red-500' : ''}`}\n                />\n                {touched.code && validationErrors.code?.length > 0 && (\n                  <p className=\"text-red-400 text-sm mt-1\">{validationErrors.code[0]}</p>\n                )}\n              </div>\n            </TabsContent>\n\n            {/* Schema Tab */}\n            <TabsContent value=\"schema\" className=\"space-y-6 mt-4\">\n              {/* Input Fields */}\n              <div>\n                <div className=\"flex items-center justify-between mb-3\">\n                  <Label className=\"text-white\">Input Fields</Label>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={addInputField}\n                  >\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add Input\n                  </Button>\n                </div>\n                \n                <div className=\"space-y-3\">\n                  {inputFields.map((field, index) => (\n                    <Card key={index} className=\"p-3 bg-hive-background-tertiary\">\n                      <div className=\"grid grid-cols-12 gap-2 items-center\">\n                        <div className=\"col-span-3\">\n                          <Input\n                            value={field.key}\n                            onChange={(e) => updateInputField(index, 'key', e.target.value)}\n                            placeholder=\"Field name\"\n                            className=\"text-sm\"\n                          />\n                        </div>\n                        <div className=\"col-span-2\">\n                          <Select\n                            value={field.type}\n                            onValueChange={(value) => updateInputField(index, 'type', value)}\n                          >\n                            <SelectTrigger className=\"text-sm\">\n                              <SelectValue />\n                            </SelectTrigger>\n                            <SelectContent>\n                              {fieldTypes.map(type => (\n                                <SelectItem key={type} value={type}>{type}</SelectItem>\n                              ))}\n                            </SelectContent>\n                          </Select>\n                        </div>\n                        <div className=\"col-span-5\">\n                          <Input\n                            value={field.description}\n                            onChange={(e) => updateInputField(index, 'description', e.target.value)}\n                            placeholder=\"Description\"\n                            className=\"text-sm\"\n                          />\n                        </div>\n                        <div className=\"col-span-1\">\n                          <Switch\n                            checked={field.required}\n                            onCheckedChange={(checked) => updateInputField(index, 'required', checked)}\n                          />\n                        </div>\n                        <div className=\"col-span-1\">\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => removeInputField(index)}\n                            className=\"text-red-400 border-red-400\"\n                          >\n                            <Trash2 className=\"h-3 w-3\" />\n                          </Button>\n                        </div>\n                      </div>\n                    </Card>\n                  ))}\n                  {inputFields.length === 0 && (\n                    <p className=\"text-hive-text-mutedLight text-center py-4\">\n                      No input fields defined\n                    </p>\n                  )}\n                </div>\n              </div>\n\n              {/* Output Fields */}\n              <div>\n                <div className=\"flex items-center justify-between mb-3\">\n                  <Label className=\"text-white\">Output Fields</Label>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={addOutputField}\n                  >\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add Output\n                  </Button>\n                </div>\n                \n                <div className=\"space-y-3\">\n                  {outputFields.map((field, index) => (\n                    <Card key={index} className=\"p-3 bg-hive-background-tertiary\">\n                      <div className=\"grid grid-cols-12 gap-2 items-center\">\n                        <div className=\"col-span-3\">\n                          <Input\n                            value={field.key}\n                            onChange={(e) => updateOutputField(index, 'key', e.target.value)}\n                            placeholder=\"Field name\"\n                            className=\"text-sm\"\n                          />\n                        </div>\n                        <div className=\"col-span-2\">\n                          <Select\n                            value={field.type}\n                            onValueChange={(value) => updateOutputField(index, 'type', value)}\n                          >\n                            <SelectTrigger className=\"text-sm\">\n                              <SelectValue />\n                            </SelectTrigger>\n                            <SelectContent>\n                              {fieldTypes.map(type => (\n                                <SelectItem key={type} value={type}>{type}</SelectItem>\n                              ))}\n                            </SelectContent>\n                          </Select>\n                        </div>\n                        <div className=\"col-span-6\">\n                          <Input\n                            value={field.description}\n                            onChange={(e) => updateOutputField(index, 'description', e.target.value)}\n                            placeholder=\"Description\"\n                            className=\"text-sm\"\n                          />\n                        </div>\n                        <div className=\"col-span-1\">\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => removeOutputField(index)}\n                            className=\"text-red-400 border-red-400\"\n                          >\n                            <Trash2 className=\"h-3 w-3\" />\n                          </Button>\n                        </div>\n                      </div>\n                    </Card>\n                  ))}\n                  {outputFields.length === 0 && (\n                    <p className=\"text-hive-text-mutedLight text-center py-4\">\n                      No output fields defined\n                    </p>\n                  )}\n                </div>\n              </div>\n            </TabsContent>\n\n            {/* Permissions Tab */}\n            <TabsContent value=\"permissions\" className=\"space-y-4 mt-4\">\n              <Alert>\n                <Shield className=\"h-4 w-4\" />\n                <AlertDescription>\n                  Select the permissions your tool needs. Users will see these when they install your tool.\n                </AlertDescription>\n              </Alert>\n              \n              <div className=\"space-y-3\">\n                {availablePermissions.map(perm => (\n                  <Card key={perm.id} className=\"p-4 bg-hive-background-tertiary\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <h4 className=\"font-medium text-white\">{perm.name}</h4>\n                        <p className=\"text-sm text-hive-text-mutedLight\">{perm.description}</p>\n                      </div>\n                      <Switch\n                        checked={permissions.includes(perm.id)}\n                        onCheckedChange={() => togglePermission(perm.id)}\n                      />\n                    </div>\n                  </Card>\n                ))}\n              </div>\n            </TabsContent>\n\n            {/* Settings Tab */}\n            <TabsContent value=\"settings\" className=\"space-y-4 mt-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <Label className=\"text-white\">Category</Label>\n                  <Select\n                    value={formData.category}\n                    onValueChange={(value) => handleInputChange('category', value)}\n                  >\n                    <SelectTrigger className=\"mt-1\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"utility\">Utility</SelectItem>\n                      <SelectItem value=\"academic\">Academic</SelectItem>\n                      <SelectItem value=\"social\">Social</SelectItem>\n                      <SelectItem value=\"productivity\">Productivity</SelectItem>\n                      <SelectItem value=\"entertainment\">Entertainment</SelectItem>\n                      <SelectItem value=\"other\">Other</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                \n                <div>\n                  <Label className=\"text-white\">Version</Label>\n                  <Input\n                    value={formData.version}\n                    onChange={(e) => handleInputChange('version', e.target.value)}\n                    placeholder=\"1.0.0\"\n                    className=\"mt-1\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <Label className=\"text-white\">Public Tool</Label>\n                  <p className=\"text-sm text-hive-text-mutedLight\">\n                    Make this tool discoverable by other HIVE users\n                  </p>\n                </div>\n                <Switch\n                  checked={formData.isPublic}\n                  onCheckedChange={(checked) => handleInputChange('isPublic', checked)}\n                />\n              </div>\n            </TabsContent>\n          </Tabs>\n\n          {/* Actions */}\n          <div className=\"flex items-center justify-between\">\n            <Button\n              variant=\"outline\"\n              onClick={onCancel}\n              disabled={isSaving}\n            >\n              Cancel\n            </Button>\n            <div className=\"flex items-center space-x-3\">\n              <Button\n                onClick={handleSave}\n                disabled={!formIsValid || isSaving}\n                className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n              >\n                <Save className=\"h-4 w-4 mr-2\" />\n                {isSaving ? 'Saving...' : 'Save Tool'}\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        {/* Preview */}\n        {showPreview && (\n          <div>\n            <h3 className=\"text-lg font-semibold text-white mb-4\">Live Preview</h3>\n            {formData.name && formData.code ? (\n              <ToolExecutionPanel\n                tool={buildToolDefinition()}\n                userId={userId}\n                spaceId={spaceId}\n              />\n            ) : (\n              <Card className=\"p-8 bg-hive-background-overlay border-hive-border-default\">\n                <div className=\"text-center text-hive-text-mutedLight\">\n                  <Code className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n                  <p>Complete the tool details to see preview</p>\n                </div>\n              </Card>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/tools/tool-execution-panel.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Cpu' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":6,"suggestions":[{"messageId":"removeVar","data":{"varName":"Cpu"},"fix":{"range":[325,332],"text":""},"desc":"Remove unused variable 'Cpu'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertTriangle"},"fix":{"range":[358,375],"text":""},"desc":"Remove unused variable 'AlertTriangle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Share2' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Share2"},"fix":{"range":[395,405],"text":""},"desc":"Remove unused variable 'Share2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'result' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":30,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"result"},"fix":{"range":[641,664],"text":""},"desc":"Remove unused variable 'result'."}]},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Memory' is not defined.","line":425,"column":24,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":425,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'Memory' is not defined.","line":425,"column":24,"nodeType":"JSXIdentifier","messageId":"undef","endLine":425,"endColumn":30}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useRef, useEffect } from 'react';\nimport { Card, Button, Input, Label, Textarea, Badge, Tabs, TabsContent, TabsList, TabsTrigger, Progress } from \"@hive/ui\";\nimport { Alert, AlertDescription } from \"@/components/temp-stubs\";\nimport {\n  Play,\n  Square,\n  Terminal,\n  Code,\n  Settings,\n  Clock,\n  Cpu,\n  CheckCircle,\n  XCircle,\n  AlertTriangle,\n  Copy,\n  Download,\n  Share2\n} from 'lucide-react';\nimport { \n  ToolExecutionRuntime, \n  ToolDefinition, \n  ExecutionResult, \n  ExecutionContext \n} from '../../lib/tool-execution-runtime';\n\ninterface ToolExecutionPanelProps {\n  tool: ToolDefinition;\n  onResult?: (result: ExecutionResult) => void;\n  userId: string;\n  spaceId?: string;\n}\n\nexport function ToolExecutionPanel({ \n  tool, \n  onResult, \n  userId, \n  spaceId \n}: ToolExecutionPanelProps) {\n  const [inputs, setInputs] = useState<Record<string, any>>({});\n  const [isExecuting, setIsExecuting] = useState(false);\n  const [executionId, setExecutionId] = useState<string | null>(null);\n  const [result, setResult] = useState<ExecutionResult | null>(null);\n  const [executionHistory, setExecutionHistory] = useState<ExecutionResult[]>([]);\n  const [logs, setLogs] = useState<string[]>([]);\n  const [activeTab, setActiveTab] = useState('inputs');\n  \n  const runtime = useRef(ToolExecutionRuntime.getInstance());\n  const logsEndRef = useRef<HTMLDivElement>(null);\n\n  // Auto-scroll logs to bottom\n  useEffect(() => {\n    logsEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [logs]);\n\n  // Initialize inputs with default values\n  useEffect(() => {\n    const initialInputs: Record<string, any> = {};\n    Object.entries(tool.schema.inputs).forEach(([key, definition]) => {\n      if (definition.default !== undefined) {\n        initialInputs[key] = definition.default;\n      } else {\n        // Set default values based on type\n        switch (definition.type) {\n          case 'string':\n            initialInputs[key] = '';\n            break;\n          case 'number':\n            initialInputs[key] = 0;\n            break;\n          case 'boolean':\n            initialInputs[key] = false;\n            break;\n          case 'array':\n            initialInputs[key] = [];\n            break;\n          case 'object':\n            initialInputs[key] = {};\n            break;\n          default:\n            initialInputs[key] = null;\n        }\n      }\n    });\n    setInputs(initialInputs);\n  }, [tool]);\n\n  const handleInputChange = (key: string, value: any) => {\n    setInputs(prev => ({ ...prev, [key]: value }));\n  };\n\n  const parseInputValue = (value: string, type: string): any => {\n    switch (type) {\n      case 'number': {\n        const num = parseFloat(value);\n        return isNaN(num) ? 0 : num;\n      }\n      case 'boolean':\n        return value.toLowerCase() === 'true';\n      case 'array':\n        try {\n          return JSON.parse(value);\n        } catch {\n          return value.split(',').map(s => s.trim());\n        }\n      case 'object':\n        try {\n          return JSON.parse(value);\n        } catch {\n          return {};\n        }\n      default:\n        return value;\n    }\n  };\n\n  const handleExecute = async () => {\n    setIsExecuting(true);\n    setActiveTab('output');\n    setLogs([]);\n    \n    const context: ExecutionContext = {\n      userId,\n      toolId: tool.id,\n      spaceId,\n      permissions: tool.permissions,\n      timeout: 10000, // 10 seconds\n      maxMemory: 50 * 1024 * 1024 // 50MB\n    };\n\n    const currentExecutionId = `exec_${Date.now()}`;\n    setExecutionId(currentExecutionId);\n\n    try {\n      const execResult = await runtime.current.executeTool(tool, inputs, context);\n      \n      setResult(execResult);\n      setLogs(execResult.logs);\n      setExecutionHistory(prev => [execResult, ...prev.slice(0, 9)]); // Keep last 10\n      \n      if (onResult) {\n        onResult(execResult);\n      }\n    } catch (error) {\n      const errorResult: ExecutionResult = {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error',\n        executionTime: 0,\n        memoryUsed: 0,\n        logs: ['Error: Failed to execute tool']\n      };\n      \n      setResult(errorResult);\n      setLogs(errorResult.logs);\n    } finally {\n      setIsExecuting(false);\n      setExecutionId(null);\n    }\n  };\n\n  const handleCancel = () => {\n    if (executionId) {\n      runtime.current.cancelExecution(executionId);\n      setIsExecuting(false);\n      setExecutionId(null);\n    }\n  };\n\n  const copyResult = () => {\n    if (result) {\n      navigator.clipboard.writeText(JSON.stringify(result, null, 2));\n    }\n  };\n\n  const exportResult = () => {\n    if (result) {\n      const dataStr = JSON.stringify(result, null, 2);\n      const dataBlob = new Blob([dataStr], { type: 'application/json' });\n      const url = URL.createObjectURL(dataBlob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `${tool.name}_result_${Date.now()}.json`;\n      link.click();\n      URL.revokeObjectURL(url);\n    }\n  };\n\n  const renderInputField = (key: string, definition: any) => {\n    const value = inputs[key];\n    \n    switch (definition.type) {\n      case 'string':\n        if (definition.multiline) {\n          return (\n            <Textarea\n              value={value || ''}\n              onChange={(e) => handleInputChange(key, e.target.value)}\n              placeholder={definition.placeholder}\n              rows={3}\n              className=\"mt-1\"\n            />\n          );\n        }\n        return (\n          <Input\n            value={value || ''}\n            onChange={(e) => handleInputChange(key, e.target.value)}\n            placeholder={definition.placeholder}\n            className=\"mt-1\"\n          />\n        );\n      \n      case 'number':\n        return (\n          <Input\n            type=\"number\"\n            value={value || 0}\n            onChange={(e) => handleInputChange(key, parseFloat(e.target.value))}\n            className=\"mt-1\"\n          />\n        );\n      \n      case 'boolean':\n        return (\n          <div className=\"mt-1\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => handleInputChange(key, !value)}\n              className={value ? 'bg-green-500/20 border-green-500' : ''}\n            >\n              {value ? 'True' : 'False'}\n            </Button>\n          </div>\n        );\n      \n      case 'array':\n      case 'object':\n        return (\n          <Textarea\n            value={typeof value === 'string' ? value : JSON.stringify(value, null, 2)}\n            onChange={(e) => handleInputChange(key, parseInputValue(e.target.value, definition.type))}\n            placeholder={definition.type === 'array' ? '[\"item1\", \"item2\"]' : '{\"key\": \"value\"}'}\n            rows={3}\n            className=\"mt-1 font-mono text-sm\"\n          />\n        );\n      \n      default:\n        return (\n          <Input\n            value={value || ''}\n            onChange={(e) => handleInputChange(key, e.target.value)}\n            className=\"mt-1\"\n          />\n        );\n    }\n  };\n\n  const getStatusIcon = () => {\n    if (isExecuting) return <Clock className=\"h-4 w-4 animate-spin\" />;\n    if (!result) return <Play className=\"h-4 w-4\" />;\n    return result.success ? \n      <CheckCircle className=\"h-4 w-4 text-green-400\" /> : \n      <XCircle className=\"h-4 w-4 text-red-400\" />;\n  };\n\n  const getStatusColor = () => {\n    if (isExecuting) return 'border-yellow-500 bg-yellow-500/10';\n    if (!result) return 'border-hive-border-default';\n    return result.success ? \n      'border-green-500 bg-green-500/10' : \n      'border-red-500 bg-red-500/10';\n  };\n\n  return (\n    <Card className={`p-6 bg-hive-background-overlay transition-all duration-200 ${getStatusColor()}`}>\n      <div className=\"space-y-6\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-8 h-8 bg-hive-gold rounded-lg flex items-center justify-center\">\n              <Code className=\"h-5 w-5 text-hive-obsidian\" />\n            </div>\n            <div>\n              <h3 className=\"font-semibold text-white\">{tool.name}</h3>\n              <p className=\"text-sm text-hive-text-mutedLight\">\n                {tool.language} â€¢ v{tool.version}\n              </p>\n            </div>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            {result && (\n              <>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={copyResult}\n                >\n                  <Copy className=\"h-4 w-4\" />\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={exportResult}\n                >\n                  <Download className=\"h-4 w-4\" />\n                </Button>\n              </>\n            )}\n            {isExecuting ? (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handleCancel}\n                className=\"text-red-400 border-red-400\"\n              >\n                <Square className=\"h-4 w-4 mr-2\" />\n                Cancel\n              </Button>\n            ) : (\n              <Button\n                onClick={handleExecute}\n                disabled={Object.keys(tool.schema.inputs).some(key => \n                  tool.schema.inputs[key].required && !inputs[key]\n                )}\n                className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n              >\n                <Play className=\"h-4 w-4 mr-2\" />\n                Execute\n              </Button>\n            )}\n          </div>\n        </div>\n\n        {/* Execution Progress */}\n        {isExecuting && (\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-white\">Executing...</span>\n              <span className=\"text-hive-text-mutedLight\">\n                {executionId}\n              </span>\n            </div>\n            <Progress value={75} className=\"h-2\" />\n          </div>\n        )}\n\n        {/* Tabs */}\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsList className=\"grid w-full grid-cols-4\">\n            <TabsTrigger value=\"inputs\" className=\"flex items-center space-x-2\">\n              <Settings className=\"h-4 w-4\" />\n              <span>Inputs</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"output\" className=\"flex items-center space-x-2\">\n              {getStatusIcon()}\n              <span>Output</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"logs\" className=\"flex items-center space-x-2\">\n              <Terminal className=\"h-4 w-4\" />\n              <span>Logs</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"history\" className=\"flex items-center space-x-2\">\n              <Clock className=\"h-4 w-4\" />\n              <span>History</span>\n            </TabsTrigger>\n          </TabsList>\n\n          {/* Inputs Tab */}\n          <TabsContent value=\"inputs\" className=\"space-y-4 mt-4\">\n            {Object.keys(tool.schema.inputs).length === 0 ? (\n              <p className=\"text-hive-text-mutedLight text-center py-4\">\n                This tool doesn't require any inputs\n              </p>\n            ) : (\n              <div className=\"space-y-4\">\n                {Object.entries(tool.schema.inputs).map(([key, definition]) => (\n                  <div key={key}>\n                    <Label className=\"text-white flex items-center space-x-2\">\n                      <span>{key}</span>\n                      {definition.required && (\n                        <Badge variant=\"secondary\" className=\"text-xs\">Required</Badge>\n                      )}\n                    </Label>\n                    {definition.description && (\n                      <p className=\"text-sm text-hive-text-mutedLight mb-1\">\n                        {definition.description}\n                      </p>\n                    )}\n                    {renderInputField(key, definition)}\n                  </div>\n                ))}\n              </div>\n            )}\n          </TabsContent>\n\n          {/* Output Tab */}\n          <TabsContent value=\"output\" className=\"mt-4\">\n            {result ? (\n              <div className=\"space-y-4\">\n                {/* Status Banner */}\n                <Alert className={result.success ? 'border-green-500/20 bg-green-500/10' : 'border-red-500/20 bg-red-500/10'}>\n                  {result.success ? \n                    <CheckCircle className=\"h-4 w-4 text-green-400\" /> : \n                    <XCircle className=\"h-4 w-4 text-red-400\" />\n                  }\n                  <AlertDescription className={result.success ? 'text-green-200' : 'text-red-200'}>\n                    {result.success ? 'Execution completed successfully' : `Execution failed: ${result.error}`}\n                  </AlertDescription>\n                </Alert>\n\n                {/* Performance Stats */}\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"bg-hive-background-tertiary rounded-lg p-3\">\n                    <div className=\"flex items-center space-x-2\">\n                      <Clock className=\"h-4 w-4 text-blue-400\" />\n                      <span className=\"text-sm text-hive-text-mutedLight\">Execution Time</span>\n                    </div>\n                    <p className=\"text-lg font-semibold text-white\">{result.executionTime}ms</p>\n                  </div>\n                  <div className=\"bg-hive-background-tertiary rounded-lg p-3\">\n                    <div className=\"flex items-center space-x-2\">\n                      <Memory className=\"h-4 w-4 text-purple-400\" />\n                      <span className=\"text-sm text-hive-text-mutedLight\">Memory Used</span>\n                    </div>\n                    <p className=\"text-lg font-semibold text-white\">\n                      {(result.memoryUsed / 1024).toFixed(1)}KB\n                    </p>\n                  </div>\n                </div>\n\n                {/* Result Data */}\n                {result.success && result.result && (\n                  <div>\n                    <Label className=\"text-white\">Result</Label>\n                    <div className=\"mt-1 bg-hive-background-tertiary rounded-lg p-4\">\n                      <pre className=\"text-sm text-white overflow-x-auto\">\n                        {JSON.stringify(result.result, null, 2)}\n                      </pre>\n                    </div>\n                  </div>\n                )}\n              </div>\n            ) : (\n              <div className=\"text-center py-8 text-hive-text-mutedLight\">\n                <Terminal className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n                <p>No output yet</p>\n                <p className=\"text-sm\">Execute the tool to see results</p>\n              </div>\n            )}\n          </TabsContent>\n\n          {/* Logs Tab */}\n          <TabsContent value=\"logs\" className=\"mt-4\">\n            <div className=\"bg-black rounded-lg p-4 h-64 overflow-y-auto font-mono text-sm\">\n              {logs.length === 0 ? (\n                <p className=\"text-gray-500\">No logs yet...</p>\n              ) : (\n                logs.map((log, index) => (\n                  <div key={index} className=\"mb-1\">\n                    <span className=\"text-gray-400\">{String(index + 1).padStart(2, '0')} </span>\n                    <span className={\n                      log.includes('[ERROR]') ? 'text-red-400' :\n                      log.includes('[WARN]') ? 'text-yellow-400' :\n                      log.includes('[TOAST]') ? 'text-blue-400' :\n                      'text-green-400'\n                    }>\n                      {log}\n                    </span>\n                  </div>\n                ))\n              )}\n              <div ref={logsEndRef} />\n            </div>\n          </TabsContent>\n\n          {/* History Tab */}\n          <TabsContent value=\"history\" className=\"mt-4\">\n            {executionHistory.length === 0 ? (\n              <div className=\"text-center py-8 text-hive-text-mutedLight\">\n                <Clock className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n                <p>No execution history</p>\n              </div>\n            ) : (\n              <div className=\"space-y-3\">\n                {executionHistory.map((exec, index) => (\n                  <div key={index} className=\"flex items-center justify-between p-3 bg-hive-background-tertiary rounded-lg\">\n                    <div className=\"flex items-center space-x-3\">\n                      {exec.success ? \n                        <CheckCircle className=\"h-4 w-4 text-green-400\" /> : \n                        <XCircle className=\"h-4 w-4 text-red-400\" />\n                      }\n                      <div>\n                        <p className=\"text-sm text-white\">\n                          {exec.success ? 'Success' : 'Failed'}\n                        </p>\n                        <p className=\"text-xs text-hive-text-mutedLight\">\n                          {exec.executionTime}ms â€¢ {(exec.memoryUsed / 1024).toFixed(1)}KB\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"text-xs text-hive-text-mutedLight\">\n                      {new Date(exec.metadata?.timestamp || Date.now()).toLocaleTimeString()}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </TabsContent>\n        </Tabs>\n      </div>\n    </Card>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/tools/visual-tool-composer.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Card' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Card"},"fix":{"range":[81,86],"text":""},"desc":"Remove unused variable 'Card'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Alert' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Alert"},"fix":{"range":[172,181],"text":""},"desc":"Remove unused variable 'Alert'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertDescription' is defined but never used. Allowed unused vars must match /^_/u.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertDescription"},"fix":{"range":[181,201],"text":""},"desc":"Remove unused variable 'AlertDescription'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Plus' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Plus"},"fix":{"range":[232,237],"text":""},"desc":"Remove unused variable 'Plus'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Search"},"fix":{"range":[236,246],"text":""},"desc":"Remove unused variable 'Search'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Copy' is defined but never used. Allowed unused vars must match /^_/u.","line":26,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Copy"},"fix":{"range":[302,310],"text":""},"desc":"Remove unused variable 'Copy'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Move' is defined but never used. Allowed unused vars must match /^_/u.","line":28,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Move"},"fix":{"range":[318,326],"text":""},"desc":"Remove unused variable 'Move'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Resize' is defined but never used. Allowed unused vars must match /^_/u.","line":29,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Resize"},"fix":{"range":[326,336],"text":""},"desc":"Remove unused variable 'Resize'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Eye' is defined but never used. Allowed unused vars must match /^_/u.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":6,"suggestions":[{"messageId":"removeVar","data":{"varName":"Eye"},"fix":{"range":[336,343],"text":""},"desc":"Remove unused variable 'Eye'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Code' is defined but never used. Allowed unused vars must match /^_/u.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Code"},"fix":{"range":[343,351],"text":""},"desc":"Remove unused variable 'Code'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Zap' is defined but never used. Allowed unused vars must match /^_/u.","line":32,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":6,"suggestions":[{"messageId":"removeVar","data":{"varName":"Zap"},"fix":{"range":[351,358],"text":""},"desc":"Remove unused variable 'Zap'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Palette' is defined but never used. Allowed unused vars must match /^_/u.","line":33,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Palette"},"fix":{"range":[358,369],"text":""},"desc":"Remove unused variable 'Palette'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":36,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[390,405],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'composition' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":46,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"composition"},"fix":{"range":[611,639],"text":""},"desc":"Remove unused variable 'composition'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'composition' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":47,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"composition"},"fix":{"range":[673,701],"text":""},"desc":"Remove unused variable 'composition'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'userId' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":74,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"userId"},"fix":{"range":[1287,1297],"text":""},"desc":"Remove unused variable 'userId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'setToolDescription' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":77,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":77,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"setToolDescription"},"fix":{"range":[1428,1448],"text":""},"desc":"Remove unused variable 'setToolDescription'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'setCanvasSize' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":89,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":89,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"setCanvasSize"},"fix":{"range":[2043,2058],"text":""},"desc":"Remove unused variable 'setCanvasSize'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useRef, useCallback } from 'react';\nimport {\n  Card,\n  Button,\n  Input,\n  Label,\n  Badge,\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n  Alert,\n  AlertDescription\n} from '@hive/ui';\nimport {\n  Plus,\n  Search,\n  Grid,\n  Layers,\n  Settings,\n  Play,\n  Save,\n  Trash2,\n  Copy,\n  Link,\n  Move,\n  Resize,\n  Eye,\n  Code,\n  Zap,\n  Palette,\n  Box,\n  ArrowRight,\n  CheckCircle\n} from 'lucide-react';\nimport { \n  ElementRegistry, \n  ToolComposition, \n  ElementDefinition, \n  initializeElementSystem \n} from '../../lib/element-system';\n\ninterface VisualToolComposerProps {\n  onSave: (composition: ToolComposition) => Promise<void>;\n  onPreview: (composition: ToolComposition) => void;\n  onCancel: () => void;\n  initialComposition?: ToolComposition;\n  userId: string;\n}\n\ninterface CanvasElement {\n  id: string;\n  elementId: string;\n  instanceId: string;\n  position: { x: number; y: number };\n  size: { width: number; height: number };\n  config: Record<string, any>;\n  isSelected: boolean;\n}\n\ninterface Connection {\n  id: string;\n  from: { instanceId: string; output: string; x: number; y: number };\n  to: { instanceId: string; input: string; x: number; y: number };\n}\n\nexport function VisualToolComposer({\n  onSave,\n  onPreview,\n  onCancel,\n  initialComposition,\n  userId\n}: VisualToolComposerProps) {\n  const [toolName, setToolName] = useState(initialComposition?.name || '');\n  const [toolDescription, setToolDescription] = useState(initialComposition?.description || '');\n  const [canvasElements, setCanvasElements] = useState<CanvasElement[]>([]);\n  const [connections, setConnections] = useState<Connection[]>([]);\n  const [selectedElement, setSelectedElement] = useState<string | null>(null);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [connectionStart, setConnectionStart] = useState<{\n    instanceId: string;\n    output: string;\n    x: number;\n    y: number;\n  } | null>(null);\n  const [draggedElement, setDraggedElement] = useState<ElementDefinition | null>(null);\n  const [canvasSize, setCanvasSize] = useState({ width: 1200, height: 800 });\n  const [zoom, setZoom] = useState(1);\n  const [showGrid, setShowGrid] = useState(true);\n  const [activeTab, setActiveTab] = useState('canvas');\n\n  const canvasRef = useRef<HTMLDivElement>(null);\n  const elementRegistry = useRef(ElementRegistry.getInstance());\n\n  // Initialize element system\n  useState(() => {\n    initializeElementSystem();\n  });\n\n  const handleDragStart = (element: ElementDefinition) => {\n    setDraggedElement(element);\n  };\n\n  const handleCanvasDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    if (!draggedElement || !canvasRef.current) return;\n\n    const rect = canvasRef.current.getBoundingClientRect();\n    const x = (e.clientX - rect.left) / zoom;\n    const y = (e.clientY - rect.top) / zoom;\n\n    const newElement: CanvasElement = {\n      id: `element_${Date.now()}`,\n      elementId: draggedElement.id,\n      instanceId: `${draggedElement.id}_${Date.now()}`,\n      position: { x: Math.max(0, x - 50), y: Math.max(0, y - 25) },\n      size: { width: 200, height: 100 },\n      config: { ...draggedElement.defaultConfig },\n      isSelected: false\n    };\n\n    setCanvasElements(prev => [...prev, newElement]);\n    setDraggedElement(null);\n  }, [draggedElement, zoom]);\n\n  const handleCanvasDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n  };\n\n  const handleElementSelect = (elementId: string) => {\n    setCanvasElements(prev => \n      prev.map(el => ({ ...el, isSelected: el.id === elementId }))\n    );\n    setSelectedElement(elementId);\n  };\n\n  const handleElementMove = (elementId: string, newPosition: { x: number; y: number }) => {\n    setCanvasElements(prev =>\n      prev.map(el => \n        el.id === elementId \n          ? { ...el, position: newPosition }\n          : el\n      )\n    );\n  };\n\n  const handleElementResize = (elementId: string, newSize: { width: number; height: number }) => {\n    setCanvasElements(prev =>\n      prev.map(el => \n        el.id === elementId \n          ? { ...el, size: newSize }\n          : el\n      )\n    );\n  };\n\n  const handleElementDelete = (elementId: string) => {\n    setCanvasElements(prev => prev.filter(el => el.id !== elementId));\n    setConnections(prev => \n      prev.filter(conn => \n        conn.from.instanceId !== elementId && conn.to.instanceId !== elementId\n      )\n    );\n    if (selectedElement === elementId) {\n      setSelectedElement(null);\n    }\n  };\n\n  const handleConnectionStart = (instanceId: string, output: string, x: number, y: number) => {\n    setIsConnecting(true);\n    setConnectionStart({ instanceId, output, x, y });\n  };\n\n  const handleConnectionEnd = (instanceId: string, input: string, x: number, y: number) => {\n    if (connectionStart && connectionStart.instanceId !== instanceId) {\n      const newConnection: Connection = {\n        id: `conn_${Date.now()}`,\n        from: connectionStart,\n        to: { instanceId, input, x, y }\n      };\n      setConnections(prev => [...prev, newConnection]);\n    }\n    setIsConnecting(false);\n    setConnectionStart(null);\n  };\n\n  const handleElementConfigChange = (elementId: string, newConfig: Record<string, any>) => {\n    setCanvasElements(prev =>\n      prev.map(el => \n        el.id === elementId \n          ? { ...el, config: { ...el.config, ...newConfig } }\n          : el\n      )\n    );\n  };\n\n  const buildToolComposition = (): ToolComposition => {\n    return {\n      id: initialComposition?.id || `tool_${Date.now()}`,\n      name: toolName,\n      description: toolDescription,\n      elements: canvasElements.map(canvasEl => ({\n        elementId: canvasEl.elementId,\n        instanceId: canvasEl.instanceId,\n        config: canvasEl.config,\n        position: canvasEl.position,\n        size: canvasEl.size\n      })),\n      connections: connections.map(conn => ({\n        from: { instanceId: conn.from.instanceId, output: conn.from.output },\n        to: { instanceId: conn.to.instanceId, input: conn.to.input }\n      })),\n      layout: 'grid'\n    };\n  };\n\n  const handleSave = async () => {\n    if (!toolName.trim()) {\n      alert('Please enter a tool name');\n      return;\n    }\n\n    const composition = buildToolComposition();\n    await onSave(composition);\n  };\n\n  const handlePreview = () => {\n    const composition = buildToolComposition();\n    onPreview(composition);\n  };\n\n  const selectedCanvasElement = canvasElements.find(el => el.id === selectedElement);\n  const selectedElementDef = selectedCanvasElement \n    ? elementRegistry.current.getElement(selectedCanvasElement.elementId)\n    : null;\n\n  const elementCategories = [\n    { id: 'input', name: 'Input', icon: 'Type', color: 'text-blue-400' },\n    { id: 'display', name: 'Display', icon: 'Eye', color: 'text-green-400' },\n    { id: 'filter', name: 'Filter', icon: 'Filter', color: 'text-purple-400' },\n    { id: 'action', name: 'Action', icon: 'Zap', color: 'text-orange-400' },\n    { id: 'layout', name: 'Layout', icon: 'Grid', color: 'text-pink-400' }\n  ];\n\n  return (\n    <div className=\"h-screen flex flex-col bg-hive-background-primary\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-4 border-b border-hive-border-default bg-hive-background-overlay\">\n        <div className=\"flex items-center space-x-4\">\n          <div className=\"flex items-center space-x-2\">\n            <Box className=\"h-6 w-6 text-hive-gold\" />\n            <h1 className=\"text-xl font-bold text-white\">Tool Composer</h1>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <Input\n              value={toolName}\n              onChange={(e) => setToolName(e.target.value)}\n              placeholder=\"Tool name...\"\n              className=\"w-48\"\n            />\n            <Badge variant=\"outline\">\n              {canvasElements.length} elements\n            </Badge>\n          </div>\n        </div>\n\n        <div className=\"flex items-center space-x-2\">\n          <Button\n            variant=\"outline\"\n            onClick={() => setShowGrid(!showGrid)}\n            className={showGrid ? 'bg-hive-gold/20 border-hive-gold' : ''}\n          >\n            <Grid className=\"h-4 w-4\" />\n          </Button>\n          \n          <div className=\"flex items-center space-x-1 bg-hive-background-tertiary rounded-lg p-1\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setZoom(Math.max(0.5, zoom - 0.1))}\n            >\n              -\n            </Button>\n            <span className=\"text-sm text-white px-2\">{Math.round(zoom * 100)}%</span>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setZoom(Math.min(2, zoom + 0.1))}\n            >\n              +\n            </Button>\n          </div>\n\n          <Button\n            variant=\"outline\"\n            onClick={handlePreview}\n            disabled={canvasElements.length === 0}\n          >\n            <Play className=\"h-4 w-4 mr-2\" />\n            Preview\n          </Button>\n          \n          <Button\n            onClick={handleSave}\n            disabled={!toolName.trim() || canvasElements.length === 0}\n            className=\"bg-hive-gold text-hive-obsidian hover:bg-hive-champagne\"\n          >\n            <Save className=\"h-4 w-4 mr-2\" />\n            Save Tool\n          </Button>\n          \n          <Button variant=\"outline\" onClick={onCancel}>\n            Cancel\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"flex-1 flex\">\n        {/* Element Palette */}\n        <div className=\"w-80 border-r border-hive-border-default bg-hive-background-overlay\">\n          <Tabs value={activeTab} onValueChange={setActiveTab}>\n            <TabsList className=\"grid w-full grid-cols-2 m-2\">\n              <TabsTrigger value=\"elements\">\n                <Layers className=\"h-4 w-4 mr-2\" />\n                Elements\n              </TabsTrigger>\n              <TabsTrigger value=\"properties\">\n                <Settings className=\"h-4 w-4 mr-2\" />\n                Properties\n              </TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"elements\" className=\"p-4 space-y-4\">\n              {elementCategories.map(category => {\n                const elements = elementRegistry.current.getElementsByCategory(category.id);\n                return (\n                  <div key={category.id}>\n                    <h3 className={`text-sm font-medium mb-2 ${category.color}`}>\n                      {category.name} ({elements.length})\n                    </h3>\n                    <div className=\"space-y-2\">\n                      {elements.map(element => (\n                        <div\n                          key={element.id}\n                          draggable\n                          onDragStart={() => handleDragStart(element)}\n                          className=\"p-3 bg-hive-background-tertiary rounded-lg cursor-move hover:bg-hive-background-secondary transition-colors\"\n                        >\n                          <div className=\"flex items-center space-x-2\">\n                            <div className={`w-8 h-8 rounded flex items-center justify-center bg-hive-background-primary ${category.color}`}>\n                              <span className=\"text-xs\">ðŸ“¦</span>\n                            </div>\n                            <div className=\"flex-1 min-w-0\">\n                              <h4 className=\"text-sm font-medium text-white truncate\">\n                                {element.name}\n                              </h4>\n                              <p className=\"text-xs text-hive-text-mutedLight truncate\">\n                                {element.description}\n                              </p>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                );\n              })}\n            </TabsContent>\n\n            <TabsContent value=\"properties\" className=\"p-4\">\n              {selectedCanvasElement && selectedElementDef ? (\n                <div className=\"space-y-4\">\n                  <div>\n                    <h3 className=\"text-lg font-medium text-white mb-2\">\n                      {selectedElementDef.name}\n                    </h3>\n                    <p className=\"text-sm text-hive-text-mutedLight mb-4\">\n                      {selectedElementDef.description}\n                    </p>\n                  </div>\n\n                  <div className=\"space-y-3\">\n                    <div>\n                      <Label className=\"text-white\">Position</Label>\n                      <div className=\"flex space-x-2 mt-1\">\n                        <Input\n                          type=\"number\"\n                          value={selectedCanvasElement.position.x}\n                          onChange={(e) => handleElementMove(selectedCanvasElement.id, {\n                            x: parseInt(e.target.value) || 0,\n                            y: selectedCanvasElement.position.y\n                          })}\n                          className=\"w-20\"\n                        />\n                        <Input\n                          type=\"number\"\n                          value={selectedCanvasElement.position.y}\n                          onChange={(e) => handleElementMove(selectedCanvasElement.id, {\n                            x: selectedCanvasElement.position.x,\n                            y: parseInt(e.target.value) || 0\n                          })}\n                          className=\"w-20\"\n                        />\n                      </div>\n                    </div>\n\n                    <div>\n                      <Label className=\"text-white\">Size</Label>\n                      <div className=\"flex space-x-2 mt-1\">\n                        <Input\n                          type=\"number\"\n                          value={selectedCanvasElement.size.width}\n                          onChange={(e) => handleElementResize(selectedCanvasElement.id, {\n                            width: parseInt(e.target.value) || 100,\n                            height: selectedCanvasElement.size.height\n                          })}\n                          className=\"w-20\"\n                        />\n                        <Input\n                          type=\"number\"\n                          value={selectedCanvasElement.size.height}\n                          onChange={(e) => handleElementResize(selectedCanvasElement.id, {\n                            width: selectedCanvasElement.size.width,\n                            height: parseInt(e.target.value) || 50\n                          })}\n                          className=\"w-20\"\n                        />\n                      </div>\n                    </div>\n\n                    {Object.entries(selectedElementDef.configSchema).map(([key, schema]) => (\n                      <div key={key}>\n                        <Label className=\"text-white capitalize\">{key}</Label>\n                        {(schema as any).type === 'string' && (\n                          <Input\n                            value={selectedCanvasElement.config[key] || ''}\n                            onChange={(e) => handleElementConfigChange(selectedCanvasElement.id, {\n                              [key]: e.target.value\n                            })}\n                            className=\"mt-1\"\n                          />\n                        )}\n                        {(schema as any).type === 'boolean' && (\n                          <div className=\"mt-1\">\n                            <Button\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={() => handleElementConfigChange(selectedCanvasElement.id, {\n                                [key]: !selectedCanvasElement.config[key]\n                              })}\n                              className={selectedCanvasElement.config[key] ? 'bg-green-500/20 border-green-500' : ''}\n                            >\n                              {selectedCanvasElement.config[key] ? 'True' : 'False'}\n                            </Button>\n                          </div>\n                        )}\n                        {(schema as any).type === 'number' && (\n                          <Input\n                            type=\"number\"\n                            value={selectedCanvasElement.config[key] || 0}\n                            onChange={(e) => handleElementConfigChange(selectedCanvasElement.id, {\n                              [key]: parseInt(e.target.value) || 0\n                            })}\n                            className=\"mt-1\"\n                          />\n                        )}\n                      </div>\n                    ))}\n                  </div>\n\n                  <div className=\"pt-4 border-t border-hive-border-default\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => handleElementDelete(selectedCanvasElement.id)}\n                      className=\"text-red-400 border-red-400 hover:bg-red-500/10\"\n                    >\n                      <Trash2 className=\"h-4 w-4 mr-2\" />\n                      Delete Element\n                    </Button>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"text-center py-8\">\n                  <Settings className=\"h-12 w-12 mx-auto mb-3 text-hive-text-mutedLight opacity-50\" />\n                  <p className=\"text-hive-text-mutedLight\">\n                    Select an element to view its properties\n                  </p>\n                </div>\n              )}\n            </TabsContent>\n          </Tabs>\n        </div>\n\n        {/* Canvas */}\n        <div className=\"flex-1 relative overflow-hidden\">\n          <div\n            ref={canvasRef}\n            className={`w-full h-full relative ${showGrid ? 'bg-grid-pattern' : ''}`}\n            style={{ \n              transform: `scale(${zoom})`,\n              transformOrigin: 'top left',\n              backgroundSize: showGrid ? `${20 * zoom}px ${20 * zoom}px` : 'none'\n            }}\n            onDrop={handleCanvasDrop}\n            onDragOver={handleCanvasDragOver}\n            onClick={() => setSelectedElement(null)}\n          >\n            {/* Canvas Elements */}\n            {canvasElements.map(element => {\n              const elementDef = elementRegistry.current.getElement(element.elementId);\n              if (!elementDef) return null;\n\n              return (\n                <div\n                  key={element.id}\n                  className={`absolute bg-hive-background-overlay border-2 rounded-lg p-3 cursor-move ${\n                    element.isSelected \n                      ? 'border-hive-gold shadow-lg shadow-hive-gold/20' \n                      : 'border-hive-border-default hover:border-hive-border-hover'\n                  }`}\n                  style={{\n                    left: element.position.x,\n                    top: element.position.y,\n                    width: element.size.width,\n                    height: element.size.height\n                  }}\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleElementSelect(element.id);\n                  }}\n                >\n                  <div className=\"flex items-center space-x-2 mb-2\">\n                    <div className=\"w-4 h-4 bg-hive-gold rounded flex items-center justify-center\">\n                      <span className=\"text-xs\">ðŸ“¦</span>\n                    </div>\n                    <span className=\"text-sm font-medium text-white truncate\">\n                      {elementDef.name}\n                    </span>\n                  </div>\n                  \n                  <div className=\"text-xs text-hive-text-mutedLight\">\n                    {elementDef.description}\n                  </div>\n\n                  {/* Connection Points */}\n                  <div className=\"absolute -right-2 top-1/2 w-4 h-4 bg-blue-500 rounded-full cursor-pointer transform -translate-y-1/2\"\n                       onClick={(e) => {\n                         e.stopPropagation();\n                         handleConnectionStart(element.instanceId, 'output', element.position.x + element.size.width, element.position.y + element.size.height / 2);\n                       }}>\n                    <ArrowRight className=\"h-3 w-3 text-white m-0.5\" />\n                  </div>\n                  \n                  <div className=\"absolute -left-2 top-1/2 w-4 h-4 bg-green-500 rounded-full cursor-pointer transform -translate-y-1/2\"\n                       onClick={(e) => {\n                         e.stopPropagation();\n                         handleConnectionEnd(element.instanceId, 'input', element.position.x, element.position.y + element.size.height / 2);\n                       }}>\n                    <ArrowRight className=\"h-3 w-3 text-white m-0.5 rotate-180\" />\n                  </div>\n                </div>\n              );\n            })}\n\n            {/* Connections */}\n            <svg className=\"absolute inset-0 pointer-events-none\">\n              {connections.map(connection => (\n                <line\n                  key={connection.id}\n                  x1={connection.from.x}\n                  y1={connection.from.y}\n                  x2={connection.to.x}\n                  y2={connection.to.y}\n                  stroke=\"#D4AF37\"\n                  strokeWidth=\"2\"\n                  markerEnd=\"url(#arrowhead)\"\n                />\n              ))}\n              <defs>\n                <marker\n                  id=\"arrowhead\"\n                  markerWidth=\"10\"\n                  markerHeight=\"7\"\n                  refX=\"9\"\n                  refY=\"3.5\"\n                  orient=\"auto\"\n                >\n                  <polygon\n                    points=\"0 0, 10 3.5, 0 7\"\n                    fill=\"#D4AF37\"\n                  />\n                </marker>\n              </defs>\n            </svg>\n\n            {/* Empty State */}\n            {canvasElements.length === 0 && (\n              <div className=\"absolute inset-0 flex items-center justify-center\">\n                <div className=\"text-center\">\n                  <Box className=\"h-16 w-16 mx-auto mb-4 text-hive-text-mutedLight opacity-50\" />\n                  <h3 className=\"text-lg font-medium text-white mb-2\">\n                    Start Building Your Tool\n                  </h3>\n                  <p className=\"text-hive-text-mutedLight mb-4\">\n                    Drag elements from the palette to create your custom tool\n                  </p>\n                  <div className=\"flex items-center justify-center space-x-2 text-sm text-hive-text-mutedLight\">\n                    <span>ðŸ’¡ Tip: Connect elements to create data flow</span>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Status Bar */}\n      <div className=\"h-8 bg-hive-background-tertiary border-t border-hive-border-default flex items-center justify-between px-4 text-xs text-hive-text-mutedLight\">\n        <div className=\"flex items-center space-x-4\">\n          <span>Canvas: {canvasSize.width} Ã— {canvasSize.height}</span>\n          <span>Elements: {canvasElements.length}</span>\n          <span>Connections: {connections.length}</span>\n        </div>\n        <div className=\"flex items-center space-x-4\">\n          {isConnecting && (\n            <div className=\"flex items-center space-x-2 text-hive-gold\">\n              <Link className=\"h-3 w-3\" />\n              <span>Click target element to connect</span>\n            </div>\n          )}\n          <span>Zoom: {Math.round(zoom * 100)}%</span>\n        </div>\n      </div>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/ui/modal-system.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[121,134],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'id' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":48,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"id"},"fix":{"range":[1186,1196],"text":""},"desc":"Remove unused variable 'id'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { createContext, useContext, useState, useCallback } from 'react';\nimport { X, AlertTriangle, CheckCircle, Info, AlertCircle } from 'lucide-react';\nimport { Button } from \"@hive/ui\";\n\n// Modal types and interfaces\ninterface BaseModalProps {\n  id: string;\n  title: string;\n  onClose: () => void;\n  size?: 'sm' | 'md' | 'lg' | 'xl' | 'full';\n  closeable?: boolean;\n}\n\ninterface ConfirmModalData {\n  type: 'confirm';\n  title: string;\n  message: string;\n  confirmText?: string;\n  cancelText?: string;\n  variant?: 'default' | 'destructive' | 'warning';\n  onConfirm: () => void | Promise<void>;\n  onCancel?: () => void;\n}\n\ninterface CustomModalData {\n  type: 'custom';\n  title: string;\n  component: React.ComponentType<any>;\n  props?: Record<string, any>;\n  size?: BaseModalProps['size'];\n}\n\ninterface FormModalData {\n  type: 'form';\n  title: string;\n  component: React.ComponentType<any>;\n  props?: Record<string, any>;\n  size?: BaseModalProps['size'];\n  onSubmit?: (data: any) => void | Promise<void>;\n}\n\ntype ModalData = ConfirmModalData | CustomModalData | FormModalData;\n\ninterface ModalContextType {\n  openModal: (data: ModalData) => string;\n  closeModal: (id: string) => void;\n  closeAllModals: () => void;\n}\n\nconst ModalContext = createContext<ModalContextType | null>(null);\n\n// Modal provider component\nexport function ModalProvider({ children }: { children: React.ReactNode }) {\n  const [modals, setModals] = useState<Map<string, ModalData & { id: string }>>(new Map());\n\n  const openModal = useCallback((data: ModalData): string => {\n    const id = `modal_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    setModals(prev => new Map(prev).set(id, { ...data, id }));\n    return id;\n  }, []);\n\n  const closeModal = useCallback((id: string) => {\n    setModals(prev => {\n      const newModals = new Map(prev);\n      newModals.delete(id);\n      return newModals;\n    });\n  }, []);\n\n  const closeAllModals = useCallback(() => {\n    setModals(new Map());\n  }, []);\n\n  const contextValue: ModalContextType = {\n    openModal,\n    closeModal,\n    closeAllModals\n  };\n\n  return (\n    <ModalContext.Provider value={contextValue}>\n      {children}\n      {Array.from(modals.values()).map(modal => (\n        <ModalRenderer key={modal.id} modal={modal} onClose={() => closeModal(modal.id)} />\n      ))}\n    </ModalContext.Provider>\n  );\n}\n\n// Modal renderer component\nfunction ModalRenderer({ modal, onClose }: { modal: ModalData & { id: string }; onClose: () => void }) {\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleConfirmAction = async (action?: () => void | Promise<void>) => {\n    if (!action) return;\n    \n    try {\n      setIsLoading(true);\n      await action();\n      onClose();\n    } catch (error) {\n      console.error('Modal action failed:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const getModalSize = (size?: BaseModalProps['size']) => {\n    switch (size) {\n      case 'sm': return 'max-w-sm';\n      case 'md': return 'max-w-md';\n      case 'lg': return 'max-w-lg';\n      case 'xl': return 'max-w-xl';\n      case 'full': return 'max-w-full mx-4';\n      default: return 'max-w-md';\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n      {/* Backdrop */}\n      <div \n        className=\"absolute inset-0 bg-black/80 backdrop-blur-sm\"\n        onClick={onClose}\n      />\n      \n      {/* Modal */}\n      <div className={`relative bg-hive-background-primary border border-hive-border-primary rounded-2xl w-full ${getModalSize(modal.size)} max-h-[90vh] overflow-hidden shadow-2xl`}>\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-hive-border-subtle\">\n          <h2 className=\"text-xl font-semibold text-hive-text-primary\">{modal.title}</h2>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={onClose}\n            className=\"text-hive-text-secondary hover:text-hive-text-primary\"\n          >\n            <X className=\"w-4 h-4\" />\n          </Button>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-120px)]\">\n          {modal.type === 'confirm' && (\n            <ConfirmModalContent \n              modal={modal} \n              onConfirm={() => handleConfirmAction(modal.onConfirm)}\n              onCancel={() => {\n                modal.onCancel?.();\n                onClose();\n              }}\n              isLoading={isLoading}\n            />\n          )}\n          \n          {modal.type === 'custom' && (\n            <CustomModalContent modal={modal} onClose={onClose} />\n          )}\n          \n          {modal.type === 'form' && (\n            <FormModalContent \n              modal={modal} \n              onSubmit={(data) => handleConfirmAction(() => modal.onSubmit?.(data))}\n              onClose={onClose}\n              isLoading={isLoading}\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Confirm modal content\nfunction ConfirmModalContent({ \n  modal, \n  onConfirm, \n  onCancel, \n  isLoading \n}: { \n  modal: ConfirmModalData; \n  onConfirm: () => void;\n  onCancel: () => void;\n  isLoading: boolean;\n}) {\n  const getIcon = () => {\n    switch (modal.variant) {\n      case 'destructive': return <AlertTriangle className=\"w-6 h-6 text-red-400\" />;\n      case 'warning': return <AlertCircle className=\"w-6 h-6 text-yellow-400\" />;\n      default: return <Info className=\"w-6 h-6 text-blue-400\" />;\n    }\n  };\n\n  const getConfirmButtonClass = () => {\n    switch (modal.variant) {\n      case 'destructive': return 'bg-red-600 hover:bg-red-700 text-white';\n      case 'warning': return 'bg-yellow-600 hover:bg-yellow-700 text-white';\n      default: return 'bg-hive-brand-primary hover:bg-hive-interactive-hover text-hive-background-primary';\n    }\n  };\n\n  return (\n    <div className=\"text-center space-y-6\">\n      <div className=\"flex justify-center\">\n        {getIcon()}\n      </div>\n      \n      <p className=\"text-hive-text-secondary leading-relaxed\">\n        {modal.message}\n      </p>\n      \n      <div className=\"flex gap-3 justify-center\">\n        <Button\n          onClick={onCancel}\n          variant=\"outline\"\n          className=\"border-hive-border-secondary text-hive-text-secondary hover:bg-hive-background-elevated\"\n          disabled={isLoading}\n        >\n          {modal.cancelText || 'Cancel'}\n        </Button>\n        \n        <Button\n          onClick={onConfirm}\n          className={getConfirmButtonClass()}\n          disabled={isLoading}\n        >\n          {isLoading ? 'Loading...' : (modal.confirmText || 'Confirm')}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\n// Custom modal content\nfunction CustomModalContent({ modal, onClose }: { modal: CustomModalData; onClose: () => void }) {\n  const Component = modal.component;\n  return <Component {...(modal.props || {})} onClose={onClose} />;\n}\n\n// Form modal content\nfunction FormModalContent({ \n  modal, \n  onSubmit, \n  onClose, \n  isLoading \n}: { \n  modal: FormModalData; \n  onSubmit: (data: any) => void;\n  onClose: () => void;\n  isLoading: boolean;\n}) {\n  const Component = modal.component;\n  return (\n    <Component \n      {...(modal.props || {})} \n      onSubmit={onSubmit}\n      onClose={onClose}\n      isLoading={isLoading}\n    />\n  );\n}\n\n// Hook to use the modal system\nexport function useModal() {\n  const context = useContext(ModalContext);\n  if (!context) {\n    throw new Error('useModal must be used within a ModalProvider');\n  }\n  return context;\n}\n\n// Helper functions for common modal types\nexport const useModalHelpers = () => {\n  const { openModal, closeModal } = useModal();\n\n  const confirmModal = useCallback((options: Omit<ConfirmModalData, 'type'>) => {\n    return openModal({ type: 'confirm', ...options });\n  }, [openModal]);\n\n  const customModal = useCallback((options: Omit<CustomModalData, 'type'>) => {\n    return openModal({ type: 'custom', ...options });\n  }, [openModal]);\n\n  const formModal = useCallback((options: Omit<FormModalData, 'type'>) => {\n    return openModal({ type: 'form', ...options });\n  }, [openModal]);\n\n  return {\n    confirm: confirmModal,\n    custom: customModal,\n    form: formModal,\n    close: closeModal\n  };\n};","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/components/welcome-mat-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/hooks/use-calendar-data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/hooks/use-calendar-integration.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/hooks/use-dashboard-data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/hooks/use-enhanced-command-palette.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/hooks/use-enhanced-profile.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/hooks/use-hive-profile.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'file' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":54,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"file"},"fix":{"range":[1317,1327],"text":""},"desc":"Remove unused variable 'file'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'enabled' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":55,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"enabled"},"fix":{"range":[1376,1392],"text":""},"desc":"Remove unused variable 'enabled'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'id' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":60,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":60,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"id"},"fix":{"range":[1611,1622],"text":""},"desc":"Remove unused variable 'id'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'updates' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":60,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":60,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"updates"},"fix":{"range":[1621,1654],"text":""},"desc":"Remove unused variable 'updates'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'id' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":61,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"id"},"fix":{"range":[1693,1703],"text":""},"desc":"Remove unused variable 'id'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'startDate' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":62,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":62,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"startDate"},"fix":{"range":[1748,1767],"text":""},"desc":"Remove unused variable 'startDate'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'endDate' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":62,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":62,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"endDate"},"fix":{"range":[1766,1784],"text":""},"desc":"Remove unused variable 'endDate'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'newEvent' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":63,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":63,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"newEvent"},"fix":{"range":[1835,1868],"text":""},"desc":"Remove unused variable 'newEvent'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'conflictId' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":64,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":64,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"conflictId"},"fix":{"range":[1922,1941],"text":""},"desc":"Remove unused variable 'conflictId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'resolution' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":64,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":64,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"resolution"},"fix":{"range":[1940,1960],"text":""},"desc":"Remove unused variable 'resolution'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'eventId' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":64,"column":61,"nodeType":"Identifier","messageId":"unusedVar","endLine":64,"endColumn":77,"suggestions":[{"messageId":"removeVar","data":{"varName":"eventId"},"fix":{"range":[1960,1978],"text":""},"desc":"Remove unused variable 'eventId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'newTime' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":64,"column":79,"nodeType":"Identifier","messageId":"unusedVar","endLine":64,"endColumn":95,"suggestions":[{"messageId":"removeVar","data":{"varName":"newTime"},"fix":{"range":[1978,1996],"text":""},"desc":"Remove unused variable 'newTime'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { \n  HiveProfile, \n  HiveProfileUpdateData,\n  HiveProfileDashboard,\n  getProfileCompleteness,\n  DEFAULT_PRIVACY_SETTINGS,\n  DEFAULT_BUILDER_INFO\n} from '@hive/core';\nimport { useSession } from './use-session';\n\ninterface HiveProfileState {\n  profile: HiveProfile | null;\n  dashboard: HiveProfileDashboard | null;\n  isLoading: boolean;\n  isUpdating: boolean;\n  error: string | null;\n  completeness: number;\n}\n\ninterface CalendarEvent {\n  id: string;\n  title: string;\n  description?: string;\n  startDate: string;\n  endDate: string;\n  type: 'personal' | 'space' | 'class' | 'study' | 'meeting';\n  location?: string;\n  spaceId?: string;\n  spaceName?: string;\n  status: 'confirmed' | 'tentative' | 'cancelled';\n}\n\ninterface CalendarConflict {\n  id: string;\n  type: 'overlap' | 'double_booking' | 'travel_time';\n  severity: 'high' | 'medium' | 'low';\n  eventIds: string[];\n  description: string;\n  suggestion: string;\n  suggestedActions: Array<{\n    action: 'reschedule' | 'cancel' | 'shorten' | 'move_location';\n    eventId: string;\n    newTime?: string;\n    newLocation?: string;\n  }>;\n}\n\ninterface HiveProfileActions {\n  loadProfile: () => Promise<void>;\n  updateProfile: (data: HiveProfileUpdateData) => Promise<boolean>;\n  uploadAvatar: (file: File) => Promise<string | null>;\n  toggleGhostMode: (enabled: boolean) => Promise<void>;\n  refreshDashboard: () => Promise<void>;\n  clearError: () => void;\n  // Calendar management functions\n  createEvent: (event: Partial<CalendarEvent>) => Promise<CalendarEvent | null>;\n  updateEvent: (id: string, updates: Partial<CalendarEvent>) => Promise<boolean>;\n  deleteEvent: (id: string) => Promise<boolean>;\n  getCalendarEvents: (startDate?: string, endDate?: string) => Promise<CalendarEvent[]>;\n  detectConflicts: (newEvent?: Partial<CalendarEvent>) => Promise<CalendarConflict[]>;\n  resolveConflict: (conflictId: string, resolution: string, eventId?: string, newTime?: string) => Promise<boolean>;\n}\n\n// API response interfaces\ninterface ApiProfileData {\n  id: string;\n  fullName?: string;\n  handle?: string;\n  email?: string;\n  avatarUrl?: string;\n  profilePhoto?: string;\n  major?: string;\n  academicYear?: string;\n  graduationYear?: string;\n  schoolId?: string;\n  housing?: string;\n  pronouns?: string;\n  bio?: string;\n  statusMessage?: string;\n  interests?: string[];\n  isPublic?: boolean;\n  showActivity?: boolean;\n  showSpaces?: boolean;\n  showConnections?: boolean;\n  allowDirectMessages?: boolean;\n  showOnlineStatus?: boolean;\n  ghostMode?: {\n    enabled?: boolean;\n    level?: string;\n  };\n  isBuilder?: boolean;\n  builderOptIn?: boolean;\n  builderLevel?: string;\n  specializations?: string[];\n  toolsCreated?: number;\n  spacesJoined?: number;\n  spacesActive?: number;\n  spacesLed?: number;\n  toolsUsed?: number;\n  connectionsCount?: number;\n  totalActivity?: number;\n  currentStreak?: number;\n  longestStreak?: number;\n  reputation?: number;\n  achievements?: number;\n  createdAt?: string;\n  joinedAt?: string;\n  updatedAt?: string;\n  lastActive?: string;\n  lastActiveAt?: string;\n  lastSeenAt?: string;\n  emailVerified?: boolean;\n  profileVerified?: boolean;\n  accountStatus?: string;\n  userType?: string;\n  onboardingCompleted?: boolean;\n  [key: string]: unknown;\n}\n\nexport interface UseHiveProfileReturn extends HiveProfileState, HiveProfileActions {}\n\n/**\n * Centralized HIVE Profile Hook\n * Single source of truth for all profile data and operations\n * Integrates with HIVE's design system and atomic principles\n */\nexport function useHiveProfile(): UseHiveProfileReturn {\n  const { user, isAuthenticated } = useSession();\n  \n  const [state, setState] = useState<HiveProfileState>({\n    profile: null,\n    dashboard: null,\n    isLoading: false,\n    isUpdating: false,\n    error: null,\n    completeness: 0\n  });\n\n  // API Helper Functions\n  const getAuthHeaders = useCallback(() => {\n    const headers: Record<string, string> = {\n      'Content-Type': 'application/json',\n    };\n\n    if (process.env.NODE_ENV === 'development') {\n      headers['Authorization'] = `Bearer dev_token_${user?.id || '123'}`;\n    } else {\n      const token = localStorage.getItem('auth_token');\n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n      }\n    }\n\n    return headers;\n  }, [user?.id]);\n\n  const handleApiResponse = useCallback(async (response: Response) => {\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({ message: 'Unknown error' })) as { message: string };\n      throw new Error(errorData.message || `HTTP ${response.status}: ${response.statusText}`);\n    }\n    return response.json();\n  }, []);\n\n  // Transform API data to HiveProfile format\n  const transformApiProfile = useCallback((apiData: ApiProfileData): HiveProfile => {\n    const now = new Date().toISOString();\n    \n    return {\n      identity: {\n        id: apiData.id,\n        fullName: apiData.fullName || '',\n        handle: apiData.handle || '',\n        email: apiData.email || '',\n        avatarUrl: apiData.avatarUrl || apiData.profilePhoto\n      },\n      academic: {\n        major: apiData.major,\n        academicYear: apiData.academicYear,\n        graduationYear: apiData.graduationYear,\n        schoolId: apiData.schoolId,\n        housing: apiData.housing,\n        pronouns: apiData.pronouns\n      },\n      personal: {\n        bio: apiData.bio,\n        statusMessage: apiData.statusMessage,\n        location: apiData.housing, // Use housing as location for now\n        interests: apiData.interests || []\n      },\n      privacy: {\n        ...DEFAULT_PRIVACY_SETTINGS,\n        isPublic: apiData.isPublic ?? true,\n        showActivity: apiData.showActivity ?? true,\n        showSpaces: apiData.showSpaces ?? true,\n        showConnections: apiData.showConnections ?? true,\n        allowDirectMessages: apiData.allowDirectMessages ?? true,\n        showOnlineStatus: apiData.showOnlineStatus ?? true,\n        ghostMode: {\n          enabled: apiData.ghostMode?.enabled ?? false,\n          level: apiData.ghostMode?.level ?? 'minimal'\n        }\n      },\n      builder: {\n        ...DEFAULT_BUILDER_INFO,\n        isBuilder: apiData.isBuilder ?? false,\n        builderOptIn: apiData.builderOptIn ?? false,\n        builderLevel: apiData.builderLevel ?? 'beginner',\n        specializations: apiData.specializations || [],\n        toolsCreated: apiData.toolsCreated ?? 0\n      },\n      stats: {\n        spacesJoined: apiData.spacesJoined ?? 0,\n        spacesActive: apiData.spacesActive ?? 0,\n        spacesLed: apiData.spacesLed ?? 0,\n        toolsUsed: apiData.toolsUsed ?? 0,\n        connectionsCount: apiData.connectionsCount ?? 0,\n        totalActivity: apiData.totalActivity ?? 0,\n        currentStreak: apiData.currentStreak ?? 0,\n        longestStreak: apiData.longestStreak ?? 0,\n        reputation: apiData.reputation ?? 0,\n        achievements: apiData.achievements ?? 0\n      },\n      timestamps: {\n        createdAt: apiData.createdAt || apiData.joinedAt || now,\n        updatedAt: apiData.updatedAt || now,\n        lastActiveAt: apiData.lastActive || apiData.lastActiveAt || now,\n        lastSeenAt: apiData.lastSeenAt || now\n      },\n      verification: {\n        emailVerified: apiData.emailVerified ?? false,\n        profileVerified: apiData.profileVerified ?? false,\n        accountStatus: apiData.accountStatus ?? 'active',\n        userType: apiData.userType ?? 'student',\n        onboardingCompleted: apiData.onboardingCompleted ?? false\n      }\n    };\n  }, []);\n\n  // Load Profile Data\n  const loadProfile = useCallback(async () => {\n    if (!isAuthenticated || !user) return;\n\n    try {\n      setState(prev => ({ ...prev, isLoading: true, error: null }));\n\n      const response = await fetch('/api/profile', {\n        headers: getAuthHeaders()\n      });\n\n      const data = await handleApiResponse(response);\n      \n      if (data.success && data.user) {\n        const profile = transformApiProfile(data.user);\n        const completeness = getProfileCompleteness(profile);\n\n        setState(prev => ({\n          ...prev,\n          profile,\n          completeness,\n          isLoading: false\n        }));\n      } else {\n        throw new Error(data.error || 'Failed to load profile');\n      }\n    } catch (error) {\n      console.error('Failed to load profile:', error);\n      setState(prev => ({\n        ...prev,\n        error: error instanceof Error ? error.message : 'Failed to load profile',\n        isLoading: false\n      }));\n    }\n  }, [isAuthenticated, user, getAuthHeaders, handleApiResponse, transformApiProfile]);\n\n  // Update Profile\n  const updateProfile = useCallback(async (updateData: HiveProfileUpdateData): Promise<boolean> => {\n    if (!isAuthenticated || !user) return false;\n\n    try {\n      setState(prev => ({ ...prev, isUpdating: true, error: null }));\n\n      // Transform HiveProfile update format to API format\n      const apiUpdateData: Record<string, unknown> = {};\n      \n      if (updateData.identity) {\n        Object.assign(apiUpdateData, updateData.identity);\n      }\n      \n      if (updateData.academic) {\n        Object.assign(apiUpdateData, updateData.academic);\n      }\n      \n      if (updateData.personal) {\n        if (updateData.personal.bio !== undefined) apiUpdateData.bio = updateData.personal.bio;\n        if (updateData.personal.statusMessage !== undefined) apiUpdateData.statusMessage = updateData.personal.statusMessage;\n      }\n      \n      if (updateData.privacy) {\n        Object.assign(apiUpdateData, updateData.privacy);\n      }\n      \n      if (updateData.builder) {\n        Object.assign(apiUpdateData, updateData.builder);\n      }\n\n      const response = await fetch('/api/profile', {\n        method: 'PATCH',\n        headers: getAuthHeaders(),\n        body: JSON.stringify(apiUpdateData)\n      });\n\n      const data = await handleApiResponse(response);\n\n      if (data.success) {\n        // Reload profile to get updated data\n        await loadProfile();\n        setState(prev => ({ ...prev, isUpdating: false }));\n        return true;\n      } else {\n        throw new Error(data.error || 'Failed to update profile');\n      }\n    } catch (error) {\n      console.error('Failed to update profile:', error);\n      setState(prev => ({\n        ...prev,\n        error: error instanceof Error ? error.message : 'Failed to update profile',\n        isUpdating: false\n      }));\n      return false;\n    }\n  }, [isAuthenticated, user, getAuthHeaders, handleApiResponse, loadProfile]);\n\n  // Upload Avatar\n  const uploadAvatar = useCallback(async (file: File): Promise<string | null> => {\n    if (!isAuthenticated || !user) return null;\n\n    try {\n      setState(prev => ({ ...prev, isUpdating: true, error: null }));\n\n      const formData = new FormData();\n      formData.append('photo', file);\n\n      const headers = getAuthHeaders();\n      // Remove Content-Type for FormData\n      const { 'Content-Type': _, ...headersWithoutContentType } = headers;\n      const finalHeaders = headersWithoutContentType;\n\n      const response = await fetch('/api/profile/upload-photo', {\n        method: 'POST',\n        headers: finalHeaders,\n        body: formData\n      });\n\n      const data = await handleApiResponse(response);\n\n      if (data.success && data.avatarUrl) {\n        // Update profile with new avatar URL\n        await updateProfile({\n          identity: { avatarUrl: data.avatarUrl }\n        });\n        \n        setState(prev => ({ ...prev, isUpdating: false }));\n        return data.avatarUrl;\n      } else {\n        throw new Error(data.error || 'Failed to upload avatar');\n      }\n    } catch (error) {\n      console.error('Failed to upload avatar:', error);\n      setState(prev => ({\n        ...prev,\n        error: error instanceof Error ? error.message : 'Failed to upload avatar',\n        isUpdating: false\n      }));\n      return null;\n    }\n  }, [isAuthenticated, user, getAuthHeaders, handleApiResponse, updateProfile]);\n\n  // Toggle Ghost Mode\n  const toggleGhostMode = useCallback(async (enabled: boolean) => {\n    await updateProfile({\n      privacy: {\n        ghostMode: {\n          enabled,\n          level: enabled ? 'moderate' : 'minimal'\n        }\n      }\n    });\n  }, [updateProfile]);\n\n  // Load Dashboard Data\n  const refreshDashboard = useCallback(async () => {\n    if (!isAuthenticated || !user) return;\n\n    try {\n      const response = await fetch('/api/profile/dashboard?timeRange=week&includeRecommendations=true', {\n        headers: getAuthHeaders()\n      });\n\n      const data = await handleApiResponse(response);\n      \n      if (data.success && data.dashboard) {\n        const dashboard: HiveProfileDashboard = {\n          profile: state.profile!, // Will be set by loadProfile\n          recentSpaces: data.dashboard.quickActions?.favoriteSpaces?.map((space: { id: string; name: string; color: string; memberCount: number; [key: string]: unknown }) => ({\n            id: space.spaceId,\n            name: space.spaceName,\n            type: 'favorite',\n            lastActivity: space.lastActivity,\n            memberCount: 0, // Would need to fetch from spaces API\n            role: 'member'\n          })) || [],\n          recentTools: [], // Would need to fetch from tools API\n          recentActivity: data.dashboard.recentActivity?.spaces?.map((activity: { spaceId: string; action: string; timestamp: string; [key: string]: unknown }, index: number) => ({\n            id: `activity-${index}`,\n            type: 'space' as const,\n            action: activity.action,\n            title: activity.spaceName,\n            timestamp: activity.timestamp\n          })) || [],\n          upcomingEvents: data.dashboard.upcomingEvents?.map((event: { id: string; title: string; date: string; type: string; [key: string]: unknown }) => ({\n            id: event.id,\n            title: event.title,\n            startDate: event.startDate,\n            type: event.type,\n            spaceId: event.spaceId\n          })) || []\n        };\n        \n        setState(prev => ({ ...prev, dashboard }));\n      }\n    } catch (error) {\n      console.error('Failed to load dashboard:', error);\n      // Don't set error state for dashboard failure - it's secondary data\n    }\n  }, [isAuthenticated, user, getAuthHeaders, handleApiResponse, state.profile]);\n\n  // Clear Error\n  const clearError = useCallback(() => {\n    setState(prev => ({ ...prev, error: null }));\n  }, []);\n\n  // Calendar Management Functions\n  const createEvent = useCallback(async (event: Partial<CalendarEvent>): Promise<CalendarEvent | null> => {\n    if (!isAuthenticated || !user) return null;\n\n    try {\n      setState(prev => ({ ...prev, isUpdating: true, error: null }));\n\n      const response = await fetch('/api/profile/calendar/events', {\n        method: 'POST',\n        headers: getAuthHeaders(),\n        body: JSON.stringify(event)\n      });\n\n      const data = await handleApiResponse(response);\n\n      if (data.success) {\n        // Refresh dashboard to show new event\n        await refreshDashboard();\n        setState(prev => ({ ...prev, isUpdating: false }));\n        return data.event;\n      } else {\n        throw new Error(data.error || 'Failed to create event');\n      }\n    } catch (error) {\n      console.error('Failed to create event:', error);\n      setState(prev => ({\n        ...prev,\n        error: error instanceof Error ? error.message : 'Failed to create event',\n        isUpdating: false\n      }));\n      return null;\n    }\n  }, [isAuthenticated, user, getAuthHeaders, handleApiResponse, refreshDashboard]);\n\n  const updateEvent = useCallback(async (id: string, updates: Partial<CalendarEvent>): Promise<boolean> => {\n    if (!isAuthenticated || !user) return false;\n\n    try {\n      setState(prev => ({ ...prev, isUpdating: true, error: null }));\n\n      const response = await fetch('/api/profile/calendar/events', {\n        method: 'PUT',\n        headers: getAuthHeaders(),\n        body: JSON.stringify({ id, ...updates })\n      });\n\n      const data = await handleApiResponse(response);\n\n      if (data.success) {\n        // Refresh dashboard to show updated event\n        await refreshDashboard();\n        setState(prev => ({ ...prev, isUpdating: false }));\n        return true;\n      } else {\n        throw new Error(data.error || 'Failed to update event');\n      }\n    } catch (error) {\n      console.error('Failed to update event:', error);\n      setState(prev => ({\n        ...prev,\n        error: error instanceof Error ? error.message : 'Failed to update event',\n        isUpdating: false\n      }));\n      return false;\n    }\n  }, [isAuthenticated, user, getAuthHeaders, handleApiResponse, refreshDashboard]);\n\n  const deleteEvent = useCallback(async (id: string): Promise<boolean> => {\n    if (!isAuthenticated || !user) return false;\n\n    try {\n      setState(prev => ({ ...prev, isUpdating: true, error: null }));\n\n      const response = await fetch(`/api/profile/calendar/events?id=${id}`, {\n        method: 'DELETE',\n        headers: getAuthHeaders()\n      });\n\n      const data = await handleApiResponse(response);\n\n      if (data.success) {\n        // Refresh dashboard to remove deleted event\n        await refreshDashboard();\n        setState(prev => ({ ...prev, isUpdating: false }));\n        return true;\n      } else {\n        throw new Error(data.error || 'Failed to delete event');\n      }\n    } catch (error) {\n      console.error('Failed to delete event:', error);\n      setState(prev => ({\n        ...prev,\n        error: error instanceof Error ? error.message : 'Failed to delete event',\n        isUpdating: false\n      }));\n      return false;\n    }\n  }, [isAuthenticated, user, getAuthHeaders, handleApiResponse, refreshDashboard]);\n\n  const getCalendarEvents = useCallback(async (startDate?: string, endDate?: string): Promise<CalendarEvent[]> => {\n    if (!isAuthenticated || !user) return [];\n\n    try {\n      const params = new URLSearchParams();\n      if (startDate) params.append('startDate', startDate);\n      if (endDate) params.append('endDate', endDate);\n\n      const response = await fetch(`/api/profile/calendar/events?${params.toString()}`, {\n        headers: getAuthHeaders()\n      });\n\n      const data = await handleApiResponse(response);\n\n      if (data.success) {\n        return data.events || [];\n      } else {\n        throw new Error(data.error || 'Failed to fetch events');\n      }\n    } catch (error) {\n      console.error('Failed to fetch calendar events:', error);\n      setState(prev => ({\n        ...prev,\n        error: error instanceof Error ? error.message : 'Failed to fetch calendar events'\n      }));\n      return [];\n    }\n  }, [isAuthenticated, user, getAuthHeaders, handleApiResponse]);\n\n  const detectConflicts = useCallback(async (newEvent?: Partial<CalendarEvent>): Promise<CalendarConflict[]> => {\n    if (!isAuthenticated || !user) return [];\n\n    try {\n      const params = new URLSearchParams();\n      if (newEvent) {\n        params.append('includeNewEvent', JSON.stringify(newEvent));\n      }\n      params.append('suggestTimes', 'true');\n\n      const response = await fetch(`/api/profile/calendar/conflicts?${params.toString()}`, {\n        headers: getAuthHeaders()\n      });\n\n      const data = await handleApiResponse(response);\n\n      if (data.success) {\n        return data.conflicts || [];\n      } else {\n        throw new Error(data.error || 'Failed to detect conflicts');\n      }\n    } catch (error) {\n      console.error('Failed to detect conflicts:', error);\n      setState(prev => ({\n        ...prev,\n        error: error instanceof Error ? error.message : 'Failed to detect conflicts'\n      }));\n      return [];\n    }\n  }, [isAuthenticated, user, getAuthHeaders, handleApiResponse]);\n\n  const resolveConflict = useCallback(async (\n    conflictId: string, \n    resolution: string, \n    eventId?: string, \n    newTime?: string\n  ): Promise<boolean> => {\n    if (!isAuthenticated || !user) return false;\n\n    try {\n      setState(prev => ({ ...prev, isUpdating: true, error: null }));\n\n      const response = await fetch('/api/profile/calendar/conflicts', {\n        method: 'POST',\n        headers: getAuthHeaders(),\n        body: JSON.stringify({ conflictId, resolution, eventId, newTime })\n      });\n\n      const data = await handleApiResponse(response);\n\n      if (data.success) {\n        // Refresh dashboard to show resolved conflict\n        await refreshDashboard();\n        setState(prev => ({ ...prev, isUpdating: false }));\n        return true;\n      } else {\n        throw new Error(data.error || 'Failed to resolve conflict');\n      }\n    } catch (error) {\n      console.error('Failed to resolve conflict:', error);\n      setState(prev => ({\n        ...prev,\n        error: error instanceof Error ? error.message : 'Failed to resolve conflict',\n        isUpdating: false\n      }));\n      return false;\n    }\n  }, [isAuthenticated, user, getAuthHeaders, handleApiResponse, refreshDashboard]);\n\n  // Load profile on mount and when user changes\n  useEffect(() => {\n    if (isAuthenticated && user) {\n      loadProfile();\n    } else {\n      setState({\n        profile: null,\n        dashboard: null,\n        isLoading: false,\n        isUpdating: false,\n        error: null,\n        completeness: 0\n      });\n    }\n  }, [isAuthenticated, user, loadProfile]);\n\n  // Load dashboard after profile is loaded\n  useEffect(() => {\n    if (state.profile && !state.dashboard) {\n      refreshDashboard();\n    }\n  }, [state.profile, state.dashboard, refreshDashboard]);\n\n  return {\n    // State\n    profile: state.profile,\n    dashboard: state.dashboard,\n    isLoading: state.isLoading,\n    isUpdating: state.isUpdating,\n    error: state.error,\n    completeness: state.completeness,\n    \n    // Actions\n    loadProfile,\n    updateProfile,\n    uploadAvatar,\n    toggleGhostMode,\n    refreshDashboard,\n    clearError,\n    \n    // Calendar Management\n    createEvent,\n    updateEvent,\n    deleteEvent,\n    getCalendarEvents,\n    detectConflicts,\n    resolveConflict\n  };\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/hooks/use-intersection-observer.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/hooks/use-platform-integration.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/hooks/use-privacy-settings.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/hooks/use-profile.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/hooks/use-realtime-sse.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'message' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":21,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"message"},"fix":{"range":[569,593],"text":""},"desc":"Remove unused variable 'message'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'state' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":22,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[628,653],"text":""},"desc":"Remove unused variable 'state'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'state.messageCount'. Either include it or remove the dependency array.","line":137,"column":6,"nodeType":"ArrayExpression","endLine":137,"endColumn":78,"suggestions":[{"desc":"Update the dependencies array to be: [updateState, channels, state.messageCount, onMessage, maxReconnectAttempts, reconnectDelay]","fix":{"range":[3957,4029],"text":"[updateState, channels, state.messageCount, onMessage, maxReconnectAttempts, reconnectDelay]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'connect', 'disconnect', and 'state.connected'. Either include them or remove the dependency array.","line":251,"column":6,"nodeType":"ArrayExpression","endLine":251,"endColumn":26,"suggestions":[{"desc":"Update the dependencies array to be: [connect, disconnect, state.connected]","fix":{"range":[6772,6792],"text":"[connect, disconnect, state.connected]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","line":251,"column":7,"nodeType":"CallExpression","endLine":251,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * React hook for Server-Sent Events real-time communication\n * Replaces broken Firebase Realtime Database WebSocket connection\n */\n\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport { RealtimeMessage } from '@/lib/sse-realtime-service';\n\nexport interface SSEConnectionState {\n  connected: boolean;\n  connecting: boolean;\n  error: string | null;\n  connectionId: string | null;\n  messageCount: number;\n}\n\nexport interface UseRealtimeSSEOptions {\n  channels: string[];\n  reconnectDelay?: number;\n  maxReconnectAttempts?: number;\n  onMessage?: (message: RealtimeMessage) => void;\n  onConnectionChange?: (state: SSEConnectionState) => void;\n}\n\nexport function useRealtimeSSE(options: UseRealtimeSSEOptions) {\n  const {\n    channels,\n    reconnectDelay = 3000,\n    maxReconnectAttempts = 5,\n    onMessage,\n    onConnectionChange\n  } = options;\n\n  const [state, setState] = useState<SSEConnectionState>({\n    connected: false,\n    connecting: false,\n    error: null,\n    connectionId: null,\n    messageCount: 0\n  });\n\n  const [messages, setMessages] = useState<RealtimeMessage[]>([]);\n  const eventSourceRef = useRef<EventSource | null>(null);\n  const reconnectAttemptsRef = useRef(0);\n  const reconnectTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  const updateState = useCallback((updates: Partial<SSEConnectionState>) => {\n    setState(prev => {\n      const newState = { ...prev, ...updates };\n      onConnectionChange?.(newState);\n      return newState;\n    });\n  }, [onConnectionChange]);\n\n  const connect = useCallback(() => {\n    if (eventSourceRef.current) {\n      eventSourceRef.current.close();\n    }\n\n    updateState({ connecting: true, error: null });\n\n    try {\n      const channelsParam = channels.join(',');\n      const eventSource = new EventSource(`/api/realtime/sse?channels=${encodeURIComponent(channelsParam)}`, {\n        withCredentials: true\n      });\n\n      eventSource.onopen = () => {\n        console.log('SSE connection opened');\n        reconnectAttemptsRef.current = 0;\n        updateState({\n          connected: true,\n          connecting: false,\n          error: null\n        });\n      };\n\n      eventSource.onmessage = (event) => {\n        try {\n          const data = JSON.parse(event.data);\n          \n          if (data.type === 'connection') {\n            updateState({\n              connectionId: data.data.connectionId,\n              connected: true,\n              connecting: false\n            });\n          } else if (data.type === 'message') {\n            const message: RealtimeMessage = data.data;\n            \n            setMessages(prev => [...prev, message]);\n            updateState({\n              messageCount: state.messageCount + 1\n            });\n            \n            onMessage?.(message);\n          }\n        } catch (error) {\n          console.error('Error parsing SSE message:', error);\n        }\n      };\n\n      eventSource.onerror = (error) => {\n        console.error('SSE connection error:', error);\n        \n        updateState({\n          connected: false,\n          connecting: false,\n          error: 'Connection failed'\n        });\n\n        // Attempt reconnection\n        if (reconnectAttemptsRef.current < maxReconnectAttempts) {\n          reconnectAttemptsRef.current++;\n          \n          reconnectTimeoutRef.current = setTimeout(() => {\n            console.log(`Attempting SSE reconnection (${reconnectAttemptsRef.current}/${maxReconnectAttempts})`);\n            connect();\n          }, reconnectDelay * reconnectAttemptsRef.current);\n        } else {\n          updateState({\n            error: `Failed to connect after ${maxReconnectAttempts} attempts`\n          });\n        }\n      };\n\n      eventSourceRef.current = eventSource;\n\n    } catch (error) {\n      console.error('Error creating SSE connection:', error);\n      updateState({\n        connected: false,\n        connecting: false,\n        error: 'Failed to create connection'\n      });\n    }\n  }, [channels, maxReconnectAttempts, reconnectDelay, updateState, onMessage]);\n\n  const disconnect = useCallback(() => {\n    if (eventSourceRef.current) {\n      eventSourceRef.current.close();\n      eventSourceRef.current = null;\n    }\n    \n    if (reconnectTimeoutRef.current) {\n      clearTimeout(reconnectTimeoutRef.current);\n      reconnectTimeoutRef.current = null;\n    }\n    \n    updateState({\n      connected: false,\n      connecting: false,\n      connectionId: null\n    });\n  }, [updateState]);\n\n  const sendMessage = useCallback(async (\n    type: RealtimeMessage['type'],\n    channel: string,\n    content: any,\n    targetUsers?: string[]\n  ) => {\n    try {\n      const response = await fetch('/api/realtime/send', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          type,\n          channel,\n          content,\n          targetUsers,\n          metadata: {\n            timestamp: new Date().toISOString(),\n            priority: 'normal',\n            requiresAck: false,\n            retryCount: 0\n          }\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to send message: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      return result.messageId;\n    } catch (error) {\n      console.error('Error sending message:', error);\n      throw error;\n    }\n  }, []);\n\n  const sendChatMessage = useCallback(async (\n    spaceId: string,\n    content: string,\n    type: 'text' | 'image' | 'file' = 'text'\n  ) => {\n    return sendMessage('chat', `space:${spaceId}`, {\n      spaceId,\n      message: content,\n      messageType: type\n    });\n  }, [sendMessage]);\n\n  const updatePresence = useCallback(async (\n    status: 'online' | 'away' | 'offline',\n    currentSpace?: string\n  ) => {\n    try {\n      await fetch('/api/realtime/presence', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          status,\n          currentSpace\n        })\n      });\n    } catch (error) {\n      console.error('Error updating presence:', error);\n    }\n  }, []);\n\n  const getChannelMessages = useCallback((channel: string): RealtimeMessage[] => {\n    return messages.filter(msg => msg.channel === channel);\n  }, [messages]);\n\n  const clearMessages = useCallback(() => {\n    setMessages([]);\n    updateState({ messageCount: 0 });\n  }, [updateState]);\n\n  // Auto-connect on mount, disconnect on unmount\n  useEffect(() => {\n    connect();\n    \n    return () => {\n      disconnect();\n    };\n  }, [connect, disconnect]);\n\n  // Reconnect when channels change\n  useEffect(() => {\n    if (state.connected) {\n      disconnect();\n      setTimeout(connect, 100); // Small delay to ensure clean disconnect\n    }\n  }, [channels.join(',')]);\n\n  return {\n    // Connection state\n    ...state,\n    \n    // Messages\n    messages,\n    getChannelMessages,\n    clearMessages,\n    \n    // Connection control\n    connect,\n    disconnect,\n    \n    // Messaging\n    sendMessage,\n    sendChatMessage,\n    updatePresence\n  };\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/hooks/use-resilient-api.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'client' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":26,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"client"},"fix":{"range":[750,780],"text":""},"desc":"Remove unused variable 'client'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'retryOnMount' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":37,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"retryOnMount"},"fix":{"range":[1018,1043],"text":""},"desc":"Remove unused variable 'retryOnMount'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'params' is assigned a value but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":238,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":238,"endColumn":70,"suggestions":[{"messageId":"removeVar","data":{"varName":"params"},"fix":{"range":[5944,5992],"text":""},"desc":"Remove unused variable 'params'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'params' is assigned a value but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":260,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":265,"endColumn":2,"suggestions":[{"messageId":"removeVar","data":{"varName":"params"},"fix":{"range":[6455,6549],"text":""},"desc":"Remove unused variable 'params'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'client' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":348,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":348,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"client"},"fix":{"range":[8598,8629],"text":""},"desc":"Remove unused variable 'client'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'variables' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":348,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":348,"endColumn":69,"suggestions":[{"messageId":"removeVar","data":{"varName":"variables"},"fix":{"range":[8628,8651],"text":""},"desc":"Remove unused variable 'variables'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'variables' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":350,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":350,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"variables"},"fix":{"range":[8713,8736],"text":""},"desc":"Remove unused variable 'variables'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'variables' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":351,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":351,"endColumn":55,"suggestions":[{"messageId":"removeVar","data":{"varName":"variables"},"fix":{"range":[8778,8801],"text":""},"desc":"Remove unused variable 'variables'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'variables' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":352,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":352,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"variables"},"fix":{"range":[8836,8857],"text":""},"desc":"Remove unused variable 'variables'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'client' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":430,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":430,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"client"},"fix":{"range":[10477,10508],"text":""},"desc":"Remove unused variable 'client'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'query' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":430,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":430,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"query"},"fix":{"range":[10507,10522],"text":""},"desc":"Remove unused variable 'query'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'filters' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":430,"column":61,"nodeType":"Identifier","messageId":"unusedVar","endLine":430,"endColumn":73,"suggestions":[{"messageId":"removeVar","data":{"varName":"filters"},"fix":{"range":[10522,10536],"text":""},"desc":"Remove unused variable 'filters'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback, useRef } from 'react';\nimport { ResilientHiveApiClient, createResilientApiClient } from '@/lib/api-client-resilient';\nimport { ErrorCategory, ErrorSeverity, HiveError } from '@/lib/error-resilience-system';\n\n// Enhanced state interface with error resilience\ninterface ApiState<T> {\n  data: T | null;\n  loading: boolean;\n  error: HiveError | null;\n  retryCount: number;\n  lastFetch: Date | null;\n  isStale: boolean;\n  hasOfflineData: boolean;\n}\n\ninterface ApiOptions {\n  immediate?: boolean;\n  staleTime?: number; // ms before data is considered stale\n  cacheKey?: string;\n  retryOnMount?: boolean;\n  offlineSupport?: boolean;\n}\n\n// Generic resilient API hook\nexport function useResilientApi<T>(\n  apiCall: (client: ResilientHiveApiClient) => Promise<T>,\n  options: ApiOptions = {}\n): ApiState<T> & {\n  refetch: () => Promise<void>;\n  reset: () => void;\n  retry: () => Promise<void>;\n} {\n  const {\n    immediate = true,\n    staleTime = 5 * 60 * 1000, // 5 minutes\n    cacheKey,\n    retryOnMount = true,\n    offlineSupport = false\n  } = options;\n\n  const [state, setState] = useState<ApiState<T>>({\n    data: null,\n    loading: false,\n    error: null,\n    retryCount: 0,\n    lastFetch: null,\n    isStale: false,\n    hasOfflineData: false\n  });\n\n  const clientRef = useRef<ResilientHiveApiClient>();\n  const abortControllerRef = useRef<AbortController>();\n\n  // Initialize API client\n  useEffect(() => {\n    clientRef.current = createResilientApiClient();\n  }, []);\n\n  // Check if data is stale\n  const isDataStale = useCallback(() => {\n    if (!state.lastFetch) return true;\n    return Date.now() - state.lastFetch.getTime() > staleTime;\n  }, [state.lastFetch, staleTime]);\n\n  // Load from cache\n  const loadFromCache = useCallback((): T | null => {\n    if (!cacheKey || typeof window === 'undefined') return null;\n    \n    try {\n      const cached = localStorage.getItem(`hive_api_${cacheKey}`);\n      if (cached) {\n        const { data, timestamp } = JSON.parse(cached);\n        const age = Date.now() - timestamp;\n        \n        if (age < staleTime * 2) { // Allow cache to be twice as old for offline support\n          setState(prev => ({ ...prev, hasOfflineData: true }));\n          return data;\n        }\n      }\n    } catch (error) {\n      console.warn('Failed to load from cache:', error);\n    }\n    \n    return null;\n  }, [cacheKey, staleTime]);\n\n  // Save to cache\n  const saveToCache = useCallback((data: T) => {\n    if (!cacheKey || typeof window === 'undefined') return;\n    \n    try {\n      localStorage.setItem(`hive_api_${cacheKey}`, JSON.stringify({\n        data,\n        timestamp: Date.now()\n      }));\n    } catch (error) {\n      console.warn('Failed to save to cache:', error);\n    }\n  }, [cacheKey]);\n\n  // Execute API call\n  const execute = useCallback(async (isRetry = false) => {\n    if (!clientRef.current) return;\n\n    // Cancel previous request\n    if (abortControllerRef.current) {\n      abortControllerRef.current.abort();\n    }\n    \n    abortControllerRef.current = new AbortController();\n\n    setState(prev => ({\n      ...prev,\n      loading: true,\n      error: null,\n      retryCount: isRetry ? prev.retryCount + 1 : 0\n    }));\n\n    try {\n      const data = await apiCall(clientRef.current);\n      \n      setState(prev => ({\n        ...prev,\n        data,\n        loading: false,\n        error: null,\n        lastFetch: new Date(),\n        isStale: false,\n        hasOfflineData: false\n      }));\n\n      // Save to cache\n      if (cacheKey) {\n        saveToCache(data);\n      }\n\n    } catch (error: any) {\n      // Check if request was aborted\n      if (error.name === 'AbortError') return;\n\n      const hiveError: HiveError = error.id ? error : {\n        id: `hook_${Date.now()}`,\n        category: ErrorCategory._UNKNOWN,\n        severity: ErrorSeverity._MEDIUM,\n        message: error.message || 'Request failed',\n        timestamp: new Date(),\n        retryable: true\n      };\n\n      setState(prev => {\n        const newState = {\n          ...prev,\n          loading: false,\n          error: hiveError\n        };\n\n        // Try to load from cache if offline support is enabled\n        if (offlineSupport && !prev.data) {\n          const cachedData = loadFromCache();\n          if (cachedData) {\n            return {\n              ...newState,\n              data: cachedData,\n              fromCache: true\n            };\n          }\n        }\n\n        return newState;\n      });\n    }\n  }, [apiCall, cacheKey, saveToCache, offlineSupport, loadFromCache]);\n\n  // Initial fetch\n  useEffect(() => {\n    if (immediate) {\n      // Try to load from cache first for immediate display\n      if (cacheKey) {\n        const cachedData = loadFromCache();\n        if (cachedData) {\n          setState(prev => ({\n            ...prev,\n            data: cachedData,\n            hasOfflineData: true,\n            isStale: isDataStale()\n          }));\n        }\n      }\n\n      execute();\n    }\n  }, [immediate, execute, cacheKey, loadFromCache, isDataStale]);\n\n  // Update stale status\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setState(prev => ({\n        ...prev,\n        isStale: isDataStale()\n      }));\n    }, 60000); // Check every minute\n\n    return () => clearInterval(interval);\n  }, [isDataStale]);\n\n  // Cleanup\n  useEffect(() => {\n    return () => {\n      if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n      }\n    };\n  }, []);\n\n  const refetch = useCallback(() => execute(false), [execute]);\n  const retry = useCallback(() => execute(true), [execute]);\n  const reset = useCallback(() => {\n    setState({\n      data: null,\n      loading: false,\n      error: null,\n      retryCount: 0,\n      lastFetch: null,\n      isStale: false,\n      hasOfflineData: false\n    });\n  }, []);\n\n  return {\n    ...state,\n    refetch,\n    reset,\n    retry\n  };\n}\n\n// Specialized hooks for common API patterns\nexport function useSpaces(params: { limit?: number; offset?: number } = {}) {\n  return useResilientApi(\n    (client) => client.getSpacesWithOfflineSupport(),\n    { \n      cacheKey: 'spaces',\n      offlineSupport: true,\n      staleTime: 2 * 60 * 1000 // 2 minutes\n    }\n  );\n}\n\nexport function useSpace(spaceId: string) {\n  return useResilientApi(\n    (client) => client.getSpace(spaceId),\n    { \n      cacheKey: `space_${spaceId}`,\n      immediate: !!spaceId,\n      staleTime: 60 * 1000 // 1 minute\n    }\n  );\n}\n\nexport function useFeed(params: { \n  limit?: number; \n  offset?: number; \n  spaceId?: string; \n  type?: string \n} = {}) {\n  return useResilientApi(\n    (client) => client.getFeedWithOfflineSupport(),\n    { \n      cacheKey: 'feed',\n      offlineSupport: true,\n      staleTime: 30 * 1000 // 30 seconds\n    }\n  );\n}\n\nexport function useTools(params: { \n  limit?: number; \n  offset?: number; \n  category?: string; \n  verified?: boolean \n} = {}) {\n  return useResilientApi(\n    (client) => client.getTools(params),\n    { \n      cacheKey: 'tools',\n      offlineSupport: true,\n      staleTime: 5 * 60 * 1000 // 5 minutes\n    }\n  );\n}\n\nexport function useTool(toolId: string) {\n  return useResilientApi(\n    (client) => client.getTool(toolId),\n    { \n      cacheKey: `tool_${toolId}`,\n      immediate: !!toolId,\n      staleTime: 2 * 60 * 1000 // 2 minutes\n    }\n  );\n}\n\nexport function useProfile(userId?: string) {\n  return useResilientApi(\n    (client) => client.getProfile(userId),\n    { \n      cacheKey: userId ? `profile_${userId}` : 'profile',\n      staleTime: 60 * 1000 // 1 minute\n    }\n  );\n}\n\nexport function useSpaceMembers(spaceId: string, params: { limit?: number; offset?: number } = {}) {\n  return useResilientApi(\n    (client) => client.getSpaceMembers(spaceId, params),\n    { \n      cacheKey: `space_members_${spaceId}`,\n      immediate: !!spaceId,\n      staleTime: 2 * 60 * 1000 // 2 minutes\n    }\n  );\n}\n\nexport function useSpaceEvents(spaceId: string, params: { limit?: number; upcoming?: boolean } = {}) {\n  return useResilientApi(\n    (client) => client.getSpaceEvents(spaceId, params),\n    { \n      cacheKey: `space_events_${spaceId}`,\n      immediate: !!spaceId,\n      staleTime: 60 * 1000 // 1 minute\n    }\n  );\n}\n\nexport function useSpaceTools(spaceId: string, params: { limit?: number; category?: string } = {}) {\n  return useResilientApi(\n    (client) => client.getSpaceTools(spaceId, params),\n    { \n      cacheKey: `space_tools_${spaceId}`,\n      immediate: !!spaceId,\n      staleTime: 2 * 60 * 1000 // 2 minutes\n    }\n  );\n}\n\n// Hook for mutations with optimistic updates\nexport function useResilientMutation<TData, TVariables>(\n  mutationFn: (client: ResilientHiveApiClient, variables: TVariables) => Promise<TData>,\n  options: {\n    onSuccess?: (data: TData, variables: TVariables) => void;\n    onError?: (error: HiveError, variables: TVariables) => void;\n    optimisticUpdate?: (variables: TVariables) => TData;\n  } = {}\n) {\n  const [state, setState] = useState<{\n    data: TData | null;\n    loading: boolean;\n    error: HiveError | null;\n  }>({\n    data: null,\n    loading: false,\n    error: null\n  });\n\n  const clientRef = useRef<ResilientHiveApiClient>();\n\n  useEffect(() => {\n    clientRef.current = createResilientApiClient();\n  }, []);\n\n  const mutate = useCallback(async (variables: TVariables) => {\n    if (!clientRef.current) return;\n\n    setState({\n      data: options.optimisticUpdate ? options.optimisticUpdate(variables) : null,\n      loading: true,\n      error: null\n    });\n\n    try {\n      const data = await mutationFn(clientRef.current, variables);\n      \n      setState({\n        data,\n        loading: false,\n        error: null\n      });\n\n      options.onSuccess?.(data, variables);\n      return data;\n\n    } catch (error: any) {\n      const hiveError: HiveError = error.id ? error : {\n        id: `mutation_${Date.now()}`,\n        category: ErrorCategory._UNKNOWN,\n        severity: ErrorSeverity._MEDIUM,\n        message: error.message || 'Mutation failed',\n        timestamp: new Date(),\n        retryable: false\n      };\n\n      setState({\n        data: null,\n        loading: false,\n        error: hiveError\n      });\n\n      options.onError?.(hiveError, variables);\n      throw hiveError;\n    }\n  }, [mutationFn, options]);\n\n  const reset = useCallback(() => {\n    setState({\n      data: null,\n      loading: false,\n      error: null\n    });\n  }, []);\n\n  return {\n    ...state,\n    mutate,\n    reset\n  };\n}\n\n// Search hooks with debouncing and caching\nexport function useSearch<T>(\n  searchFn: (client: ResilientHiveApiClient, query: string, filters: any) => Promise<T>,\n  query: string,\n  filters: any = {},\n  debounceMs = 300\n) {\n  const [debouncedQuery, setDebouncedQuery] = useState(query);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedQuery(query);\n    }, debounceMs);\n\n    return () => clearTimeout(timer);\n  }, [query, debounceMs]);\n\n  return useResilientApi(\n    (client) => searchFn(client, debouncedQuery, filters),\n    {\n      immediate: debouncedQuery.length > 0,\n      cacheKey: `search_${debouncedQuery}_${JSON.stringify(filters)}`,\n      staleTime: 30 * 1000 // 30 seconds\n    }\n  );\n}\n\nexport function useSpaceSearch(query: string, filters: any = {}) {\n  return useSearch(\n    (client, q, f) => client.searchSpaces(q, f),\n    query,\n    filters\n  );\n}\n\nexport function useToolSearch(query: string, filters: any = {}) {\n  return useSearch(\n    (client, q, f) => client.searchTools(q, f),\n    query,\n    filters\n  );\n}\n\nexport function useFeedSearch(query: string, filters: any = {}) {\n  return useSearch(\n    (client, q, f) => client.searchFeed(q, f),\n    query,\n    filters\n  );\n}\n\nexport function useUserSearch(query: string, filters: any = {}) {\n  return useSearch(\n    (client, q, f) => client.searchUsers(q, f),\n    query,\n    filters\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/hooks/use-session.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/admin-activity-logger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/admin-auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/admin-middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/admin-notifications.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/advanced-auth-security.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/api-auth-middleware.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'request' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":179,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":179,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"request"},"fix":{"range":[5574,5595],"text":""},"desc":"Remove unused variable 'request'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'context' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":179,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":179,"endColumn":55,"suggestions":[{"messageId":"removeVar","data":{"varName":"context"},"fix":{"range":[5594,5616],"text":""},"desc":"Remove unused variable 'context'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'args' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":179,"column":60,"nodeType":"Identifier","messageId":"unusedVar","endLine":179,"endColumn":64,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[5621,5625],"text":""},"desc":"Remove unused variable 'args'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Production-ready API authentication middleware\n * NO DEVELOPMENT BYPASSES - ENFORCE REAL AUTH\n */\n\nimport { NextRequest, NextResponse } from 'next/server';\nimport { validateAuthToken } from './security-service';\nimport { isProductionEnvironment } from './production-auth';\nimport { logSecurityEvent } from './structured-logger';\n\nexport interface AuthContext {\n  userId: string;\n  token: string;\n  isAdmin?: boolean;\n  user: {\n    email?: string;\n    emailVerified?: boolean;\n  };\n}\n\nexport interface AuthOptions {\n  requireAdmin?: boolean;\n  operation?: string;\n  allowDevelopmentBypass?: boolean; // ONLY for non-sensitive endpoints\n}\n\n/**\n * Validate API request authentication\n * Returns user context or throws appropriate HTTP error\n */\nexport async function validateApiAuth(\n  request: NextRequest,\n  options: AuthOptions = {}\n): Promise<AuthContext> {\n  const { requireAdmin = false, operation, allowDevelopmentBypass = false } = options;\n  \n  const authHeader = request.headers.get('authorization');\n  if (!authHeader || !authHeader.startsWith('Bearer ')) {\n    await logSecurityEvent('unauthorized_api_access', {\n      ip: request.headers.get('x-forwarded-for') || request.headers.get('x-real-ip'),\n      userAgent: request.headers.get('user-agent'),\n      path: new URL(request.url).pathname,\n      operation,\n      tags: { reason: 'missing_auth_header' }\n    });\n\n    throw new Response(\n      JSON.stringify({ error: 'Authentication required' }),\n      { status: 401, headers: { 'content-type': 'application/json' } }\n    );\n  }\n\n  const token = authHeader.replace('Bearer ', '');\n\n  // In production, never allow development bypasses for sensitive operations\n  if (isProductionEnvironment() && !allowDevelopmentBypass) {\n    const validation = await validateAuthToken(token, request, {\n      operation,\n      requireRealAuth: true\n    });\n\n    if (!validation.valid) {\n      await logSecurityEvent('invalid_token_api_access', {\n        ip: request.headers.get('x-forwarded-for') || request.headers.get('x-real-ip'),\n        userAgent: request.headers.get('user-agent'),\n        path: new URL(request.url).pathname,\n        operation,\n        tags: { reason: validation.reason || 'invalid_token' }\n      });\n\n      const status = validation.securityAlert ? 403 : 401;\n      throw new Response(\n        JSON.stringify({ error: 'Invalid authentication token' }),\n        { status, headers: { 'content-type': 'application/json' } }\n      );\n    }\n\n    // Check admin requirements\n    if (requireAdmin && !await isAdminUser(validation.userId!)) {\n      await logSecurityEvent('unauthorized_admin_access', {\n        ip: request.headers.get('x-forwarded-for') || request.headers.get('x-real-ip'),\n        userAgent: request.headers.get('user-agent'),\n        path: new URL(request.url).pathname,\n        operation,\n        tags: { userId: validation.userId, reason: 'insufficient_permissions' }\n      });\n\n      throw new Response(\n        JSON.stringify({ error: 'Admin access required' }),\n        { status: 403, headers: { 'content-type': 'application/json' } }\n      );\n    }\n\n    return {\n      userId: validation.userId!,\n      token,\n      isAdmin: requireAdmin ? true : await isAdminUser(validation.userId!),\n      user: {\n        email: validation.email,\n        emailVerified: validation.emailVerified\n      }\n    };\n  }\n\n  // Development mode handling\n  if (!isProductionEnvironment()) {\n    // Allow development tokens only in development\n    if (token === 'test-token' || token.startsWith('dev_token_')) {\n      if (allowDevelopmentBypass) {\n        console.warn(`ðŸ”“ Development bypass allowed for ${operation || 'unknown operation'}`);\n        return {\n          userId: 'test-user',\n          token,\n          isAdmin: requireAdmin,\n          user: {\n            email: 'test@example.com',\n            emailVerified: true\n          }\n        };\n      } else {\n        console.warn(`âš ï¸ Development bypass denied for sensitive operation: ${operation}`);\n        throw new Response(\n          JSON.stringify({ error: 'Real authentication required for this operation' }),\n          { status: 401, headers: { 'content-type': 'application/json' } }\n        );\n      }\n    }\n\n    // Still validate real tokens in development\n    const validation = await validateAuthToken(token, request, { operation });\n    if (!validation.valid) {\n      throw new Response(\n        JSON.stringify({ error: 'Invalid authentication token' }),\n        { status: 401, headers: { 'content-type': 'application/json' } }\n      );\n    }\n\n    return {\n      userId: validation.userId!,\n      token,\n      isAdmin: requireAdmin ? true : await isAdminUser(validation.userId!),\n      user: {\n        email: validation.email,\n        emailVerified: validation.emailVerified\n      }\n    };\n  }\n\n  // Should never reach here in production\n  throw new Response(\n    JSON.stringify({ error: 'Authentication service error' }),\n    { status: 500, headers: { 'content-type': 'application/json' } }\n  );\n}\n\n/**\n * Check if user has admin privileges\n */\nasync function isAdminUser(userId: string): Promise<boolean> {\n  try {\n    // In development, allow test users to be admin\n    if (!isProductionEnvironment() && userId === 'test-user') {\n      return true;\n    }\n\n    // TODO: Implement real admin check against database\n    // For now, return false to be safe\n    return false;\n  } catch (error) {\n    console.error('Admin check failed:', error);\n    return false;\n  }\n}\n\n/**\n * Wrapper for API routes that need authentication\n */\nexport function withAuth<T extends any[]>(\n  handler: (request: NextRequest, context: AuthContext, ...args: T) => Promise<Response> | Response,\n  options: AuthOptions = {}\n) {\n  return async (request: NextRequest, ...args: T): Promise<Response> => {\n    try {\n      const authContext = await validateApiAuth(request, options);\n      return await handler(request, authContext, ...args);\n    } catch (error) {\n      if (error instanceof Response) {\n        return error;\n      }\n      \n      console.error('Auth middleware error:', error);\n      return new Response(\n        JSON.stringify({ error: 'Authentication service error' }),\n        { status: 500, headers: { 'content-type': 'application/json' } }\n      );\n    }\n  };\n}\n\n/**\n * Create standardized API responses\n */\nexport class ApiResponse {\n  static success(data: any, status = 200) {\n    return NextResponse.json({ success: true, data }, { status });\n  }\n\n  static error(message: string, code?: string, status = 400) {\n    return NextResponse.json({ \n      success: false, \n      error: { message, code } \n    }, { status });\n  }\n\n  static unauthorized(message = 'Authentication required') {\n    return NextResponse.json({ \n      success: false, \n      error: { message, code: 'UNAUTHORIZED' } \n    }, { status: 401 });\n  }\n\n  static forbidden(message = 'Access denied') {\n    return NextResponse.json({ \n      success: false, \n      error: { message, code: 'FORBIDDEN' } \n    }, { status: 403 });\n  }\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/api-client-resilient.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/api-error-handler.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/api-response-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/api-wrapper.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/auth-middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/auth-monitoring-analytics.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'userEvents' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":449,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":449,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"userEvents"},"fix":{"range":[13293,13316],"text":""},"desc":"Remove unused variable 'userEvents'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'userJourneys' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":458,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":458,"endColumn":63,"suggestions":[{"messageId":"removeVar","data":{"varName":"userJourneys"},"fix":{"range":[13554,13581],"text":""},"desc":"Remove unused variable 'userJourneys'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'userEvents' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":467,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":467,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"userEvents"},"fix":{"range":[13812,13835],"text":""},"desc":"Remove unused variable 'userEvents'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'userJourneys' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":476,"column":64,"nodeType":"Identifier","messageId":"unusedVar","endLine":476,"endColumn":91,"suggestions":[{"messageId":"removeVar","data":{"varName":"userJourneys"},"fix":{"range":[14040,14069],"text":""},"desc":"Remove unused variable 'userJourneys'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'performanceEvents' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":487,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":487,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"performanceEvents"},"fix":{"range":[14401,14431],"text":""},"desc":"Remove unused variable 'performanceEvents'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'stage' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":508,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":508,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"stage"},"fix":{"range":[14772,14785],"text":""},"desc":"Remove unused variable 'stage'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Advanced Authentication Monitoring & Analytics\n * Provides comprehensive auth flow monitoring, user behavior analytics, and performance insights\n */\n\ninterface AuthEvent {\n  id: string;\n  type: 'login_attempt' | 'login_success' | 'login_failure' | 'logout' | 'session_expired' | \n        'onboarding_start' | 'onboarding_complete' | 'security_violation' | 'performance_issue';\n  timestamp: number;\n  userId?: string;\n  sessionId: string;\n  metadata: Record<string, any>;\n  userAgent: string;\n  location: string;\n  duration?: number;\n  success: boolean;\n}\n\ninterface UserJourney {\n  userId: string;\n  sessionId: string;\n  startTime: number;\n  endTime?: number;\n  events: AuthEvent[];\n  funnel: {\n    landed: boolean;\n    schoolSelected: boolean;\n    emailEntered: boolean;\n    magicLinkClicked: boolean;\n    onboardingStarted: boolean;\n    onboardingCompleted: boolean;\n    firstDashboardView: boolean;\n  };\n  conversionTime?: number;\n  dropoffStage?: string;\n}\n\ninterface AuthAnalytics {\n  totalSessions: number;\n  successfulLogins: number;\n  failedLogins: number;\n  averageLoginTime: number;\n  onboardingCompletionRate: number;\n  averageOnboardingTime: number;\n  securityViolations: number;\n  topDropoffStages: Array<{ stage: string; count: number; percentage: number }>;\n  userRetention: {\n    day1: number;\n    day7: number;\n    day30: number;\n  };\n  performanceMetrics: {\n    averageAuthTime: number;\n    slowestQueries: Array<{ query: string; averageTime: number }>;\n    cacheHitRate: number;\n  };\n}\n\nexport class AuthMonitoringAnalytics {\n  private static instance: AuthMonitoringAnalytics;\n  private events: AuthEvent[] = [];\n  private journeys: Map<string, UserJourney> = new Map();\n  private analytics: AuthAnalytics = this.initializeAnalytics();\n  \n  private readonly MAX_EVENTS = 10000;\n  private readonly BATCH_SIZE = 100;\n  private eventQueue: AuthEvent[] = [];\n  private flushTimer: NodeJS.Timeout | null = null;\n\n  static getInstance(): AuthMonitoringAnalytics {\n    if (!AuthMonitoringAnalytics.instance) {\n      AuthMonitoringAnalytics.instance = new AuthMonitoringAnalytics();\n    }\n    return AuthMonitoringAnalytics.instance;\n  }\n\n  constructor() {\n    // Start periodic analytics updates\n    this.startPeriodicAnalytics();\n    \n    // Flush events periodically\n    this.startEventFlushing();\n  }\n\n  /**\n   * Track authentication event with comprehensive metadata\n   */\n  trackAuthEvent(\n    type: AuthEvent['type'],\n    metadata: Record<string, any> = {},\n    userId?: string,\n    duration?: number\n  ): void {\n    const event: AuthEvent = {\n      id: this.generateEventId(),\n      type,\n      timestamp: Date.now(),\n      userId,\n      sessionId: this.getCurrentSessionId(),\n      metadata: {\n        ...metadata,\n        url: typeof window !== 'undefined' ? window.location.href : '',\n        referrer: typeof window !== 'undefined' ? document.referrer : '',\n        viewport: typeof window !== 'undefined' ? \n          `${window.innerWidth}x${window.innerHeight}` : '',\n        connectionType: this.getConnectionType(),\n        ...this.getDeviceInfo()\n      },\n      userAgent: typeof navigator !== 'undefined' ? navigator.userAgent : '',\n      location: this.getUserLocation(),\n      duration,\n      success: !type.includes('failure') && !type.includes('violation')\n    };\n\n    this.addEvent(event);\n    this.updateUserJourney(event);\n    this.updateRealTimeAnalytics(event);\n  }\n\n  /**\n   * Track user journey through auth funnel\n   */\n  startUserJourney(userId?: string): string {\n    const sessionId = this.generateSessionId();\n    const journey: UserJourney = {\n      userId: userId || 'anonymous',\n      sessionId,\n      startTime: Date.now(),\n      events: [],\n      funnel: {\n        landed: true,\n        schoolSelected: false,\n        emailEntered: false,\n        magicLinkClicked: false,\n        onboardingStarted: false,\n        onboardingCompleted: false,\n        firstDashboardView: false\n      }\n    };\n\n    this.journeys.set(sessionId, journey);\n    return sessionId;\n  }\n\n  /**\n   * Update funnel stage for user journey\n   */\n  updateFunnelStage(sessionId: string, stage: keyof UserJourney['funnel']): void {\n    const journey = this.journeys.get(sessionId);\n    if (journey) {\n      journey.funnel[stage] = true;\n      \n      // Calculate conversion time if completed\n      if (stage === 'firstDashboardView') {\n        journey.endTime = Date.now();\n        journey.conversionTime = journey.endTime - journey.startTime;\n      }\n    }\n  }\n\n  /**\n   * Get comprehensive analytics dashboard data\n   */\n  getAnalyticsDashboard(): {\n    overview: AuthAnalytics;\n    realTimeMetrics: {\n      activeUsers: number;\n      recentLogins: number;\n      currentConversions: number;\n      alertsCount: number;\n    };\n    funnelAnalysis: Array<{\n      stage: string;\n      users: number;\n      conversionRate: number;\n      averageTime: number;\n    }>;\n    cohortAnalysis: Array<{\n      cohort: string;\n      users: number;\n      retention: number[];\n    }>;\n    securityInsights: {\n      threatLevel: 'low' | 'medium' | 'high';\n      recentViolations: AuthEvent[];\n      riskScores: Array<{ userId: string; score: number; reasons: string[] }>;\n    };\n  } {\n    return {\n      overview: this.analytics,\n      realTimeMetrics: this.getRealTimeMetrics(),\n      funnelAnalysis: this.getFunnelAnalysis(),\n      cohortAnalysis: this.getCohortAnalysis(),\n      securityInsights: this.getSecurityInsights()\n    };\n  }\n\n  /**\n   * Get user behavior insights\n   */\n  getUserBehaviorInsights(userId: string): {\n    loginPattern: {\n      mostActiveHours: number[];\n      averageSessionDuration: number;\n      loginFrequency: number;\n    };\n    onboardingJourney: {\n      timeToComplete: number;\n      stepsCompleted: string[];\n      dropoffPoints: string[];\n    };\n    securityProfile: {\n      riskScore: number;\n      suspiciousActivities: AuthEvent[];\n      deviceFingerprints: string[];\n    };\n    recommendations: string[];\n  } {\n    const userEvents = this.events.filter(e => e.userId === userId);\n    const userJourneys = Array.from(this.journeys.values()).filter(j => j.userId === userId);\n\n    return {\n      loginPattern: this.analyzeLoginPattern(userEvents),\n      onboardingJourney: this.analyzeOnboardingJourney(userJourneys),\n      securityProfile: this.analyzeSecurityProfile(userEvents),\n      recommendations: this.generateUserRecommendations(userEvents, userJourneys)\n    };\n  }\n\n  /**\n   * Performance monitoring and optimization suggestions\n   */\n  getPerformanceInsights(): {\n    slowQueries: Array<{ operation: string; averageTime: number; count: number }>;\n    bottlenecks: Array<{ stage: string; impact: number; suggestion: string }>;\n    optimizations: Array<{ area: string; currentScore: number; targetScore: number; actions: string[] }>;\n    resourceUsage: {\n      memoryUsage: number;\n      cacheEfficiency: number;\n      apiCallVolume: number;\n    };\n  } {\n    const performanceEvents = this.events.filter(e => e.duration !== undefined);\n    \n    return {\n      slowQueries: this.analyzeSlowQueries(performanceEvents),\n      bottlenecks: this.identifyBottlenecks(),\n      optimizations: this.suggestOptimizations(),\n      resourceUsage: this.getResourceUsage()\n    };\n  }\n\n  /**\n   * Export analytics data for external analysis\n   */\n  exportAnalyticsData(format: 'json' | 'csv' | 'xlsx' = 'json'): string | Blob {\n    const data = {\n      events: this.events,\n      journeys: Array.from(this.journeys.values()),\n      analytics: this.analytics,\n      exportedAt: new Date().toISOString(),\n      version: '1.0.0'\n    };\n\n    switch (format) {\n      case 'json':\n        return JSON.stringify(data, null, 2);\n      case 'csv':\n        return this.convertToCSV(data);\n      case 'xlsx':\n        return this.convertToXLSX(data);\n      default:\n        return JSON.stringify(data);\n    }\n  }\n\n  // Private helper methods\n  private addEvent(event: AuthEvent): void {\n    this.events.push(event);\n    this.eventQueue.push(event);\n    \n    // Maintain memory limits\n    if (this.events.length > this.MAX_EVENTS) {\n      this.events = this.events.slice(-this.MAX_EVENTS);\n    }\n  }\n\n  private updateUserJourney(event: AuthEvent): void {\n    const journey = this.journeys.get(event.sessionId);\n    if (journey) {\n      journey.events.push(event);\n      \n      // Update funnel based on event type\n      switch (event.type) {\n        case 'login_attempt':\n          this.updateFunnelStage(event.sessionId, 'emailEntered');\n          break;\n        case 'login_success':\n          this.updateFunnelStage(event.sessionId, 'magicLinkClicked');\n          break;\n        case 'onboarding_start':\n          this.updateFunnelStage(event.sessionId, 'onboardingStarted');\n          break;\n        case 'onboarding_complete':\n          this.updateFunnelStage(event.sessionId, 'onboardingCompleted');\n          break;\n      }\n    }\n  }\n\n  private updateRealTimeAnalytics(event: AuthEvent): void {\n    // Update counters based on event type\n    switch (event.type) {\n      case 'login_success':\n        this.analytics.successfulLogins++;\n        break;\n      case 'login_failure':\n        this.analytics.failedLogins++;\n        break;\n      case 'security_violation':\n        this.analytics.securityViolations++;\n        break;\n    }\n\n    this.analytics.totalSessions = this.journeys.size;\n  }\n\n  private initializeAnalytics(): AuthAnalytics {\n    return {\n      totalSessions: 0,\n      successfulLogins: 0,\n      failedLogins: 0,\n      averageLoginTime: 0,\n      onboardingCompletionRate: 0,\n      averageOnboardingTime: 0,\n      securityViolations: 0,\n      topDropoffStages: [],\n      userRetention: { day1: 0, day7: 0, day30: 0 },\n      performanceMetrics: {\n        averageAuthTime: 0,\n        slowestQueries: [],\n        cacheHitRate: 0\n      }\n    };\n  }\n\n  private generateEventId(): string {\n    return `evt_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  private generateSessionId(): string {\n    return `sess_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  private getCurrentSessionId(): string {\n    // Get current session ID from storage or generate new one\n    if (typeof window !== 'undefined') {\n      let sessionId = sessionStorage.getItem('hive_analytics_session');\n      if (!sessionId) {\n        sessionId = this.generateSessionId();\n        sessionStorage.setItem('hive_analytics_session', sessionId);\n      }\n      return sessionId;\n    }\n    return 'server_session';\n  }\n\n  private getConnectionType(): string {\n    if (typeof navigator !== 'undefined' && 'connection' in navigator) {\n      const connection = (navigator as any).connection;\n      return connection.effectiveType || connection.type || 'unknown';\n    }\n    return 'unknown';\n  }\n\n  private getDeviceInfo(): Record<string, any> {\n    if (typeof window === 'undefined') return {};\n    \n    return {\n      screen: `${screen.width}x${screen.height}`,\n      devicePixelRatio: window.devicePixelRatio,\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n      language: navigator.language,\n      platform: navigator.platform,\n      cookieEnabled: navigator.cookieEnabled,\n      onlineStatus: navigator.onLine\n    };\n  }\n\n  private getUserLocation(): string {\n    // This would typically use GeoIP or similar service\n    // For now, return timezone-based approximation\n    try {\n      return Intl.DateTimeFormat().resolvedOptions().timeZone;\n    } catch {\n      return 'unknown';\n    }\n  }\n\n  private getRealTimeMetrics() {\n    const now = Date.now();\n    const oneHourAgo = now - (60 * 60 * 1000);\n    \n    const recentEvents = this.events.filter(e => e.timestamp > oneHourAgo);\n    \n    return {\n      activeUsers: new Set(recentEvents.map(e => e.userId).filter(Boolean)).size,\n      recentLogins: recentEvents.filter(e => e.type === 'login_success').length,\n      currentConversions: recentEvents.filter(e => e.type === 'onboarding_complete').length,\n      alertsCount: recentEvents.filter(e => e.type === 'security_violation').length\n    };\n  }\n\n  private getFunnelAnalysis() {\n    // Analyze conversion funnel\n    const stages = ['landed', 'schoolSelected', 'emailEntered', 'magicLinkClicked', 'onboardingStarted', 'onboardingCompleted', 'firstDashboardView'];\n    const journeys = Array.from(this.journeys.values());\n    \n    return stages.map((stage, index) => {\n      const usersAtStage = journeys.filter(j => j.funnel[stage as keyof UserJourney['funnel']]).length;\n      const previousStage = index > 0 ? journeys.filter(j => j.funnel[stages[index - 1] as keyof UserJourney['funnel']]).length : journeys.length;\n      \n      return {\n        stage,\n        users: usersAtStage,\n        conversionRate: previousStage > 0 ? (usersAtStage / previousStage) * 100 : 0,\n        averageTime: this.getAverageTimeToStage(stage)\n      };\n    });\n  }\n\n  private getCohortAnalysis() {\n    // Placeholder for cohort analysis\n    return [];\n  }\n\n  private getSecurityInsights() {\n    const securityEvents = this.events.filter(e => e.type === 'security_violation');\n    const recentViolations = securityEvents.slice(-10);\n    \n    return {\n      threatLevel: securityEvents.length > 10 ? 'high' : securityEvents.length > 5 ? 'medium' : 'low' as const,\n      recentViolations,\n      riskScores: []\n    };\n  }\n\n  private analyzeLoginPattern(userEvents: AuthEvent[]) {\n    // Placeholder implementation\n    return {\n      mostActiveHours: [9, 10, 11, 14, 15, 16],\n      averageSessionDuration: 3600000, // 1 hour\n      loginFrequency: 0.8 // times per day\n    };\n  }\n\n  private analyzeOnboardingJourney(userJourneys: UserJourney[]) {\n    // Placeholder implementation\n    return {\n      timeToComplete: 300000, // 5 minutes\n      stepsCompleted: ['profile', 'school', 'major'],\n      dropoffPoints: ['photo_upload']\n    };\n  }\n\n  private analyzeSecurityProfile(userEvents: AuthEvent[]) {\n    // Placeholder implementation\n    return {\n      riskScore: 2,\n      suspiciousActivities: [],\n      deviceFingerprints: []\n    };\n  }\n\n  private generateUserRecommendations(userEvents: AuthEvent[], userJourneys: UserJourney[]): string[] {\n    const recommendations: string[] = [];\n    \n    // Add recommendations based on user behavior\n    if (userEvents.filter(e => e.type === 'login_failure').length > 3) {\n      recommendations.push('Consider enabling two-factor authentication');\n    }\n    \n    return recommendations;\n  }\n\n  private analyzeSlowQueries(performanceEvents: AuthEvent[]) {\n    // Group by operation and calculate averages\n    return [];\n  }\n\n  private identifyBottlenecks() {\n    return [];\n  }\n\n  private suggestOptimizations() {\n    return [];\n  }\n\n  private getResourceUsage() {\n    return {\n      memoryUsage: 0,\n      cacheEfficiency: 0,\n      apiCallVolume: 0\n    };\n  }\n\n  private getAverageTimeToStage(stage: string): number {\n    // Calculate average time to reach specific funnel stage\n    return 0;\n  }\n\n  private convertToCSV(data: any): string {\n    // Convert data to CSV format\n    return '';\n  }\n\n  private convertToXLSX(data: any): Blob {\n    // Convert data to XLSX format\n    return new Blob();\n  }\n\n  private startPeriodicAnalytics(): void {\n    setInterval(() => {\n      this.recalculateAnalytics();\n    }, 5 * 60 * 1000); // Every 5 minutes\n  }\n\n  private startEventFlushing(): void {\n    this.flushTimer = setInterval(() => {\n      this.flushEventQueue();\n    }, 30 * 1000); // Every 30 seconds\n  }\n\n  private recalculateAnalytics(): void {\n    // Recalculate analytics based on current data\n    const completedJourneys = Array.from(this.journeys.values()).filter(j => j.endTime);\n    \n    if (completedJourneys.length > 0) {\n      this.analytics.onboardingCompletionRate = (completedJourneys.length / this.journeys.size) * 100;\n      this.analytics.averageOnboardingTime = completedJourneys.reduce((sum, j) => \n        sum + (j.conversionTime || 0), 0) / completedJourneys.length;\n    }\n  }\n\n  private async flushEventQueue(): Promise<void> {\n    if (this.eventQueue.length === 0) return;\n\n    const eventsToFlush = this.eventQueue.splice(0, this.BATCH_SIZE);\n    \n    try {\n      // Send to analytics endpoint\n      await fetch('/api/analytics/events', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ events: eventsToFlush })\n      });\n    } catch (error) {\n      // Re-queue events on failure\n      this.eventQueue.unshift(...eventsToFlush);\n      console.error('Failed to flush analytics events:', error);\n    }\n  }\n}\n\n// Singleton instance for global use\nexport const authAnalytics = AuthMonitoringAnalytics.getInstance();","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/auth-performance-optimizer.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/auth-server.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/auth-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/auto-space-creation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/avatar-generator.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'backgroundColor' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":52,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":52,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"backgroundColor"},"fix":{"range":[1437,1465],"text":""},"desc":"Remove unused variable 'backgroundColor'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Avatar Generation Utilities for HIVE\n * Generates consistent, high-quality default avatars for users\n */\n\nexport interface AvatarOptions {\n  seed?: string;\n  size?: number;\n  style?: 'avataaars' | 'identicon' | 'initials' | 'geometric';\n  backgroundColor?: string;\n}\n\n/**\n * Generate a default avatar URL for a user\n */\nexport function generateDefaultAvatar(\n  userId: string, \n  options: AvatarOptions = {}\n): string {\n  const {\n    size = 150,\n    style = 'avataaars',\n    backgroundColor = 'var(--hive-brand-primary)'\n  } = options;\n\n  // Use userId as seed for consistent avatars\n  const seed = options.seed || userId;\n  \n  switch (style) {\n    case 'avataaars':\n      return `https://api.dicebear.com/7.x/avataaars/svg?seed=${seed}&size=${size}&backgroundColor=${encodeURIComponent(backgroundColor)}`;\n    \n    case 'identicon':\n      return `https://api.dicebear.com/7.x/identicon/svg?seed=${seed}&size=${size}&backgroundColor=${encodeURIComponent(backgroundColor)}`;\n    \n    case 'geometric':\n      return `https://api.dicebear.com/7.x/shapes/svg?seed=${seed}&size=${size}&backgroundColor=${encodeURIComponent(backgroundColor)}`;\n    \n    case 'initials':\n    default:\n      // For initials, we'll use a simple service or generate locally\n      return generateInitialsAvatar(seed, size, backgroundColor);\n  }\n}\n\n/**\n * Generate avatar from user initials\n */\nfunction generateInitialsAvatar(\n  seed: string, \n  size: number, \n  backgroundColor: string\n): string {\n  // Extract initials from seed (could be name or userId)\n  const initials = extractInitials(seed);\n  \n  // Generate a consistent color based on seed\n  const colors = [\n    '#F59E0B', // Amber\n    '#EF4444', // Red  \n    '#10B981', // Emerald\n    '#3B82F6', // Blue\n    '#8B5CF6', // Violet\n    '#F97316', // Orange\n    '#06B6D4', // Cyan\n    '#84CC16', // Lime\n  ];\n  \n  const colorIndex = seed.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0) % colors.length;\n  const bgColor = colors[colorIndex];\n  \n  // Return a data URL or use a service\n  return `https://ui-avatars.com/api/?name=${encodeURIComponent(initials)}&size=${size}&background=${bgColor.slice(1)}&color=ffffff&bold=true&format=svg`;\n}\n\n/**\n * Extract initials from a string (name or ID)\n */\nfunction extractInitials(input: string): string {\n  if (!input) return 'HU'; // HIVE User default\n  \n  // If it looks like a name (contains spaces)\n  if (input.includes(' ')) {\n    return input\n      .split(' ')\n      .map(word => word.charAt(0).toUpperCase())\n      .slice(0, 2)\n      .join('');\n  }\n  \n  // If it's a userId or single word, take first two characters\n  return input.slice(0, 2).toUpperCase();\n}\n\n/**\n * Get a variety of default avatar options for user selection\n */\nexport function getDefaultAvatarOptions(userId: string): string[] {\n  const baseOptions = [\n    { style: 'avataaars' as const, seed: userId },\n    { style: 'avataaars' as const, seed: `${userId}-alt1` },\n    { style: 'avataaars' as const, seed: `${userId}-alt2` },\n    { style: 'geometric' as const, seed: userId },\n    { style: 'identicon' as const, seed: userId },\n    { style: 'initials' as const, seed: userId },\n  ];\n\n  return baseOptions.map(options => generateDefaultAvatar(userId, options));\n}\n\n/**\n * Check if a URL is a user-uploaded image (vs generated avatar)\n */\nexport function isUserUploadedImage(imageUrl: string): boolean {\n  if (!imageUrl) return false;\n  \n  // Firebase Storage URLs\n  if (imageUrl.includes('firebasestorage.googleapis.com')) return true;\n  \n  // Other upload services could be added here\n  return false;\n}\n\n/**\n * Get fallback avatar if image fails to load\n */\nexport function getFallbackAvatar(userId: string, userName?: string): string {\n  const seed = userName || userId;\n  return generateDefaultAvatar(userId, { \n    style: 'initials', \n    seed \n  });\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/calendar-api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/comprehensive-security-middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/content-validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/cookie-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/cross-platform-notifications.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/csrf-protection.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/dev-auth-helper.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/element-system.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'action' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":8,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"action"},"fix":{"range":[202,217],"text":""},"desc":"Remove unused variable 'action'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'payload' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":8,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"payload"},"fix":{"range":[216,230],"text":""},"desc":"Remove unused variable 'payload'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// HIVE Element System - Composable building blocks for tools\n\nexport interface ElementProps {\n  id: string;\n  config: Record<string, any>;\n  data?: any;\n  onChange?: (data: any) => void;\n  onAction?: (action: string, payload: any) => void;\n}\n\nexport interface ElementDefinition {\n  id: string;\n  name: string;\n  description: string;\n  category: 'input' | 'display' | 'filter' | 'action' | 'layout';\n  icon: string;\n  configSchema: Record<string, any>;\n  defaultConfig: Record<string, any>;\n  render: (props: ElementProps) => JSX.Element;\n}\n\nexport interface ToolComposition {\n  id: string;\n  name: string;\n  description: string;\n  elements: {\n    elementId: string;\n    instanceId: string;\n    config: Record<string, any>;\n    position: { x: number; y: number };\n    size: { width: number; height: number };\n  }[];\n  connections: {\n    from: { instanceId: string; output: string };\n    to: { instanceId: string; input: string };\n  }[];\n  layout: 'grid' | 'flow' | 'tabs' | 'sidebar';\n}\n\n// Core Element Registry\nexport class ElementRegistry {\n  private static instance: ElementRegistry;\n  private elements: Map<string, ElementDefinition> = new Map();\n\n  static getInstance(): ElementRegistry {\n    if (!ElementRegistry.instance) {\n      ElementRegistry.instance = new ElementRegistry();\n    }\n    return ElementRegistry.instance;\n  }\n\n  registerElement(element: ElementDefinition) {\n    this.elements.set(element.id, element);\n  }\n\n  getElement(id: string): ElementDefinition | undefined {\n    return this.elements.get(id);\n  }\n\n  getElementsByCategory(category: string): ElementDefinition[] {\n    return Array.from(this.elements.values()).filter(el => el.category === category);\n  }\n\n  getAllElements(): ElementDefinition[] {\n    return Array.from(this.elements.values());\n  }\n}\n\n// Element Execution Engine\nexport class ElementEngine {\n  private compositions: Map<string, ToolComposition> = new Map();\n  private elementStates: Map<string, any> = new Map();\n\n  executeComposition(composition: ToolComposition) {\n    // Initialize element states\n    for (const element of composition.elements) {\n      this.elementStates.set(element.instanceId, {});\n    }\n\n    // Process connections and data flow\n    this.processDataFlow(composition);\n  }\n\n  private processDataFlow(composition: ToolComposition) {\n    const processed = new Set<string>();\n    const processing = new Set<string>();\n\n    const processElement = (instanceId: string) => {\n      if (processed.has(instanceId)) return;\n      if (processing.has(instanceId)) {\n        throw new Error(`Circular dependency detected involving ${instanceId}`);\n      }\n\n      processing.add(instanceId);\n\n      // Find all inputs for this element\n      const inputs = composition.connections.filter(conn => conn.to.instanceId === instanceId);\n      \n      // Process all input dependencies first\n      for (const input of inputs) {\n        processElement(input.from.instanceId);\n      }\n\n      // Now process this element\n      const elementConfig = composition.elements.find(el => el.instanceId === instanceId);\n      if (elementConfig) {\n        const elementDef = ElementRegistry.getInstance().getElement(elementConfig.elementId);\n        if (elementDef) {\n          // Execute element logic here\n          console.log(`Processing element: ${elementDef.name}`);\n        }\n      }\n\n      processing.delete(instanceId);\n      processed.add(instanceId);\n    };\n\n    // Process all elements\n    for (const element of composition.elements) {\n      processElement(element.instanceId);\n    }\n  }\n}\n\n// Predefined Element Templates\nexport const CORE_ELEMENTS: ElementDefinition[] = [\n  {\n    id: 'search-input',\n    name: 'Search Input',\n    description: 'Text input for search queries with autocomplete',\n    category: 'input',\n    icon: 'Search',\n    configSchema: {\n      placeholder: { type: 'string', default: 'Search...' },\n      showSuggestions: { type: 'boolean', default: true },\n      debounceMs: { type: 'number', default: 300 }\n    },\n    defaultConfig: {\n      placeholder: 'Search...',\n      showSuggestions: true,\n      debounceMs: 300\n    },\n    render: (props) => {\n      // This would be implemented in the UI layer\n      return null as any;\n    }\n  },\n  \n  {\n    id: 'filter-selector',\n    name: 'Filter Selector',\n    description: 'Multi-select filter with categories',\n    category: 'filter',\n    icon: 'Filter',\n    configSchema: {\n      options: { type: 'array', default: [] },\n      allowMultiple: { type: 'boolean', default: true },\n      showCounts: { type: 'boolean', default: false }\n    },\n    defaultConfig: {\n      options: [],\n      allowMultiple: true,\n      showCounts: false\n    },\n    render: (props) => null as any\n  },\n\n  {\n    id: 'result-list',\n    name: 'Result List',\n    description: 'Displays search results in a list format',\n    category: 'display',\n    icon: 'List',\n    configSchema: {\n      itemsPerPage: { type: 'number', default: 10 },\n      showPagination: { type: 'boolean', default: true },\n      cardStyle: { type: 'string', default: 'standard' }\n    },\n    defaultConfig: {\n      itemsPerPage: 10,\n      showPagination: true,\n      cardStyle: 'standard'\n    },\n    render: (props) => null as any\n  },\n\n  {\n    id: 'date-picker',\n    name: 'Date Picker',\n    description: 'Date and time selection component',\n    category: 'input',\n    icon: 'Calendar',\n    configSchema: {\n      includeTime: { type: 'boolean', default: false },\n      allowRange: { type: 'boolean', default: false },\n      minDate: { type: 'string', default: '' },\n      maxDate: { type: 'string', default: '' }\n    },\n    defaultConfig: {\n      includeTime: false,\n      allowRange: false,\n      minDate: '',\n      maxDate: ''\n    },\n    render: (props) => null as any\n  },\n\n  {\n    id: 'user-selector',\n    name: 'User Selector',\n    description: 'Select users from the platform',\n    category: 'input',\n    icon: 'Users',\n    configSchema: {\n      allowMultiple: { type: 'boolean', default: false },\n      filterBySpace: { type: 'boolean', default: false },\n      showAvatars: { type: 'boolean', default: true }\n    },\n    defaultConfig: {\n      allowMultiple: false,\n      filterBySpace: false,\n      showAvatars: true\n    },\n    render: (props) => null as any\n  },\n\n  {\n    id: 'tag-cloud',\n    name: 'Tag Cloud',\n    description: 'Visual display of tags with frequency weighting',\n    category: 'display',\n    icon: 'Tag',\n    configSchema: {\n      maxTags: { type: 'number', default: 50 },\n      sortBy: { type: 'string', default: 'frequency' },\n      showCounts: { type: 'boolean', default: true }\n    },\n    defaultConfig: {\n      maxTags: 50,\n      sortBy: 'frequency',\n      showCounts: true\n    },\n    render: (props) => null as any\n  },\n\n  {\n    id: 'map-view',\n    name: 'Map View',\n    description: 'Geographic map for location-based features',\n    category: 'display',\n    icon: 'Map',\n    configSchema: {\n      defaultZoom: { type: 'number', default: 10 },\n      allowMarkers: { type: 'boolean', default: true },\n      showControls: { type: 'boolean', default: true }\n    },\n    defaultConfig: {\n      defaultZoom: 10,\n      allowMarkers: true,\n      showControls: true\n    },\n    render: (props) => null as any\n  },\n\n  {\n    id: 'chart-display',\n    name: 'Chart Display',\n    description: 'Data visualization charts',\n    category: 'display',\n    icon: 'BarChart',\n    configSchema: {\n      chartType: { type: 'string', default: 'bar' },\n      showLegend: { type: 'boolean', default: true },\n      animate: { type: 'boolean', default: true }\n    },\n    defaultConfig: {\n      chartType: 'bar',\n      showLegend: true,\n      animate: true\n    },\n    render: (props) => null as any\n  },\n\n  {\n    id: 'form-builder',\n    name: 'Form Builder',\n    description: 'Dynamic form creation and validation',\n    category: 'input',\n    icon: 'FileText',\n    configSchema: {\n      fields: { type: 'array', default: [] },\n      validateOnChange: { type: 'boolean', default: true },\n      showProgress: { type: 'boolean', default: false }\n    },\n    defaultConfig: {\n      fields: [],\n      validateOnChange: true,\n      showProgress: false\n    },\n    render: (props) => null as any\n  },\n\n  {\n    id: 'notification-center',\n    name: 'Notification Center',\n    description: 'Display and manage notifications',\n    category: 'display',\n    icon: 'Bell',\n    configSchema: {\n      maxNotifications: { type: 'number', default: 10 },\n      groupByType: { type: 'boolean', default: true },\n      autoMarkRead: { type: 'boolean', default: false }\n    },\n    defaultConfig: {\n      maxNotifications: 10,\n      groupByType: true,\n      autoMarkRead: false\n    },\n    render: (props) => null as any\n  }\n];\n\n// Tool Templates built from elements\nexport const TOOL_TEMPLATES: ToolComposition[] = [\n  {\n    id: 'basic-search-tool',\n    name: 'Basic Search Tool',\n    description: 'Simple search with filters and results',\n    elements: [\n      {\n        elementId: 'search-input',\n        instanceId: 'search-1',\n        config: { placeholder: 'Search posts, people, and spaces...' },\n        position: { x: 0, y: 0 },\n        size: { width: 12, height: 1 }\n      },\n      {\n        elementId: 'filter-selector',\n        instanceId: 'filter-1',\n        config: { \n          options: [\n            { value: 'posts', label: 'Posts' },\n            { value: 'users', label: 'Users' },\n            { value: 'spaces', label: 'Spaces' }\n          ]\n        },\n        position: { x: 0, y: 1 },\n        size: { width: 4, height: 2 }\n      },\n      {\n        elementId: 'result-list',\n        instanceId: 'results-1',\n        config: { itemsPerPage: 20 },\n        position: { x: 4, y: 1 },\n        size: { width: 8, height: 6 }\n      }\n    ],\n    connections: [\n      {\n        from: { instanceId: 'search-1', output: 'query' },\n        to: { instanceId: 'results-1', input: 'searchQuery' }\n      },\n      {\n        from: { instanceId: 'filter-1', output: 'selectedFilters' },\n        to: { instanceId: 'results-1', input: 'filters' }\n      }\n    ],\n    layout: 'grid'\n  },\n\n  {\n    id: 'event-manager-tool',\n    name: 'Event Manager Tool',\n    description: 'Create and manage events with RSVP',\n    elements: [\n      {\n        elementId: 'form-builder',\n        instanceId: 'event-form',\n        config: {\n          fields: [\n            { name: 'title', type: 'text', required: true },\n            { name: 'description', type: 'textarea', required: false },\n            { name: 'location', type: 'text', required: false }\n          ]\n        },\n        position: { x: 0, y: 0 },\n        size: { width: 6, height: 4 }\n      },\n      {\n        elementId: 'date-picker',\n        instanceId: 'date-picker',\n        config: { includeTime: true, allowRange: true },\n        position: { x: 6, y: 0 },\n        size: { width: 6, height: 2 }\n      },\n      {\n        elementId: 'user-selector',\n        instanceId: 'invitee-selector',\n        config: { allowMultiple: true, showAvatars: true },\n        position: { x: 6, y: 2 },\n        size: { width: 6, height: 2 }\n      }\n    ],\n    connections: [\n      {\n        from: { instanceId: 'event-form', output: 'formData' },\n        to: { instanceId: 'event-creator', input: 'eventData' }\n      },\n      {\n        from: { instanceId: 'date-picker', output: 'selectedDates' },\n        to: { instanceId: 'event-creator', input: 'eventDates' }\n      }\n    ],\n    layout: 'grid'\n  },\n\n  {\n    id: 'analytics-dashboard',\n    name: 'Analytics Dashboard',\n    description: 'Data visualization and metrics tracking',\n    elements: [\n      {\n        elementId: 'chart-display',\n        instanceId: 'usage-chart',\n        config: { chartType: 'line', showLegend: true },\n        position: { x: 0, y: 0 },\n        size: { width: 8, height: 4 }\n      },\n      {\n        elementId: 'filter-selector',\n        instanceId: 'date-filter',\n        config: {\n          options: [\n            { value: 'week', label: 'This Week' },\n            { value: 'month', label: 'This Month' },\n            { value: 'year', label: 'This Year' }\n          ]\n        },\n        position: { x: 8, y: 0 },\n        size: { width: 4, height: 2 }\n      },\n      {\n        elementId: 'tag-cloud',\n        instanceId: 'popular-tags',\n        config: { maxTags: 30, sortBy: 'frequency' },\n        position: { x: 8, y: 2 },\n        size: { width: 4, height: 2 }\n      }\n    ],\n    connections: [\n      {\n        from: { instanceId: 'date-filter', output: 'selectedRange' },\n        to: { instanceId: 'usage-chart', input: 'timeRange' }\n      }\n    ],\n    layout: 'grid'\n  }\n];\n\n// Initialize registry with core elements\nexport function initializeElementSystem() {\n  const registry = ElementRegistry.getInstance();\n  \n  for (const element of CORE_ELEMENTS) {\n    registry.registerElement(element);\n  }\n}\n\nexport default ElementRegistry;","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/email.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/env.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/env.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/error-monitoring.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'DEBUG' is defined but never used. Allowed unused vars must match /^_/u.","line":132,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":132,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"DEBUG"},"fix":{"range":[3887,3892],"text":""},"desc":"Remove unused variable 'DEBUG'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'INFO' is defined but never used. Allowed unused vars must match /^_/u.","line":134,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":134,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"INFO"},"fix":{"range":[3902,3914],"text":""},"desc":"Remove unused variable 'INFO'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'WARN' is defined but never used. Allowed unused vars must match /^_/u.","line":136,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":136,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"WARN"},"fix":{"range":[3923,3935],"text":""},"desc":"Remove unused variable 'WARN'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ERROR' is defined but never used. Allowed unused vars must match /^_/u.","line":138,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":138,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"ERROR"},"fix":{"range":[3947,3960],"text":""},"desc":"Remove unused variable 'ERROR'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'FATAL' is defined but never used. Allowed unused vars must match /^_/u.","line":140,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":140,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"FATAL"},"fix":{"range":[3970,3983],"text":""},"desc":"Remove unused variable 'FATAL'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Production-ready error monitoring and logging system\n * Integrates with Sentry for error tracking and provides structured logging\n */\n\nimport { currentEnvironment } from './env';\n\n// Sentry types (will be loaded dynamically)\ninterface SentryUser {\n  id?: string;\n  email?: string;\n  username?: string;\n  segment?: string;\n}\n\ninterface SentryScope {\n  setUser(user: SentryUser): void;\n  setTag(_key: string, _value: string): void;\n  setContext(_key: string, _context: Record<string, any>): void;\n  setLevel(_level: 'fatal' | 'error' | 'warning' | 'info' | 'debug'): void;\n  setExtra(_key: string, _extra: any): void;\n  setFingerprint(_fingerprint: string[]): void;\n}\n\ninterface SentryHub {\n  withScope(_callback: (_scope: SentryScope) => void): void;\n  captureException(_exception: any): string;\n  captureMessage(_message: string, _level?: 'fatal' | 'error' | 'warning' | 'info' | 'debug'): string;\n  addBreadcrumb(_breadcrumb: {\n    message?: string;\n    category?: string;\n    level?: 'fatal' | 'error' | 'warning' | 'info' | 'debug';\n    data?: Record<string, any>;\n    timestamp?: number;\n  }): void;\n}\n\n// Global error tracking state\nlet isInitialized = false;\nlet sentryHub: SentryHub | null = null;\n\n/**\n * Initialize error monitoring\n * Loads Sentry dynamically to avoid bundling issues\n */\nexport async function initializeErrorMonitoring(): Promise<void> {\n  if (isInitialized) return;\n\n  try {\n    const sentryDsn = process.env.SENTRY_DSN || process.env.NEXT_PUBLIC_SENTRY_DSN;\n    \n    if (!sentryDsn) {\n      if (currentEnvironment === 'production') {\n        console.warn('âš ï¸ Sentry DSN not configured in production');\n      }\n      // Silent in development - no need to log missing Sentry config\n      isInitialized = true;\n      return;\n    }\n\n    // Dynamic import to avoid SSR issues\n    let Sentry;\n    try {\n      Sentry = await import('@sentry/nextjs');\n    } catch (_importError) {\n      console.warn('âš ï¸ Sentry not installed - error monitoring disabled');\n      isInitialized = true;\n      return;\n    }\n    \n    Sentry.init({\n      dsn: sentryDsn,\n      environment: currentEnvironment,\n      debug: currentEnvironment === 'development',\n      \n      // Performance monitoring\n      tracesSampleRate: currentEnvironment === 'production' ? 0.1 : 1.0,\n      \n      // Session replay\n      replaysSessionSampleRate: currentEnvironment === 'production' ? 0.01 : 0.1,\n      replaysOnErrorSampleRate: 1.0,\n      \n      // Error filtering\n      beforeSend(event, hint) {\n        // Filter out development-only errors\n        if (currentEnvironment !== 'production') {\n          const error = hint.originalException;\n          if (error instanceof Error) {\n            // Skip HMR and development errors\n            if (error.message.includes('ChunkLoadError') || \n                error.message.includes('Loading chunk') ||\n                error.message.includes('Module parse failed')) {\n              return null;\n            }\n          }\n        }\n        \n        // Filter out known non-critical errors\n        if (event.exception?.values?.[0]?.value?.includes('Network request failed')) {\n          event.level = 'warning';\n        }\n        \n        return event;\n      },\n      \n      // Additional configuration for Next.js\n      integrations: [\n        // Add additional integrations as needed\n      ],\n      \n      // Privacy settings\n      sendDefaultPii: false,\n      \n      // Release tracking\n      release: process.env.VERCEL_GIT_COMMIT_SHA || process.env.npm_package_version,\n    });\n\n    sentryHub = Sentry.getCurrentHub();\n    isInitialized = true;\n    console.log(`âœ… Error monitoring initialized for ${currentEnvironment}`);\n  } catch (error) {\n    console.error('âŒ Failed to initialize error monitoring:', error);\n    isInitialized = true; // Prevent retry loops\n  }\n}\n\n/**\n * Log levels for structured logging\n */\nexport enum LogLevel {\n   \n  DEBUG = 'debug',\n   \n  INFO = 'info',\n   \n  WARN = 'warning',\n   \n  ERROR = 'error',\n   \n  FATAL = 'fatal'\n}\n\n/**\n * Structured log entry\n */\nexport interface LogEntry {\n  level: LogLevel;\n  message: string;\n  timestamp: string;\n  environment: string;\n  context?: Record<string, any>;\n  userId?: string;\n  requestId?: string;\n  userAgent?: string;\n  ip?: string;\n  path?: string;\n  method?: string;\n  statusCode?: number;\n  duration?: number;\n  error?: {\n    name: string;\n    message: string;\n    stack?: string;\n  };\n}\n\n/**\n * Enhanced error with context\n */\nexport interface ErrorContext {\n  userId?: string;\n  requestId?: string;\n  userAgent?: string;\n  ip?: string;\n  path?: string;\n  method?: string;\n  tags?: Record<string, string>;\n  extra?: Record<string, any>;\n  level?: LogLevel;\n  fingerprint?: string[];\n}\n\n/**\n * Error monitoring service\n */\nexport class ErrorMonitor {\n  private static instance: ErrorMonitor;\n\n  static getInstance(): ErrorMonitor {\n    if (!ErrorMonitor.instance) {\n      ErrorMonitor.instance = new ErrorMonitor();\n    }\n    return ErrorMonitor.instance;\n  }\n\n  private constructor() {\n    // Initialize on first use\n    this.ensureInitialized();\n  }\n\n  private async ensureInitialized(): Promise<void> {\n    if (!isInitialized) {\n      await initializeErrorMonitoring();\n    }\n  }\n\n  /**\n   * Log a structured message\n   */\n  async log(level: LogLevel, message: string, context?: Record<string, any>): Promise<void> {\n    await this.ensureInitialized();\n\n    const logEntry: LogEntry = {\n      level,\n      message,\n      timestamp: new Date().toISOString(),\n      environment: currentEnvironment,\n      context,\n    };\n\n    // Console logging for development\n    this.logToConsole(logEntry);\n\n    // Send to Sentry if available\n    if (sentryHub) {\n      sentryHub.addBreadcrumb({\n        message,\n        level: level as any,\n        data: context,\n        timestamp: Date.now() / 1000,\n      });\n\n      if (level === LogLevel.ERROR || level === LogLevel.FATAL) {\n        sentryHub.captureMessage(message, level as any);\n      }\n    }\n  }\n\n  /**\n   * Capture an error with full context\n   */\n  async captureError(error: Error, context?: ErrorContext): Promise<string | null> {\n    await this.ensureInitialized();\n\n    const errorId = this.generateErrorId();\n\n    // Create structured log entry\n    const logEntry: LogEntry = {\n      level: context?.level || LogLevel.ERROR,\n      message: error.message,\n      timestamp: new Date().toISOString(),\n      environment: currentEnvironment,\n      context: context?.extra,\n      userId: context?.userId,\n      requestId: context?.requestId,\n      userAgent: context?.userAgent,\n      ip: context?.ip,\n      path: context?.path,\n      method: context?.method,\n      error: {\n        name: error.name,\n        message: error.message,\n        stack: error.stack,\n      },\n    };\n\n    // Console logging\n    this.logToConsole(logEntry);\n\n    // Send to Sentry\n    if (sentryHub) {\n      return await this.sendToSentry(error, context, errorId);\n    }\n\n    return errorId;\n  }\n\n  /**\n   * Set user context for error tracking\n   */\n  async setUser(user: { id?: string; email?: string; username?: string }): Promise<void> {\n    await this.ensureInitialized();\n\n    if (sentryHub) {\n      sentryHub.withScope((scope) => {\n        scope.setUser(user);\n      });\n    }\n  }\n\n  /**\n   * Add breadcrumb for debugging\n   */\n  async addBreadcrumb(message: string, category?: string, data?: Record<string, any>): Promise<void> {\n    await this.ensureInitialized();\n\n    if (sentryHub) {\n      sentryHub.addBreadcrumb({\n        message,\n        category: category || 'custom',\n        level: 'info',\n        data,\n        timestamp: Date.now() / 1000,\n      });\n    }\n  }\n\n  /**\n   * Monitor API performance\n   */\n  async trackApiCall(\n    method: string,\n    path: string,\n    statusCode: number,\n    duration: number,\n    context?: Record<string, any>\n  ): Promise<void> {\n    const level = statusCode >= 500 ? LogLevel.ERROR : \n                  statusCode >= 400 ? LogLevel.WARN : \n                  LogLevel.INFO;\n\n    await this.log(level, `API ${method} ${path}`, {\n      method,\n      path,\n      statusCode,\n      duration,\n      ...context,\n    });\n  }\n\n  private logToConsole(entry: LogEntry): void {\n    const timestamp = entry.timestamp;\n    const prefix = `[${timestamp}] [${entry.level.toUpperCase()}]`;\n\n    switch (entry.level) {\n      case LogLevel.DEBUG:\n        console.debug(prefix, entry.message, entry.context);\n        break;\n      case LogLevel.INFO:\n        console.info(prefix, entry.message, entry.context);\n        break;\n      case LogLevel.WARN:\n        console.warn(prefix, entry.message, entry.context);\n        break;\n      case LogLevel.ERROR:\n      case LogLevel.FATAL:\n        console.error(prefix, entry.message, entry.error, entry.context);\n        break;\n    }\n  }\n\n  private async sendToSentry(error: Error, context?: ErrorContext, errorId?: string): Promise<string> {\n    return new Promise((resolve) => {\n      sentryHub!.withScope((scope) => {\n        // Set user context\n        if (context?.userId) {\n          scope.setUser({ id: context.userId });\n        }\n\n        // Set tags\n        if (context?.tags) {\n          Object.entries(context.tags).forEach(([key, value]) => {\n            scope.setTag(key, value);\n          });\n        }\n\n        // Set extra context\n        if (context?.extra) {\n          Object.entries(context.extra).forEach(([key, value]) => {\n            scope.setExtra(key, value);\n          });\n        }\n\n        // Set request context\n        if (context?.path || context?.method) {\n          scope.setContext('request', {\n            path: context.path,\n            method: context.method,\n            userAgent: context.userAgent,\n            ip: context.ip,\n          });\n        }\n\n        // Set level\n        if (context?.level) {\n          scope.setLevel(context.level as any);\n        }\n\n        // Set fingerprint for grouping\n        if (context?.fingerprint) {\n          scope.setFingerprint(context.fingerprint);\n        }\n\n        // Add error ID for tracking\n        if (errorId) {\n          scope.setExtra('errorId', errorId);\n        }\n\n        const sentryEventId = sentryHub!.captureException(error);\n        resolve(sentryEventId || errorId || 'unknown');\n      });\n    });\n  }\n\n  private generateErrorId(): string {\n    return `error_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n}\n\n// Export singleton instance\nexport const errorMonitor = ErrorMonitor.getInstance();\n\n// Convenience functions\nexport const logDebug = (message: string, context?: Record<string, any>) => \n  errorMonitor.log(LogLevel.DEBUG, message, context);\n\nexport const logInfo = (message: string, context?: Record<string, any>) => \n  errorMonitor.log(LogLevel.INFO, message, context);\n\nexport const logWarn = (message: string, context?: Record<string, any>) => \n  errorMonitor.log(LogLevel.WARN, message, context);\n\nexport const logError = (message: string, context?: Record<string, any>) => \n  errorMonitor.log(LogLevel.ERROR, message, context);\n\nexport const captureError = (error: Error, context?: ErrorContext) => \n  errorMonitor.captureError(error, context);\n\nexport const setUser = (user: { id?: string; email?: string; username?: string }) => \n  errorMonitor.setUser(user);\n\nexport const addBreadcrumb = (message: string, category?: string, data?: Record<string, any>) => \n  errorMonitor.addBreadcrumb(message, category, data);\n\nexport const trackApiCall = (\n  method: string,\n  path: string,\n  statusCode: number,\n  duration: number,\n  context?: Record<string, any>\n) => errorMonitor.trackApiCall(method, path, statusCode, duration, context);\n\n// Initialize on module load in production\nif (typeof window !== 'undefined' && currentEnvironment === 'production') {\n  initializeErrorMonitoring().catch(console.error);\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/error-resilience-system.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/feature-flags.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/feature-reveal-system.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/feed-aggregation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/firebase-admin.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/firebase-admin.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/firebase-admin.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/firebase-realtime.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'messages' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":328,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":328,"endColumn":74,"suggestions":[{"messageId":"removeVar","data":{"varName":"messages"},"fix":{"range":[8699,8726],"text":""},"desc":"Remove unused variable 'messages'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'messages' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":364,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":364,"endColumn":67,"suggestions":[{"messageId":"removeVar","data":{"varName":"messages"},"fix":{"range":[9811,9834],"text":""},"desc":"Remove unused variable 'messages'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'presence' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":400,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":400,"endColumn":86,"suggestions":[{"messageId":"removeVar","data":{"varName":"presence"},"fix":{"range":[10908,10946],"text":""},"desc":"Remove unused variable 'presence'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'typing' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":436,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":436,"endColumn":85,"suggestions":[{"messageId":"removeVar","data":{"varName":"typing"},"fix":{"range":[12049,12088],"text":""},"desc":"Remove unused variable 'typing'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'channel' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":519,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":519,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"channel"},"fix":{"range":[14899,14908],"text":""},"desc":"Remove unused variable 'channel'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'listener' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":520,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":520,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"listener"},"fix":{"range":[14939,14947],"text":"()"},"desc":"Remove unused variable 'listener'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Database, getDatabase, ref, push, set, onValue, off, serverTimestamp, DataSnapshot } from 'firebase/database';\nimport { app } from '@hive/core';\nimport { logger } from './logger';\n\n/**\n * Firebase Realtime Database Helper for HIVE Platform\n * Handles real-time messaging, presence, and broadcasting\n */\n\nexport interface RealtimeMessage {\n  id: string;\n  type: 'chat' | 'notification' | 'tool_update' | 'presence' | 'system';\n  channel: string;\n  senderId: string;\n  targetUsers?: string[];\n  content: any;\n  metadata: {\n    timestamp: any; // Firebase ServerValue.TIMESTAMP\n    priority: 'low' | 'normal' | 'high' | 'urgent';\n    requiresAck: boolean;\n    expiresAt?: any;\n    retryCount: number;\n  };\n  delivery?: {\n    sent: string[];\n    delivered: string[];\n    read: string[];\n    failed: string[];\n  };\n}\n\nexport interface PresenceData {\n  userId: string;\n  status: 'online' | 'offline' | 'away';\n  lastSeen: any; // Firebase ServerValue.TIMESTAMP\n  connectionId?: string;\n  currentSpace?: string;\n  activity?: string;\n  metadata?: {\n    platform: string;\n    version: string;\n  };\n}\n\nexport interface ChatMessage {\n  id: string;\n  spaceId: string;\n  userId: string;\n  content: string;\n  type: 'text' | 'image' | 'file' | 'poll' | 'system';\n  timestamp: any;\n  reactions?: {\n    [emoji: string]: string[]; // array of user IDs\n  };\n  edited?: boolean;\n  editedAt?: any;\n  replyTo?: string;\n  mentions?: string[];\n  attachments?: {\n    type: 'image' | 'file';\n    url: string;\n    name: string;\n    size: number;\n  }[];\n}\n\nexport interface TypingIndicator {\n  userId: string;\n  spaceId: string;\n  timestamp: any;\n  isTyping: boolean;\n}\n\nexport class FirebaseRealtimeService {\n  private database: Database;\n  private listeners: Map<string, any[]> = new Map();\n\n  constructor() {\n    this.database = getDatabase(app);\n  }\n\n  /**\n   * Send a message to a specific channel\n   */\n  async sendMessage(message: Omit<RealtimeMessage, 'id'>): Promise<string> {\n    try {\n      const messagesRef = ref(this.database, `channels/${message.channel}/messages`);\n      const messageRef = push(messagesRef);\n      \n      const messageWithId: RealtimeMessage = {\n        ...message,\n        id: messageRef.key!,\n        metadata: {\n          ...message.metadata,\n          timestamp: serverTimestamp()\n        }\n      };\n\n      await set(messageRef, messageWithId);\n      \n      // Update channel's last activity\n      await set(ref(this.database, `channels/${message.channel}/lastActivity`), serverTimestamp());\n      \n      logger.info('Message sent to channel', { \n        messageId: messageRef.key, \n        channel: message.channel,\n        type: message.type \n      });\n\n      return messageRef.key!;\n    } catch (error) {\n      logger.error('Error sending message', { error, channel: message.channel });\n      throw error;\n    }\n  }\n\n  /**\n   * Send a chat message to a space\n   */\n  async sendChatMessage(spaceId: string, userId: string, content: string, type: ChatMessage['type'] = 'text'): Promise<string> {\n    try {\n      const chatRef = ref(this.database, `chats/${spaceId}/messages`);\n      const messageRef = push(chatRef);\n      \n      const chatMessage: ChatMessage = {\n        id: messageRef.key!,\n        spaceId,\n        userId,\n        content,\n        type,\n        timestamp: serverTimestamp()\n      };\n\n      await set(messageRef, chatMessage);\n      \n      // Update space's last message info\n      await set(ref(this.database, `chats/${spaceId}/lastMessage`), {\n        id: messageRef.key,\n        userId,\n        timestamp: serverTimestamp(),\n        preview: content.substring(0, 100)\n      });\n\n      // Send notification via message system\n      await this.sendMessage({\n        type: 'notification',\n        channel: `space:${spaceId}:chat`,\n        senderId: userId,\n        content: {\n          type: 'new_chat_message',\n          spaceId,\n          messageId: messageRef.key,\n          preview: content.substring(0, 100)\n        },\n        metadata: {\n          timestamp: serverTimestamp(),\n          priority: 'normal',\n          requiresAck: false,\n          retryCount: 0\n        }\n      });\n\n      return messageRef.key!;\n    } catch (error) {\n      logger.error('Error sending chat message', { error, spaceId, userId });\n      throw error;\n    }\n  }\n\n  /**\n   * Update user presence\n   */\n  async updatePresence(userId: string, presenceData: Omit<PresenceData, 'userId'>): Promise<void> {\n    try {\n      const presenceRef = ref(this.database, `presence/${userId}`);\n      const fullPresenceData: PresenceData = {\n        userId,\n        ...presenceData,\n        lastSeen: serverTimestamp()\n      };\n\n      await set(presenceRef, fullPresenceData);\n\n      // Broadcast presence update to relevant spaces\n      if (presenceData.currentSpace) {\n        await this.sendMessage({\n          type: 'presence',\n          channel: `space:${presenceData.currentSpace}:presence`,\n          senderId: 'system',\n          content: {\n            userId,\n            status: presenceData.status,\n            activity: presenceData.activity\n          },\n          metadata: {\n            timestamp: serverTimestamp(),\n            priority: 'low',\n            requiresAck: false,\n            retryCount: 0\n          }\n        });\n      }\n\n      logger.info('User presence updated', { userId, status: presenceData.status });\n    } catch (error) {\n      logger.error('Error updating presence', { error, userId });\n      throw error;\n    }\n  }\n\n  /**\n   * Set typing indicator\n   */\n  async setTypingIndicator(spaceId: string, userId: string, isTyping: boolean): Promise<void> {\n    try {\n      const typingRef = ref(this.database, `typing/${spaceId}/${userId}`);\n      \n      if (isTyping) {\n        const typingData: TypingIndicator = {\n          userId,\n          spaceId,\n          timestamp: serverTimestamp(),\n          isTyping: true\n        };\n        await set(typingRef, typingData);\n      } else {\n        await set(typingRef, null); // Remove typing indicator\n      }\n\n      // Broadcast typing status\n      await this.sendMessage({\n        type: 'system',\n        channel: `space:${spaceId}:typing`,\n        senderId: userId,\n        content: {\n          isTyping,\n          userId\n        },\n        metadata: {\n          timestamp: serverTimestamp(),\n          priority: 'low',\n          requiresAck: false,\n          retryCount: 0\n        }\n      });\n    } catch (error) {\n      logger.error('Error setting typing indicator', { error, spaceId, userId });\n      throw error;\n    }\n  }\n\n  /**\n   * Send tool state update\n   */\n  async sendToolUpdate(toolId: string, spaceId: string, userId: string, updateData: any): Promise<void> {\n    try {\n      // Store tool state\n      await set(ref(this.database, `tools/${toolId}/state`), {\n        ...updateData,\n        lastUpdated: serverTimestamp(),\n        updatedBy: userId\n      });\n\n      // Broadcast update to space\n      await this.sendMessage({\n        type: 'tool_update',\n        channel: `space:${spaceId}:tools`,\n        senderId: userId,\n        content: {\n          toolId,\n          updateType: updateData.type || 'state_change',\n          data: updateData\n        },\n        metadata: {\n          timestamp: serverTimestamp(),\n          priority: 'normal',\n          requiresAck: true,\n          retryCount: 0\n        }\n      });\n\n      logger.info('Tool update sent', { toolId, spaceId, userId });\n    } catch (error) {\n      logger.error('Error sending tool update', { error, toolId, spaceId });\n      throw error;\n    }\n  }\n\n  /**\n   * Send system notification\n   */\n  async sendNotification(userId: string | string[], notification: {\n    title: string;\n    message: string;\n    type: 'info' | 'success' | 'warning' | 'error';\n    actionUrl?: string;\n    metadata?: any;\n  }): Promise<void> {\n    try {\n      const userIds = Array.isArray(userId) ? userId : [userId];\n      \n      for (const uid of userIds) {\n        await this.sendMessage({\n          type: 'notification',\n          channel: `user:${uid}:notifications`,\n          senderId: 'system',\n          targetUsers: [uid],\n          content: notification,\n          metadata: {\n            timestamp: serverTimestamp(),\n            priority: notification.type === 'error' ? 'high' : 'normal',\n            requiresAck: true,\n            retryCount: 0\n          }\n        });\n      }\n\n      logger.info('Notification sent', { userIds: userIds.join(','), type: notification.type });\n    } catch (error) {\n      logger.error('Error sending notification', { error, userId: Array.isArray(userId) ? userId.join(',') : userId });\n      throw error;\n    }\n  }\n\n  /**\n   * Listen to channel messages\n   */\n  listenToChannel(channel: string, callback: (messages: RealtimeMessage[]) => void): () => void {\n    const channelRef = ref(this.database, `channels/${channel}/messages`);\n    \n    const listener = onValue(channelRef, (snapshot: DataSnapshot) => {\n      const messages: RealtimeMessage[] = [];\n      snapshot.forEach((childSnapshot) => {\n        messages.push(childSnapshot.val());\n      });\n      \n      // Sort by timestamp\n      messages.sort((a, b) => (a.metadata.timestamp || 0) - (b.metadata.timestamp || 0));\n      callback(messages);\n    });\n\n    // Store listener for cleanup\n    if (!this.listeners.has(channel)) {\n      this.listeners.set(channel, []);\n    }\n    this.listeners.get(channel)!.push(listener);\n\n    // Return cleanup function\n    return () => {\n      off(channelRef, 'value', listener);\n      const channelListeners = this.listeners.get(channel);\n      if (channelListeners) {\n        const index = channelListeners.indexOf(listener);\n        if (index > -1) {\n          channelListeners.splice(index, 1);\n        }\n      }\n    };\n  }\n\n  /**\n   * Listen to chat messages for a space\n   */\n  listenToChat(spaceId: string, callback: (messages: ChatMessage[]) => void): () => void {\n    const chatRef = ref(this.database, `chats/${spaceId}/messages`);\n    \n    const listener = onValue(chatRef, (snapshot: DataSnapshot) => {\n      const messages: ChatMessage[] = [];\n      snapshot.forEach((childSnapshot) => {\n        messages.push(childSnapshot.val());\n      });\n      \n      // Sort by timestamp\n      messages.sort((a, b) => (a.timestamp || 0) - (b.timestamp || 0));\n      callback(messages);\n    });\n\n    // Store listener for cleanup\n    const listenerKey = `chat:${spaceId}`;\n    if (!this.listeners.has(listenerKey)) {\n      this.listeners.set(listenerKey, []);\n    }\n    this.listeners.get(listenerKey)!.push(listener);\n\n    return () => {\n      off(chatRef, 'value', listener);\n      const chatListeners = this.listeners.get(listenerKey);\n      if (chatListeners) {\n        const index = chatListeners.indexOf(listener);\n        if (index > -1) {\n          chatListeners.splice(index, 1);\n        }\n      }\n    };\n  }\n\n  /**\n   * Listen to presence updates for a space\n   */\n  listenToPresence(spaceId: string, callback: (presence: Record<string, PresenceData>) => void): () => void {\n    const presenceRef = ref(this.database, 'presence');\n    \n    const listener = onValue(presenceRef, (snapshot: DataSnapshot) => {\n      const allPresence: Record<string, PresenceData> = {};\n      snapshot.forEach((childSnapshot) => {\n        const presenceData = childSnapshot.val();\n        if (presenceData.currentSpace === spaceId) {\n          allPresence[childSnapshot.key!] = presenceData;\n        }\n      });\n      \n      callback(allPresence);\n    });\n\n    const listenerKey = `presence:${spaceId}`;\n    if (!this.listeners.has(listenerKey)) {\n      this.listeners.set(listenerKey, []);\n    }\n    this.listeners.get(listenerKey)!.push(listener);\n\n    return () => {\n      off(presenceRef, 'value', listener);\n      const presenceListeners = this.listeners.get(listenerKey);\n      if (presenceListeners) {\n        const index = presenceListeners.indexOf(listener);\n        if (index > -1) {\n          presenceListeners.splice(index, 1);\n        }\n      }\n    };\n  }\n\n  /**\n   * Listen to typing indicators for a space\n   */\n  listenToTyping(spaceId: string, callback: (typing: Record<string, TypingIndicator>) => void): () => void {\n    const typingRef = ref(this.database, `typing/${spaceId}`);\n    \n    const listener = onValue(typingRef, (snapshot: DataSnapshot) => {\n      const typing: Record<string, TypingIndicator> = {};\n      snapshot.forEach((childSnapshot) => {\n        typing[childSnapshot.key!] = childSnapshot.val();\n      });\n      \n      callback(typing);\n    });\n\n    const listenerKey = `typing:${spaceId}`;\n    if (!this.listeners.has(listenerKey)) {\n      this.listeners.set(listenerKey, []);\n    }\n    this.listeners.get(listenerKey)!.push(listener);\n\n    return () => {\n      off(typingRef, 'value', listener);\n      const typingListeners = this.listeners.get(listenerKey);\n      if (typingListeners) {\n        const index = typingListeners.indexOf(listener);\n        if (index > -1) {\n          typingListeners.splice(index, 1);\n        }\n      }\n    };\n  }\n\n  /**\n   * Get message history for a channel\n   */\n  async getMessageHistory(channel: string, limit: number = 50): Promise<RealtimeMessage[]> {\n    try {\n      const messagesRef = ref(this.database, `channels/${channel}/messages`);\n      // In a production app, you'd use Firebase's query methods to limit and paginate\n      // For now, we'll get all messages and limit client-side\n      \n      return new Promise((resolve, reject) => {\n        onValue(messagesRef, (snapshot: DataSnapshot) => {\n          const messages: RealtimeMessage[] = [];\n          snapshot.forEach((childSnapshot) => {\n            messages.push(childSnapshot.val());\n          });\n          \n          // Sort by timestamp and limit\n          messages.sort((a, b) => (b.metadata.timestamp || 0) - (a.metadata.timestamp || 0));\n          resolve(messages.slice(0, limit));\n        }, reject, { onlyOnce: true });\n      });\n    } catch (error) {\n      logger.error('Error getting message history', { error, channel });\n      throw error;\n    }\n  }\n\n  /**\n   * Mark messages as read\n   */\n  async markMessagesAsRead(channel: string, userId: string, messageIds: string[]): Promise<void> {\n    try {\n      for (const messageId of messageIds) {\n        const readRef = ref(this.database, `channels/${channel}/messages/${messageId}/delivery/read`);\n        // Add userId to read array if not already present\n        // This is a simplified implementation - in production you'd use transactions\n        onValue(readRef, (snapshot) => {\n          const currentRead = snapshot.val() || [];\n          if (!currentRead.includes(userId)) {\n            set(readRef, [...currentRead, userId]);\n          }\n        }, { onlyOnce: true });\n      }\n    } catch (error) {\n      logger.error('Error marking messages as read', { error, channel, userId });\n      throw error;\n    }\n  }\n\n  /**\n   * Clean up all listeners\n   */\n  cleanup(): void {\n    this.listeners.forEach((listeners, channel) => {\n      listeners.forEach(listener => {\n        // The actual cleanup would depend on the channel type\n        // This is a simplified cleanup\n      });\n    });\n    this.listeners.clear();\n  }\n}\n\n// Export singleton instance\nexport const realtimeService = new FirebaseRealtimeService();","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/firebase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/form-validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/handle-service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/join-waitlist.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/logger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/migration-helpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/notifications-service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/onboarding-bridge-temp.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/performance-monitoring.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'args' is defined but never used. Allowed unused args must match /^_|^data$|^user$|^error$|^event$|^props$|^filter$/u.","line":761,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":761,"endColumn":55,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[21376,21380],"text":""},"desc":"Remove unused variable 'args'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * HIVE Performance Monitoring & Analytics\n * Comprehensive performance tracking for platform optimization\n */\n\nimport { useState, useEffect } from 'react';\n\nexport interface PerformanceMetric {\n  name: string;\n  value: number;\n  rating: 'good' | 'needs-improvement' | 'poor';\n  timestamp: number;\n}\n\n// Enhanced metrics for comprehensive monitoring\nexport interface EnhancedPerformanceMetric {\n  id: string;\n  timestamp: Date;\n  type: MetricType;\n  value: number;\n  unit: string;\n  labels: Record<string, string>;\n  userId?: string;\n  spaceId?: string;\n  endpoint?: string;\n  component?: string;\n}\n\nexport enum MetricType {\n  // API Performance\n  _API_RESPONSE_TIME = 'api_response_time',\n  _API_ERROR_RATE = 'api_error_rate',\n  _API_THROUGHPUT = 'api_throughput',\n  \n  // Database Performance\n  _DB_QUERY_TIME = 'db_query_time',\n  _DB_CONNECTION_COUNT = 'db_connection_count',\n  _DB_ERROR_RATE = 'db_error_rate',\n  \n  // Frontend Performance\n  _PAGE_LOAD_TIME = 'page_load_time',\n  _COMPONENT_RENDER_TIME = 'component_render_time',\n  _BUNDLE_SIZE = 'bundle_size',\n  \n  // User Experience\n  _TIME_TO_INTERACTIVE = 'time_to_interactive',\n  _FIRST_CONTENTFUL_PAINT = 'first_contentful_paint',\n  _CUMULATIVE_LAYOUT_SHIFT = 'cumulative_layout_shift',\n  \n  // Platform Integration\n  _INTEGRATION_LATENCY = 'integration_latency',\n  _CACHE_HIT_RATE = 'cache_hit_rate',\n  _WEBSOCKET_CONNECTION_TIME = 'websocket_connection_time',\n  \n  // Business Metrics\n  _USER_ENGAGEMENT = 'user_engagement',\n  _FEATURE_USAGE = 'feature_usage',\n  _CONVERSION_RATE = 'conversion_rate',\n  \n  // System Health\n  _MEMORY_USAGE = 'memory_usage',\n  _CPU_USAGE = 'cpu_usage',\n  _ERROR_COUNT = 'error_count'\n}\n\nexport interface WebVitalsMetrics {\n  LCP?: PerformanceMetric; // Largest Contentful Paint\n  FID?: PerformanceMetric; // First Input Delay  \n  CLS?: PerformanceMetric; // Cumulative Layout Shift\n  FCP?: PerformanceMetric; // First Contentful Paint\n  TTFB?: PerformanceMetric; // Time to First Byte\n}\n\n// Enhanced Performance Collector\nexport class HivePerformanceCollector {\n  private enhancedMetrics: EnhancedPerformanceMetric[] = [];\n  private batchSize: number = 50;\n  private flushInterval: number = 30000; // 30 seconds\n  private flushTimer: NodeJS.Timeout | null = null;\n  private collectors: Map<string, () => EnhancedPerformanceMetric[]> = new Map();\n\n  constructor(config: {\n    batchSize?: number;\n    flushInterval?: number;\n    autoStart?: boolean;\n  } = {}) {\n    this.batchSize = config.batchSize || 50;\n    this.flushInterval = config.flushInterval || 30000;\n    \n    if (config.autoStart !== false) {\n      this.start();\n    }\n\n    this.setupBuiltInCollectors();\n  }\n\n  private setupBuiltInCollectors(): void {\n    // Web Vitals Collector\n    if (typeof window !== 'undefined') {\n      this.registerCollector('web-vitals', () => {\n        const metrics: EnhancedPerformanceMetric[] = [];\n        \n        // Performance Observer for navigation timing\n        if ('performance' in window && 'getEntriesByType' in performance) {\n          const navigation = performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming;\n          if (navigation) {\n            metrics.push({\n              id: `nav_${Date.now()}`,\n              timestamp: new Date(),\n              type: MetricType._PAGE_LOAD_TIME,\n              value: navigation.loadEventEnd - navigation.fetchStart,\n              unit: 'ms',\n              labels: { page: window.location.pathname }\n            });\n\n            if (navigation.domContentLoadedEventEnd) {\n              metrics.push({\n                id: `dcl_${Date.now()}`,\n                timestamp: new Date(),\n                type: MetricType._TIME_TO_INTERACTIVE,\n                value: navigation.domContentLoadedEventEnd - navigation.fetchStart,\n                unit: 'ms',\n                labels: { page: window.location.pathname }\n              });\n            }\n          }\n        }\n\n        return metrics;\n      });\n\n      // Memory Usage Collector\n      this.registerCollector('memory', () => {\n        const metrics: EnhancedPerformanceMetric[] = [];\n        \n        if ('memory' in performance) {\n          const memory = (performance as any).memory;\n          metrics.push({\n            id: `mem_${Date.now()}`,\n            timestamp: new Date(),\n            type: MetricType._MEMORY_USAGE,\n            value: memory.usedJSHeapSize,\n            unit: 'bytes',\n            labels: { type: 'used_heap' }\n          });\n        }\n\n        return metrics;\n      });\n    }\n\n    // Node.js Metrics Collector\n    if (typeof process !== 'undefined') {\n      this.registerCollector('node-metrics', () => {\n        const metrics: EnhancedPerformanceMetric[] = [];\n        \n        const memUsage = process.memoryUsage();\n        metrics.push({\n          id: `node_mem_${Date.now()}`,\n          timestamp: new Date(),\n          type: MetricType._MEMORY_USAGE,\n          value: memUsage.heapUsed,\n          unit: 'bytes',\n          labels: { type: 'heap_used', runtime: 'node' }\n        });\n\n        if (process.cpuUsage) {\n          const cpuUsage = process.cpuUsage();\n          metrics.push({\n            id: `node_cpu_${Date.now()}`,\n            timestamp: new Date(),\n            type: MetricType._CPU_USAGE,\n            value: cpuUsage.user + cpuUsage.system,\n            unit: 'microseconds',\n            labels: { runtime: 'node' }\n          });\n        }\n\n        return metrics;\n      });\n    }\n  }\n\n  registerCollector(name: string, collector: () => EnhancedPerformanceMetric[]): void {\n    this.collectors.set(name, collector);\n  }\n\n  unregisterCollector(name: string): void {\n    this.collectors.delete(name);\n  }\n\n  record(metric: Omit<EnhancedPerformanceMetric, 'id' | 'timestamp'>): void {\n    const fullMetric: EnhancedPerformanceMetric = {\n      id: `${metric.type}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      timestamp: new Date(),\n      ...metric\n    };\n\n    this.enhancedMetrics.push(fullMetric);\n\n    if (this.enhancedMetrics.length >= this.batchSize) {\n      this.flush();\n    }\n  }\n\n  recordApiCall(endpoint: string, method: string, responseTime: number, status: number): void {\n    this.record({\n      type: MetricType._API_RESPONSE_TIME,\n      value: responseTime,\n      unit: 'ms',\n      labels: { endpoint, method, status: status.toString() },\n      endpoint\n    });\n\n    this.record({\n      type: MetricType._API_THROUGHPUT,\n      value: 1,\n      unit: 'requests',\n      labels: { endpoint, method },\n      endpoint\n    });\n\n    if (status >= 400) {\n      this.record({\n        type: MetricType._API_ERROR_RATE,\n        value: 1,\n        unit: 'errors',\n        labels: { endpoint, method, status: status.toString() },\n        endpoint\n      });\n    }\n  }\n\n  recordComponentRender(component: string, renderTime: number): void {\n    this.record({\n      type: MetricType._COMPONENT_RENDER_TIME,\n      value: renderTime,\n      unit: 'ms',\n      labels: { component },\n      component\n    });\n  }\n\n  recordUserEngagement(action: string, userId: string, spaceId?: string): void {\n    this.record({\n      type: MetricType._USER_ENGAGEMENT,\n      value: 1,\n      unit: 'actions',\n      labels: { action },\n      userId,\n      spaceId\n    });\n  }\n\n  recordFeatureUsage(feature: string, userId: string, usage: number = 1): void {\n    this.record({\n      type: MetricType._FEATURE_USAGE,\n      value: usage,\n      unit: 'usage',\n      labels: { feature },\n      userId\n    });\n  }\n\n  recordIntegrationLatency(integration: string, latency: number): void {\n    this.record({\n      type: MetricType._INTEGRATION_LATENCY,\n      value: latency,\n      unit: 'ms',\n      labels: { integration }\n    });\n  }\n\n  recordCacheMetrics(operation: 'hit' | 'miss', cacheType: string): void {\n    this.record({\n      type: MetricType._CACHE_HIT_RATE,\n      value: operation === 'hit' ? 1 : 0,\n      unit: 'ratio',\n      labels: { operation, cache_type: cacheType }\n    });\n  }\n\n  recordDatabaseQuery(query: string, duration: number, success: boolean): void {\n    this.record({\n      type: MetricType._DB_QUERY_TIME,\n      value: duration,\n      unit: 'ms',\n      labels: { query_type: query, success: success.toString() }\n    });\n\n    if (!success) {\n      this.record({\n        type: MetricType._DB_ERROR_RATE,\n        value: 1,\n        unit: 'errors',\n        labels: { query_type: query }\n      });\n    }\n  }\n\n  private collectFromRegisteredCollectors(): EnhancedPerformanceMetric[] {\n    const collectedMetrics: EnhancedPerformanceMetric[] = [];\n    \n    for (const [name, collector] of this.collectors) {\n      try {\n        const metrics = collector();\n        collectedMetrics.push(...metrics);\n      } catch (error) {\n        console.warn(`Failed to collect metrics from ${name}:`, error);\n      }\n    }\n\n    return collectedMetrics;\n  }\n\n  async flush(): Promise<void> {\n    if (this.enhancedMetrics.length === 0) return;\n\n    // Collect from registered collectors\n    const collectedMetrics = this.collectFromRegisteredCollectors();\n    const allMetrics = [...this.enhancedMetrics, ...collectedMetrics];\n\n    // Clear current metrics\n    this.enhancedMetrics = [];\n\n    try {\n      await this.sendMetrics(allMetrics);\n    } catch (error) {\n      console.error('Failed to send metrics:', error);\n      // Re-add metrics for retry (keep only recent ones)\n      this.enhancedMetrics.unshift(...allMetrics.slice(-10));\n    }\n  }\n\n  private async sendMetrics(metrics: EnhancedPerformanceMetric[]): Promise<void> {\n    if (typeof window !== 'undefined') {\n      // Browser environment - send to analytics endpoint\n      try {\n        await fetch('/api/analytics/metrics', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ metrics })\n        });\n      } catch (error) {\n        // Fallback to local storage for offline scenarios\n        this.storeMetricsLocally(metrics);\n      }\n    } else {\n      // Server environment - log to console or external service\n      console.log('Performance Metrics:', JSON.stringify(metrics, null, 2));\n    }\n  }\n\n  private storeMetricsLocally(metrics: EnhancedPerformanceMetric[]): void {\n    if (typeof window !== 'undefined' && window.localStorage) {\n      try {\n        const existing = localStorage.getItem('hive_metrics_queue') || '[]';\n        const queue = JSON.parse(existing);\n        queue.push(...metrics);\n        \n        // Keep only last 500 metrics in local storage\n        const truncated = queue.slice(-500);\n        localStorage.setItem('hive_metrics_queue', JSON.stringify(truncated));\n      } catch (error) {\n        console.warn('Failed to store metrics locally:', error);\n      }\n    }\n  }\n\n  start(): void {\n    if (this.flushTimer) return;\n    \n    this.flushTimer = setInterval(() => {\n      this.flush();\n    }, this.flushInterval);\n  }\n\n  stop(): void {\n    if (this.flushTimer) {\n      clearInterval(this.flushTimer);\n      this.flushTimer = null;\n    }\n    \n    // Flush remaining metrics\n    this.flush();\n  }\n\n  getMetrics(): EnhancedPerformanceMetric[] {\n    return [...this.enhancedMetrics];\n  }\n\n  getMetricsSummary(): Record<MetricType, {\n    count: number;\n    average: number;\n    min: number;\n    max: number;\n    latest: number;\n  }> {\n    const summary: Record<string, any> = {};\n    \n    const allMetrics = [...this.enhancedMetrics, ...this.collectFromRegisteredCollectors()];\n    \n    for (const metric of allMetrics) {\n      if (!summary[metric.type]) {\n        summary[metric.type] = {\n          count: 0,\n          total: 0,\n          min: Infinity,\n          max: -Infinity,\n          latest: 0\n        };\n      }\n      \n      const stats = summary[metric.type];\n      stats.count++;\n      stats.total += metric.value;\n      stats.min = Math.min(stats.min, metric.value);\n      stats.max = Math.max(stats.max, metric.value);\n      stats.latest = metric.value;\n    }\n    \n    // Calculate averages\n    for (const type in summary) {\n      const stats = summary[type];\n      stats.average = stats.total / stats.count;\n      delete stats.total;\n    }\n    \n    return summary as any;\n  }\n}\n\nclass PerformanceMonitor {\n  private metrics: WebVitalsMetrics = {};\n  private isClient = typeof window !== 'undefined';\n  private enhancedCollector: HivePerformanceCollector;\n\n  constructor() {\n    this.enhancedCollector = new HivePerformanceCollector();\n    if (this.isClient) {\n      this.initializeTracking();\n    }\n  }\n\n  private initializeTracking() {\n    // Track Core Web Vitals\n    this.trackLCP();\n    this.trackFID();\n    this.trackCLS();\n    this.trackFCP();\n    this.trackTTFB();\n  }\n\n  private trackLCP() {\n    if ('PerformanceObserver' in window) {\n      const observer = new PerformanceObserver((entryList) => {\n        const entries = entryList.getEntries();\n        const lastEntry = entries[entries.length - 1] as any;\n        \n        this.metrics.LCP = {\n          name: 'LCP',\n          value: lastEntry.startTime,\n          rating: this.getRating('LCP', lastEntry.startTime),\n          timestamp: Date.now()\n        };\n        \n        this.reportMetric(this.metrics.LCP);\n      });\n      \n      observer.observe({ entryTypes: ['largest-contentful-paint'] });\n    }\n  }\n\n  private trackFID() {\n    if ('PerformanceObserver' in window) {\n      const observer = new PerformanceObserver((entryList) => {\n        const entries = entryList.getEntries();\n        entries.forEach((entry: any) => {\n          this.metrics.FID = {\n            name: 'FID',\n            value: entry.processingStart - entry.startTime,\n            rating: this.getRating('FID', entry.processingStart - entry.startTime),\n            timestamp: Date.now()\n          };\n          \n          this.reportMetric(this.metrics.FID);\n        });\n      });\n      \n      observer.observe({ entryTypes: ['first-input'] });\n    }\n  }\n\n  private trackCLS() {\n    if ('PerformanceObserver' in window) {\n      let clsValue = 0;\n      \n      const observer = new PerformanceObserver((entryList) => {\n        const entries = entryList.getEntries();\n        entries.forEach((entry: any) => {\n          if (!entry.hadRecentInput) {\n            clsValue += entry.value;\n          }\n        });\n        \n        this.metrics.CLS = {\n          name: 'CLS',\n          value: clsValue,\n          rating: this.getRating('CLS', clsValue),\n          timestamp: Date.now()\n        };\n        \n        this.reportMetric(this.metrics.CLS);\n      });\n      \n      observer.observe({ entryTypes: ['layout-shift'] });\n    }\n  }\n\n  private trackFCP() {\n    if ('PerformanceObserver' in window) {\n      const observer = new PerformanceObserver((entryList) => {\n        const entries = entryList.getEntries();\n        entries.forEach((entry: any) => {\n          if (entry.name === 'first-contentful-paint') {\n            this.metrics.FCP = {\n              name: 'FCP',\n              value: entry.startTime,\n              rating: this.getRating('FCP', entry.startTime),\n              timestamp: Date.now()\n            };\n            \n            this.reportMetric(this.metrics.FCP);\n          }\n        });\n      });\n      \n      observer.observe({ entryTypes: ['paint'] });\n    }\n  }\n\n  private trackTTFB() {\n    if (typeof window !== 'undefined' && 'performance' in window) {\n      const navigationEntry = performance.getEntriesByType('navigation')[0] as any;\n      \n      if (navigationEntry) {\n        const ttfb = navigationEntry.responseStart - navigationEntry.requestStart;\n        \n        this.metrics.TTFB = {\n          name: 'TTFB',\n          value: ttfb,\n          rating: this.getRating('TTFB', ttfb),\n          timestamp: Date.now()\n        };\n        \n        this.reportMetric(this.metrics.TTFB);\n      }\n    }\n  }\n\n  private getRating(metric: string, value: number): 'good' | 'needs-improvement' | 'poor' {\n    const thresholds = {\n      LCP: { good: 2500, poor: 4000 },\n      FID: { good: 100, poor: 300 },\n      CLS: { good: 0.1, poor: 0.25 },\n      FCP: { good: 1800, poor: 3000 },\n      TTFB: { good: 800, poor: 1800 }\n    };\n\n    const threshold = thresholds[metric as keyof typeof thresholds];\n    if (!threshold) return 'good';\n\n    if (value <= threshold.good) return 'good';\n    if (value <= threshold.poor) return 'needs-improvement';\n    return 'poor';\n  }\n\n  private reportMetric(metric: PerformanceMetric) {\n    // In development, log to console\n    if (process.env.NODE_ENV === 'development') {\n      console.group(`ðŸ“Š ${metric.name} Performance`);\n      console.log(`Value: ${metric.value.toFixed(2)}ms`);\n      console.log(`Rating: ${metric.rating}`);\n      console.log(`Timestamp: ${new Date(metric.timestamp).toISOString()}`);\n      console.groupEnd();\n    }\n\n    // In production, send to analytics\n    if (process.env.NODE_ENV === 'production') {\n      this.sendToAnalytics(metric);\n    }\n  }\n\n  private async sendToAnalytics(metric: PerformanceMetric) {\n    try {\n      // Send to your analytics service\n      await fetch('/api/analytics/performance', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          metric: metric.name,\n          value: metric.value,\n          rating: metric.rating,\n          timestamp: metric.timestamp,\n          url: window.location.href,\n          userAgent: navigator.userAgent,\n        }),\n      });\n    } catch (error) {\n      // Silently fail in production\n      if (process.env.NODE_ENV === 'development') {\n        console.error('Failed to send performance metric:', error);\n      }\n    }\n  }\n\n  // Public API\n  public getMetrics(): WebVitalsMetrics {\n    return { ...this.metrics };\n  }\n\n  public getMetricRating(metricName: keyof WebVitalsMetrics): string {\n    const metric = this.metrics[metricName];\n    return metric ? metric.rating : 'unknown';\n  }\n\n  public getAllRatings(): Record<string, string> {\n    const ratings: Record<string, string> = {};\n    Object.entries(this.metrics).forEach(([key, metric]) => {\n      if (metric) {\n        ratings[key] = metric.rating;\n      }\n    });\n    return ratings;\n  }\n}\n\n// Singleton instances\nexport const performanceMonitor = new PerformanceMonitor();\nlet globalCollector: HivePerformanceCollector | null = null;\n\nexport function getGlobalCollector(): HivePerformanceCollector {\n  if (!globalCollector) {\n    globalCollector = new HivePerformanceCollector();\n  }\n  return globalCollector;\n}\n\nexport function initializePerformanceMonitoring(config?: {\n  batchSize?: number;\n  flushInterval?: number;\n  enableAutoCollection?: boolean;\n}): HivePerformanceCollector {\n  globalCollector = new HivePerformanceCollector({\n    batchSize: config?.batchSize,\n    flushInterval: config?.flushInterval,\n    autoStart: config?.enableAutoCollection !== false\n  });\n\n  // Setup browser-specific collectors\n  if (typeof window !== 'undefined') {\n    // Unload handler to flush metrics\n    window.addEventListener('beforeunload', () => {\n      globalCollector?.flush();\n    });\n\n    // Page visibility change handler\n    document.addEventListener('visibilitychange', () => {\n      if (document.visibilityState === 'hidden') {\n        globalCollector?.flush();\n      }\n    });\n\n    // Error tracking\n    window.addEventListener('error', (event) => {\n      globalCollector?.record({\n        type: MetricType._ERROR_COUNT,\n        value: 1,\n        unit: 'errors',\n        labels: {\n          message: event.message,\n          filename: event.filename || 'unknown',\n          line: event.lineno?.toString() || 'unknown'\n        }\n      });\n    });\n\n    // Unhandled promise rejection tracking\n    window.addEventListener('unhandledrejection', (event) => {\n      globalCollector?.record({\n        type: MetricType._ERROR_COUNT,\n        value: 1,\n        unit: 'errors',\n        labels: {\n          type: 'unhandled_promise_rejection',\n          reason: event.reason?.toString() || 'unknown'\n        }\n      });\n    });\n  }\n\n  return globalCollector;\n}\n\n// Performance Monitor for React Components\nexport function usePerformanceMonitor(componentName: string) {\n  const collector = getGlobalCollector();\n  \n  return {\n    startRender: () => {\n      const start = performance.now();\n      return () => {\n        const end = performance.now();\n        collector.recordComponentRender(componentName, end - start);\n      };\n    },\n    \n    recordUserAction: (action: string, userId?: string, spaceId?: string) => {\n      if (userId) {\n        collector.recordUserEngagement(action, userId, spaceId);\n      }\n    },\n    \n    recordFeatureUsage: (feature: string, userId?: string) => {\n      if (userId) {\n        collector.recordFeatureUsage(`${componentName}:${feature}`, userId);\n      }\n    }\n  };\n}\n\n// API Performance Wrapper\nexport function withApiMetrics<T extends (..._args: any[]) => Promise<any>>(\n  fn: T,\n  endpoint: string,\n  method: string = 'GET'\n): T {\n  return (async (..._args: any[]) => {\n    const collector = getGlobalCollector();\n    const start = performance.now();\n    let status = 200;\n    \n    try {\n      const result = await fn(..._args);\n      return result;\n    } catch (error: any) {\n      status = error.response?.status || 500;\n      throw error;\n    } finally {\n      const end = performance.now();\n      collector.recordApiCall(endpoint, method, end - start, status);\n    }\n  }) as T;\n}\n\n// Database Query Performance Wrapper\nexport function withDatabaseMetrics<T extends (...args: any[]) => Promise<any>>(\n  fn: T,\n  _queryType: string\n): T {\n  return (async (..._args: any[]) => {\n    const collector = getGlobalCollector();\n    const start = performance.now();\n    let success = true;\n    \n    try {\n      const result = await fn(..._args);\n      return result;\n    } catch (error) {\n      success = false;\n      throw error;\n    } finally {\n      const end = performance.now();\n      collector.recordDatabaseQuery(_queryType, end - start, success);\n    }\n  }) as T;\n}\n\n// Hook for React components\nexport function usePerformanceMetrics() {\n  const [metrics, setMetrics] = useState<WebVitalsMetrics>({});\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setMetrics(performanceMonitor.getMetrics());\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  return metrics;\n}\n\n// Enhanced hook for comprehensive metrics\nexport function useEnhancedPerformanceMetrics() {\n  const [metrics, setMetrics] = useState<EnhancedPerformanceMetric[]>([]);\n  const [summary, setSummary] = useState<Record<MetricType, any>>({} as any);\n\n  useEffect(() => {\n    const collector = getGlobalCollector();\n    const interval = setInterval(() => {\n      setMetrics(collector.getMetrics());\n      setSummary(collector.getMetricsSummary());\n    }, 5000); // Update every 5 seconds\n\n    return () => clearInterval(interval);\n  }, []);\n\n  return { metrics, summary };\n}\n\n// Web Vitals reporting for Next.js\nexport function reportWebVitals(metric: any) {\n  const performanceMetric: PerformanceMetric = {\n    name: metric.name,\n    value: metric.value,\n    rating: performanceMonitor['getRating'](metric.name, metric.value),\n    timestamp: Date.now()\n  };\n\n  performanceMonitor['reportMetric'](performanceMetric);\n  \n  // Also record in enhanced collector\n  const collector = getGlobalCollector();\n  let metricType: MetricType;\n  \n  switch (metric.name) {\n    case 'LCP':\n      metricType = MetricType._FIRST_CONTENTFUL_PAINT;\n      break;\n    case 'CLS':\n      metricType = MetricType._CUMULATIVE_LAYOUT_SHIFT;\n      break;\n    case 'FCP':\n      metricType = MetricType._FIRST_CONTENTFUL_PAINT;\n      break;\n    default:\n      metricType = MetricType._PAGE_LOAD_TIME;\n  }\n  \n  collector.record({\n    type: metricType,\n    value: metric.value,\n    unit: 'ms',\n    labels: { \n      metric_name: metric.name,\n      rating: performanceMetric.rating,\n      page: typeof window !== 'undefined' ? window.location.pathname : 'unknown'\n    }\n  });\n}\n\n// Export convenience functions\nexport const recordMetric = (metric: Omit<EnhancedPerformanceMetric, 'id' | 'timestamp'>) => {\n  getGlobalCollector().record(metric);\n};\n\nexport const recordApiCall = (endpoint: string, method: string, responseTime: number, status: number) => {\n  getGlobalCollector().recordApiCall(endpoint, method, responseTime, status);\n};\n\nexport const recordUserAction = (action: string, userId: string, spaceId?: string) => {\n  getGlobalCollector().recordUserEngagement(action, userId, spaceId);\n};\n\nexport const recordFeatureUsage = (feature: string, userId: string) => {\n  getGlobalCollector().recordFeatureUsage(feature, userId);\n};\n\nexport const recordComponentRender = (component: string, renderTime: number) => {\n  getGlobalCollector().recordComponentRender(component, renderTime);\n};\n\nexport const recordIntegrationLatency = (integration: string, latency: number) => {\n  getGlobalCollector().recordIntegrationLatency(integration, latency);\n};\n\nexport const recordCacheHit = (cacheType: string, hit: boolean) => {\n  getGlobalCollector().recordCacheMetrics(hit ? 'hit' : 'miss', cacheType);\n};\n\nexport const recordDatabaseQuery = (query: string, duration: number, success: boolean) => {\n  getGlobalCollector().recordDatabaseQuery(query, duration, success);\n};","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/platform-integration.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/platform-wide-search.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/production-auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/profile-api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/rate-limit-redis.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/rate-limit-simple.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/rate-limit.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/real-time-feed.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/redis-client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/ritual-templates.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/rituals-framework.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/rss-import.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/search-engine.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/secure-error-handler.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'SAFE' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"SAFE"},"fix":{"range":[463,467],"text":""},"desc":"Remove unused variable 'SAFE'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'INTERNAL' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"INTERNAL"},"fix":{"range":[476,527],"text":""},"desc":"Remove unused variable 'INTERNAL'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'SENSITIVE' is defined but never used. Allowed unused vars must match /^_/u.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"SENSITIVE"},"fix":{"range":[540,595],"text":""},"desc":"Remove unused variable 'SENSITIVE'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CRITICAL' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"CRITICAL"},"fix":{"range":[609,663],"text":""},"desc":"Remove unused variable 'CRITICAL'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Secure error handling and sanitization\n * Prevents information disclosure while maintaining debugging capabilities\n */\n\nimport { NextRequest, NextResponse } from 'next/server';\nimport { z } from 'zod';\nimport { isDevelopment } from './env';\nimport { captureError, LogLevel } from './error-monitoring';\nimport { logSecurityEvent } from './structured-logger';\n\n/**\n * Classification of error types by security risk\n */\nexport enum ErrorSecurityLevel {\n   \n  SAFE = 'safe',           // Can be shown to users\n   \n  INTERNAL = 'internal',   // Should be logged but not exposed\n   \n  SENSITIVE = 'sensitive', // Contains secrets or internal paths\n   \n  CRITICAL = 'critical'    // Security-related errors\n}\n\n/**\n * Standard error response structure\n */\nexport interface SecureErrorResponse {\n  error: string;\n  code?: string;\n  timestamp: string;\n  requestId: string;\n  // Only included in development\n  details?: any;\n  stack?: string;\n}\n\n/**\n * Error classification patterns\n */\nconst ERROR_PATTERNS = {\n  [ErrorSecurityLevel.SAFE]: [\n    /invalid email/i,\n    /email required/i,\n    /password.*weak/i,\n    /username.*taken/i,\n    /handle.*taken/i,\n    /invalid.*format/i,\n    /field.*required/i,\n    /too.*short/i,\n    /too.*long/i\n  ],\n  \n  [ErrorSecurityLevel.INTERNAL]: [\n    /database.*connection/i,\n    /timeout/i,\n    /service.*unavailable/i,\n    /rate.*limit/i,\n    /quota.*exceeded/i,\n    /network.*error/i\n  ],\n  \n  [ErrorSecurityLevel.SENSITIVE]: [\n    /firebase.*private.*key/i,\n    /credential/i,\n    /secret/i,\n    /token.*invalid/i,\n    /authentication.*failed/i,\n    /unauthorized/i,\n    /permission.*denied/i,\n    /access.*denied/i,\n    /\\/home\\//i,\n    /\\/users\\//i,\n    /\\/var\\//i,\n    /c:\\\\/i,\n    /node_modules/i\n  ],\n  \n  [ErrorSecurityLevel.CRITICAL]: [\n    /bypass/i,\n    /dev.*mode/i,\n    /test.*token/i,\n    /debug/i,\n    /development.*key/i,\n    /admin.*access/i,\n    /sql.*injection/i,\n    /xss/i,\n    /csrf/i\n  ]\n};\n\n/**\n * Classify error message by security level\n */\nfunction classifyError(message: string): ErrorSecurityLevel {\n  const lowerMessage = message.toLowerCase();\n  \n  // Check critical first (highest security risk)\n  if (ERROR_PATTERNS[ErrorSecurityLevel.CRITICAL].some(pattern => pattern.test(lowerMessage))) {\n    return ErrorSecurityLevel.CRITICAL;\n  }\n  \n  // Check sensitive\n  if (ERROR_PATTERNS[ErrorSecurityLevel.SENSITIVE].some(pattern => pattern.test(lowerMessage))) {\n    return ErrorSecurityLevel.SENSITIVE;\n  }\n  \n  // Check internal\n  if (ERROR_PATTERNS[ErrorSecurityLevel.INTERNAL].some(pattern => pattern.test(lowerMessage))) {\n    return ErrorSecurityLevel.INTERNAL;\n  }\n  \n  // Default to safe\n  return ErrorSecurityLevel.SAFE;\n}\n\n/**\n * Sanitize error message for public consumption\n */\nfunction sanitizeErrorMessage(\n  message: string, \n  securityLevel: ErrorSecurityLevel\n): string {\n  switch (securityLevel) {\n    case ErrorSecurityLevel.SAFE:\n      return message; // Safe to expose\n      \n    case ErrorSecurityLevel.INTERNAL:\n      return \"A service error occurred. Please try again later.\";\n      \n    case ErrorSecurityLevel.SENSITIVE:\n      return \"Authentication failed. Please check your credentials.\";\n      \n    case ErrorSecurityLevel.CRITICAL:\n      return \"Request could not be processed.\";\n      \n    default:\n      return \"An error occurred. Please try again.\";\n  }\n}\n\n/**\n * Sanitize validation errors (Zod errors)\n */\nfunction sanitizeValidationError(zodError: z.ZodError): {\n  message: string;\n  details?: any;\n} {\n  // In production, only show field names, not full validation details\n  if (!isDevelopment) {\n    const fieldNames = zodError.errors.map(err => {\n      const path = err.path.join('.');\n      return path || 'field';\n    });\n    \n    const uniqueFields = [...new Set(fieldNames)];\n    \n    return {\n      message: `Validation failed for: ${uniqueFields.join(', ')}`,\n    };\n  }\n  \n  // In development, show more details but sanitize sensitive patterns\n  const sanitizedErrors = zodError.errors.map(err => {\n    let message = err.message;\n    \n    // Remove file paths and sensitive info from validation messages\n    message = message.replace(/\\/[^\\s]+/g, '[PATH_REMOVED]');\n    message = message.replace(/[A-Z]:\\\\[^\\s]+/g, '[PATH_REMOVED]');\n    \n    return {\n      path: err.path,\n      message,\n      code: err.code\n    };\n  });\n  \n  return {\n    message: \"Validation failed\",\n    details: sanitizedErrors\n  };\n}\n\n/**\n * Sanitize stack traces\n */\nfunction sanitizeStackTrace(stack?: string): string | undefined {\n  if (!stack || !isDevelopment) {\n    return undefined;\n  }\n  \n  // Remove sensitive paths from stack traces\n  return stack\n    .replace(/\\/home\\/[^/\\s]+/g, '/home/[USER]')\n    .replace(/\\/Users\\/[^/\\s]+/g, '/Users/[USER]')\n    .replace(/C:\\\\Users\\\\[^\\\\]+/g, 'C:\\\\Users\\\\[USER]')\n    .replace(/node_modules\\/[^/\\s]+/g, 'node_modules/[MODULE]')\n    .replace(/\\.env[^\\s]*/g, '[ENV_FILE]')\n    .replace(/[a-zA-Z0-9]{32,}/g, '[TOKEN_REMOVED]'); // Remove potential tokens\n}\n\n/**\n * Main secure error handler\n */\nexport async function handleSecureError(\n  error: unknown,\n  request: NextRequest,\n  context?: {\n    userId?: string;\n    operation?: string;\n  }\n): Promise<NextResponse<SecureErrorResponse>> {\n  const requestId = request.headers.get('x-request-id') || `req_${Date.now()}`;\n  const timestamp = new Date().toISOString();\n  \n  let errorMessage = 'An unexpected error occurred';\n  let errorCode = 'UNKNOWN_ERROR';\n  let statusCode = 500;\n  let securityLevel = ErrorSecurityLevel.INTERNAL;\n  const originalError = error;\n  \n  // Process different error types\n  if (error instanceof z.ZodError) {\n    const validationResult = sanitizeValidationError(error);\n    errorMessage = validationResult.message;\n    errorCode = 'VALIDATION_ERROR';\n    statusCode = 400;\n    securityLevel = ErrorSecurityLevel.SAFE;\n    \n    // Return early for validation errors with optional details\n    const response: SecureErrorResponse = {\n      error: errorMessage,\n      code: errorCode,\n      timestamp,\n      requestId\n    };\n    \n    if (isDevelopment && validationResult.details) {\n      response.details = validationResult.details;\n    }\n    \n    return NextResponse.json(response, { status: statusCode });\n  }\n  \n  // Handle custom API errors (ValidationError, AuthenticationError, etc.)\n  if (error && typeof error === 'object' && 'statusCode' in error) {\n    const apiError = error as any;\n    errorMessage = apiError.message || 'API Error';\n    errorCode = apiError.code || 'API_ERROR';\n    statusCode = apiError.statusCode || 500;\n    securityLevel = statusCode < 500 ? ErrorSecurityLevel.SAFE : ErrorSecurityLevel.INTERNAL;\n    \n    // Return early for API errors\n    const response: SecureErrorResponse = {\n      error: errorMessage,\n      code: errorCode,\n      timestamp,\n      requestId\n    };\n    \n    if (isDevelopment && apiError.details) {\n      response.details = apiError.details;\n    }\n    \n    return NextResponse.json(response, { status: statusCode });\n  }\n  \n  if (error instanceof Error) {\n    errorMessage = error.message;\n    securityLevel = classifyError(errorMessage);\n    \n    // Map common error types to HTTP status codes\n    if (errorMessage.includes('not found')) {\n      statusCode = 404;\n      errorCode = 'NOT_FOUND';\n    } else if (errorMessage.includes('unauthorized') || errorMessage.includes('authentication')) {\n      statusCode = 401;\n      errorCode = 'UNAUTHORIZED';\n    } else if (errorMessage.includes('forbidden') || errorMessage.includes('permission')) {\n      statusCode = 403;\n      errorCode = 'FORBIDDEN';\n    } else if (errorMessage.includes('already exists') || errorMessage.includes('conflict')) {\n      statusCode = 409;\n      errorCode = 'CONFLICT';\n    } else if (errorMessage.includes('rate limit')) {\n      statusCode = 429;\n      errorCode = 'RATE_LIMITED';\n    }\n  }\n  \n  // Log security incidents for critical/sensitive errors\n  if (securityLevel === ErrorSecurityLevel.CRITICAL) {\n    await logSecurityEvent('bypass_attempt', {\n      requestId,\n      userId: context?.userId,\n      ip: request.headers.get('x-forwarded-for') || request.headers.get('x-real-ip'),\n      userAgent: request.headers.get('user-agent'),\n      operation: context?.operation || 'error_handling',\n      tags: {\n        errorLevel: 'critical',\n        errorCode\n      },\n      extra: {\n        sanitizedMessage: errorMessage,\n        path: new URL(request.url).pathname\n      }\n    });\n  }\n  \n  // Capture error for monitoring (with full details for internal use)\n  try {\n    await captureError(\n      originalError instanceof Error ? originalError : new Error(String(originalError)),\n      {\n        level: securityLevel === ErrorSecurityLevel.CRITICAL ? LogLevel.ERROR : LogLevel.WARN,\n        userId: context?.userId,\n        requestId,\n        tags: {\n          securityLevel,\n          errorCode,\n          statusCode: statusCode.toString(),\n          operation: context?.operation || 'unknown'\n        },\n        extra: {\n          originalMessage: errorMessage,\n          sanitizedMessage: sanitizeErrorMessage(errorMessage, securityLevel),\n          url: request.url,\n          method: request.method,\n          userAgent: request.headers.get('user-agent'),\n          timestamp\n        }\n      }\n    );\n  } catch (monitoringError) {\n    console.error('Failed to capture error:', monitoringError);\n  }\n  \n  // Create sanitized response\n  const sanitizedMessage = sanitizeErrorMessage(errorMessage, securityLevel);\n  \n  const response: SecureErrorResponse = {\n    error: sanitizedMessage,\n    code: errorCode,\n    timestamp,\n    requestId\n  };\n  \n  // Only include sensitive details in development\n  if (isDevelopment) {\n    response.details = {\n      originalMessage: errorMessage,\n      securityLevel,\n      ...(originalError instanceof Error && { \n        name: originalError.name,\n        stack: sanitizeStackTrace(originalError.stack)\n      })\n    };\n  }\n  \n  // Set security headers\n  const headers: Record<string, string> = {\n    'X-Request-ID': requestId,\n    'X-Content-Type-Options': 'nosniff',\n    'Cache-Control': 'no-store, must-revalidate'\n  };\n  \n  return NextResponse.json(response, {\n    status: statusCode,\n    headers\n  });\n}\n\n/**\n * Wrapper for API routes to use secure error handling\n */\nexport function withSecureErrorHandler<T extends any[]>(\n  handler: (_request: NextRequest, ..._args: T) => Promise<NextResponse>\n) {\n  return async (request: NextRequest, ...args: T): Promise<NextResponse> => {\n    try {\n      return await handler(request, ...args);\n    } catch (error) {\n      return handleSecureError(error, request);\n    }\n  };\n}\n\n/**\n * Pre-configured error responses for common scenarios\n */\nexport const SecureErrorResponses = {\n  UNAUTHORIZED: (requestId: string) => NextResponse.json({\n    error: \"Authentication required\",\n    code: \"UNAUTHORIZED\",\n    timestamp: new Date().toISOString(),\n    requestId\n  }, { status: 401 }),\n  \n  FORBIDDEN: (requestId: string) => NextResponse.json({\n    error: \"Access denied\",\n    code: \"FORBIDDEN\", \n    timestamp: new Date().toISOString(),\n    requestId\n  }, { status: 403 }),\n  \n  NOT_FOUND: (requestId: string) => NextResponse.json({\n    error: \"Resource not found\",\n    code: \"NOT_FOUND\",\n    timestamp: new Date().toISOString(),\n    requestId\n  }, { status: 404 }),\n  \n  RATE_LIMITED: (requestId: string, retryAfter?: number) => {\n    const headers: Record<string, string> = {\n      'X-Request-ID': requestId\n    };\n    \n    if (retryAfter) {\n      headers['Retry-After'] = retryAfter.toString();\n    }\n    \n    return NextResponse.json({\n      error: \"Rate limit exceeded\",\n      code: \"RATE_LIMITED\",\n      timestamp: new Date().toISOString(),\n      requestId\n    }, { \n      status: 429,\n      headers\n    });\n  }\n};","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/secure-firebase-admin.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/secure-input-validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/secure-rate-limiter.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/secure-session-manager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/security-service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/server-auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/session-middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/session-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/space-actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/space-permissions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/space-query-optimizer.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/sse-realtime-service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/structured-logger.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'DEBUG' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"DEBUG"},"fix":{"range":[295,300],"text":""},"desc":"Remove unused variable 'DEBUG'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'INFO' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"INFO"},"fix":{"range":[310,322],"text":""},"desc":"Remove unused variable 'INFO'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'WARN' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"WARN"},"fix":{"range":[331,343],"text":""},"desc":"Remove unused variable 'WARN'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ERROR' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"ERROR"},"fix":{"range":[352,365],"text":""},"desc":"Remove unused variable 'ERROR'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'FATAL' is defined but never used. Allowed unused vars must match /^_/u.","line":22,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"FATAL"},"fix":{"range":[375,388],"text":""},"desc":"Remove unused variable 'FATAL'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AUTH' is defined but never used. Allowed unused vars must match /^_/u.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"AUTH"},"fix":{"range":[485,489],"text":""},"desc":"Remove unused variable 'AUTH'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'API' is defined but never used. Allowed unused vars must match /^_/u.","line":33,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":6,"suggestions":[{"messageId":"removeVar","data":{"varName":"API"},"fix":{"range":[498,509],"text":""},"desc":"Remove unused variable 'API'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DATABASE' is defined but never used. Allowed unused vars must match /^_/u.","line":35,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"DATABASE"},"fix":{"range":[517,533],"text":""},"desc":"Remove unused variable 'DATABASE'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'SECURITY' is defined but never used. Allowed unused vars must match /^_/u.","line":37,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"SECURITY"},"fix":{"range":[546,562],"text":""},"desc":"Remove unused variable 'SECURITY'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'PERFORMANCE' is defined but never used. Allowed unused vars must match /^_/u.","line":39,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"PERFORMANCE"},"fix":{"range":[575,594],"text":""},"desc":"Remove unused variable 'PERFORMANCE'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'USER_ACTION' is defined but never used. Allowed unused vars must match /^_/u.","line":41,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"USER_ACTION"},"fix":{"range":[610,629],"text":""},"desc":"Remove unused variable 'USER_ACTION'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'SYSTEM' is defined but never used. Allowed unused vars must match /^_/u.","line":43,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"SYSTEM"},"fix":{"range":[645,659],"text":""},"desc":"Remove unused variable 'SYSTEM'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'BUSINESS' is defined but never used. Allowed unused vars must match /^_/u.","line":45,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"BUSINESS"},"fix":{"range":[670,686],"text":""},"desc":"Remove unused variable 'BUSINESS'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'INTEGRATION' is defined but never used. Allowed unused vars must match /^_/u.","line":47,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"INTEGRATION"},"fix":{"range":[699,718],"text":""},"desc":"Remove unused variable 'INTEGRATION'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Structured logging service for HIVE\n * Provides consistent, searchable, and actionable logs across the application\n */\n\nimport { currentEnvironment } from './env';\nimport { captureError } from './error-monitoring';\n\n/**\n * Log levels in order of severity\n */\nexport enum LogLevel {\n   \n  DEBUG = 'debug',\n   \n  INFO = 'info',\n   \n  WARN = 'warn',\n   \n  ERROR = 'error',\n   \n  FATAL = 'fatal'\n}\n\n\n/**\n * Log categories for better organization\n */\nexport enum LogCategory {\n   \n  AUTH = 'auth',\n   \n  API = 'api',\n   \n  DATABASE = 'database',\n   \n  SECURITY = 'security',\n   \n  PERFORMANCE = 'performance',\n   \n  USER_ACTION = 'user_action',\n   \n  SYSTEM = 'system',\n   \n  BUSINESS = 'business',\n   \n  INTEGRATION = 'integration'\n}\n\n\n/**\n * Standard log context interface\n */\nexport interface LogContext {\n  // User context\n  userId?: string;\n  userEmail?: string;\n  isTestUser?: boolean;\n  handle?: string;\n  normalizedHandle?: string;\n  ghostMode?: boolean;\n  userType?: string;\n  major?: string;\n  fullName?: string;\n  schoolId?: string;\n  memberUserId?: string;\n  targetUserId?: string;\n  adminUserId?: string;\n  moderatorId?: string;\n  userUid?: string;\n  isDevelopmentUser?: boolean;\n  \n  // Request context\n  requestId?: string;\n  sessionId?: string;\n  ip?: string;\n  userAgent?: string;\n  endpoint?: string;\n  method?: string;\n  queryParams?: any;\n  requestRefId?: string;\n  \n  // Operation context\n  operation?: string;\n  action?: string;\n  duration?: number;\n  durationMinutes?: number;\n  operationId?: string;\n  operationCount?: number;\n  operationsCompleted?: number | string[];\n  operationsFailed?: number | string[];\n  \n  // Business context\n  spaceId?: string;\n  organizationId?: string;\n  toolId?: string;\n  ritualId?: string;\n  ritualTitle?: string;\n  hasParticipation?: boolean;\n  entryPoint?: string;\n  participationId?: string;\n  spaceName?: string;\n  spaceType?: string;\n  spaceContext?: string;\n  spaceIds?: string[];\n  fromSpaceId?: string;\n  toSpaceId?: string;\n  \n  // Technical context\n  component?: string;\n  version?: string;\n  errorBoundary?: string;\n  componentStack?: string;\n  stack?: string;\n  \n  // Error context\n  error?: Error | string | any;\n  \n  // Data context\n  data?: any;\n  \n  // Additional metadata\n  metadata?: any;\n  tags?: Record<string, string>;\n  extra?: Record<string, any>;\n  \n  // Status and results\n  status?: string | number;\n  result?: any;\n  created?: boolean;\n  exists?: boolean;\n  \n  // Counts and metrics\n  spaceCount?: number;\n  eventCount?: number;\n  ritualCount?: number;\n  connectionCount?: number;\n  currentCount?: number;\n  targetCount?: number;\n  count?: number;\n  size?: number;\n  finalTotal?: number;\n  targetTotal?: number;\n  totalConnections?: number;\n  totalToCreate?: number;\n  cohortSpacesLength?: number;\n  graduationYearsLength?: number;\n  UB_MAJORSLength?: number;\n  \n  // Identifiers\n  builderRequestId?: string;\n  connectionId?: string;\n  id?: string;\n  sourceId?: string;\n  targetId?: string;\n  projectId?: string;\n  notificationId?: string;\n  spaceConfigId?: string;\n  toolDataOwnerId?: string;\n  toolRefId?: string;\n  \n  // Attempts and retries\n  attempt?: number;\n  attempts?: number;\n  \n  // User details\n  email?: string;\n  emailDomain?: string;\n  graduationYear?: number;\n  \n  // Feed and content\n  feedType?: string;\n  type?: string;\n  sourceType?: string;\n  \n  // Time ranges\n  timeRange?: string;\n  \n  // Environment flags\n  isLocalEnvironment?: boolean;\n  \n  // Data objects (using specific types where possible)\n  membershipData?: any;\n  auditData?: any;\n  permissionData?: any;\n  bulkData?: any;\n  usersData?: any;\n  userData?: any;\n  oldData?: any;\n  newData?: any;\n  authToken?: string;\n  sessionData?: any;\n  calendarData?: any;\n  eventData?: any;\n  conflictData?: any;\n  feedData?: any;\n  debugData?: any;\n  authData?: any;\n  fileData?: any;\n  notificationData?: any;\n  privacyData?: any;\n  profileData?: any;\n  activityData?: any;\n  completionData?: any;\n  avatarData?: any;\n  spaceData?: any;\n  memberData?: any;\n  postData?: any;\n  widgetData?: any;\n  activationData?: any;\n  joinData?: any;\n  leaveData?: any;\n  migrationData?: any;\n  seedData?: any;\n  socialProofData?: any;\n  testData?: any;\n  updateData?: any;\n  deploymentData?: any;\n  reviewData?: any;\n  stateData?: any;\n  executeData?: any;\n  integrationData?: any;\n  installData?: any;\n  personalData?: any;\n  publishData?: any;\n  recommendationData?: any;\n  usageData?: any;\n  waitlistData?: any;\n  analyticsData?: any;\n  cohortData?: any;\n  spacesData?: any;\n  requestData?: any;\n  autoGeneratedSpaces?: any;\n  matchingSpace?: any;\n  memberships?: any;\n  membershipsSnapshot?: any;\n  oldEventsSnapshot?: any;\n  oldSummariesSnapshot?: any;\n  spaces?: any;\n  spacesSnapshot?: any;\n  spacesWithoutUB?: any;\n  spaceConfig?: any;\n  userSpaceIds?: any;\n  currentRitual?: any;\n  ritualDataName?: string;\n  \n  // Security context\n  threats?: string;\n  securityLevel?: string;\n  \n  // Feed and content-specific properties\n  postId?: string;\n  eventId?: string;\n  memberId?: string;\n  deploymentId?: string;\n  updates?: any;\n  authorId?: string;\n  organizerId?: string;\n  deployerId?: string;\n  url?: string;\n  feedId?: string;\n  feedName?: string;\n  itemTitle?: string;\n  adminOverride?: boolean;\n  total?: number;\n  \n  // Firebase real-time service properties\n  messageId?: string;\n  channel?: string;\n  userIds?: string;\n}\n\n/**\n * Structured log entry\n */\nexport interface LogEntry {\n  timestamp: string;\n  level: LogLevel;\n  category: LogCategory;\n  message: string;\n  environment: string;\n  context: LogContext;\n  error?: {\n    name: string;\n    message: string;\n    stack?: string;\n  };\n}\n\n/**\n * Log configuration\n */\ninterface LogConfig {\n  enableConsole: boolean;\n  enableRemote: boolean;\n  minLevel: LogLevel;\n  enableSensitiveData: boolean;\n  enablePerformanceLogging: boolean;\n}\n\n/**\n * Environment-specific configuration\n */\nconst LOG_CONFIG: Record<string, LogConfig> = {\n  development: {\n    enableConsole: true,\n    enableRemote: false,\n    minLevel: LogLevel.DEBUG,\n    enableSensitiveData: true,\n    enablePerformanceLogging: true\n  },\n  staging: {\n    enableConsole: true,\n    enableRemote: true,\n    minLevel: LogLevel.INFO,\n    enableSensitiveData: false,\n    enablePerformanceLogging: true\n  },\n  production: {\n    enableConsole: false,\n    enableRemote: true,\n    minLevel: LogLevel.WARN,\n    enableSensitiveData: false,\n    enablePerformanceLogging: false\n  }\n};\n\n/**\n * Get logging configuration for current environment\n */\nfunction getLogConfig(): LogConfig {\n  return LOG_CONFIG[currentEnvironment] || LOG_CONFIG.development;\n}\n\n/**\n * Level hierarchy for filtering\n */\nconst LEVEL_HIERARCHY = {\n  [LogLevel.DEBUG]: 0,\n  [LogLevel.INFO]: 1,\n  [LogLevel.WARN]: 2,\n  [LogLevel.ERROR]: 3,\n  [LogLevel.FATAL]: 4\n};\n\n/**\n * Check if log level should be processed\n */\nfunction shouldLog(level: LogLevel): boolean {\n  const config = getLogConfig();\n  return LEVEL_HIERARCHY[level] >= LEVEL_HIERARCHY[config.minLevel];\n}\n\n/**\n * Sanitize sensitive data from context\n */\nfunction sanitizeContext(context: LogContext): LogContext {\n  const config = getLogConfig();\n  \n  if (config.enableSensitiveData) {\n    return context;\n  }\n\n  const sanitized = { ...context };\n\n  // Mask email addresses\n  if (sanitized.userEmail) {\n    sanitized.userEmail = sanitized.userEmail.replace(/(.{3}).*@/, '$1***@');\n  }\n\n  // Remove sensitive extra data\n  if (sanitized.extra) {\n    const { password, token, secret, key, ...safeExtra } = sanitized.extra;\n    sanitized.extra = safeExtra;\n  }\n\n  return sanitized;\n}\n\n/**\n * Format log entry for console output\n */\nfunction formatConsoleLog(entry: LogEntry): string {\n  const timestamp = new Date(entry.timestamp).toISOString();\n  const level = entry.level.toUpperCase().padEnd(5);\n  const category = entry.category.toUpperCase().padEnd(12);\n  \n  let output = `[${timestamp}] ${level} ${category} ${entry.message}`;\n  \n  // Add context if available\n  if (entry.context.userId) {\n    output += ` | User: ${entry.context.userId}`;\n  }\n  \n  if (entry.context.requestId) {\n    output += ` | Request: ${entry.context.requestId}`;\n  }\n  \n  if (entry.context.operation) {\n    output += ` | Op: ${entry.context.operation}`;\n  }\n  \n  if (entry.context.duration) {\n    output += ` | ${entry.context.duration}ms`;\n  }\n\n  return output;\n}\n\n/**\n * Send log to remote service (Sentry, DataDog, etc.)\n */\nasync function sendToRemoteService(entry: LogEntry): Promise<void> {\n  try {\n    // For errors and fatals, use Sentry\n    if (entry.level === LogLevel.ERROR || entry.level === LogLevel.FATAL) {\n      if (entry.error) {\n        const error = new Error(entry.error.message);\n        error.name = entry.error.name;\n        error.stack = entry.error.stack;\n        \n        await captureError(error, {\n          level: entry.level === LogLevel.ERROR ? ('error' as const) : ('fatal' as const),\n          userId: entry.context.userId,\n          requestId: entry.context.requestId,\n          tags: {\n            category: entry.category,\n            operation: entry.context.operation || 'unknown',\n            environment: entry.environment,\n            ...entry.context.tags\n          },\n          extra: {\n            logMessage: entry.message,\n            context: entry.context,\n            timestamp: entry.timestamp\n          }\n        });\n      } else {\n        // Log message without error object\n        await captureError(new Error(entry.message), {\n          level: entry.level === LogLevel.ERROR ? ('error' as const) : ('fatal' as const),\n          userId: entry.context.userId,\n          requestId: entry.context.requestId,\n          tags: {\n            category: entry.category,\n            operation: entry.context.operation || 'unknown',\n            environment: entry.environment,\n            ...entry.context.tags\n          },\n          extra: {\n            context: entry.context,\n            timestamp: entry.timestamp\n          }\n        });\n      }\n    }\n\n    // TODO: For other levels, send to structured logging service\n    // This could be DataDog, CloudWatch, etc.\n    \n  } catch (error) {\n    console.error('Failed to send log to remote service:', error);\n  }\n}\n\n/**\n * Core logging function\n */\nasync function log(\n  level: LogLevel,\n  category: LogCategory,\n  message: string,\n  context: LogContext = {},\n  error?: Error\n): Promise<void> {\n  if (!shouldLog(level)) {\n    return;\n  }\n\n  const config = getLogConfig();\n  const sanitizedContext = sanitizeContext(context);\n  \n  const entry: LogEntry = {\n    timestamp: new Date().toISOString(),\n    level,\n    category,\n    message,\n    environment: currentEnvironment,\n    context: sanitizedContext,\n    error: error ? {\n      name: error.name,\n      message: error.message,\n      stack: error.stack\n    } : undefined\n  };\n\n  // Console logging\n  if (config.enableConsole) {\n    const consoleMessage = formatConsoleLog(entry);\n    \n    switch (level) {\n      case LogLevel.DEBUG:\n        console.debug(consoleMessage, entry.context);\n        break;\n      case LogLevel.INFO:\n        console.info(consoleMessage, entry.context);\n        break;\n      case LogLevel.WARN:\n        console.warn(consoleMessage, entry.context);\n        break;\n      case LogLevel.ERROR:\n      case LogLevel.FATAL:\n        console.error(consoleMessage, entry.context, error);\n        break;\n    }\n  }\n\n  // Remote logging\n  if (config.enableRemote) {\n    await sendToRemoteService(entry);\n  }\n}\n\n/**\n * Structured logger class with convenience methods\n */\nexport class StructuredLogger {\n  private defaultContext: LogContext;\n  \n  constructor(defaultContext: LogContext = {}) {\n    this.defaultContext = defaultContext;\n  }\n\n  /**\n   * Create a child logger with additional context\n   */\n  child(additionalContext: LogContext): StructuredLogger {\n    return new StructuredLogger({\n      ...this.defaultContext,\n      ...additionalContext\n    });\n  }\n\n  /**\n   * Log debug message\n   */\n  async debug(message: string, context: LogContext = {}): Promise<void> {\n    await log(LogLevel.DEBUG, LogCategory.SYSTEM, message, {\n      ...this.defaultContext,\n      ...context\n    });\n  }\n\n  /**\n   * Log info message\n   */\n  async info(message: string, context: LogContext = {}): Promise<void> {\n    await log(LogLevel.INFO, LogCategory.SYSTEM, message, {\n      ...this.defaultContext,\n      ...context\n    });\n  }\n\n  /**\n   * Log warning\n   */\n  async warn(message: string, context: LogContext = {}): Promise<void> {\n    await log(LogLevel.WARN, LogCategory.SYSTEM, message, {\n      ...this.defaultContext,\n      ...context\n    });\n  }\n\n  /**\n   * Log error\n   */\n  async error(message: string, context: LogContext = {}, error?: Error): Promise<void> {\n    await log(LogLevel.ERROR, LogCategory.SYSTEM, message, {\n      ...this.defaultContext,\n      ...context\n    }, error);\n  }\n\n  /**\n   * Log fatal error\n   */\n  async fatal(message: string, context: LogContext = {}, error?: Error): Promise<void> {\n    await log(LogLevel.FATAL, LogCategory.SYSTEM, message, {\n      ...this.defaultContext,\n      ...context\n    }, error);\n  }\n\n  /**\n   * Log with specific category\n   */\n  async logWithCategory(\n    level: LogLevel,\n    category: LogCategory,\n    message: string,\n    context: LogContext = {},\n    error?: Error\n  ): Promise<void> {\n    await log(level, category, message, {\n      ...this.defaultContext,\n      ...context\n    }, error);\n  }\n}\n\n/**\n * Default logger instance\n */\nexport const logger = new StructuredLogger();\n\n/**\n * Specialized loggers for common categories\n */\nexport const authLogger = new StructuredLogger({ tags: { category: 'auth' } });\nexport const apiLogger = new StructuredLogger({ tags: { category: 'api' } });\nexport const dbLogger = new StructuredLogger({ tags: { category: 'database' } });\nexport const securityLogger = new StructuredLogger({ tags: { category: 'security' } });\nexport const performanceLogger = new StructuredLogger({ tags: { category: 'performance' } });\n\n/**\n * Convenience functions for common logging patterns\n */\n\n/**\n * Log authentication events\n */\nexport async function logAuthEvent(\n  event: 'login' | 'logout' | 'register' | 'verify' | 'failed_login',\n  context: LogContext = {}\n): Promise<void> {\n  await log(LogLevel.INFO, LogCategory.AUTH, `Authentication event: ${event}`, context);\n}\n\n/**\n * Log API request/response\n */\nexport async function logApiCall(\n  method: string,\n  path: string,\n  statusCode: number,\n  duration: number,\n  context: LogContext = {}\n): Promise<void> {\n  const level = statusCode >= 500 ? LogLevel.ERROR : \n               statusCode >= 400 ? LogLevel.WARN : LogLevel.INFO;\n  \n  const message = `${method} ${path} ${statusCode} (${duration}ms)`;\n  \n  await log(level, LogCategory.API, message, {\n    ...context,\n    operation: 'api_call',\n    duration,\n    tags: {\n      ...context.tags,\n      method,\n      path,\n      statusCode: statusCode.toString()\n    }\n  });\n}\n\n/**\n * Log security events\n */\nexport async function logSecurityEvent(\n  event: 'bypass_attempt' | 'rate_limit' | 'invalid_token' | 'admin_access',\n  context: LogContext = {}\n): Promise<void> {\n  await log(LogLevel.WARN, LogCategory.SECURITY, `Security event: ${event}`, {\n    ...context,\n    tags: {\n      ...context.tags,\n      securityEvent: event\n    }\n  });\n}\n\n/**\n * Log performance metrics\n */\nexport async function logPerformance(\n  operation: string,\n  duration: number,\n  context: LogContext = {}\n): Promise<void> {\n  const config = getLogConfig();\n  \n  if (!config.enablePerformanceLogging) {\n    return;\n  }\n\n  const level = duration > 5000 ? LogLevel.WARN : LogLevel.INFO;\n  const message = `Performance: ${operation} completed in ${duration}ms`;\n  \n  await log(level, LogCategory.PERFORMANCE, message, {\n    ...context,\n    operation,\n    duration,\n    tags: {\n      ...context.tags,\n      performanceMetric: 'true'\n    }\n  });\n}\n\n/**\n * Log user actions for analytics\n */\nexport async function logUserAction(\n  action: string,\n  context: LogContext = {}\n): Promise<void> {\n  await log(LogLevel.INFO, LogCategory.USER_ACTION, `User action: ${action}`, {\n    ...context,\n    operation: action,\n    tags: {\n      ...context.tags,\n      userAction: action\n    }\n  });\n}\n\n/**\n * Create request-scoped logger\n */\nexport function createRequestLogger(requestId: string, userId?: string): StructuredLogger {\n  return new StructuredLogger({\n    requestId,\n    userId\n  });\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/test-integration.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'logger' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"logger"},"fix":{"range":[308,342],"text":""},"desc":"Remove unused variable 'logger'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'testResult' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":371,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":371,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"testResult"},"fix":{"range":[10278,10465],"text":""},"desc":"Remove unused variable 'testResult'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Integration Testing Utilities for HIVE Real-time and Feature Flag Systems\n * Use these functions to test that both systems work together correctly\n */\n\nimport { realtimeService } from './firebase-realtime';\nimport { featureFlagService, UserFeatureContext, HIVE_FEATURE_FLAGS } from './feature-flags';\nimport { logger } from './logger';\n\nexport interface IntegrationTestResult {\n  success: boolean;\n  testName: string;\n  duration: number;\n  result?: any;\n  error?: string;\n}\n\nexport class IntegrationTester {\n  private testResults: IntegrationTestResult[] = [];\n\n  /**\n   * Run all integration tests\n   */\n  async runAllTests(): Promise<IntegrationTestResult[]> {\n    this.testResults = [];\n    \n    console.log('ðŸ§ª Starting HIVE Integration Tests...');\n    \n    await this.testFeatureFlagEvaluation();\n    await this.testRealTimeMessaging();\n    await this.testFeatureFlagAndRealtimeIntegration();\n    await this.testAdminFeatureFlagCRUD();\n    \n    const passedTests = this.testResults.filter(r => r.success).length;\n    const totalTests = this.testResults.length;\n    \n    console.log(`âœ… Integration Tests Complete: ${passedTests}/${totalTests} passed`);\n    \n    return this.testResults;\n  }\n\n  /**\n   * Test feature flag evaluation system\n   */\n  private async testFeatureFlagEvaluation(): Promise<void> {\n    const testName = 'Feature Flag Evaluation';\n    const startTime = Date.now();\n    \n    try {\n      // Create test user context\n      const testUserContext: UserFeatureContext = {\n        userId: 'test-user-123',\n        userRole: 'member',\n        schoolId: 'buffalo.edu',\n        spaceIds: ['space-1', 'space-2']\n      };\n\n      // Test evaluating a feature flag\n      const result = await featureFlagService.isFeatureEnabled(\n        HIVE_FEATURE_FLAGS.REAL_TIME_CHAT,\n        testUserContext\n      );\n\n      // Test should pass if evaluation completes without error\n      this.testResults.push({\n        success: true,\n        testName,\n        duration: Date.now() - startTime,\n        result\n      });\n\n      console.log(`âœ… ${testName}: Feature flag evaluated successfully`);\n    } catch (error) {\n      this.testResults.push({\n        success: false,\n        testName,\n        duration: Date.now() - startTime,\n        error: error instanceof Error ? error.message : 'Unknown error'\n      });\n\n      console.log(`âŒ ${testName}: ${error}`);\n    }\n  }\n\n  /**\n   * Test real-time messaging functionality\n   */\n  private async testRealTimeMessaging(): Promise<void> {\n    const testName = 'Real-time Messaging';\n    const startTime = Date.now();\n    \n    try {\n      // Test sending a message\n      const messageId = await realtimeService.sendMessage({\n        type: 'system',\n        channel: 'test:integration:messages',\n        senderId: 'test-system',\n        content: {\n          message: 'Integration test message',\n          timestamp: new Date().toISOString()\n        },\n        metadata: {\n          timestamp: new Date().toISOString(),\n          priority: 'normal',\n          requiresAck: false,\n          retryCount: 0\n        }\n      });\n\n      // Test should pass if message is sent successfully\n      this.testResults.push({\n        success: !!messageId,\n        testName,\n        duration: Date.now() - startTime,\n        result: { messageId }\n      });\n\n      console.log(`âœ… ${testName}: Message sent with ID ${messageId}`);\n    } catch (error) {\n      this.testResults.push({\n        success: false,\n        testName,\n        duration: Date.now() - startTime,\n        error: error instanceof Error ? error.message : 'Unknown error'\n      });\n\n      console.log(`âŒ ${testName}: ${error}`);\n    }\n  }\n\n  /**\n   * Test integration between feature flags and real-time messaging\n   */\n  private async testFeatureFlagAndRealtimeIntegration(): Promise<void> {\n    const testName = 'Feature Flag + Real-time Integration';\n    const startTime = Date.now();\n    \n    try {\n      const testUserContext: UserFeatureContext = {\n        userId: 'test-user-integration',\n        userRole: 'builder',\n        schoolId: 'buffalo.edu',\n        spaceIds: ['integration-space']\n      };\n\n      // Check if real-time chat is enabled for this user\n      const chatEnabled = await featureFlagService.isFeatureEnabled(\n        HIVE_FEATURE_FLAGS.REAL_TIME_CHAT,\n        testUserContext\n      );\n\n      // If chat is enabled, send a message\n      let messageResult = null;\n      if (chatEnabled.enabled) {\n        messageResult = await realtimeService.sendChatMessage(\n          'integration-space',\n          testUserContext.userId,\n          'Integration test: Chat feature is enabled!',\n          'text'\n        );\n      }\n\n      // Test notification system\n      await realtimeService.sendNotification(\n        testUserContext.userId,\n        {\n          title: 'Integration Test',\n          message: `Chat feature is ${chatEnabled.enabled ? 'enabled' : 'disabled'} for you`,\n          type: 'info',\n          metadata: { testRun: true }\n        }\n      );\n\n      this.testResults.push({\n        success: true,\n        testName,\n        duration: Date.now() - startTime,\n        result: {\n          chatEnabled: chatEnabled.enabled,\n          messageId: messageResult,\n          reason: chatEnabled.reason\n        }\n      });\n\n      console.log(`âœ… ${testName}: Integration working (chat: ${chatEnabled.enabled})`);\n    } catch (error) {\n      this.testResults.push({\n        success: false,\n        testName,\n        duration: Date.now() - startTime,\n        error: error instanceof Error ? error.message : 'Unknown error'\n      });\n\n      console.log(`âŒ ${testName}: ${error}`);\n    }\n  }\n\n  /**\n   * Test admin feature flag CRUD operations\n   */\n  private async testAdminFeatureFlagCRUD(): Promise<void> {\n    const testName = 'Admin Feature Flag CRUD';\n    const startTime = Date.now();\n    \n    try {\n      const testFlagId = 'test_integration_flag';\n      const adminUserId = 'test-admin';\n\n      // Create a test feature flag\n      await featureFlagService.setFeatureFlag({\n        id: testFlagId,\n        name: 'Integration Test Flag',\n        description: 'A feature flag created during integration testing',\n        category: 'experimental',\n        enabled: true,\n        rollout: {\n          type: 'percentage',\n          percentage: 50\n        },\n        analytics: {\n          trackingEnabled: true,\n          events: ['test_event']\n        }\n      }, adminUserId);\n\n      // Read the created flag\n      const createdFlag = await featureFlagService.getFeatureFlag(testFlagId);\n      \n      if (!createdFlag) {\n        throw new Error('Failed to create or retrieve test flag');\n      }\n\n      // Update the flag\n      await featureFlagService.setFeatureFlag({\n        ...createdFlag,\n        enabled: false,\n        rollout: {\n          type: 'all'\n        }\n      }, adminUserId);\n\n      // Verify the update\n      const updatedFlag = await featureFlagService.getFeatureFlag(testFlagId);\n      \n      if (!updatedFlag || updatedFlag.enabled || updatedFlag.rollout.type !== 'all') {\n        throw new Error('Flag update failed');\n      }\n\n      // Clean up - delete the test flag\n      await featureFlagService.deleteFeatureFlag(testFlagId, adminUserId);\n\n      // Verify deletion\n      const deletedFlag = await featureFlagService.getFeatureFlag(testFlagId);\n      \n      if (deletedFlag) {\n        throw new Error('Flag deletion failed');\n      }\n\n      this.testResults.push({\n        success: true,\n        testName,\n        duration: Date.now() - startTime,\n        result: {\n          created: !!createdFlag,\n          updated: !!updatedFlag,\n          deleted: !deletedFlag\n        }\n      });\n\n      console.log(`âœ… ${testName}: CRUD operations completed successfully`);\n    } catch (error) {\n      this.testResults.push({\n        success: false,\n        testName,\n        duration: Date.now() - startTime,\n        error: error instanceof Error ? error.message : 'Unknown error'\n      });\n\n      console.log(`âŒ ${testName}: ${error}`);\n    }\n  }\n\n  /**\n   * Test presence system functionality\n   */\n  async testPresenceSystem(): Promise<IntegrationTestResult> {\n    const testName = 'Presence System';\n    const startTime = Date.now();\n    \n    try {\n      const testUserId = 'test-presence-user';\n      const testSpaceId = 'test-space-presence';\n\n      // Update user presence\n      await realtimeService.updatePresence(testUserId, {\n        status: 'online',\n        currentSpace: testSpaceId,\n        activity: 'testing presence system',\n        metadata: {\n          platform: 'web',\n          version: '1.0.0'\n        }\n      });\n\n      // Test typing indicators\n      await realtimeService.setTypingIndicator(testSpaceId, testUserId, true);\n      \n      // Wait a bit then stop typing\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      await realtimeService.setTypingIndicator(testSpaceId, testUserId, false);\n\n      const result = {\n        success: true,\n        testName,\n        duration: Date.now() - startTime,\n        result: {\n          presenceUpdated: true,\n          typingIndicatorSet: true\n        }\n      };\n\n      console.log(`âœ… ${testName}: Presence system working correctly`);\n      return result;\n    } catch (error) {\n      const result = {\n        success: false,\n        testName,\n        duration: Date.now() - startTime,\n        error: error instanceof Error ? error.message : 'Unknown error'\n      };\n\n      console.log(`âŒ ${testName}: ${error}`);\n      return result;\n    }\n  }\n\n  /**\n   * Get test results summary\n   */\n  getTestSummary(): {\n    total: number;\n    passed: number;\n    failed: number;\n    passRate: number;\n    results: IntegrationTestResult[];\n  } {\n    const total = this.testResults.length;\n    const passed = this.testResults.filter(r => r.success).length;\n    const failed = total - passed;\n    const passRate = total > 0 ? (passed / total) * 100 : 0;\n\n    return {\n      total,\n      passed,\n      failed,\n      passRate,\n      results: this.testResults\n    };\n  }\n}\n\n// Export singleton instance\nexport const integrationTester = new IntegrationTester();\n\n// Utility function to run a quick smoke test\nexport async function runSmokeTest(): Promise<boolean> {\n  try {\n    console.log('ðŸ”¥ Running HIVE smoke test...');\n    \n    // Test basic feature flag evaluation\n    const testResult = await featureFlagService.isFeatureEnabled(\n      HIVE_FEATURE_FLAGS.REAL_TIME_CHAT,\n      {\n        userId: 'smoke-test-user',\n        userRole: 'member'\n      }\n    );\n\n    // Test basic message sending\n    await realtimeService.sendMessage({\n      type: 'system',\n      channel: 'smoke:test',\n      senderId: 'smoke-test',\n      content: { test: true },\n      metadata: {\n        timestamp: new Date().toISOString(),\n        priority: 'low',\n        requiresAck: false,\n        retryCount: 0\n      }\n    });\n\n    console.log('âœ… Smoke test passed');\n    return true;\n  } catch (error) {\n    console.log('âŒ Smoke test failed:', error);\n    return false;\n  }\n}\n\n// Export the test interface for use in other parts of the application\nexport { IntegrationTestResult, IntegrationTester };","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/tool-execution-runtime.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/tool-navigation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/transaction-manager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/unified-state-management.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/lib/validation-middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/components/atomic-components.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/components/form-components.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/components/layout-components.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/components/navigation-components.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/design-system/atomic-consistency.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/design-system/brand-consistency.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/design-system/component-composition.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/e2e/auth-edge-cases.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/e2e/auth-flow-complete.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/e2e/auth-onboarding-flow.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/e2e/complete-user-journey.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/e2e/debug-hooks.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/e2e/debug-providers.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/e2e/feed-social-interactions.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/e2e/onboarding-complete.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/e2e/profile-management.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/e2e/profile-networking-complete.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/e2e/simple-navigation.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/e2e/social-feed-engagement.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/e2e/space-collaboration-complete.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/e2e/spaces-lifecycle.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/e2e/tool-development-complete.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/e2e/tools-development.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/e2e/waitlist.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/global-setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/global-teardown.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/integration/admin-operations.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/integration/auth-flow.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/integration/auth/complete-onboarding.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/integration/auth/send-magic-link.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/integration/auth/verify-magic-link.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/integration/calendar-integration.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/integration/feed-personalization.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/integration/feed/feed-api.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/integration/notification-system.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/integration/profile-management.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/integration/real-time-communication.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/integration/search-discovery.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/integration/spaces-lifecycle.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/integration/tools-development.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/integration/tools/tools-api.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/performance-accessibility/accessibility-compliance.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/performance-accessibility/performance-metrics.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/test-runner.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/test-utils.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":28,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":28,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":209,"column":49,"nodeType":"Identifier","messageId":"undef","endLine":209,"endColumn":53}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { render, RenderOptions, screen } from '@testing-library/react';\nimport { vi, beforeEach, afterEach, expect, describe, it } from 'vitest';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { mockLocalStorage } from './setup';\n\n// Mock providers for testing\nconst MockProviders: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  return (\n    <div data-testid=\"mock-providers\">\n      {children}\n    </div>\n  );\n};\n\n// Custom render function with providers\nconst customRender = (\n  ui: React.ReactElement,\n  options?: Omit<RenderOptions, 'wrapper'> & {\n    routerMock?: object;\n    searchParamsMock?: object;\n  }\n) => {\n  const { routerMock, searchParamsMock, ...renderOptions } = options || {};\n\n  // Set up router mock\n  if (routerMock) {\n    (useRouter as jest.MockedFunction<typeof useRouter>).mockReturnValue(routerMock);\n  }\n\n  // Set up search params mock\n  if (searchParamsMock) {\n    (useSearchParams as any).mockReturnValue(searchParamsMock);\n  }\n\n  return render(ui, {\n    wrapper: MockProviders,\n    ...renderOptions,\n  });\n};\n\n// Re-export everything\nexport * from '@testing-library/react';\nexport { customRender as render };\n\n// Standardized test data factories\nexport const createTestUser = (overrides = {}) => ({\n  id: 'test-user-id',\n  uid: 'test-user-id',\n  email: 'test@test.edu',\n  fullName: 'Test User',\n  handle: 'testuser',\n  major: 'Computer Science',\n  graduationYear: 2026,\n  userType: 'student' as const,\n  schoolId: 'test-university',\n  onboardingCompleted: true,\n  isVerified: true,\n  status: 'active' as const,\n  createdAt: new Date().toISOString(),\n  updatedAt: new Date().toISOString(),\n  ...overrides,\n});\n\nexport const createTestSession = (overrides = {}) => ({\n  userId: 'test-user-id',\n  email: 'test@test.edu',\n  schoolId: 'test-university',\n  needsOnboarding: false,\n  verifiedAt: new Date().toISOString(),\n  handle: 'testuser',\n  role: 'student' as const,\n  onboardingCompleted: true,\n  ...overrides,\n});\n\nexport const createTestSchool = (overrides = {}) => ({\n  id: 'test-university',\n  name: 'Test University',\n  domain: 'test.edu',\n  location: 'Test City, NY',\n  status: 'active' as const,\n  waitlistCount: 0,\n  ...overrides,\n});\n\nexport const createTestSpace = (overrides = {}) => ({\n  id: 'test-space-id',\n  name: 'Test Space',\n  name_lowercase: 'test space',\n  description: 'A test space for unit testing',\n  schoolId: 'test-university',\n  memberCount: 42,\n  type: 'cohort' as const,\n  status: 'activated' as const,\n  createdAt: new Date(),\n  updatedAt: new Date(),\n  ...overrides,\n});\n\nexport const createTestTool = (overrides = {}) => ({\n  id: 'test-tool-id',\n  name: 'Test Tool',\n  icon: 'ðŸ”§',\n  category: 'productivity' as const,\n  isInstalled: true,\n  lastUsed: new Date().toISOString(),\n  usageCount: 5,\n  quickLaunch: true,\n  ...overrides,\n});\n\n// Mock API response helpers\nexport const createMockApiResponse = (data: unknown, options = {}) => ({\n  ok: true,\n  status: 200,\n  json: async () => data,\n  text: async () => JSON.stringify(data),\n  ...options,\n});\n\nexport const createMockApiError = (error: string, status = 400) => ({\n  ok: false,\n  status,\n  json: async () => ({ error }),\n  text: async () => JSON.stringify({ error }),\n});\n\n// Authentication test helpers\nexport const mockSuccessfulLogin = (userOverrides = {}) => {\n  const user = createTestUser(userOverrides);\n  return createMockApiResponse({\n    success: true,\n    dev: true,\n    user,\n  });\n};\n\nexport const mockSuccessfulOnboarding = (userOverrides = {}) => {\n  const user = createTestUser(userOverrides);\n  return createMockApiResponse({\n    success: true,\n    message: 'Onboarding completed successfully',\n    user,\n    builderRequestsCreated: 0,\n  });\n};\n\nexport const mockFailedRequest = (error: string, status = 400) => {\n  return createMockApiError(error, status);\n};\n\n// Test environment helpers\nexport const setupTestEnvironment = () => {\n  // Mock console methods to reduce noise in tests\n  const originalConsole = { ...console };\n  \n  beforeEach(() => {\n    console.error = vi.fn();\n    console.warn = vi.fn();\n    console.log = vi.fn();\n  });\n\n  afterEach(() => {\n    Object.assign(console, originalConsole);\n  });\n};\n\n// Local storage test helpers\nexport const mockLocalStorageValue = (key: string, value: string | null) => {\n  mockLocalStorage.getItem.mockImplementation((k) => \n    k === key ? JSON.stringify(value) : null\n  );\n};\n\nexport const expectLocalStorageCall = (key: string, value: string) => {\n  expect(mockLocalStorage.setItem).toHaveBeenCalledWith(\n    key,\n    JSON.stringify(value)\n  );\n};\n\n// Form testing helpers\nexport const fillForm = async (fields: Record<string, string>) => {\n  const { screen } = await import('@testing-library/react');\n  const { fireEvent } = await import('@testing-library/react');\n  \n  for (const [fieldName, value] of Object.entries(fields)) {\n    const field = screen.getByLabelText(new RegExp(fieldName, 'i')) ||\n                  screen.getByPlaceholderText(new RegExp(fieldName, 'i')) ||\n                  screen.getByRole('textbox', { name: new RegExp(fieldName, 'i') });\n    \n    fireEvent.change(field, { target: { value } });\n  }\n};\n\nexport const submitForm = async (buttonText = 'submit') => {\n  const { screen } = await import('@testing-library/react');\n  const { fireEvent } = await import('@testing-library/react');\n  \n  const submitButton = screen.getByRole('button', { \n    name: new RegExp(buttonText, 'i') \n  });\n  \n  fireEvent.click(submitButton);\n};\n\n// Async testing helpers\nexport const waitForApiCall = async (mockFetch: jest.MockedFunction<typeof fetch>, expectedUrl: string) => {\n  const { waitFor } = await import('@testing-library/react');\n  \n  await waitFor(() => {\n    expect(mockFetch).toHaveBeenCalledWith(\n      expect.stringContaining(expectedUrl),\n      expect.any(Object)\n    );\n  });\n};\n\nexport const waitForRedirect = async (mockRouter: object, expectedPath: string) => {\n  const { waitFor } = await import('@testing-library/react');\n  \n  await waitFor(() => {\n    expect(mockRouter.push).toHaveBeenCalledWith(expectedPath);\n  });\n};\n\n// Component testing helpers\nexport const getByTestId = (testId: string) => {\n  return screen.getByTestId(testId);\n};\n\nexport const queryByTestId = (testId: string) => {\n  return screen.queryByTestId(testId);\n};\n\n// Error boundary testing with proper error handling\nexport const TestErrorBoundary: React.FC<{ children: React.ReactNode }> = ({ \n  children \n}) => {\n  return (\n    <div data-testid=\"error-boundary\">\n      {children}\n    </div>\n  );\n};\n\n// Standardized test patterns\nexport const describeComponentSuite = (componentName: string, tests: () => void) => {\n  describe(`${componentName} Component`, () => {\n    beforeEach(() => {\n      vi.clearAllMocks();\n    });\n\n    afterEach(() => {\n      vi.restoreAllMocks();\n    });\n\n    tests();\n  });\n};\n\n// Common test patterns\nexport const testPatterns = {\n  shouldRender: (getComponent: () => React.ReactElement, testId?: string) => {\n    it('should render without crashing', () => {\n      const { container } = render(getComponent());\n      expect(container).toBeInTheDocument();\n      if (testId) {\n        expect(screen.getByTestId(testId)).toBeInTheDocument();\n      }\n    });\n  },\n\n  shouldHandleLoading: (getLoadingComponent: () => React.ReactElement) => {\n    it('should display loading state', () => {\n      render(getLoadingComponent());\n      expect(screen.getByText(/loading|spinner|syncing/i)).toBeInTheDocument();\n    });\n  },\n\n  shouldHandleError: (getErrorComponent: () => React.ReactElement) => {\n    it('should handle error states gracefully', () => {\n      render(getErrorComponent());\n      expect(screen.getByText(/error|failed|something went wrong/i)).toBeInTheDocument();\n    });\n  },\n};\n\n// Performance helpers for testing\nexport const measureRenderTime = async (component: () => React.ReactElement) => {\n  const start = performance.now();\n  render(component());\n  const end = performance.now();\n  return end - start;\n};\n\n// Accessibility testing helpers\nexport const testAccessibility = {\n  shouldHaveProperLabels: (component: () => React.ReactElement) => {\n    it('should have proper ARIA labels', () => {\n      render(component());\n      const buttons = screen.getAllByRole('button');\n      buttons.forEach(button => {\n        expect(button).toHaveAttribute('aria-label');\n      });\n    });\n  },\n\n  shouldSupportKeyboardNavigation: (component: () => React.ReactElement) => {\n    it('should support keyboard navigation', () => {\n      render(component());\n      const focusableElements = screen.getAllByRole(/button|link|textbox|combobox/i);\n      focusableElements.forEach(element => {\n        expect(element).toHaveAttribute('tabIndex');\n      });\n    });\n  },\n};","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/admin/admin-activity-logs-route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/admin/admin-auth.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/admin/admin-builder-requests-route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/admin/admin-dashboard-route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/admin/admin-spaces-route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/admin/admin-users-route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/auth/login-page.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/auth/verify-page.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/calendar/calendar-api.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/calendar/calendar-page.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/calendar/use-calendar-data.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/calendar/use-calendar-integration.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/dashboard/dashboard-layout.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/feed/feed-page.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/onboarding/onboarding-wizard.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":232,"column":5,"nodeType":"JSXOpeningElement","endLine":232,"endColumn":43,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/profile/enhanced-privacy-modal.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/profile/hive-avatar-card.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":25,"column":5,"nodeType":"JSXOpeningElement","endLine":31,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/profile/personal-tools-card.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/profile/profile-error-boundary.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/profile/profile-identity-modal.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":60,"column":5,"nodeType":"JSXOpeningElement","endLine":60,"endColumn":84,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/profile/profile-loading-skeleton.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/profile/profile-page.test.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":50,"column":5,"nodeType":"JSXOpeningElement","endLine":50,"endColumn":84,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/realtime/chat-route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/realtime/notifications-route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/realtime/presence-route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/realtime/websocket-route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/spaces/spaces-page.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/tools/tool-deploy.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/tools/tool-edit-page.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/tools/tool-marketplace.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/tools/tools-page.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/unit/utils/auth-utils.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/src/test/vitest-jest-dom.d.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Vi' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Vi"},"fix":{"range":[304,306],"text":""},"desc":"Remove unused variable 'Vi'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'JestAssertion' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"JestAssertion"},"fix":{"range":[323,336],"text":""},"desc":"Remove unused variable 'JestAssertion'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Window' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"Window"},"fix":{"range":[498,504],"text":""},"desc":"Remove unused variable 'Window'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Assertion' is defined but never used. Allowed unused vars must match /^_/u.","line":28,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"Assertion"},"fix":{"range":[721,730],"text":""},"desc":"Remove unused variable 'Assertion'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AsymmetricMatchersContaining' is defined but never used. Allowed unused vars must match /^_/u.","line":32,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"AsymmetricMatchersContaining"},"fix":{"range":[879,907],"text":""},"desc":"Remove unused variable 'AsymmetricMatchersContaining'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Jest DOM Type Extensions for Vitest\n * \n * This file extends Vitest's expect interface with Jest DOM matchers\n * to fix \"toBeInTheDocument\" and other Jest DOM matcher type errors.\n */\n\nimport type { TestingLibraryMatchers } from '@testing-library/jest-dom/matchers';\n\ndeclare global {\n  namespace Vi {\n    interface JestAssertion<T = unknown> extends TestingLibraryMatchers<T, void> {\n      // Placeholder to satisfy empty interface rule\n      _placeholder?: never;\n    }\n  }\n  \n  interface Window {\n    analyticsEvents?: unknown[];\n    __mockToolElements?: unknown;\n    __mockElementError?: unknown;\n    __mockSlowRender?: unknown;\n  }\n}\n\n// Extend Vitest's expect interface\ndeclare module 'vitest' {\n  interface Assertion<T = unknown> extends TestingLibraryMatchers<T, void> {\n    // Placeholder to satisfy empty interface rule\n    _placeholder?: never;\n  }\n  interface AsymmetricMatchersContaining extends TestingLibraryMatchers<unknown, void> {\n    // Placeholder to satisfy empty interface rule\n    _placeholder?: never;\n  }\n}","usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/test-import.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/test/e2e/helpers/test-setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/test/e2e/onboarding-errors.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/test/e2e/onboarding-flow.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/test/e2e/space-feed-errors.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/test/e2e/space-feed-flow.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/test/e2e/tool-builder-errors.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/laneyfraass/hive_ui/apps/web/test/e2e/tool-builder-flow.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
