'use client';
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState, useEffect } from 'react';
import { logger } from '../../utils/logger';
const RARITY_CONFIG = {
    common: { color: 'text-gray-400', bg: 'bg-gray-500/20', border: 'border-gray-500/30' },
    uncommon: { color: 'text-green-400', bg: 'bg-green-500/20', border: 'border-green-500/30' },
    rare: { color: 'text-blue-400', bg: 'bg-blue-500/20', border: 'border-blue-500/30' },
    epic: { color: 'text-purple-400', bg: 'bg-purple-500/20', border: 'border-purple-500/30' },
    legendary: { color: 'text-yellow-400', bg: 'bg-yellow-500/20', border: 'border-yellow-500/30' }
};
export function RitualParticipationTracker({ participation, ritual, onActionComplete, onWithdraw, onShare, className, variant = 'detailed', showActions = true }) {
    const [selectedTab, setSelectedTab] = useState('progress');
    const [completingAction, setCompletingAction] = useState(null);
    const [showCelebration, setShowCelebration] = useState(false);
    const [celebrationData, setCelebrationData] = useState(null);
    const isActive = participation.status === 'active' || participation.status === 'joined';
    const isCompleted = participation.status === 'completed';
    const completedActionIds = participation.completedActions.map(a => a.actionId);
    const requiredActions = ritual.actions.filter(a => a.isRequired);
    const optionalActions = ritual.actions.filter(a => !a.isRequired);
    const nextMilestone = ritual.milestones.find(m => !participation.milestonesReached.some(rm => rm.milestoneId === m.id));
    // Trigger celebration for new milestones or achievements
    useEffect(() => {
        const latestMilestone = participation.milestonesReached[participation.milestonesReached.length - 1];
        if (latestMilestone && Date.now() - new Date(latestMilestone.reachedAt).getTime() < 10000) {
            setCelebrationData({
                type: 'milestone',
                data: latestMilestone
            });
        }
        ;
        setShowCelebration(true);
        setTimeout(() => setShowCelebration(false), 5000);
    });
}
[participation.milestonesReached];
;
const handleActionComplete = async (actionId) => {
    if (!onActionComplete || completingAction)
        return;
    setCompletingAction(actionId);
    try {
        await onActionComplete(actionId);
    }
    catch (error) {
        logger.error('Failed to complete action:', { error });
    }
    finally {
        setCompletingAction(null);
    }
};
const formatTimeRemaining = (endTime) => {
    const now = new Date();
    const end = new Date(endTime);
    const diff = end.getTime() - now.getTime();
    if (diff <= 0)
        return 'Ended';
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    if (days > 0)
        return `${days}d ${hours}h left`;
    if (hours > 0)
        return `${hours}h left`;
    return 'Less than 1h left';
};
if (variant === 'compact') {
    return (_jsxs(motion.div, { initial: { opacity: 0, y: 10 }, animate: { opacity: 1, y: 0 }, className: cn("p-4 bg-[var(--hive-background-secondary)] rounded-xl border border-[var(--hive-border-subtle)]", className), children: [_jsxs("div", { className: "flex items-center justify-between mb-3", children: [_jsxs("div", { className: "flex items-center gap-3", children: [_jsxs("div", { className: "relative", children: [_jsx("div", { className: "w-12 h-12 rounded-full bg-[var(--hive-gold)]/20 flex items-center justify-center", children: _jsx(Trophy, { className: "h-6 w-6 text-[var(--hive-gold)]" }) }), participation.streakDays > 0 && (_jsx("div", { className: "absolute -top-1 -right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs font-bold", children: participation.streakDays }))] }), _jsxs("div", { children: [_jsx("h4", { className: "font-semibold text-[var(--hive-text-primary)]", children: ritual.title }), _jsxs("p", { className: "text-sm text-[var(--hive-text-secondary)]", children: [participation.progress, "% complete \u2022 Rank #", participation.rank || 'N/A'] })] })] }), _jsxs("div", { className: "text-right", children: [_jsx("div", { className: "text-2xl font-bold text-[var(--hive-text-primary)]", children: participation.score }), _jsx("div", { className: "text-xs text-[var(--hive-text-secondary)]", children: "points" })] })] }), _jsx("div", { className: "mb-3", children: _jsx("div", { className: "w-full bg-[var(--hive-background-tertiary)] rounded-full h-2", children: _jsx(motion.div, { className: "bg-gradient-to-r from-[var(--hive-gold)] to-[#FF6B35] h-2 rounded-full", initial: { width: 0 }, animate: { width: `${participation.progress}%` }, transition: { duration: 1, ease: "easeOut" } }) }) }), _jsxs("div", { className: "flex items-center justify-between text-sm", children: [_jsxs("div", { className: "flex items-center gap-4", children: [_jsxs("div", { className: "flex items-center gap-1 text-[var(--hive-text-secondary)]", children: [_jsx(CheckCircle, { className: "h-4 w-4" }), _jsxs("span", { children: [participation.completedActions.length, "/", ritual.actions.length] })] }), participation.streakDays > 0 && (_jsxs("div", { className: "flex items-center gap-1 text-red-400", children: [_jsx(Flame, { className: "h-4 w-4" }), _jsxs("span", { children: [participation.streakDays, " day streak"] })] }))] }), ritual.endTime && (_jsx("div", { className: "text-[var(--hive-text-secondary)]", children: formatTimeRemaining(ritual.endTime) }))] })] }));
}
if (variant === 'card') {
    return (_jsxs(motion.div, { initial: { opacity: 0, scale: 0.95 }, animate: { opacity: 1, scale: 1 }, className: cn("relative overflow-hidden rounded-xl border border-[var(--hive-border-subtle)] bg-gradient-to-br from-[var(--hive-background-secondary)] to-[var(--hive-background-tertiary)]", className), children: [_jsx("div", { className: "absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-[var(--hive-gold)]/10 to-transparent rounded-full blur-2xl" }), _jsxs("div", { className: "relative p-6", children: [_jsxs("div", { className: "flex items-start justify-between mb-6", children: [_jsxs("div", { children: [_jsx("h3", { className: "text-xl font-bold text-[var(--hive-text-primary)] mb-1", children: ritual.title }), _jsx("p", { className: "text-[var(--hive-text-secondary)]", children: ritual.description })] }), isCompleted && (_jsx("div", { className: "px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm font-medium", children: "Completed!" }))] }), _jsxs("div", { className: "grid grid-cols-3 gap-4 mb-6", children: [_jsxs("div", { className: "text-center", children: [_jsxs("div", { className: "text-2xl font-bold text-[var(--hive-text-primary)]", children: [participation.progress, "%"] }), _jsx("div", { className: "text-xs text-[var(--hive-text-secondary)]", children: "Progress" })] }), _jsxs("div", { className: "text-center", children: [_jsx("div", { className: "text-2xl font-bold text-[var(--hive-text-primary)]", children: participation.score }), _jsx("div", { className: "text-xs text-[var(--hive-text-secondary)]", children: "Score" })] }), _jsxs("div", { className: "text-center", children: [_jsxs("div", { className: "text-2xl font-bold text-[var(--hive-text-primary)]", children: ["#", participation.rank || 'N/A'] }), _jsx("div", { className: "text-xs text-[var(--hive-text-secondary)]", children: "Rank" })] })] }), _jsxs("div", { className: "mb-6", children: [_jsxs("div", { className: "flex justify-between mb-2", children: [_jsx("span", { className: "text-sm text-[var(--hive-text-secondary)]", children: "Overall Progress" }), _jsxs("span", { className: "text-sm font-medium text-[var(--hive-gold)]", children: [participation.progress, "%"] })] }), _jsx("div", { className: "w-full bg-[var(--hive-background-tertiary)] rounded-full h-3", children: _jsx(motion.div, { className: "bg-gradient-to-r from-[var(--hive-gold)] to-[#FF6B35] h-3 rounded-full relative", initial: { width: 0 }, animate: { width: `${participation.progress}%` }, transition: { duration: 1.5, ease: "easeOut" }, children: _jsx("div", { className: "absolute right-0 top-0 w-3 h-3 bg-white rounded-full shadow-lg" }) }) })] }), participation.achievements.length > 0 && (_jsxs("div", { className: "mb-6", children: [_jsxs("div", { className: "flex items-center justify-between mb-3", children: [_jsx("h4", { className: "font-medium text-[var(--hive-text-primary)]", children: "Recent Achievements" }), _jsxs("span", { className: "text-xs text-[var(--hive-text-secondary)]", children: [participation.achievements.length, " total"] })] }), _jsxs("div", { className: "flex gap-2", children: [participation.achievements.slice(0, 4).map((achievement) => {
                                        const rarityConfig = RARITY_CONFIG[achievement.rarity];
                                        return (_jsx("div", { className: cn("w-10 h-10 rounded-lg flex items-center justify-center border", rarityConfig.bg, rarityConfig.border), title: achievement.name, children: _jsx(Award, { className: cn("h-5 w-5", rarityConfig.color) }) }, achievement.id));
                                    }), participation.achievements.length > 4 && (_jsxs("div", { className: "w-10 h-10 rounded-lg bg-[var(--hive-background-tertiary)] border border-[var(--hive-border-subtle)] flex items-center justify-center text-xs text-[var(--hive-text-secondary)]", children: ["+", participation.achievements.length - 4] }))] })] })), _jsxs("div", { className: "flex gap-3", children: [_jsx("button", { className: "flex-1 px-4 py-2 bg-[var(--hive-gold)] text-[var(--hive-black)] rounded-lg hover:bg-[var(--hive-gold)]/90 transition-colors font-medium", children: "View Details" }), onShare && (_jsx("button", { onClick: onShare, className: "px-4 py-2 border border-[var(--hive-border-subtle)] text-[var(--hive-text-primary)] rounded-lg hover:bg-[var(--hive-background-tertiary)] transition-colors", children: _jsx(Share2, { className: "h-4 w-4" }) }))] })] })] }));
}
// Detailed variant (default)
return (_jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, className: cn("bg-[var(--hive-background-secondary)] rounded-xl border border-[var(--hive-border-subtle)] overflow-hidden", className), children: [_jsx(AnimatePresence, { children: showCelebration && celebrationData && (_jsx(motion.div, { initial: { opacity: 0, scale: 0.9, y: -20 }, animate: { opacity: 1, scale: 1, y: 0 }, exit: { opacity: 0, scale: 0.9, y: -20 }, className: "absolute inset-0 z-50 bg-[var(--hive-background-primary)]/95 backdrop-blur-sm flex items-center justify-center", children: _jsxs("div", { className: "text-center", children: [_jsx(motion.div, { animate: { rotate: [0, -10, 10, -10, 0] }, transition: { duration: 0.5, delay: 0.2 }, className: "text-6xl mb-4", children: "\uD83C\uDF89" }), _jsx("h3", { className: "text-2xl font-bold text-[var(--hive-text-primary)] mb-2", children: "Milestone Reached!" }), _jsx("p", { className: "text-[var(--hive-text-secondary)]", children: celebrationData.data.name })] }) })) }), _jsxs("div", { className: "p-6 border-b border-[var(--hive-border-subtle)]", children: [_jsxs("div", { className: "flex items-start justify-between mb-4", children: [_jsxs("div", { className: "flex items-center gap-4", children: [_jsxs("div", { className: "relative", children: [_jsx("div", { className: "w-16 h-16 rounded-xl bg-gradient-to-br from-[var(--hive-gold)]/20 to-[var(--hive-gold)]/10 flex items-center justify-center", children: _jsx(Trophy, { className: "h-8 w-8 text-[var(--hive-gold)]" }) }), participation.streakDays > 0 && (_jsx(motion.div, { animate: { scale: [1, 1.1, 1] }, transition: { duration: 2, repeat: Infinity }, className: "absolute -top-2 -right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center text-xs font-bold shadow-lg", children: participation.streakDays }))] }), _jsxs("div", { children: [_jsx("h2", { className: "text-2xl font-bold text-[var(--hive-text-primary)]", children: ritual.title }), _jsx("p", { className: "text-[var(--hive-text-secondary)] mb-2", children: ritual.description }), _jsxs("div", { className: "flex items-center gap-4 text-sm", children: [_jsxs("div", { className: "flex items-center gap-1", children: [_jsx(Users, { className: "h-4 w-4" }), _jsxs("span", { children: [ritual.participantCount, " participants"] })] }), ritual.endTime && (_jsxs("div", { className: "flex items-center gap-1", children: [_jsx(Clock, { className: "h-4 w-4" }), _jsx("span", { children: formatTimeRemaining(ritual.endTime) })] })), _jsx("div", { className: cn("px-2 py-1 rounded text-xs font-medium", isCompleted ? "bg-green-500/20 text-green-400" :
                                                        isActive ? "bg-[var(--hive-gold)]/20 text-[var(--hive-gold)]" :
                                                            "bg-gray-500/20 text-gray-400"), children: participation.status.toUpperCase() })] })] })] }), _jsxs("div", { className: "text-right", children: [_jsx("div", { className: "text-3xl font-bold text-[var(--hive-text-primary)]", children: participation.score }), _jsx("div", { className: "text-sm text-[var(--hive-text-secondary)]", children: "total points" }), participation.rank && (_jsxs("div", { className: "text-sm text-[var(--hive-gold)] font-medium", children: ["Rank #", participation.rank] }))] })] }), _jsxs("div", { className: "mb-4", children: [_jsxs("div", { className: "flex justify-between mb-2", children: [_jsx("span", { className: "text-sm font-medium text-[var(--hive-text-primary)]", children: "Overall Progress" }), _jsxs("span", { className: "text-sm font-bold text-[var(--hive-gold)]", children: [participation.progress, "%"] })] }), _jsx("div", { className: "w-full bg-[var(--hive-background-tertiary)] rounded-full h-4 shadow-inner", children: _jsx(motion.div, { className: "bg-gradient-to-r from-[var(--hive-gold)] to-[#FF6B35] h-4 rounded-full relative overflow-hidden", initial: { width: 0 }, animate: { width: `${participation.progress}%` }, transition: { duration: 2, ease: "easeOut" }, children: _jsx("div", { className: "absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse" }) }) })] }), nextMilestone && (_jsx("div", { className: "p-3 bg-[var(--hive-background-tertiary)] rounded-lg border border-[var(--hive-border-subtle)]", children: _jsxs("div", { className: "flex items-center gap-3", children: [_jsx("div", { className: "w-8 h-8 rounded-full bg-[var(--hive-gold)]/20 flex items-center justify-center", children: _jsx(Target, { className: "h-4 w-4 text-[var(--hive-gold)]" }) }), _jsxs("div", { className: "flex-1", children: [_jsx("h4", { className: "font-medium text-[var(--hive-text-primary)]", children: "Next Milestone" }), _jsx("p", { className: "text-sm text-[var(--hive-text-secondary)]", children: nextMilestone.name })] }), _jsxs("div", { className: "text-right", children: [_jsxs("div", { className: "text-sm font-medium text-[var(--hive-text-primary)]", children: [nextMilestone.threshold, "%"] }), _jsx("div", { className: "text-xs text-[var(--hive-text-secondary)]", children: "required" })] })] }) }))] }), _jsx("div", { className: "border-b border-[var(--hive-border-subtle)]", children: _jsx("nav", { className: "flex", children: [
                    { id: 'progress', label: 'Progress', icon: TrendingUp },
                    { id: 'actions', label: 'Actions', icon: CheckCircle },
                    { id: 'milestones', label: 'Milestones', icon: Trophy },
                    { id: 'achievements', label: 'Achievements', icon: Award }
                ].map(({ id, label, icon: Icon }) => (_jsxs("button", { onClick: () => setSelectedTab(id), className: cn("flex-1 flex items-center justify-center gap-2 px-4 py-3 text-sm font-medium transition-colors", selectedTab === id
                        ? "text-[var(--hive-gold)] border-b-2 border-[var(--hive-gold)] bg-[var(--hive-gold)]/5"
                        : "text-[var(--hive-text-secondary)] hover:text-[var(--hive-text-primary)] hover:bg-[var(--hive-background-tertiary)]"), children: [_jsx(Icon, { className: "h-4 w-4" }), label] }, id))) }) }), _jsx("div", { className: "p-6", children: _jsxs(AnimatePresence, { mode: "wait", children: [selectedTab === 'progress' && (_jsxs(motion.div, { initial: { opacity: 0, y: 10 }, animate: { opacity: 1, y: 0 }, exit: { opacity: 0, y: -10 }, className: "space-y-6", children: [_jsx("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4", children: [
                                    { label: 'Actions Completed', value: `${participation.completedActions.length}/${ritual.actions.length}`, icon: CheckCircle },
                                    { label: 'Current Streak', value: `${participation.streakDays} days`, icon: Flame },
                                    { label: 'Total Score', value: participation.score.toLocaleString(), icon: Star },
                                    { label: 'Time Active', value: `${Math.floor((Date.now() - new Date(participation.joinedAt).getTime()) / (1000 * 60 * 60 * 24))} days`, icon: Calendar }
                                ].map(({ label, value, icon: Icon }) => (_jsxs("div", { className: "p-4 bg-[var(--hive-background-tertiary)] rounded-lg text-center", children: [_jsx(Icon, { className: "h-6 w-6 mx-auto mb-2 text-[var(--hive-gold)]" }), _jsx("div", { className: "text-xl font-bold text-[var(--hive-text-primary)]", children: value }), _jsx("div", { className: "text-xs text-[var(--hive-text-secondary)]", children: label })] }, label))) }), participation.personalBest && (_jsxs("div", { children: [_jsx("h4", { className: "font-semibold text-[var(--hive-text-primary)] mb-3", children: "Personal Records" }), _jsx("div", { className: "grid grid-cols-3 gap-4", children: [
                                            { label: 'Longest Streak', value: `${participation.personalBest.longestStreak} days` },
                                            { label: 'Highest Score', value: participation.personalBest.highestScore.toLocaleString() },
                                            { label: 'Fastest Completion', value: `${participation.personalBest.fastestCompletion}m` }
                                        ].map(({ label, value }) => (_jsxs("div", { className: "text-center", children: [_jsx("div", { className: "text-lg font-bold text-[var(--hive-gold)]", children: value }), _jsx("div", { className: "text-xs text-[var(--hive-text-secondary)]", children: label })] }, label))) })] }))] }, "progress")), selectedTab === 'actions' && showActions && (_jsxs(motion.div, { initial: { opacity: 0, y: 10 }, animate: { opacity: 1, y: 0 }, exit: { opacity: 0, y: -10 }, className: "space-y-6", children: [_jsxs("div", { children: [_jsx("h4", { className: "font-semibold text-[var(--hive-text-primary)] mb-3", children: "Required Actions" }), _jsx("div", { className: "space-y-3", children: requiredActions.map((action) => {
                                            const isCompleted = completedActionIds.includes(action.id);
                                            const completionData = participation.completedActions.find(ca => ca.actionId === action.id);
                                            return (_jsx("div", { className: cn("p-4 rounded-lg border transition-all", isCompleted
                                                    ? "bg-green-500/10 border-green-500/30"
                                                    : "bg-[var(--hive-background-tertiary)] border-[var(--hive-border-subtle)] hover:border-[var(--hive-gold)]/30"), children: _jsxs("div", { className: "flex items-start justify-between", children: [_jsxs("div", { className: "flex items-start gap-3", children: [isCompleted ? (_jsx(CheckCircle, { className: "h-5 w-5 text-green-400 mt-0.5" })) : (_jsx(Circle, { className: "h-5 w-5 text-[var(--hive-text-secondary)] mt-0.5" })), _jsxs("div", { children: [_jsx("h5", { className: "font-medium text-[var(--hive-text-primary)]", children: action.name }), _jsx("p", { className: "text-sm text-[var(--hive-text-secondary)] mb-2", children: action.description }), isCompleted && completionData && (_jsxs("div", { className: "text-xs text-green-400", children: ["Completed ", new Date(completionData.completedAt).toLocaleDateString(), " \u2022 +", completionData.points, " points"] }))] })] }), _jsxs("div", { className: "flex items-center gap-2", children: [_jsxs("span", { className: "text-sm font-medium text-[var(--hive-gold)]", children: ["+", action.weight, "pts"] }), !isCompleted && isActive && onActionComplete && (_jsx("button", { onClick: () => handleActionComplete(action.id), disabled: completingAction === action.id, className: "px-3 py-1.5 bg-[var(--hive-gold)] text-[var(--hive-black)] rounded-lg text-sm font-medium hover:bg-[var(--hive-gold)]/90 disabled:opacity-50", children: completingAction === action.id ? 'Completing...' : 'Complete' }))] })] }) }, action.id));
                                        }) })] }), optionalActions.length > 0 && (_jsxs("div", { children: [_jsx("h4", { className: "font-semibold text-[var(--hive-text-primary)] mb-3", children: "Optional Actions" }), _jsx("div", { className: "space-y-3", children: optionalActions.map((action) => {
                                            const isCompleted = completedActionIds.includes(action.id);
                                            const completionData = participation.completedActions.find(ca => ca.actionId === action.id);
                                            return (_jsx("div", { className: cn("p-4 rounded-lg border transition-all", isCompleted
                                                    ? "bg-blue-500/10 border-blue-500/30"
                                                    : "bg-[var(--hive-background-tertiary)] border-[var(--hive-border-subtle)] hover:border-[var(--hive-gold)]/30"), children: _jsxs("div", { className: "flex items-start justify-between", children: [_jsxs("div", { className: "flex items-start gap-3", children: [isCompleted ? (_jsx(CheckCircle, { className: "h-5 w-5 text-blue-400 mt-0.5" })) : (_jsx(Circle, { className: "h-5 w-5 text-[var(--hive-text-secondary)] mt-0.5" })), _jsxs("div", { children: [_jsx("h5", { className: "font-medium text-[var(--hive-text-primary)]", children: action.name }), _jsx("p", { className: "text-sm text-[var(--hive-text-secondary)] mb-2", children: action.description }), isCompleted && completionData && (_jsxs("div", { className: "text-xs text-blue-400", children: ["Completed ", new Date(completionData.completedAt).toLocaleDateString(), " \u2022 +", completionData.points, " points"] }))] })] }), _jsxs("div", { className: "flex items-center gap-2", children: [_jsxs("span", { className: "text-sm font-medium text-[var(--hive-gold)]", children: ["+", action.weight, "pts"] }), !isCompleted && isActive && onActionComplete && (_jsx("button", { onClick: () => handleActionComplete(action.id), disabled: completingAction === action.id, className: "px-3 py-1.5 bg-[var(--hive-gold)] text-[var(--hive-black)] rounded-lg text-sm font-medium hover:bg-[var(--hive-gold)]/90 disabled:opacity-50", children: completingAction === action.id ? 'Completing...' : 'Complete' }))] })] }) }, action.id));
                                        }) })] }))] }, "actions")), selectedTab === 'milestones' && (_jsx(motion.div, { initial: { opacity: 0, y: 10 }, animate: { opacity: 1, y: 0 }, exit: { opacity: 0, y: -10 }, className: "space-y-4", children: ritual.milestones.map((milestone) => {
                            const isReached = participation.milestonesReached.some(rm => rm.milestoneId === milestone.id);
                            const reachedData = participation.milestonesReached.find(rm => rm.milestoneId === milestone.id);
                            return (_jsx("div", { className: cn("p-4 rounded-lg border transition-all", isReached
                                    ? "bg-[var(--hive-gold)]/10 border-[var(--hive-gold)]/30"
                                    : "bg-[var(--hive-background-tertiary)] border-[var(--hive-border-subtle)]"), children: _jsxs("div", { className: "flex items-start gap-3", children: [isReached ? (_jsx(Trophy, { className: "h-6 w-6 text-[var(--hive-gold)] mt-1" })) : (_jsx(Target, { className: "h-6 w-6 text-[var(--hive-text-secondary)] mt-1" })), _jsxs("div", { className: "flex-1", children: [_jsx("h5", { className: "font-semibold text-[var(--hive-text-primary)]", children: milestone.name }), _jsx("p", { className: "text-sm text-[var(--hive-text-secondary)] mb-2", children: milestone.description }), isReached && reachedData && (_jsxs("div", { className: "text-xs text-[var(--hive-gold)]", children: ["Reached on ", new Date(reachedData.reachedAt).toLocaleDateString()] }))] }), _jsxs("div", { className: "text-right", children: [_jsxs("div", { className: "text-sm font-medium text-[var(--hive-text-primary)]", children: [milestone.threshold, "%"] }), _jsx("div", { className: "text-xs text-[var(--hive-text-secondary)]", children: "threshold" })] })] }) }, milestone.id));
                        }) }, "milestones")), selectedTab === 'achievements' && (_jsx(motion.div, { initial: { opacity: 0, y: 10 }, animate: { opacity: 1, y: 0 }, exit: { opacity: 0, y: -10 }, className: "space-y-4", children: participation.achievements.length > 0 ? (_jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: participation.achievements.map((achievement) => {
                                const rarityConfig = RARITY_CONFIG[achievement.rarity];
                                return (_jsx("div", { className: cn("p-4 rounded-lg border transition-all hover:scale-105", rarityConfig.bg, rarityConfig.border), children: _jsxs("div", { className: "flex items-start gap-3", children: [_jsx("div", { className: cn("p-2 rounded-lg", rarityConfig.bg), children: _jsx(Award, { className: cn("h-6 w-6", rarityConfig.color) }) }), _jsxs("div", { children: [_jsx("h5", { className: "font-semibold text-[var(--hive-text-primary)]", children: achievement.name }), _jsx("p", { className: "text-sm text-[var(--hive-text-secondary)] mb-2", children: achievement.description }), _jsxs("div", { className: "flex items-center gap-2", children: [_jsx("span", { className: cn("text-xs px-2 py-1 rounded-full", rarityConfig.bg, rarityConfig.color), children: achievement.rarity.toUpperCase() }), _jsxs("span", { className: "text-xs text-[var(--hive-text-secondary)]", children: ["Unlocked ", new Date(achievement.unlockedAt).toLocaleDateString()] })] })] })] }) }, achievement.id));
                            }) })) : (_jsxs("div", { className: "text-center py-12 text-[var(--hive-text-secondary)]", children: [_jsx(Award, { className: "h-12 w-12 mx-auto mb-3 opacity-50" }), _jsx("p", { children: "No achievements unlocked yet" }), _jsx("p", { className: "text-sm", children: "Complete more actions to unlock achievements!" })] })) }, "achievements"))] }) }), isActive && (_jsx("div", { className: "p-6 border-t border-[var(--hive-border-subtle)] bg-[var(--hive-background-tertiary)]", children: _jsxs("div", { className: "flex gap-3", children: [_jsx("button", { className: "flex-1 px-4 py-2 bg-[var(--hive-gold)] text-[var(--hive-black)] rounded-lg hover:bg-[var(--hive-gold)]/90 transition-colors font-medium", children: "Continue Participating" }), onShare && (_jsxs("button", { onClick: onShare, className: "px-4 py-2 border border-[var(--hive-border-subtle)] text-[var(--hive-text-primary)] rounded-lg hover:bg-[var(--hive-background-secondary)] transition-colors flex items-center gap-2", children: [_jsx(Share2, { className: "h-4 w-4" }), "Share Progress"] })), onWithdraw && (_jsx("button", { onClick: onWithdraw, className: "px-4 py-2 border border-red-500/30 text-red-400 rounded-lg hover:bg-red-500/10 transition-colors", children: "Withdraw" }))] }) }))] }));
//# sourceMappingURL=ritual-participation-tracker.js.map