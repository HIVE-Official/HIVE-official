"use client";
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import * as React from "react";
import { cn } from "../../lib/utils";
import { Card } from "../atoms/card";
import { Badge } from "../atoms/badge";
import { Button } from "../atoms/button";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "../atoms/tabs";
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "../atoms/select";
import { TrendingUp, TrendingDown, Users, Eye, MousePointerClick, Calendar, Download, Lightbulb, AlertCircle, CheckCircle2, } from "lucide-react";
const HiveLabAnalyticsDashboard = React.forwardRef(({ className, toolsAnalytics = [], selectedToolId, onToolSelect, dateRange = "30d", onDateRangeChange, onExport, insights = [], ...props }, ref) => {
    const selectedTool = toolsAnalytics.find((t) => t.toolId === selectedToolId);
    return (_jsxs(Card, { ref: ref, className: cn("flex flex-col h-full", className), ...props, children: [_jsxs("div", { className: "p-6 border-b border-white/8", children: [_jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsxs("div", { children: [_jsx("h2", { className: "text-xl font-bold text-white", children: "Tool Analytics" }), _jsx("p", { className: "text-sm text-white/70", children: "Track performance and member engagement" })] }), _jsxs("div", { className: "flex items-center gap-2", children: [_jsxs(Select, { value: dateRange, onValueChange: onDateRangeChange, children: [_jsx(SelectTrigger, { className: "w-32 h-9", children: _jsx(SelectValue, {}) }), _jsxs(SelectContent, { children: [_jsx(SelectItem, { value: "7d", children: "Last 7 days" }), _jsx(SelectItem, { value: "30d", children: "Last 30 days" }), _jsx(SelectItem, { value: "90d", children: "Last 90 days" }), _jsx(SelectItem, { value: "all", children: "All time" })] })] }), _jsxs(Button, { variant: "outline", size: "sm", className: "h-9 gap-2", onClick: () => onExport?.("csv"), children: [_jsx(Download, { className: "h-4 w-4" }), "Export"] })] })] }), toolsAnalytics.length > 0 && (_jsxs(Select, { value: selectedToolId, onValueChange: onToolSelect, children: [_jsx(SelectTrigger, { className: "w-full", children: _jsx(SelectValue, { placeholder: "Select a tool..." }) }), _jsx(SelectContent, { children: toolsAnalytics.map((tool) => (_jsx(SelectItem, { value: tool.toolId, children: _jsxs("div", { className: "flex items-center gap-2", children: [_jsx("span", { children: tool.toolIcon }), _jsx("span", { children: tool.toolName }), _jsxs(Badge, { variant: "sophomore", className: "ml-auto", children: [tool.totalSubmissions, " submissions"] })] }) }, tool.toolId))) })] }))] }), selectedTool ? (_jsxs(Tabs, { defaultValue: "overview", className: "flex-1 flex flex-col", children: [_jsxs(TabsList, { className: "grid w-full grid-cols-4 mx-6 mt-4", children: [_jsx(TabsTrigger, { value: "overview", children: "Overview" }), _jsx(TabsTrigger, { value: "engagement", children: "Engagement" }), _jsx(TabsTrigger, { value: "participants", children: "Participants" }), _jsx(TabsTrigger, { value: "insights", children: "Insights" })] }), _jsxs(TabsContent, { value: "overview", className: "flex-1 overflow-y-auto p-6 space-y-6", children: [_jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4", children: [_jsx(MetricCard, { label: "Total Submissions", value: selectedTool.totalSubmissions.toString(), trend: selectedTool.submissionTrend, icon: _jsx(MousePointerClick, { className: "h-4 w-4" }) }), _jsx(MetricCard, { label: "Completion Rate", value: `${selectedTool.completionRate}%`, icon: _jsx(CheckCircle2, { className: "h-4 w-4" }), trendColor: "green" }), _jsx(MetricCard, { label: "Total Views", value: selectedTool.totalViews.toString(), icon: _jsx(Eye, { className: "h-4 w-4" }) }), _jsx(MetricCard, { label: "Unique Users", value: selectedTool.uniqueUsers.toString(), icon: _jsx(Users, { className: "h-4 w-4" }) })] }), _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [_jsxs(Card, { className: "p-4", children: [_jsx("h3", { className: "text-sm font-semibold mb-4", children: "Usage Trend" }), _jsx("div", { className: "space-y-2", children: selectedTool.usageByDay.map((day) => (_jsxs("div", { className: "flex items-center gap-2", children: [_jsx("span", { className: "text-xs text-white/70 w-16", children: day.day }), _jsx("div", { className: "flex-1 bg-white/10 rounded-full h-2 overflow-hidden", children: _jsx("div", { className: "h-full bg-[#FFD700] transition-all", style: {
                                                                    width: `${(day.count / Math.max(...selectedTool.usageByDay.map(d => d.count))) * 100}%`,
                                                                } }) }), _jsx("span", { className: "text-xs font-medium w-8 text-right", children: day.count })] }, day.day))) })] }), _jsxs(Card, { className: "p-4", children: [_jsx("h3", { className: "text-sm font-semibold mb-4", children: "Peak Usage Hours" }), _jsx("div", { className: "flex items-end justify-between gap-1 h-32", children: selectedTool.usageByHour.map((hour) => {
                                                    const maxCount = Math.max(...selectedTool.usageByHour.map(h => h.count));
                                                    const height = (hour.count / maxCount) * 100;
                                                    return (_jsxs("div", { className: "flex-1 flex flex-col items-center gap-1", children: [_jsx("div", { className: "w-full bg-[#FFD700] rounded-t transition-all hover:opacity-80", style: { height: `${height}%` }, title: `${hour.hour}:00 - ${hour.count} submissions` }), _jsx("span", { className: "text-[9px] text-white/70", children: hour.hour })] }, hour.hour));
                                                }) })] })] }), selectedTool.topResponses && selectedTool.topResponses.length > 0 && (_jsxs(Card, { className: "p-4", children: [_jsx("h3", { className: "text-sm font-semibold mb-4", children: "Top Responses" }), _jsx("div", { className: "space-y-3", children: selectedTool.topResponses.map((response, idx) => (_jsxs("div", { className: "space-y-1", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsx("span", { className: "text-sm text-white", children: response.answer }), _jsxs("div", { className: "flex items-center gap-2", children: [_jsx("span", { className: "text-xs text-white/70", children: response.count }), _jsxs(Badge, { variant: "sophomore", className: "text-xs", children: [response.percentage, "%"] })] })] }), _jsx("div", { className: "w-full bg-white/10 rounded-full h-1.5", children: _jsx("div", { className: "h-full bg-[#FFD700] rounded-full transition-all", style: { width: `${response.percentage}%` } }) })] }, idx))) })] }))] }), _jsxs(TabsContent, { value: "engagement", className: "flex-1 overflow-y-auto p-6 space-y-6", children: [_jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [_jsx(MetricCard, { label: "Avg. Completion Time", value: selectedTool.avgCompletionTime, icon: _jsx(Calendar, { className: "h-4 w-4" }) }), _jsx(MetricCard, { label: "Abandonment Rate", value: `${selectedTool.abandonmentRate}%`, icon: _jsx(AlertCircle, { className: "h-4 w-4" }), trendColor: selectedTool.abandonmentRate > 30 ? "red" : "green" }), _jsx(MetricCard, { label: "Participation Rate", value: `${selectedTool.participationRate}%`, icon: _jsx(Users, { className: "h-4 w-4" }), trendColor: "green" })] }), _jsxs(Card, { className: "p-4", children: [_jsx("h3", { className: "text-sm font-semibold mb-4", children: "Engagement Breakdown" }), _jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "flex items-center justify-between p-3 bg-white/10 rounded-lg", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx(Eye, { className: "h-4 w-4 text-white/70" }), _jsx("span", { className: "text-sm", children: "Viewed tool" })] }), _jsx("span", { className: "text-sm font-semibold", children: selectedTool.totalViews })] }), _jsxs("div", { className: "flex items-center justify-between p-3 bg-white/10 rounded-lg", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx(MousePointerClick, { className: "h-4 w-4 text-white/70" }), _jsx("span", { className: "text-sm", children: "Started submission" })] }), _jsx("span", { className: "text-sm font-semibold", children: Math.round(selectedTool.totalViews * 0.7) })] }), _jsxs("div", { className: "flex items-center justify-between p-3 bg-[#FFD700]/10 rounded-lg", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx(CheckCircle2, { className: "h-4 w-4 text-[#FFD700]" }), _jsx("span", { className: "text-sm font-medium", children: "Completed submission" })] }), _jsx("span", { className: "text-sm font-semibold text-[#FFD700]", children: selectedTool.totalSubmissions })] })] })] })] }), _jsxs(TabsContent, { value: "participants", className: "flex-1 overflow-y-auto p-6 space-y-6", children: [_jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [_jsx(MetricCard, { label: "Active Members", value: `${selectedTool.activeMembers} / ${selectedTool.totalMembers}`, icon: _jsx(Users, { className: "h-4 w-4" }) }), _jsx(MetricCard, { label: "Participation Rate", value: `${selectedTool.participationRate}%`, icon: _jsx(TrendingUp, { className: "h-4 w-4" }), trendColor: "green" })] }), _jsxs(Card, { className: "p-4", children: [_jsx("h3", { className: "text-sm font-semibold mb-4", children: "Top Contributors" }), _jsx("div", { className: "space-y-2", children: selectedTool.topContributors.map((contributor, idx) => (_jsxs("div", { className: "flex items-center justify-between p-3 bg-white/10 rounded-lg", children: [_jsxs("div", { className: "flex items-center gap-3", children: [_jsx("div", { className: "flex items-center justify-center w-6 h-6 rounded-full bg-[#FFD700] text-black text-xs font-bold", children: idx + 1 }), _jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-white", children: contributor.name }), _jsx("p", { className: "text-xs text-white/70", children: contributor.handle })] })] }), _jsxs(Badge, { variant: "sophomore", children: [contributor.count, " submissions"] })] }, contributor.handle))) })] })] }), _jsx(TabsContent, { value: "insights", className: "flex-1 overflow-y-auto p-6 space-y-4", children: insights.length > 0 ? (insights.map((insight) => (_jsx(Card, { className: cn("p-4", insight.type === "success" && "border-green-500/50 bg-green-500/5", insight.type === "warning" && "border-yellow-500/50 bg-yellow-500/5", insight.type === "info" && "border-blue-500/50 bg-blue-500/5"), children: _jsxs("div", { className: "flex items-start gap-3", children: [_jsx("div", { className: cn("p-2 rounded-lg", insight.type === "success" && "bg-green-500/10 text-green-500", insight.type === "warning" && "bg-yellow-500/10 text-yellow-500", insight.type === "info" && "bg-blue-500/10 text-blue-500"), children: insight.icon }), _jsxs("div", { className: "flex-1", children: [_jsx("h4", { className: "text-sm font-semibold text-white mb-1", children: insight.title }), _jsx("p", { className: "text-sm text-white/70", children: insight.description }), insight.metric && (_jsx(Badge, { variant: "freshman", className: "mt-2", children: insight.metric }))] })] }) }, insight.id)))) : (_jsxs(Card, { className: "p-12 text-center", children: [_jsx(Lightbulb, { className: "h-12 w-12 mx-auto mb-4 text-white/70" }), _jsx("h3", { className: "text-sm font-semibold mb-2", children: "No insights yet" }), _jsx("p", { className: "text-xs text-white/70", children: "We'll generate insights as your tool gets more usage" })] })) })] })) : (_jsx("div", { className: "flex-1 flex items-center justify-center p-12", children: _jsxs("div", { className: "text-center", children: [_jsx("div", { className: "text-6xl mb-4", children: "\uD83D\uDCCA" }), _jsx("h3", { className: "text-lg font-semibold mb-2", children: "No Tool Selected" }), _jsx("p", { className: "text-sm text-white/70", children: "Select a tool above to view its analytics" })] }) }))] }));
});
HiveLabAnalyticsDashboard.displayName = "HiveLabAnalyticsDashboard";
const MetricCard = ({ label, value, trend, trendColor, icon, }) => {
    const showTrend = trend !== undefined;
    const isPositive = trend && trend > 0;
    return (_jsxs(Card, { className: "p-4", children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsx("span", { className: "text-xs text-white/70", children: label }), _jsx("div", { className: "text-white/70", children: icon })] }), _jsxs("div", { className: "flex items-end justify-between", children: [_jsx("p", { className: "text-2xl font-bold text-white", children: value }), showTrend && (_jsxs("div", { className: cn("flex items-center gap-1 text-xs font-medium", trendColor === "green" && "text-green-500", trendColor === "red" && "text-red-500", !trendColor && (isPositive ? "text-green-500" : "text-red-500")), children: [isPositive ? (_jsx(TrendingUp, { className: "h-3 w-3" })) : (_jsx(TrendingDown, { className: "h-3 w-3" })), _jsxs("span", { children: [Math.abs(trend), "%"] })] }))] })] }));
};
export { HiveLabAnalyticsDashboard };
//# sourceMappingURL=hivelab-analytics-dashboard.js.map