'use client';
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { motion } from '../../components/framer-motion-proxy';
import { cn } from '../../lib/utils';
import { Users, Zap, MapPin, Edit3, Sparkles, Camera, ChevronRight, Plus } from 'lucide-react';
// Widget components
const ProfileHeaderWidget = ({ user, stats = {}, isLoading, onEditProfile, onAvatarChange, onStatClick }) => {
    const [imageError, setImageError] = useState(false);
    if (isLoading) {
        return (_jsx("div", { className: "bg-hive-background-elevated rounded-2xl border border-hive-border-default p-6 animate-pulse", children: _jsxs("div", { className: "flex items-start gap-6", children: [_jsx("div", { className: "w-24 h-24 bg-hive-background-secondary rounded-full" }), _jsxs("div", { className: "flex-1 space-y-3", children: [_jsx("div", { className: "h-8 bg-hive-background-secondary rounded w-48" }), _jsx("div", { className: "h-5 bg-hive-background-secondary rounded w-32" }), _jsx("div", { className: "h-4 bg-hive-background-secondary rounded w-64" })] })] }) }));
    }
    return (_jsx(motion.div, { className: "bg-hive-background-elevated rounded-2xl border border-hive-border-default p-6 hover:border-hive-border-focus hover:shadow-hive-sm transition-all duration-200", initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { duration: 0.3 }, children: _jsxs("div", { className: "flex items-start gap-6", children: [_jsxs("div", { className: "relative group", children: [user.avatar && !imageError ? (_jsx("img", { src: user.avatar, alt: user.name, className: "w-24 h-24 rounded-full object-cover", onError: () => setImageError(true) })) : (_jsx("div", { className: "w-24 h-24 bg-hive-brand-secondary rounded-full flex items-center justify-center", children: _jsx("span", { className: "text-[var(--hive-text-inverse)] text-2xl font-bold", children: user.name?.charAt(0).toUpperCase() || 'U' }) })), _jsx("div", { className: `absolute bottom-1 right-1 w-5 h-5 rounded-full border-3 border-white ${user.status === 'online' ? 'bg-hive-status-success' :
                                user.status === 'busy' ? 'bg-hive-status-error' :
                                    user.status === 'away' ? 'bg-hive-status-warning' :
                                        user.status === 'studying' ? 'bg-hive-status-info' : 'bg-hive-text-tertiary'}` }), _jsx("button", { onClick: () => {
                                const input = document.createElement('input');
                                input.type = 'file';
                                input.accept = 'image/*';
                                input.onchange = (e) => {
                                    const file = e.target.files?.[0];
                                    if (file && onAvatarChange)
                                        onAvatarChange(file);
                                };
                                input.click();
                            }, className: "absolute inset-0 bg-black/0 group-hover:bg-black/60 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-200", children: _jsx(Camera, { className: "text-[var(--hive-text-inverse)]", size: 20 }) })] }), _jsxs("div", { className: "flex-1 min-w-0", children: [_jsxs("div", { className: "flex items-start justify-between mb-3", children: [_jsxs("div", { children: [_jsx("h1", { className: "text-2xl font-bold text-hive-text-primary mb-1", children: user.name }), _jsxs("p", { className: "text-hive-text-secondary", children: ["@", user.handle] }), user.major && (_jsxs("p", { className: "text-hive-text-tertiary text-sm mt-1", children: [user.major, " \u2022 ", user.year || 'Student'] }))] }), _jsx("button", { onClick: onEditProfile, className: "p-2 rounded-lg hover:bg-hive-interactive-hover transition-colors", children: _jsx(Edit3, { size: 16, className: "text-hive-text-tertiary hover:text-hive-text-secondary" }) })] }), user.bio && (_jsx("p", { className: "text-hive-text-primary mb-4 leading-relaxed", children: user.bio })), _jsxs("div", { className: "flex items-center gap-4 text-sm text-hive-text-tertiary mb-4", children: [user.location && (_jsxs("div", { className: "flex items-center gap-1", children: [_jsx(MapPin, { size: 14, className: "text-hive-brand-secondary" }), _jsx("span", { children: user.location })] })), user.school && (_jsx("span", { children: user.school }))] }), _jsx("div", { className: "flex items-center gap-6", children: Object.entries(stats).map(([key, value]) => (_jsxs("button", { onClick: () => onStatClick?.(key), className: "text-center hover:bg-hive-interactive-hover rounded-lg px-3 py-2 transition-colors", children: [_jsx("div", { className: "text-xl font-bold text-hive-text-primary", children: value || 0 }), _jsx("div", { className: "text-xs text-hive-text-tertiary capitalize", children: key })] }, key))) })] })] }) }));
};
// Activities Widget
const ActivitiesWidget = ({ activities = [], isLoading, onActivityClick, onViewAllActivities }) => {
    if (isLoading) {
        return (_jsxs("div", { className: "bg-hive-background-elevated rounded-xl border border-hive-border-default p-4 animate-pulse", children: [_jsxs("div", { className: "flex items-center gap-2 mb-4", children: [_jsx("div", { className: "w-5 h-5 bg-hive-background-secondary rounded" }), _jsx("div", { className: "w-24 h-5 bg-hive-background-secondary rounded" })] }), _jsx("div", { className: "space-y-3", children: [1, 2, 3].map(i => (_jsxs("div", { className: "p-3 bg-hive-background-secondary rounded-lg", children: [_jsx("div", { className: "h-4 bg-hive-background-primary rounded w-3/4 mb-2" }), _jsx("div", { className: "h-3 bg-hive-background-primary rounded w-1/2" })] }, i))) })] }));
    }
    return (_jsxs(motion.div, { className: "bg-hive-background-elevated rounded-xl border border-hive-border-default p-4 hover:border-hive-border-focus hover:shadow-hive-sm transition-all duration-200", initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { duration: 0.3, delay: 0.2 }, children: [_jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx(Sparkles, { size: 16, className: "text-hive-status-warning" }), _jsx("h3", { className: "font-semibold text-hive-text-primary", children: "Recent Activity" })] }), _jsxs("button", { onClick: onViewAllActivities, className: "text-xs text-hive-text-tertiary hover:text-hive-text-secondary flex items-center gap-1", children: ["View All ", _jsx(ChevronRight, { size: 12 })] })] }), activities.length > 0 ? (_jsx("div", { className: "space-y-3", children: activities.slice(0, 4).map((activity) => (_jsxs("button", { onClick: () => onActivityClick?.(activity.id), className: "flex items-start gap-3 p-3 bg-hive-background-primary rounded-lg hover:bg-hive-interactive-hover transition-colors w-full text-left group", children: [_jsx("div", { className: "w-2 h-2 rounded-full bg-hive-brand-secondary mt-2 flex-shrink-0" }), _jsxs("div", { className: "flex-1 min-w-0", children: [_jsx("p", { className: "text-sm font-medium text-hive-text-primary mb-1", children: activity.title }), activity.content && (_jsx("p", { className: "text-xs text-hive-text-tertiary mb-2 line-clamp-2", children: activity.content })), _jsxs("div", { className: "flex items-center gap-2 text-xs text-hive-text-tertiary", children: [_jsx("span", { children: activity.timestamp }), activity.priority === 'high' && _jsx("span", { className: "text-red-400", children: "\u2022" })] })] })] }, activity.id))) })) : (_jsxs("div", { className: "text-center py-6", children: [_jsx(Sparkles, { size: 32, className: "text-hive-text-tertiary mx-auto mb-3" }), _jsx("p", { className: "text-sm text-hive-text-tertiary mb-1", children: "No recent activity" }), _jsx("p", { className: "text-xs text-hive-text-tertiary", children: "Join spaces and start engaging" })] }))] }));
};
// Tools Widget
const ToolsWidget = ({ availableTools = [], createdTools = [], isLoading, onToolClick, onCreateTool, onJoinToolsWaitlist }) => {
    if (isLoading) {
        return (_jsxs("div", { className: "bg-hive-background-elevated rounded-xl border border-hive-border-default p-4 animate-pulse", children: [_jsxs("div", { className: "flex items-center gap-2 mb-4", children: [_jsx("div", { className: "w-5 h-5 bg-hive-background-secondary rounded" }), _jsx("div", { className: "w-20 h-5 bg-hive-background-secondary rounded" })] }), _jsx("div", { className: "grid grid-cols-2 gap-3", children: [1, 2, 3, 4].map(i => (_jsxs("div", { className: "p-3 bg-hive-background-secondary rounded-lg", children: [_jsx("div", { className: "h-4 bg-hive-background-primary rounded w-3/4 mb-2" }), _jsx("div", { className: "h-3 bg-hive-background-primary rounded w-1/2" })] }, i))) })] }));
    }
    const allTools = [...createdTools, ...availableTools];
    return (_jsxs(motion.div, { className: "bg-hive-background-elevated rounded-xl border border-hive-border-default p-4 hover:border-hive-border-focus hover:shadow-hive-sm transition-all duration-200", initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { duration: 0.3, delay: 0.3 }, children: [_jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx(Zap, { size: 16, className: "text-hive-status-success" }), _jsx("h3", { className: "font-semibold text-hive-text-primary", children: "My Tools" })] }), _jsx("button", { onClick: onJoinToolsWaitlist, className: "text-xs text-hive-text-tertiary hover:text-hive-text-secondary flex items-center gap-1", children: _jsx(Plus, { size: 12 }) })] }), allTools.length > 0 ? (_jsx("div", { className: "grid grid-cols-2 gap-3", children: allTools.slice(0, 4).map((tool) => (_jsxs("button", { onClick: () => onToolClick?.(tool.id), className: "p-3 bg-hive-background-primary rounded-lg hover:bg-hive-interactive-hover transition-colors text-left group", children: [_jsxs("div", { className: "flex items-center gap-2 mb-2", children: [_jsx("div", { className: "w-6 h-6 rounded bg-hive-brand-secondary flex items-center justify-center text-[var(--hive-text-inverse)] text-xs", children: tool.name.charAt(0).toUpperCase() }), _jsx("span", { className: "text-sm font-medium text-hive-text-primary truncate", children: tool.name })] }), _jsx("p", { className: "text-xs text-hive-text-tertiary line-clamp-2", children: tool.description }), _jsxs("div", { className: "flex items-center gap-1 mt-2", children: [_jsx("div", { className: `w-1.5 h-1.5 rounded-full ${tool.difficulty === 'beginner' ? 'bg-green-400' :
                                        tool.difficulty === 'intermediate' ? 'bg-yellow-400' :
                                            'bg-red-400'}` }), _jsx("span", { className: "text-xs text-hive-text-tertiary capitalize", children: tool.difficulty })] })] }, tool.id))) })) : (_jsxs("div", { className: "text-center py-6", children: [_jsx(Zap, { size: 32, className: "text-hive-text-tertiary mx-auto mb-3" }), _jsx("p", { className: "text-sm text-hive-text-tertiary mb-1", children: "No tools created yet" }), _jsx("p", { className: "text-xs text-hive-text-tertiary", children: "Start building your first tool" }), _jsx("button", { onClick: onJoinToolsWaitlist, className: "mt-3 px-3 py-1 text-xs bg-hive-brand-secondary text-[var(--hive-text-inverse)] rounded-lg hover:bg-hive-brand-hover transition-colors", children: "Join Waitlist" })] }))] }));
};
const SpacesWidget = ({ spaces = [], isLoading, onSpaceClick, onViewAllSpaces, onJoinSpace }) => {
    if (isLoading) {
        return (_jsxs("div", { className: "bg-hive-background-elevated rounded-xl border border-hive-border-default p-4 animate-pulse", children: [_jsxs("div", { className: "flex items-center gap-2 mb-4", children: [_jsx("div", { className: "w-5 h-5 bg-hive-background-secondary rounded" }), _jsx("div", { className: "w-20 h-5 bg-hive-background-secondary rounded" })] }), _jsx("div", { className: "space-y-3", children: [1, 2, 3].map(i => (_jsxs("div", { className: "flex items-center gap-3 p-3 bg-hive-background-secondary rounded-lg", children: [_jsx("div", { className: "w-8 h-8 bg-hive-background-primary rounded-lg" }), _jsxs("div", { className: "flex-1 space-y-2", children: [_jsx("div", { className: "h-4 bg-hive-background-primary rounded w-3/4" }), _jsx("div", { className: "h-3 bg-hive-background-primary rounded w-1/2" })] })] }, i))) })] }));
    }
    return (_jsxs(motion.div, { className: "bg-hive-background-elevated rounded-xl border border-hive-border-default p-4 hover:border-hive-border-focus hover:shadow-hive-sm transition-all duration-200", initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { duration: 0.3, delay: 0.1 }, children: [_jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx(Users, { size: 16, className: "text-hive-status-info" }), _jsx("h3", { className: "font-semibold text-hive-text-primary", children: "My Spaces" })] }), _jsxs("button", { onClick: onViewAllSpaces, className: "text-xs text-hive-text-tertiary hover:text-hive-text-secondary flex items-center gap-1", children: ["View All ", _jsx(ChevronRight, { size: 12 })] })] }), spaces.length > 0 ? (_jsx("div", { className: "space-y-3 mb-4", children: spaces.slice(0, 4).map((space) => (_jsxs("button", { onClick: () => onSpaceClick?.(space.id), className: "flex items-center gap-3 p-3 bg-hive-background-primary rounded-lg hover:bg-hive-interactive-hover transition-colors w-full text-left group", children: [_jsx("div", { className: "w-8 h-8 rounded-lg bg-hive-brand-secondary flex items-center justify-center text-[var(--hive-text-inverse)] text-xs font-bold flex-shrink-0", children: space.name.charAt(0).toUpperCase() }), _jsxs("div", { className: "flex-1 min-w-0", children: [_jsxs("div", { className: "flex items-center gap-2 mb-1", children: [_jsx("p", { className: "text-sm font-medium text-hive-text-primary truncate", children: space.name }), space.unreadCount && space.unreadCount > 0 && (_jsx("span", { className: "px-1.5 py-0.5 bg-hive-brand-secondary text-[var(--hive-text-inverse)] rounded-full text-xs", children: space.unreadCount }))] }), _jsxs("p", { className: "text-xs text-hive-text-tertiary", children: [space.memberCount, " members \u2022 ", space.userRole] })] }), _jsx(ChevronRight, { size: 14, className: "text-hive-text-tertiary group-hover:text-hive-text-secondary transition-colors" })] }, space.id))) })) : (_jsxs("div", { className: "text-center py-6", children: [_jsx(Users, { size: 32, className: "text-hive-text-tertiary mx-auto mb-3" }), _jsx("p", { className: "text-sm text-hive-text-tertiary mb-1", children: "No spaces joined yet" }), _jsx("p", { className: "text-xs text-hive-text-tertiary", children: "Discover communities that match your interests" })] })), _jsx("button", { onClick: spaces.length > 0 ? onViewAllSpaces : onJoinSpace, className: "w-full py-2 px-4 border border-hive-border-default rounded-lg text-sm text-hive-text-secondary hover:text-hive-text-primary hover:border-hive-border-focus transition-colors", children: spaces.length > 0 ? 'View All Spaces' : 'Find Spaces' })] }));
};
// Main component
export const UnifiedProfileDashboard = ({ user, spaces = [], activities = [], availableTools = [], createdTools = [], calendarEvents = [], calendarConflicts = [], stats = {}, layout = 'desktop', showBuilder = true, showCalendar = true, isLoading = {}, onSpaceClick, onActivityClick, onToolClick, onCreateTool, onBecomeBuilder, onJoinSpace, onViewAllSpaces, onViewAllActivities, onEditProfile, onMuteSpace, onPinSpace, onLeaveSpace, onQuickPost, onJoinToolsWaitlist, onCreateEvent, onUpdateEvent, onDeleteEvent, onResolveConflict, onAvatarChange, onStatClick }) => {
    // Responsive layout classes
    const getLayoutClasses = () => {
        switch (layout) {
            case 'mobile':
                return 'grid-cols-1 gap-4';
            case 'tablet':
                return 'grid-cols-2 gap-6';
            default:
                return 'grid-cols-1 lg:grid-cols-3 gap-6';
        }
    };
    return (_jsxs("div", { className: "max-w-7xl mx-auto p-6", children: [_jsx("div", { className: "mb-8", children: _jsx(ProfileHeaderWidget, { user: user, stats: stats, isLoading: isLoading.profile, onEditProfile: onEditProfile, onAvatarChange: onAvatarChange, onStatClick: onStatClick }) }), _jsxs("div", { className: cn('grid', getLayoutClasses()), children: [_jsx("div", { className: layout === 'desktop' ? 'lg:col-span-1' : '', children: _jsx(SpacesWidget, { spaces: spaces, isLoading: isLoading.spaces, onSpaceClick: onSpaceClick, onViewAllSpaces: onViewAllSpaces, onJoinSpace: onJoinSpace }) }), _jsx("div", { className: layout === 'desktop' ? 'lg:col-span-1' : '', children: _jsx(ActivitiesWidget, { activities: activities, isLoading: isLoading.activities, onActivityClick: onActivityClick, onViewAllActivities: onViewAllActivities }) }), _jsx("div", { className: layout === 'desktop' ? 'lg:col-span-1' : '', children: _jsx(ToolsWidget, { availableTools: availableTools, createdTools: createdTools, isLoading: isLoading.tools, onToolClick: onToolClick, onCreateTool: onCreateTool, onJoinToolsWaitlist: onJoinToolsWaitlist }) })] })] }));
};
export default UnifiedProfileDashboard;
//# sourceMappingURL=unified-profile-dashboard.js.map