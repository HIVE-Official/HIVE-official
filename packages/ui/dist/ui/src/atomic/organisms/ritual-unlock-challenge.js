'use client';
import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { Card } from '../atoms/card.js';
import { Button } from '../atoms/button.js';
import { Badge } from '../atoms/badge.js';
import { PercentBar } from '../atoms/percent-bar.js';
import { cn } from '../../lib/utils.js';
export const RitualUnlockChallenge = ({ title = 'Unlock Challenge', description, goalMetric, targetValue, currentValue, deadline, reward, milestones = [], recentActivity = [], onContribute, encouragement = 'We can do this!', className, ...props }) => {
    const percentComplete = Math.min(100, Math.round((currentValue / targetValue) * 100));
    const remaining = Math.max(0, targetValue - currentValue);
    const isCompleted = currentValue >= targetValue;
    return (_jsxs(Card, { className: cn('border-white/10 bg-white/5 p-5', className), ...props, children: [_jsxs("div", { className: "mb-2 flex items-center justify-between", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx("div", { className: "text-xs uppercase tracking-[0.18em] text-white/50", children: "Unlock Challenge" }), isCompleted && (_jsx(Badge, { variant: "default", className: "bg-green-500/20 text-green-400", children: "\u2705 Complete" }))] }), deadline && !isCompleted && (_jsxs("div", { className: "text-xs text-white/60", children: ["\u23F0 ", deadline] }))] }), _jsx("h3", { className: "text-lg font-semibold text-white", children: title }), description && _jsx("p", { className: "mt-1 text-sm text-white/70", children: description }), _jsxs("div", { className: "my-4 rounded-lg border border-white/20 bg-gradient-to-br from-yellow-500/10 to-orange-500/10 p-4", children: [_jsxs("div", { className: "mb-2 flex items-center justify-between", children: [_jsx("div", { className: "text-xs font-medium text-yellow-400", children: "\uD83D\uDD12 LOCKED REWARD" }), reward.preview && (_jsx("div", { className: "h-8 w-8 rounded border border-white/20 bg-white/10" }))] }), _jsx("div", { className: "font-semibold text-white", children: reward.name }), _jsx("div", { className: "mt-1 text-xs text-white/60", children: reward.teaser })] }), _jsxs("div", { className: "mb-4", children: [_jsxs("div", { className: "mb-2 flex items-center justify-between", children: [_jsx("div", { className: "text-sm text-white/80", children: "Campus Progress" }), _jsxs("div", { className: "text-sm font-bold text-white", children: [currentValue.toLocaleString(), " / ", targetValue.toLocaleString(), " ", goalMetric] })] }), _jsx(PercentBar, { value: percentComplete }), _jsxs("div", { className: "mt-1 flex items-center justify-between text-xs", children: [_jsxs("span", { className: "text-white/60", children: [percentComplete, "%"] }), !isCompleted && (_jsxs("span", { className: "font-medium text-[var(--ritual-urgent,#FF6B6B)]", children: ["Need ", remaining.toLocaleString(), " more!"] }))] })] }), milestones.length > 0 && (_jsxs("div", { className: "mb-4", children: [_jsx("div", { className: "mb-2 text-xs font-medium text-white/60", children: "Milestones" }), _jsx("div", { className: "space-y-2", children: milestones.map((milestone, idx) => (_jsxs("div", { className: cn('flex items-center gap-2 rounded border p-2 text-xs', milestone.completed
                                ? 'border-green-500/40 bg-green-500/10 text-green-400'
                                : 'border-white/10 bg-white/5 text-white/60'), children: [_jsx("div", { className: "shrink-0", children: milestone.completed ? 'âœ…' : `${milestone.threshold}` }), _jsx("div", { className: "flex-1 truncate", children: milestone.completed ? milestone.message : milestone.unlock })] }, idx))) })] })), recentActivity.length > 0 && (_jsxs("div", { className: "mb-4", children: [_jsx("div", { className: "mb-2 text-xs font-medium text-white/60", children: "Recent Activity" }), _jsx("div", { className: "space-y-1", children: recentActivity.slice(0, 3).map((activity) => (_jsxs("div", { className: "flex items-center gap-2 text-xs text-white/50", children: [_jsx("div", { className: "h-6 w-6 rounded-full bg-white/10" }), _jsxs("div", { className: "flex-1 truncate", children: [_jsx("span", { className: "font-medium text-white/70", children: activity.userName }), ' ', activity.action] })] }, activity.id))) })] })), !isCompleted && (_jsxs(_Fragment, { children: [_jsx("div", { className: "mb-3 text-center text-sm font-medium text-white/80", children: encouragement }), onContribute && (_jsx(Button, { onClick: onContribute, className: "w-full", children: "Contribute Now" }))] })), isCompleted && (_jsxs("div", { className: "rounded-lg border border-green-500/40 bg-green-500/10 p-3 text-center", children: [_jsx("div", { className: "mb-1 text-sm font-bold text-green-400", children: "\uD83C\uDF89 Goal Achieved!" }), _jsx("div", { className: "text-xs text-white/70", children: reward.description })] }))] }));
};
//# sourceMappingURL=ritual-unlock-challenge.js.map