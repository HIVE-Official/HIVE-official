'use client';
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { motion } from '../framer-motion-proxy';
import { BarChart3, Users, TrendingUp, TrendingDown, Activity, Calendar, MessageSquare, Zap, ChevronRight, Download, RefreshCw, AlertTriangle, CheckCircle } from 'lucide-react';
import { HiveCard } from '../hive-card';
import { HiveButton } from '../hive-button';
export const SpaceAnalyticsDashboard = ({ analytics, isLeader = false, onRefresh, onExportData, onUpdateSettings }) => {
    const [activeTab, setActiveTab] = useState('overview');
    const [timeRange, setTimeRange] = useState('30d');
    const getHealthColor = (score) => {
        if (score >= 80)
            return 'text-green-400';
        if (score >= 60)
            return 'text-yellow-400';
        return 'text-red-400';
    };
    const getHealthBgColor = (score) => {
        if (score >= 80)
            return 'bg-green-500/10';
        if (score >= 60)
            return 'bg-yellow-500/10';
        return 'bg-red-500/10';
    };
    const getTrendIcon = (trend, isUp = false) => {
        if (trend === 'up' || isUp)
            return _jsx(TrendingUp, { className: "h-4 w-4 text-green-400" });
        if (trend === 'down' || (!isUp && trend !== 'stable'))
            return _jsx(TrendingDown, { className: "h-4 w-4 text-red-400" });
        return _jsx(Activity, { className: "h-4 w-4 text-gray-400" });
    };
    if (!isLeader) {
        return (_jsxs(HiveCard, { className: "p-6 text-center", children: [_jsx("div", { className: "w-12 h-12 bg-gray-700 rounded-lg flex items-center justify-center mx-auto mb-4", children: _jsx(BarChart3, { className: "h-6 w-6 text-gray-400" }) }), _jsx("h3", { className: "text-lg font-semibold text-white mb-2", children: "Analytics Dashboard" }), _jsx("p", { className: "text-gray-400", children: "Space analytics are available to space leaders and moderators." })] }));
    }
    return (_jsxs("div", { className: "space-y-6", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsxs("h2", { className: "text-2xl font-bold text-white", children: [analytics.spaceName, " Analytics"] }), _jsxs("p", { className: "text-gray-400 mt-1", children: ["Last updated ", new Date(analytics.lastUpdated).toLocaleString()] })] }), _jsxs("div", { className: "flex items-center gap-3", children: [_jsx("div", { className: "flex items-center bg-gray-800 rounded-lg p-1", children: ['7d', '30d', '90d'].map((range) => (_jsx("button", { onClick: () => setTimeRange(range), className: `px-3 py-1 text-sm rounded transition-colors ${timeRange === range
                                        ? 'bg-[#FFD700] text-black'
                                        : 'text-gray-400 hover:text-white'}`, children: range }, range))) }), _jsxs(HiveButton, { variant: "outline", size: "sm", onClick: onRefresh, children: [_jsx(RefreshCw, { className: "h-4 w-4 mr-2" }), "Refresh"] }), _jsxs(HiveButton, { variant: "outline", size: "sm", onClick: onExportData, children: [_jsx(Download, { className: "h-4 w-4 mr-2" }), "Export"] })] })] }), _jsxs(HiveCard, { className: `p-6 ${getHealthBgColor(analytics.healthMetrics.overallHealth)}`, children: [_jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsxs("div", { children: [_jsx("h3", { className: "text-lg font-semibold text-white mb-1", children: "Space Health Score" }), _jsxs("div", { className: "flex items-center gap-2", children: [_jsx("span", { className: `text-3xl font-bold ${getHealthColor(analytics.healthMetrics.overallHealth)}`, children: analytics.healthMetrics.overallHealth }), _jsx("span", { className: "text-gray-400", children: "/ 100" }), getTrendIcon(analytics.healthMetrics.engagementTrend)] })] }), _jsxs("div", { className: "text-right", children: [_jsx("div", { className: "text-sm text-gray-400 mb-2", children: "Engagement Trend" }), _jsxs("div", { className: "flex items-center gap-1", children: [getTrendIcon(analytics.healthMetrics.engagementTrend), _jsx("span", { className: "text-white capitalize", children: analytics.healthMetrics.engagementTrend })] })] })] }), analytics.healthMetrics.alerts.length > 0 && (_jsx("div", { className: "space-y-2", children: analytics.healthMetrics.alerts.slice(0, 3).map((alert, index) => (_jsxs("div", { className: "flex items-center gap-2 text-sm", children: [alert.type === 'critical' && _jsx(AlertTriangle, { className: "h-4 w-4 text-red-400" }), alert.type === 'warning' && _jsx(AlertTriangle, { className: "h-4 w-4 text-yellow-400" }), alert.type === 'info' && _jsx(CheckCircle, { className: "h-4 w-4 text-blue-400" }), _jsx("span", { className: "text-gray-300", children: alert.message })] }, index))) }))] }), _jsxs("div", { className: "flex items-center space-x-1 bg-gray-800 rounded-lg p-1", children: [[
                        { key: 'overview', label: 'Overview', icon: BarChart3 },
                        { key: 'members', label: 'Members', icon: Users },
                        { key: 'content', label: 'Content', icon: MessageSquare },
                        { key: 'events', label: 'Events', icon: Calendar },
                        { key: 'tools', label: 'Tools', icon: Zap }
                    ].map(({ key, label, icon: Icon })), " => (", _jsxs("button", { onClick: () => setActiveTab(key), className: `flex items-center gap-2 px-4 py-2 text-sm rounded transition-colors ${activeTab === key
                            ? 'bg-[#FFD700] text-black'
                            : 'text-gray-400 hover:text-white hover:bg-gray-700'}`, children: [_jsx(Icon, { className: "h-4 w-4" }), label] }, key), "))}"] }), _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { duration: 0.3 }, children: [activeTab === 'overview' && (_jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6", children: [_jsxs(HiveCard, { className: "p-6", children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsx(Users, { className: "h-5 w-5 text-blue-400" }), getTrendIcon('', analytics.membershipData.memberGrowthRate > 0)] }), _jsx("div", { className: "text-2xl font-bold text-white", children: analytics.membershipData.totalMembers }), _jsx("div", { className: "text-sm text-gray-400", children: "Total Members" }), _jsxs("div", { className: "text-xs text-green-400 mt-1", children: ["+", analytics.membershipData.newMembers, " this month"] })] }), _jsxs(HiveCard, { className: "p-6", children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsx(Activity, { className: "h-5 w-5 text-green-400" }), _jsxs("span", { className: "text-xs text-gray-400", children: [analytics.membershipData.averageEngagement, "%"] })] }), _jsx("div", { className: "text-2xl font-bold text-white", children: analytics.membershipData.activeMembers }), _jsx("div", { className: "text-sm text-gray-400", children: "Active Members" }), _jsx("div", { className: "text-xs text-gray-400 mt-1", children: "Last 7 days" })] }), _jsxs(HiveCard, { className: "p-6", children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsx(MessageSquare, { className: "h-5 w-5 text-purple-400" }), getTrendIcon('', analytics.contentData.contentGrowthRate > 0)] }), _jsx("div", { className: "text-2xl font-bold text-white", children: analytics.contentData.totalPosts }), _jsx("div", { className: "text-sm text-gray-400", children: "Total Posts" }), _jsxs("div", { className: "text-xs text-blue-400 mt-1", children: [analytics.contentData.postsThisWeek, " this week"] })] }), _jsxs(HiveCard, { className: "p-6", children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsx(Calendar, { className: "h-5 w-5 text-orange-400" }), _jsxs("span", { className: "text-xs text-gray-400", children: [analytics.eventData.averageAttendance, "% avg"] })] }), _jsx("div", { className: "text-2xl font-bold text-white", children: analytics.eventData.totalEvents }), _jsx("div", { className: "text-sm text-gray-400", children: "Events Hosted" }), _jsxs("div", { className: "text-xs text-orange-400 mt-1", children: [analytics.eventData.upcomingEvents, " upcoming"] })] })] })), activeTab === 'members' && (_jsx("div", { className: "space-y-6", children: _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-6", children: [_jsxs(HiveCard, { className: "p-6", children: [_jsx("h3", { className: "font-semibold text-white mb-4", children: "Member Growth" }), _jsxs("div", { className: "space-y-3", children: [_jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-400", children: "New Members" }), _jsxs("span", { className: "text-green-400", children: ["+", analytics.membershipData.newMembers] })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-400", children: "Members Left" }), _jsxs("span", { className: "text-red-400", children: ["-", analytics.membershipData.churnMembers] })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-400", children: "Growth Rate" }), _jsxs("span", { className: analytics.membershipData.memberGrowthRate > 0 ? 'text-green-400' : 'text-red-400', children: [analytics.membershipData.memberGrowthRate > 0 ? '+' : '', analytics.membershipData.memberGrowthRate, "%"] })] })] })] }), _jsxs(HiveCard, { className: "p-6", children: [_jsx("h3", { className: "font-semibold text-white mb-4", children: "Engagement Levels" }), _jsxs("div", { className: "space-y-3", children: [_jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-400", children: "Highly Active" }), _jsx("span", { className: "text-green-400", children: Math.round(analytics.membershipData.activeMembers * 0.3) })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-400", children: "Moderately Active" }), _jsx("span", { className: "text-yellow-400", children: Math.round(analytics.membershipData.activeMembers * 0.5) })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-400", children: "Low Activity" }), _jsx("span", { className: "text-red-400", children: analytics.membershipData.totalMembers - analytics.membershipData.activeMembers })] })] })] }), _jsxs(HiveCard, { className: "p-6", children: [_jsx("h3", { className: "font-semibold text-white mb-4", children: "Member Roles" }), _jsxs("div", { className: "space-y-3", children: [_jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-400", children: "Leaders" }), _jsx("span", { className: "text-[#FFD700]", children: "3" })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-400", children: "Builders" }), _jsx("span", { className: "text-purple-400", children: Math.round(analytics.membershipData.totalMembers * 0.1) })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-400", children: "Members" }), _jsx("span", { className: "text-blue-400", children: Math.round(analytics.membershipData.totalMembers * 0.85) })] })] })] })] }) })), activeTab === 'content' && (_jsx("div", { className: "space-y-6", children: _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [_jsxs(HiveCard, { className: "p-6", children: [_jsx("h3", { className: "font-semibold text-white mb-4", children: "Content Performance" }), _jsx("div", { className: "space-y-4", children: analytics.contentData.topContentTypes.map((content, index) => (_jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("div", { className: "text-white capitalize", children: content.type.replace('_', ' ') }), _jsxs("div", { className: "text-sm text-gray-400", children: [content.count, " posts"] })] }), _jsxs("div", { className: "text-right", children: [_jsxs("div", { className: "text-white", children: [content.engagement, "%"] }), _jsx("div", { className: "text-sm text-gray-400", children: "engagement" })] })] }, index))) })] }), _jsxs(HiveCard, { className: "p-6", children: [_jsx("h3", { className: "font-semibold text-white mb-4", children: "Content Moderation" }), _jsxs("div", { className: "space-y-3", children: [_jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-400", children: "Pending Review" }), _jsx("span", { className: "text-yellow-400", children: analytics.contentData.moderationQueue })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-400", children: "Auto-Approved" }), _jsx("span", { className: "text-green-400", children: analytics.contentData.totalPosts - analytics.contentData.moderationQueue })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-400", children: "Approval Rate" }), _jsx("span", { className: "text-green-400", children: "94%" })] })] }), analytics.contentData.moderationQueue > 0 && (_jsxs(HiveButton, { className: "w-full mt-4", size: "sm", children: ["Review Queue ", _jsx(ChevronRight, { className: "h-4 w-4 ml-1" })] }))] })] }) })), activeTab === 'events' && (_jsx("div", { className: "space-y-6", children: _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [_jsxs(HiveCard, { className: "p-6", children: [_jsx("h3", { className: "font-semibold text-white mb-4", children: "Event Performance" }), _jsx("div", { className: "space-y-4", children: analytics.eventData.topEventTypes.map((event, index) => (_jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("div", { className: "text-white capitalize", children: event.type.replace('_', ' ') }), _jsxs("div", { className: "text-sm text-gray-400", children: [event.count, " events"] })] }), _jsxs("div", { className: "text-right", children: [_jsxs("div", { className: "text-white", children: [event.avgAttendance, "%"] }), _jsx("div", { className: "text-sm text-gray-400", children: "avg attendance" })] })] }, index))) })] }), _jsxs(HiveCard, { className: "p-6", children: [_jsx("h3", { className: "font-semibold text-white mb-4", children: "Event Insights" }), _jsxs("div", { className: "space-y-3", children: [_jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-400", children: "Completion Rate" }), _jsxs("span", { className: "text-green-400", children: [analytics.eventData.eventCompletionRate, "%"] })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-400", children: "Avg Attendance" }), _jsxs("span", { className: "text-blue-400", children: [analytics.eventData.averageAttendance, "%"] })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-400", children: "No-show Rate" }), _jsxs("span", { className: "text-red-400", children: [100 - analytics.eventData.averageAttendance, "%"] })] })] })] })] }) })), activeTab === 'tools' && (_jsx("div", { className: "space-y-6", children: _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [_jsxs(HiveCard, { className: "p-6", children: [_jsx("h3", { className: "font-semibold text-white mb-4", children: "Tool Usage" }), _jsx("div", { className: "space-y-4", children: analytics.toolData.topTools.map((tool, index) => (_jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("div", { className: "text-white", children: tool.name }), _jsxs("div", { className: "text-sm text-gray-400", children: [tool.usage, " uses"] })] }), _jsxs("div", { className: "text-right", children: [_jsxs("div", { className: "text-white", children: [tool.satisfaction, "%"] }), _jsx("div", { className: "text-sm text-gray-400", children: "satisfaction" })] })] }, index))) })] }), _jsxs(HiveCard, { className: "p-6", children: [_jsx("h3", { className: "font-semibold text-white mb-4", children: "Tool Health" }), _jsxs("div", { className: "space-y-3", children: [_jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-400", children: "Active Tools" }), _jsx("span", { className: "text-green-400", children: analytics.toolData.activeTools })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-400", children: "Total Usage" }), _jsx("span", { className: "text-blue-400", children: analytics.toolData.toolUsage.toLocaleString() })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-400", children: "Avg per Tool" }), _jsx("span", { className: "text-purple-400", children: Math.round(analytics.toolData.toolUsage / analytics.toolData.totalTools) })] })] })] })] }) }))] }, activeTab), analytics.healthMetrics.recommendations.length > 0 && (_jsxs(HiveCard, { className: "p-6", children: [_jsx("h3", { className: "font-semibold text-white mb-4", children: "Recommendations" }), _jsx("div", { className: "space-y-3", children: analytics.healthMetrics.recommendations.map((rec, index) => (_jsxs("div", { className: "flex items-start gap-3 p-3 bg-gray-800 rounded-lg", children: [_jsx("div", { className: `w-2 h-2 rounded-full mt-2 ${rec.priority === 'high' ? 'bg-red-400' : rec.priority === 'medium' ? 'bg-yellow-400' : 'bg-blue-400'}` }), _jsxs("div", { className: "flex-1", children: [_jsx("div", { className: "text-white", children: rec.action }), _jsxs("div", { className: "text-sm text-gray-400 capitalize", children: [rec.priority, " priority"] })] }), _jsx(HiveButton, { variant: "ghost", size: "sm", children: _jsx(ChevronRight, { className: "h-4 w-4" }) })] }, index))) })] }))] }));
};
//# sourceMappingURL=space-analytics-dashboard.js.map