'use client';
import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { Card, CardContent, CardHeader, CardTitle } from '../ui/card';
import { Badge } from '../../atomic/atoms/badge';
import { ButtonEnhanced as Button } from '../../atomic/atoms/button-enhanced';
import { Text } from '../../atomic/atoms/text';
import { cn } from '../../lib/utils';
import { Shield, Users, Home, Settings, Flag, AlertTriangle, CheckCircle, BarChart3, Database, Bell, Eye, Building2, GraduationCap, Zap, FileText, Calendar, MessageSquare, Monitor, HardDrive, Lock } from 'lucide-react';
export function UBAdminMetricsOverview({ metrics, className }) {
    const { students, spaces, tools, rituals, content, system } = metrics;
    const formatUptime = (seconds) => {
        const days = Math.floor(seconds / (24 * 60 * 60));
        const hours = Math.floor((seconds % (24 * 60 * 60)) / (60 * 60));
        const minutes = Math.floor((seconds % (60 * 60)) / 60);
        if (days > 0)
            return `${days}d ${hours}h ${minutes}m`;
        if (hours > 0)
            return `${hours}h ${minutes}m`;
        return `${minutes}m`;
    };
    const formatCurrency = (amount) => {
        return new Intl.NumberFormat('en-US', {
            style: 'currency',
            currency: 'USD',
            minimumFractionDigits: 0,
            maximumFractionDigits: 0
        }).format(amount);
    };
    return (_jsxs("div", { className: cn("space-y-6", className), children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { className: "flex items-center gap-3", children: [_jsx("div", { className: "p-2 rounded-lg bg-blue-400/10", children: _jsx(Shield, { className: "h-6 w-6 text-blue-400" }) }), _jsxs("div", { children: [_jsxs(Text, { variant: "h2", weight: "bold", children: [metrics.platform.name, " Admin Dashboard"] }), _jsxs(Text, { variant: "body-sm", color: "secondary", children: [metrics.platform.university, " \u2022 ", metrics.platform.campus, " \u2022 Version ", metrics.platform.version] })] })] }), _jsx(Badge, { variant: metrics.platform.environment === 'production' ? 'primary' : 'secondary', children: metrics.platform.environment.toUpperCase() })] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4", children: [_jsxs(Card, { className: "border-[var(--hive-border-default)]", children: [_jsxs(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [_jsx(CardTitle, { className: "text-sm font-medium", children: "UB Students" }), _jsx(Users, { className: "h-4 w-4 text-[var(--hive-text-secondary)]" })] }), _jsxs(CardContent, { children: [_jsx("div", { className: "text-2xl font-bold text-[var(--hive-text-primary)]", children: students.total.toLocaleString() }), _jsxs("div", { className: "flex items-center gap-2 mt-1", children: [_jsxs(Text, { variant: "body-xs", color: "secondary", children: [students.active, " active"] }), _jsxs(Text, { variant: "body-xs", color: "success", children: ["+", students.newThisWeek, " this week"] })] })] })] }), _jsxs(Card, { className: "border-[var(--hive-border-default)]", children: [_jsxs(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [_jsx(CardTitle, { className: "text-sm font-medium", children: "Campus Spaces" }), _jsx(Home, { className: "h-4 w-4 text-[var(--hive-text-secondary)]" })] }), _jsxs(CardContent, { children: [_jsx("div", { className: "text-2xl font-bold text-[var(--hive-text-primary)]", children: spaces.active }), _jsxs("div", { className: "flex items-center gap-2 mt-1", children: [_jsxs(Text, { variant: "body-xs", color: "secondary", children: ["of ", spaces.total, " total"] }), spaces.needsModeration > 0 && (_jsxs(Text, { variant: "body-xs", color: "warning", children: [spaces.needsModeration, " pending"] }))] })] })] }), _jsxs(Card, { className: "border-[var(--hive-border-default)]", children: [_jsxs(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [_jsx(CardTitle, { className: "text-sm font-medium", children: "Campus Tools" }), _jsx(Zap, { className: "h-4 w-4 text-[var(--hive-text-secondary)]" })] }), _jsxs(CardContent, { children: [_jsx("div", { className: "text-2xl font-bold text-[var(--hive-text-primary)]", children: tools.active }), _jsxs("div", { className: "flex items-center gap-2 mt-1", children: [_jsxs(Text, { variant: "body-xs", color: "secondary", children: [tools.deployments, " deployments"] }), tools.pendingReview > 0 && (_jsxs(Text, { variant: "body-xs", color: "warning", children: [tools.pendingReview, " pending"] }))] })] })] }), _jsxs(Card, { className: "border-[var(--hive-border-default)]", children: [_jsxs(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [_jsx(CardTitle, { className: "text-sm font-medium", children: "System Health" }), _jsx(Monitor, { className: "h-4 w-4 text-[var(--hive-text-secondary)]" })] }), _jsxs(CardContent, { children: [_jsxs("div", { className: "flex items-center space-x-2", children: [_jsx("div", { className: cn("w-3 h-3 rounded-full", system.status === 'healthy' ? 'bg-green-400' :
                                                    system.status === 'warning' ? 'bg-yellow-400' : 'bg-red-400') }), _jsx(Text, { variant: "body-sm", weight: "medium", className: "capitalize", children: system.status })] }), _jsxs(Text, { variant: "body-xs", color: "secondary", className: "mt-1", children: ["Uptime: ", formatUptime(system.uptime)] })] })] })] }), _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [_jsxs(Card, { className: "border-[var(--hive-border-default)]", children: [_jsx(CardHeader, { children: _jsxs(CardTitle, { className: "flex items-center gap-2", children: [_jsx(GraduationCap, { className: "h-5 w-5" }), "Student Demographics"] }) }), _jsxs(CardContent, { className: "space-y-4", children: [_jsxs("div", { children: [_jsx(Text, { variant: "body-sm", weight: "medium", className: "mb-2", children: "By Class Year" }), _jsx("div", { className: "space-y-2", children: Object.entries(students.byYear).map(([year, count]) => (_jsxs("div", { className: "flex justify-between items-center", children: [_jsx(Text, { variant: "body-sm", color: "secondary", children: year }), _jsx(Badge, { variant: "secondary", children: count })] }, year))) })] }), _jsxs("div", { children: [_jsx(Text, { variant: "body-sm", weight: "medium", className: "mb-2", children: "Verification Status" }), _jsxs("div", { className: "grid grid-cols-2 gap-4", children: [_jsxs("div", { className: "text-center p-2 rounded-lg bg-[var(--hive-background-primary)]", children: [_jsx(Text, { variant: "body-lg", weight: "bold", color: "success", children: students.verified }), _jsx(Text, { variant: "body-xs", color: "secondary", children: "Verified" })] }), _jsxs("div", { className: "text-center p-2 rounded-lg bg-[var(--hive-background-primary)]", children: [_jsx(Text, { variant: "body-lg", weight: "bold", color: "warning", children: students.pendingVerification }), _jsx(Text, { variant: "body-xs", color: "secondary", children: "Pending" })] })] })] })] })] }), _jsxs(Card, { className: "border-[var(--hive-border-default)]", children: [_jsx(CardHeader, { children: _jsxs(CardTitle, { className: "flex items-center gap-2", children: [_jsx(Flag, { className: "h-5 w-5" }), "Content Moderation"] }) }), _jsxs(CardContent, { className: "space-y-4", children: [_jsxs("div", { className: "grid grid-cols-2 gap-4", children: [_jsxs("div", { className: "text-center p-3 rounded-lg bg-[var(--hive-background-primary)]", children: [_jsx(Text, { variant: "body-lg", weight: "bold", color: "primary", children: content.posts }), _jsx(Text, { variant: "body-xs", color: "secondary", children: "Total Posts" })] }), _jsxs("div", { className: "text-center p-3 rounded-lg bg-[var(--hive-background-primary)]", children: [_jsx(Text, { variant: "body-lg", weight: "bold", color: "primary", children: content.comments }), _jsx(Text, { variant: "body-xs", color: "secondary", children: "Comments" })] })] }), _jsxs("div", { className: "space-y-2", children: [_jsxs("div", { className: "flex justify-between items-center", children: [_jsx(Text, { variant: "body-sm", color: "secondary", children: "Reported Content" }), _jsx(Badge, { variant: "warning", children: content.reported })] }), _jsxs("div", { className: "flex justify-between items-center", children: [_jsx(Text, { variant: "body-sm", color: "secondary", children: "Auto-Flagged" }), _jsx(Badge, { variant: "secondary", children: content.flagged })] }), _jsxs("div", { className: "flex justify-between items-center", children: [_jsx(Text, { variant: "body-sm", color: "secondary", children: "Approved" }), _jsx(Badge, { variant: "success", children: content.approved })] })] })] })] })] }), _jsxs(Card, { className: "border-[var(--hive-border-default)]", children: [_jsx(CardHeader, { children: _jsxs(CardTitle, { className: "flex items-center gap-2", children: [_jsx(BarChart3, { className: "h-5 w-5" }), "System Performance & Costs"] }) }), _jsx(CardContent, { children: _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-4 gap-4", children: [_jsxs("div", { className: "text-center p-3 rounded-lg bg-[var(--hive-background-primary)]", children: [_jsxs(Text, { variant: "body-lg", weight: "bold", color: "primary", children: [system.performance.responseTime, "ms"] }), _jsx(Text, { variant: "body-xs", color: "secondary", children: "Avg Response Time" })] }), _jsxs("div", { className: "text-center p-3 rounded-lg bg-[var(--hive-background-primary)]", children: [_jsxs(Text, { variant: "body-lg", weight: "bold", color: "primary", children: [(system.performance.errorRate * 100).toFixed(2), "%"] }), _jsx(Text, { variant: "body-xs", color: "secondary", children: "Error Rate" })] }), _jsxs("div", { className: "text-center p-3 rounded-lg bg-[var(--hive-background-primary)]", children: [_jsxs(Text, { variant: "body-lg", weight: "bold", color: "primary", children: [system.storage.percentage, "%"] }), _jsx(Text, { variant: "body-xs", color: "secondary", children: "Storage Used" })] }), _jsxs("div", { className: "text-center p-3 rounded-lg bg-[var(--hive-background-primary)]", children: [_jsx(Text, { variant: "body-lg", weight: "bold", color: "primary", children: formatCurrency(system.costs.monthly) }), _jsx(Text, { variant: "body-xs", color: "secondary", children: "Monthly Cost" })] })] }) })] })] }));
}
export function UBModerationQueue({ items, onApprove, onReject, onEscalate, onView, className }) {
    const formatTimeAgo = (timestamp) => {
        const date = new Date(timestamp);
        const now = new Date();
        const diff = now.getTime() - date.getTime();
        const hours = Math.floor(diff / (1000 * 60 * 60));
        const days = Math.floor(hours / 24);
        if (days > 0)
            return `${days}d ago`;
        if (hours > 0)
            return `${hours}h ago`;
        return 'Just now';
    };
    const getSeverityColor = (severity) => {
        switch (severity) {
            case 'critical': return 'text-red-400 bg-red-900/20';
            case 'high': return 'text-orange-400 bg-orange-900/20';
            case 'medium': return 'text-yellow-400 bg-yellow-900/20';
            case 'low': return 'text-green-400 bg-green-900/20';
            default: return 'text-gray-400 bg-gray-900/20';
        }
    };
    const getTypeIcon = (type) => {
        switch (type) {
            case 'space': return Home;
            case 'tool': return Zap;
            case 'post': return MessageSquare;
            case 'comment': return MessageSquare;
            case 'user': return Users;
            case 'ritual': return Calendar;
            default: return FileText;
        }
    };
    if (items.length === 0) {
        return (_jsx(Card, { className: cn("border-[var(--hive-border-default)]", className), children: _jsxs(CardContent, { className: "text-center py-12", children: [_jsx(CheckCircle, { className: "h-12 w-12 text-green-400 mx-auto mb-4" }), _jsx(Text, { variant: "h3", weight: "semibold", className: "mb-2", children: "All Clear!" }), _jsx(Text, { variant: "body-sm", color: "secondary", children: "No items pending moderation at this time." })] }) }));
    }
    return (_jsxs(Card, { className: cn("border-[var(--hive-border-default)]", className), children: [_jsx(CardHeader, { children: _jsxs(CardTitle, { className: "flex items-center gap-2", children: [_jsx(Flag, { className: "h-5 w-5" }), "Moderation Queue", _jsxs(Badge, { variant: "warning", className: "ml-auto", children: [items.filter(item => item.status === 'pending').length, " pending"] })] }) }), _jsx(CardContent, { className: "space-y-4", children: items.map((item) => {
                    const TypeIcon = getTypeIcon(item.type);
                    return (_jsx(Card, { className: "border-[var(--hive-border-default)]", children: _jsxs(CardContent, { className: "p-4", children: [_jsxs("div", { className: "flex items-start justify-between mb-3", children: [_jsxs("div", { className: "flex items-start gap-3", children: [_jsx("div", { className: "p-2 rounded-lg bg-[var(--hive-background-primary)]", children: _jsx(TypeIcon, { className: "h-4 w-4 text-[var(--hive-text-secondary)]" }) }), _jsxs("div", { className: "flex-1", children: [_jsxs("div", { className: "flex items-center gap-2 mb-1", children: [_jsx(Text, { variant: "body-sm", weight: "medium", children: item.title }), _jsx(Badge, { variant: "secondary", className: "text-xs capitalize", children: item.type }), _jsx(Badge, { className: cn("text-xs capitalize", getSeverityColor(item.severity)), children: item.severity })] }), _jsx(Text, { variant: "body-xs", color: "secondary", className: "mb-2", children: item.description }), _jsxs("div", { className: "flex items-center gap-4 text-xs text-[var(--hive-text-secondary)]", children: [_jsxs("span", { children: ["By ", item.author.name, " (@", item.author.handle, ")"] }), _jsx("span", { children: formatTimeAgo(item.createdAt) }), item.reportedBy && (_jsxs("span", { children: ["Reported by ", item.reportedBy.name] }))] })] })] }), _jsxs("div", { className: "flex items-center gap-2", children: [_jsx(Button, { variant: "ghost", size: "sm", onClick: () => onView?.(item.id), children: _jsx(Eye, { className: "h-4 w-4" }) }), item.status === 'pending' && (_jsxs(_Fragment, { children: [_jsxs(Button, { variant: "secondary", size: "sm", onClick: () => onApprove?.(item.id), children: [_jsx(CheckCircle, { className: "h-4 w-4 mr-1" }), "Approve"] }), _jsx(Button, { variant: "ghost", size: "sm", onClick: () => onReject?.(item.id), children: "Reject" }), item.severity === 'critical' && (_jsxs(Button, { variant: "warning", size: "sm", onClick: () => onEscalate?.(item.id), children: [_jsx(AlertTriangle, { className: "h-4 w-4 mr-1" }), "Escalate"] }))] }))] })] }), Object.keys(item.campusContext).length > 0 && (_jsxs("div", { className: "flex items-center gap-2 mt-2 p-2 rounded-lg bg-[var(--hive-background-primary)]", children: [_jsx(Building2, { className: "h-3 w-3 text-[var(--hive-text-secondary)]" }), _jsx(Text, { variant: "body-xs", color: "secondary", children: "Campus Context:" }), Object.entries(item.campusContext).map(([key, value]) => (value && (_jsxs(Badge, { variant: "ghost", className: "text-xs", children: [key, ": ", value] }, key))))] })), _jsxs("div", { className: "mt-3 p-2 rounded-lg bg-[var(--hive-background-primary)]", children: [_jsx(Text, { variant: "body-xs", weight: "medium", className: "mb-1", children: "Reason:" }), _jsx(Text, { variant: "body-xs", color: "secondary", children: item.reason })] })] }) }, item.id));
                }) })] }));
}
export function UBAdminQuickActions({ onSendCampusNotification, onExportUserData, onGenerateReport, onSystemMaintenance, onBackupData, className }) {
    return (_jsxs(Card, { className: cn("border-[var(--hive-border-default)]", className), children: [_jsx(CardHeader, { children: _jsxs(CardTitle, { className: "flex items-center gap-2", children: [_jsx(Settings, { className: "h-5 w-5" }), "Quick Actions"] }) }), _jsx(CardContent, { className: "space-y-4", children: _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [_jsxs(Button, { variant: "primary", className: "w-full justify-start", onClick: onSendCampusNotification, children: [_jsx(Bell, { className: "h-4 w-4 mr-2" }), "Send Campus Notification"] }), _jsxs(Button, { variant: "secondary", className: "w-full justify-start", onClick: onExportUserData, children: [_jsx(Database, { className: "h-4 w-4 mr-2" }), "Export User Data"] }), _jsxs(Button, { variant: "secondary", className: "w-full justify-start", onClick: () => onGenerateReport?.('weekly'), children: [_jsx(FileText, { className: "h-4 w-4 mr-2" }), "Generate Weekly Report"] }), _jsxs(Button, { variant: "secondary", className: "w-full justify-start", onClick: () => onGenerateReport?.('security'), children: [_jsx(Lock, { className: "h-4 w-4 mr-2" }), "Security Report"] }), _jsxs(Button, { variant: "ghost", className: "w-full justify-start", onClick: onSystemMaintenance, children: [_jsx(Settings, { className: "h-4 w-4 mr-2" }), "System Maintenance"] }), _jsxs(Button, { variant: "ghost", className: "w-full justify-start", onClick: onBackupData, children: [_jsx(HardDrive, { className: "h-4 w-4 mr-2" }), "Backup Database"] })] }) })] }));
}
//# sourceMappingURL=ub-admin-dashboard.js.map