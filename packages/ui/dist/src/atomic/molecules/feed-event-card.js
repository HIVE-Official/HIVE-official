"use client";
import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import * as React from "react";
import { cn } from "../../lib/utils";
import { Card } from "../atoms/card";
import { Button } from "../atoms/button";
import { Badge } from "../atoms/badge";
import { Avatar } from "../atoms/avatar";
import { Calendar, MapPin, Users, Share2, Bookmark, ChevronRight, } from "lucide-react";
const FeedEventCard = React.forwardRef(({ className, event, onRsvp, onShare, onSave, onViewDetails, onSpaceClick, compact = false, ...props }, ref) => {
    // Monochrome urgency system: Gold for urgent, black borders with varying thickness
    const urgencyBorderClass = event.dateTime.isUrgent
        ? "border-l-4 border-l-[#FFD700]"
        : event.dateTime.isToday
            ? "border-l-[3px] border-l-black"
            : event.dateTime.isSoon
                ? "border-l-2 border-l-gray-400"
                : "border-l-2 border-l-gray-200";
    const urgencyText = event.dateTime.isUrgent
        ? `Starting in ${Math.floor((event.dateTime.raw.getTime() - Date.now()) / 60000)}min`
        : event.dateTime.isToday
            ? "Tonight"
            : event.dateTime.isSoon
                ? "Tomorrow"
                : null;
    return (_jsxs(Card, { ref: ref, className: cn("overflow-hidden transition-all border-2", urgencyBorderClass, event.dateTime.isUrgent
            ? "border-black hover:border-black"
            : "border-gray-200 hover:border-black", 
        // No shadows - borders only
        className), ...props, children: [event.coverImage && !compact && (_jsxs("div", { className: "relative aspect-[21/9] bg-muted border-b-2 border-black", children: [_jsx("img", { src: event.coverImage, alt: event.title, className: "w-full h-full object-cover" }), urgencyText && (_jsx("div", { className: cn("absolute top-2 right-2 px-2 py-1 rounded-md text-xs font-bold", event.dateTime.isUrgent
                            ? "bg-[#FFD700] text-black"
                            : event.dateTime.isToday
                                ? "bg-black text-white"
                                : "bg-gray-800 text-white"), children: urgencyText }))] })), _jsxs("div", { className: "p-4", children: [_jsxs("div", { className: "flex items-start justify-between mb-3", children: [_jsxs("div", { className: "flex-1", children: [_jsxs("button", { onClick: () => onSpaceClick?.(event.space.id), className: "flex items-center gap-2 mb-1 group", children: [event.space.icon && _jsx("span", { className: "text-sm", children: event.space.icon }), _jsx("span", { className: "text-xs font-semibold text-muted-foreground group-hover:text-foreground transition-colors", children: event.space.name })] }), _jsx("h3", { className: "text-base font-bold text-foreground mb-1 line-clamp-2", children: event.title }), !compact && (_jsx("p", { className: "text-sm text-muted-foreground line-clamp-2 mb-3", children: event.description }))] }), event.category && (_jsx(Badge, { variant: "outline", className: "ml-2 shrink-0 border-black text-xs uppercase tracking-wide", children: event.category }))] }), _jsxs("div", { className: "space-y-2 mb-4", children: [_jsxs("div", { className: "flex items-center gap-2 text-sm", children: [_jsx(Calendar, { className: cn("h-4 w-4 shrink-0", event.dateTime.isUrgent ? "text-[#FFD700]" : "text-muted-foreground") }), _jsx("span", { className: cn("font-semibold", event.dateTime.isUrgent && "text-foreground"), children: event.dateTime.display }), urgencyText && !event.coverImage && (_jsx(Badge, { className: cn("h-5 text-[9px] ml-auto font-bold", event.dateTime.isUrgent
                                            ? "bg-[#FFD700] text-black border-none"
                                            : event.dateTime.isToday
                                                ? "bg-black text-white border-none"
                                                : "bg-gray-800 text-white border-none"), children: urgencyText }))] }), _jsxs("div", { className: "flex items-center gap-2 text-sm text-muted-foreground", children: [_jsx(MapPin, { className: "h-4 w-4 shrink-0" }), _jsx("span", { className: "truncate font-medium", children: event.location.name }), event.location.type === "virtual" && (_jsx(Badge, { variant: "outline", className: "h-5 text-[9px] border-black", children: "Virtual" }))] }), event.capacity && (_jsxs("div", { className: "flex items-center gap-2 text-sm text-muted-foreground", children: [_jsx(Users, { className: "h-4 w-4 shrink-0" }), _jsxs("span", { className: "font-medium", children: [event.capacity.current, "/", event.capacity.max, " spots"] }), event.capacity.isFillingFast && (_jsx(Badge, { className: "h-5 text-[9px] bg-black text-white border-none font-bold", children: "Filling fast!" }))] }))] }), (event.campusContext?.friendsGoing && event.campusContext.friendsGoing.length > 0) || event.attendees.count > 0 ? (_jsxs("div", { className: "mb-4 space-y-2", children: [event.campusContext?.friendsGoing && event.campusContext.friendsGoing.length > 0 && (_jsxs("div", { className: "flex items-start gap-2 p-2 bg-primary/5 border border-primary/20 rounded-md", children: [_jsx("div", { className: "flex -space-x-2 shrink-0 mt-0.5", children: event.campusContext.friendsGoing.slice(0, 3).map((friend, idx) => (_jsx(Avatar, { className: "h-6 w-6 border-2 border-background", children: friend.avatar ? (_jsx("img", { src: friend.avatar, alt: friend.name })) : (_jsx("div", { className: "bg-primary text-primary-foreground flex items-center justify-center text-[10px] font-bold", children: friend.name.charAt(0) })) }, friend.id))) }), _jsxs("div", { className: "flex-1 min-w-0", children: [_jsxs("div", { className: "text-xs", children: [_jsx("span", { className: "font-semibold text-foreground", children: event.campusContext.friendsGoing.length === 1
                                                            ? event.campusContext.friendsGoing[0].name
                                                            : event.campusContext.friendsGoing.length === 2
                                                                ? `${event.campusContext.friendsGoing[0].name} and ${event.campusContext.friendsGoing[1].name}`
                                                                : `${event.campusContext.friendsGoing[0].name}, ${event.campusContext.friendsGoing[1].name} +${event.campusContext.friendsGoing.length - 2}` }), _jsxs("span", { className: "text-muted-foreground", children: [" ", event.campusContext.friendsGoing.length === 1 ? "is" : "are", " going"] })] }), event.campusContext.friendsGoing[0].major && (_jsxs("div", { className: "text-[10px] text-muted-foreground mt-0.5", children: [event.campusContext.friendsGoing[0].major, event.campusContext.friendsGoing[0].year && ` '${event.campusContext.friendsGoing[0].year}`] }))] })] })), event.campusContext?.attendeeCohorts && (_jsxs("div", { className: "flex flex-wrap gap-2 text-[10px] text-muted-foreground", children: [event.campusContext.attendeeCohorts.majorGroups?.slice(0, 2).map((group) => (_jsxs(Badge, { variant: "outline", className: "h-5 text-[9px] font-medium", children: [group.count, " ", group.major] }, group.major))), event.campusContext.attendeeCohorts.residentialGroups?.slice(0, 2).map((group) => (_jsxs(Badge, { variant: "outline", className: "h-5 text-[9px] font-medium", children: [group.count, " from ", group.building] }, group.building)))] })), event.attendees.count > 0 && (_jsxs("div", { className: "flex items-center gap-2 text-xs text-muted-foreground", children: [_jsx(Users, { className: "h-3.5 w-3.5" }), _jsxs("span", { className: "font-medium", children: [event.attendees.count, " ", event.attendees.count === 1 ? "person" : "people", " going"] }), event.campusContext?.recentRsvps && event.campusContext.recentRsvps > 0 && (_jsxs("span", { className: "text-[10px]", children: ["(", event.campusContext.recentRsvps, " in last hour)"] }))] })), event.campusContext?.similarEventAttendance && event.campusContext.similarEventAttendance > 0 && (_jsxs("div", { className: "text-[10px] text-muted-foreground italic", children: ["You've been to ", event.campusContext.similarEventAttendance, " similar", " ", event.campusContext.similarEventAttendance === 1 ? "event" : "events"] }))] })) : null, event.campusContext?.isTrending && (_jsxs("div", { className: "flex items-center gap-1.5 text-xs mb-3 p-2 border-2 border-[#FFD700] bg-[#FFD700]/5 rounded-md", children: [_jsx("span", { className: "text-base", "aria-hidden": "true", children: "\uD83D\uDD25" }), _jsx("span", { className: "font-semibold text-foreground", children: event.campusContext.trendingCategory
                                    ? `Trending with ${event.campusContext.trendingCategory}`
                                    : "Trending on campus" })] })), _jsxs("div", { className: "flex items-center gap-2", children: [event.rsvp.canRsvp && (_jsxs(_Fragment, { children: [_jsx(Button, { variant: event.rsvp.status === "going" ? "default" : "outline", size: "sm", className: cn("flex-1 h-9 font-semibold", event.rsvp.status === "going"
                                            ? "bg-black text-white border-2 border-black hover:bg-gray-900"
                                            : "border-2 border-black text-black hover:bg-black hover:text-white"), onClick: () => onRsvp?.(event.id, "going"), children: event.rsvp.status === "going" ? "Going ✓" : "I'm Going" }), _jsx(Button, { variant: event.rsvp.status === "interested" ? "default" : "outline", size: "sm", className: cn("flex-1 h-9 font-semibold", event.rsvp.status === "interested"
                                            ? "bg-gray-800 text-white border-2 border-gray-800 hover:bg-gray-900"
                                            : "border-2 border-gray-300 text-foreground hover:bg-gray-800 hover:text-white hover:border-gray-800"), onClick: () => onRsvp?.(event.id, "interested"), children: event.rsvp.status === "interested" ? "Interested ✓" : "Interested" })] })), _jsx(Button, { variant: "ghost", size: "sm", className: "h-9 w-9 p-0 hover:bg-gray-100", onClick: () => onShare?.(event.id), children: _jsx(Share2, { className: "h-4 w-4" }) }), _jsx(Button, { variant: "ghost", size: "sm", className: "h-9 w-9 p-0 hover:bg-gray-100", onClick: () => onSave?.(event.id), children: _jsx(Bookmark, { className: "h-4 w-4" }) })] }), onViewDetails && (_jsxs(Button, { variant: "ghost", size: "sm", className: "w-full mt-2 h-8 text-xs font-semibold hover:bg-gray-100", onClick: () => onViewDetails(event.id), children: ["View Full Details", _jsx(ChevronRight, { className: "h-3 w-3 ml-1" })] }))] })] }));
});
FeedEventCard.displayName = "FeedEventCard";
export { FeedEventCard };
//# sourceMappingURL=feed-event-card.js.map