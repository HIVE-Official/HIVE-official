"use client";
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { HiveCard as Card } from '../hive-card.js';
import { HiveButton as Button } from '../hive-button.js';
import { HiveBadge as Badge } from '../hive-badge.js';
import { HiveInput as Input } from '../hive-input.js';
import { Grid } from '../Grid.js';
import { Search, Filter, Star, Download, TrendingUp, Zap, Users, Clock, Sparkles, Target, RefreshCw, ChevronRight, Brain, Shuffle } from 'lucide-react';
import { cn } from '../../lib/utils.js';
const RecommendationCard = ({ tool, showReason = true, onSelect }) => {
    return (_jsx(Card, { className: "p-4 bg-[color-mix(in_srgb,var(--hive-interactive-hover)_40%,transparent)] border-[color-mix(in_srgb,var(--hive-interactive-active)_60%,transparent)] hover:bg-[color-mix(in_srgb,var(--hive-interactive-hover)_80%,transparent)] transition-all group cursor-pointer", onClick: onSelect, children: _jsxs("div", { className: "flex items-start gap-3", children: [_jsx("div", { className: "w-12 h-12 bg-[var(--hive-interactive-hover)] border border-[var(--hive-interactive-active)] rounded-xl flex items-center justify-center group-hover:bg-[var(--hive-brand-secondary)]/20 group-hover:border-[var(--hive-brand-secondary)]/30 transition-all", children: _jsx(Zap, { className: "h-6 w-6 text-[var(--hive-brand-secondary)]" }) }), _jsxs("div", { className: "flex-1 min-w-0", children: [_jsxs("div", { className: "flex items-center gap-2 mb-1", children: [_jsx("h3", { className: "font-semibold text-[var(--hive-text-primary)] group-hover:text-[var(--hive-brand-secondary)] transition-colors truncate", children: tool.name }), tool.isVerified && (_jsx(Badge, { className: "bg-blue-500/20 text-blue-400 border-blue-500/30 text-xs", children: "Verified" })), tool.pricing.type === 'free' && (_jsx(Badge, { className: "bg-green-500/20 text-green-400 border-green-500/30 text-xs", children: "Free" }))] }), _jsx("p", { className: "text-sm text-[var(--hive-text-tertiary)] mb-2 line-clamp-2", children: tool.description }), showReason && (_jsxs("div", { className: "flex items-center gap-1 mb-2", children: [_jsx(Brain, { className: "h-3 w-3 text-[var(--hive-brand-secondary)]" }), _jsx("span", { className: "text-xs text-[var(--hive-brand-secondary)]", children: tool.recommendationReason })] })), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { className: "flex items-center gap-3 text-xs text-[var(--hive-text-tertiary)]", children: [_jsxs("div", { className: "flex items-center gap-1", children: [_jsx(Star, { className: "h-3 w-3 fill-[var(--hive-brand-secondary)] text-[var(--hive-brand-secondary)]" }), _jsx("span", { children: tool.rating.toFixed(1) })] }), _jsxs("div", { className: "flex items-center gap-1", children: [_jsx(Download, { className: "h-3 w-3" }), _jsx("span", { children: tool.downloads.toLocaleString() })] })] }), _jsx(Badge, { variant: "outline", className: "border-[var(--hive-border-hover)] text-[var(--hive-text-tertiary)] text-xs", children: tool.category })] })] })] }) }));
};
const TrendingToolCard = ({ tool, rank, onSelect }) => {
    return (_jsx(Card, { className: "p-4 bg-[color-mix(in_srgb,var(--hive-interactive-hover)_40%,transparent)] border-[color-mix(in_srgb,var(--hive-interactive-active)_60%,transparent)] hover:bg-[color-mix(in_srgb,var(--hive-interactive-hover)_80%,transparent)] transition-all cursor-pointer", onClick: onSelect, children: _jsxs("div", { className: "flex items-center gap-3", children: [_jsx("div", { className: "w-8 h-8 bg-[var(--hive-brand-secondary)]/20 rounded-lg flex items-center justify-center", children: _jsx("span", { className: "text-[var(--hive-brand-secondary)] font-bold text-sm", children: rank }) }), _jsxs("div", { className: "flex-1 min-w-0", children: [_jsxs("div", { className: "flex items-center gap-2 mb-1", children: [_jsx("h4", { className: "font-medium text-[var(--hive-text-primary)] truncate", children: tool.name }), _jsx(TrendingUp, { className: "h-3 w-3 text-green-400" })] }), _jsxs("div", { className: "flex items-center gap-3 text-xs text-[var(--hive-text-tertiary)]", children: [_jsxs("div", { className: "flex items-center gap-1", children: [_jsx(Star, { className: "h-3 w-3 fill-[var(--hive-brand-secondary)] text-[var(--hive-brand-secondary)]" }), _jsx("span", { children: tool.rating.toFixed(1) })] }), _jsxs("span", { children: [tool.downloads.toLocaleString(), " downloads"] })] })] })] }) }));
};
const CategorySection = ({ category, onToolSelect, onViewAll }) => {
    return (_jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsx("h3", { className: "text-lg font-semibold text-[var(--hive-text-primary)]", children: category.title }), _jsxs(Button, { variant: "ghost", size: "sm", onClick: () => onViewAll?.(category.category), className: "text-[var(--hive-text-tertiary)] hover:text-[var(--hive-brand-secondary)]", children: ["View All", _jsx(ChevronRight, { className: "h-4 w-4 ml-1" })] })] }), _jsx(Grid, { cols: { base: 1, md: 2, lg: 3 }, gap: 4, children: category.tools.slice(0, 6).map(tool => (_jsx(RecommendationCard, { tool: tool, onSelect: () => onToolSelect?.(tool) }, tool.toolId))) })] }));
};
const SmartFilters = ({ userPreferences, onFilterChange }) => {
    const [activeFilters, setActiveFilters] = useState([]);
    const suggestedFilters = [
        { id: 'trending', label: 'Trending', icon: TrendingUp },
        { id: 'free', label: 'Free Tools', icon: Zap },
        { id: 'verified', label: 'Verified', icon: Star },
        { id: 'high-rated', label: 'Highly Rated', icon: Star },
        { id: 'quick-setup', label: 'Quick Setup', icon: Clock },
        { id: 'collaborative', label: 'Team Tools', icon: Users }
    ];
    const toggleFilter = (filterId) => {
        const newFilters = activeFilters.includes(filterId)
            ? activeFilters.filter(f => f !== filterId)
            : [...activeFilters, filterId];
        setActiveFilters(newFilters);
        onFilterChange?.(newFilters);
    };
    return (_jsxs(Card, { className: "p-4 bg-[color-mix(in_srgb,var(--hive-interactive-hover)_40%,transparent)] border-[color-mix(in_srgb,var(--hive-interactive-active)_60%,transparent)]", children: [_jsxs("div", { className: "flex items-center gap-2 mb-3", children: [_jsx(Sparkles, { className: "h-4 w-4 text-[var(--hive-brand-secondary)]" }), _jsx("span", { className: "text-sm font-medium text-[var(--hive-text-primary)]", children: "Smart Filters" })] }), _jsx("div", { className: "flex flex-wrap gap-2", children: suggestedFilters.map(filter => {
                    const Icon = filter.icon;
                    const isActive = activeFilters.includes(filter.id);
                    return (_jsxs(Button, { size: "sm", variant: "outline", onClick: () => toggleFilter(filter.id), className: cn("border-[var(--hive-border-hover)] transition-all", isActive
                            ? "bg-[var(--hive-brand-secondary)]/20 border-[var(--hive-brand-secondary)]/30 text-[var(--hive-brand-secondary)]"
                            : "text-[var(--hive-text-tertiary)] hover:text-[var(--hive-text-primary)] hover:border-[var(--hive-brand-secondary)]/30"), children: [_jsx(Icon, { className: "h-3 w-3 mr-1" }), filter.label] }, filter.id));
                }) })] }));
};
const InsightsBanner = ({ metadata }) => {
    return (_jsx(Card, { className: "p-4 bg-gradient-to-r from-[color-mix(in_srgb,var(--hive-brand-secondary)_5%,transparent)] to-[color-mix(in_srgb,var(--hive-brand-secondary)_2%,transparent)] border-[color-mix(in_srgb,var(--hive-brand-secondary)_10%,transparent)]", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { className: "flex items-center gap-3", children: [_jsx("div", { className: "w-10 h-10 bg-[var(--hive-brand-secondary)]/20 rounded-lg flex items-center justify-center", children: _jsx(Brain, { className: "h-5 w-5 text-[var(--hive-brand-secondary)]" }) }), _jsxs("div", { children: [_jsx("h3", { className: "font-semibold text-[var(--hive-text-primary)]", children: "Personalized for You" }), _jsxs("p", { className: "text-sm text-[var(--hive-text-tertiary)]", children: [metadata.totalRecommendations, " recommendations using ", metadata.algorithmsUsed.length, " AI algorithms"] })] })] }), _jsxs("div", { className: "flex items-center gap-2 text-xs text-[var(--hive-text-tertiary)]", children: [_jsx(Clock, { className: "h-3 w-3" }), _jsxs("span", { children: ["Updated ", new Date(metadata.lastUpdated).toLocaleTimeString()] })] })] }) }));
};
export const ToolDiscoveryEngine = ({ discoveryData, onToolSelect, onRefreshRecommendations, userPreferences, className }) => {
    const [searchQuery, setSearchQuery] = useState("");
    const [activeTab, setActiveTab] = useState('personalized');
    const [isRefreshing, setIsRefreshing] = useState(false);
    const handleRefresh = async () => {
        setIsRefreshing(true);
        await onRefreshRecommendations?.();
        setTimeout(() => setIsRefreshing(false), 1000);
    };
    if (!discoveryData) {
        return (_jsx("div", { className: cn("flex items-center justify-center h-64", className), children: _jsxs("div", { className: "text-center", children: [_jsx(Brain, { className: "h-12 w-12 text-[var(--hive-text-tertiary)] mx-auto mb-4 animate-pulse" }), _jsx("p", { className: "text-[var(--hive-text-primary)] text-lg font-medium", children: "Discovering Tools..." }), _jsx("p", { className: "text-[var(--hive-text-tertiary)]", children: "Analyzing your preferences" })] }) }));
    }
    return (_jsxs("div", { className: cn("space-y-8", className), children: [_jsxs("div", { className: "flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4", children: [_jsxs("div", { children: [_jsxs("h1", { className: "text-3xl font-bold text-[var(--hive-text-primary)] mb-2", children: ["Discover ", _jsx("span", { className: "text-[var(--hive-brand-secondary)]", children: "Tools" })] }), _jsx("p", { className: "text-[var(--hive-text-tertiary)]", children: "AI-powered recommendations tailored to your needs" })] }), _jsxs("div", { className: "flex items-center gap-3", children: [_jsxs(Button, { onClick: handleRefresh, variant: "outline", size: "sm", disabled: isRefreshing, className: "border-[var(--hive-border-hover)] text-[var(--hive-text-tertiary)]", children: [_jsx(RefreshCw, { className: cn("h-4 w-4 mr-2", isRefreshing && "animate-spin") }), isRefreshing ? 'Updating...' : 'Refresh'] }), _jsxs(Button, { variant: "ghost", size: "sm", className: "text-[var(--hive-text-tertiary)] hover:text-[var(--hive-brand-secondary)]", children: [_jsx(Shuffle, { className: "h-4 w-4 mr-2" }), "Surprise Me"] })] })] }), _jsx(InsightsBanner, { metadata: discoveryData.metadata }), _jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "relative max-w-2xl", children: [_jsx(Search, { className: "absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-[var(--hive-text-tertiary)]" }), _jsx(Input, { value: searchQuery, onChange: (e) => setSearchQuery(e.target.value), placeholder: "Search for specific tools or features...", className: "pl-12 h-12 bg-[var(--hive-interactive-hover)] border-[var(--hive-interactive-active)] text-[var(--hive-text-primary)]" })] }), _jsx(SmartFilters, { userPreferences: userPreferences })] }), _jsx("div", { className: "flex items-center gap-4 border-b border-[var(--hive-interactive-active)]", children: [
                    { id: 'personalized', label: 'For You', icon: Target, count: discoveryData.personalized.length },
                    { id: 'trending', label: 'Trending', icon: TrendingUp, count: discoveryData.trending.length },
                    { id: 'categories', label: 'Categories', icon: Filter, count: discoveryData.categories.length }
                ].map(tab => {
                    const Icon = tab.icon;
                    const isActive = activeTab === tab.id;
                    return (_jsxs("button", { onClick: () => setActiveTab(tab.id), className: cn("flex items-center gap-2 px-4 py-3 border-b-2 transition-all", isActive
                            ? "border-[var(--hive-brand-secondary)] text-[var(--hive-brand-secondary)]"
                            : "border-transparent text-[var(--hive-text-tertiary)] hover:text-[var(--hive-text-primary)]"), children: [_jsx(Icon, { className: "h-4 w-4" }), _jsx("span", { className: "font-medium", children: tab.label }), _jsx(Badge, { variant: "outline", className: "border-[var(--hive-border-hover)] text-xs", children: tab.count })] }, tab.id));
                }) }), activeTab === 'personalized' && (_jsx("div", { className: "space-y-6", children: _jsxs("div", { children: [_jsx("h2", { className: "text-xl font-semibold text-[var(--hive-text-primary)] mb-4", children: "Recommended for You" }), _jsx(Grid, { cols: { base: 1, md: 2, lg: 3 }, gap: 6, children: discoveryData.personalized.map(tool => (_jsx(RecommendationCard, { tool: tool, onSelect: () => onToolSelect?.(tool) }, tool.toolId))) })] }) })), activeTab === 'trending' && (_jsx("div", { className: "space-y-6", children: _jsxs("div", { children: [_jsx("h2", { className: "text-xl font-semibold text-[var(--hive-text-primary)] mb-4", children: "Trending This Week" }), _jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: discoveryData.trending.map((tool, index) => (_jsx(TrendingToolCard, { tool: tool, rank: index + 1, onSelect: () => onToolSelect?.(tool) }, tool.toolId))) })] }) })), activeTab === 'categories' && (_jsx("div", { className: "space-y-8", children: discoveryData.categories.map(category => (_jsx(CategorySection, { category: category, onToolSelect: onToolSelect }, category.category))) })), activeTab === 'personalized' && discoveryData.personalized.length === 0 && (_jsxs(Card, { className: "p-12 text-center border-[color-mix(in_srgb,var(--hive-interactive-active)_60%,transparent)] bg-[color-mix(in_srgb,var(--hive-interactive-hover)_40%,transparent)]", children: [_jsx(Brain, { className: "h-12 w-12 text-[var(--hive-text-tertiary)] mx-auto mb-4" }), _jsx("h3", { className: "text-lg font-semibold text-[var(--hive-text-primary)] mb-2", children: "Building Your Profile" }), _jsx("p", { className: "text-[var(--hive-text-tertiary)] mb-4 max-w-md mx-auto", children: "Use more tools and join spaces to get better personalized recommendations" }), _jsxs(Button, { onClick: () => setActiveTab('trending'), className: "bg-[var(--hive-brand-secondary)] text-[var(--hive-background-primary)] hover:bg-[var(--hive-brand-secondary)]", children: [_jsx(TrendingUp, { className: "h-4 w-4 mr-2" }), "Explore Trending Tools"] })] }))] }));
};
export default ToolDiscoveryEngine;
//# sourceMappingURL=tool-discovery-engine.js.map