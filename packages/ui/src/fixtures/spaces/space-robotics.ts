// Bounded Context Owner: Spaces Domain Guild
// Storybook fixtures derived from Spaces adapter shapes
import type { Space, StandardPost, EventPost, AnnouncementPost, CalendarEvent, SpaceMember } from "@/organisms/spaces/types";
import { addMinutes, subMinutes } from "date-fns";

const now = new Date();

export const spaceRobotics: Space = {
  id: "space-robotics",
  campusId: "ub-buffalo",
  name: "Robotics Guild",
  description: "Build autonomous bots, prep for competitions, and share hardware knowledge.",
  type: "student_org",
  source: "manual",
  isVerified: true,
  visibility: "members_only",
  joinPolicy: "open",
  postingPolicy: "members",
  allowPublicPosts: false,
  tags: ["engineering", "hardware", "ai"],
  featuredLinks: [
    { label: "Resources doc", url: "https://ub.edu/robotics/resources" },
    { label: "Parts request form", url: "https://forms.gle/parts-request" },
  ],
  memberCount: 64,
  activeMembers7d: 38,
  createdAt: subMinutes(now, 7200),
  updatedAt: now,
};

export const roboticsPosts: (StandardPost | EventPost | AnnouncementPost)[] = [
  {
    id: "post-announcement-1",
    spaceId: "space-robotics",
    type: "announcement",
    visibility: "members_only",
    authorId: "profile-jwrhineh",
    authorName: "Jacob Rhinehart",
    authorHandle: "jacob",
    authorRole: "leader",
    authorAvatar: "https://i.pravatar.cc/80?img=45",
    isPinned: true,
    pinnedUntil: addMinutes(now, 720),
    isHidden: false,
    reportCount: 0,
    commentCount: 4,
    reactionCount: 25,
    createdAt: subMinutes(now, 10),
    updatedAt: subMinutes(now, 4),
    lastActivityAt: subMinutes(now, 1),
    title: "Competition transport schedule",
    content: "Bus pulls out Friday 5:30pm sharp. Pack toolboxes tonight—see checklist in Resources.",
    priority: "high",
    requiresAcknowledgment: true,
    acknowledgmentCount: 32,
    attachments: [],
  },
  {
    id: "post-event-1",
    spaceId: "space-robotics",
    type: "event",
    visibility: "public",
    authorId: "profile-luca",
    authorName: "Luca Patel",
    authorHandle: "luca",
    authorRole: "leader",
    authorAvatar: "https://i.pravatar.cc/80?img=12",
    isPinned: true,
    pinnedUntil: addMinutes(now, 300),
    isHidden: false,
    reportCount: 0,
    commentCount: 9,
    reactionCount: 42,
    createdAt: subMinutes(now, 90),
    updatedAt: subMinutes(now, 60),
    lastActivityAt: subMinutes(now, 2),
    title: "Drive System Lab Night",
    description: "Bring last week's CAD changes—we're doing hands-on alignment and encoder calibration.",
    location: "Innovation Hub 2F Lab",
    startTime: addMinutes(now, 180),
    endTime: addMinutes(now, 300),
    coverImageUrl: "https://images.unsplash.com/photo-1518779578993-ec3579fee39f?q=80&w=1600&auto=format&fit=crop",
    coverImageAlt: "Robotics workshop bench",
    maxAttendees: 25,
    enableWaitlist: true,
    checkInEnabled: true,
    checkInWindowBefore: 15,
    checkInWindowAfter: 30,
    qrCodeEnabled: true,
    coHostIds: ["profile-nia"],
    state: "upcoming",
    goingCount: 18,
    maybeCount: 6,
    waitlistCount: 2,
    checkedInCount: 0,
    attachments: [],
  },
  {
    id: "post-standard-1",
    spaceId: "space-robotics",
    type: "standard",
    visibility: "members_only",
    authorId: "profile-jwrhineh",
    authorName: "Jacob Rhinehart",
    authorHandle: "jacob",
    authorRole: "leader",
    authorAvatar: "https://i.pravatar.cc/80?img=44",
    isPinned: false,
    isHidden: false,
    reportCount: 0,
    commentCount: 6,
    reactionCount: 18,
    createdAt: subMinutes(now, 45),
    updatedAt: subMinutes(now, 30),
    lastActivityAt: subMinutes(now, 5),
    content: "Sensor kits staged—pick yours up before 6pm. Drop blockers here so mentors can help tonight.",
    mediaUrls: ["https://images.unsplash.com/photo-1518770660439-4636190af475?w=800"],
    attachments: [],
  },
];

export const roboticsUpcomingEvents: CalendarEvent[] = [
  {
    id: "calendar-event-1",
    spaceId: "space-robotics",
    title: "Drive System Lab Night",
    description: "Hands-on alignment and encoder calibration.",
    location: "Innovation Hub 2F Lab",
    startTime: addMinutes(now, 180),
    endTime: addMinutes(now, 300),
    coverImageUrl: "https://images.unsplash.com/photo-1555617983-7b0f991b0e1b?q=80&w=1600&auto=format&fit=crop",
    coverImageAlt: "Gears and tools on table",
    enableWaitlist: true,
    goingCount: 18,
    maybeCount: 6,
    waitlistCount: 2,
    checkInEnabled: true,
    checkedInCount: 0,
    coHostIds: ["profile-nia"],
    coHostNames: ["Nia Brooks"],
    isRssImported: false,
    createdAt: now,
    updatedAt: now,
  },
];

export const roboticsOnlineMembers: SpaceMember[] = [
  { userId: "profile-jwrhineh", spaceId: "space-robotics", role: "leader", joinedAt: subMinutes(now, 60), lastActiveAt: subMinutes(now, 1), fullName: "Jacob Rhinehart", handle: "jacob", avatarUrl: undefined },
  { userId: "profile-luca", spaceId: "space-robotics", role: "moderator", joinedAt: subMinutes(now, 120), lastActiveAt: subMinutes(now, 3), fullName: "Luca Patel", handle: "luca", avatarUrl: undefined },
];
